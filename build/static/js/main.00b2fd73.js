/*! For license information please see main.00b2fd73.js.LICENSE.txt */
(()=>{var e={43:(e,t,r)=>{"use strict";e.exports=r(202)},153:(e,t,r)=>{"use strict";var n=r(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,o={},u=null,c=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,n)&&!l.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:s.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||p}function v(){}function _(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=_.prototype=new v;b.constructor=_,g(b,y.prototype),b.isPureReactComponent=!0;var E=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,i)&&!T.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:r,type:e,key:a,ref:s,props:o,_owner:S.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var R=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return a=a(l=e),e=""===o?"."+N(l,0):o,E(a)?(i="",null!=e&&(i=e.replace(R,"$&/")+"/"),C(a,t,i,"",function(e){return e})):null!=a&&(I(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(R,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",E(e))for(var u=0;u<e.length;u++){var c=o+N(s=e[u],u);l+=C(s,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=C(s=s.value,t,i,c=o+N(s,u++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,r){if(null==e)return e;var n=[],i=0;return C(e,n,"","",function(e){return t.call(r,e,i++)}),n}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var x={current:null},D={transition:null},k={ReactCurrentDispatcher:x,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,r){O(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=_,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,t.act=M,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)w.call(t,u)&&!T.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:r,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return x.current.useCallback(e,t)},t.useContext=function(e){return x.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return x.current.useDeferredValue(e)},t.useEffect=function(e,t){return x.current.useEffect(e,t)},t.useId=function(){return x.current.useId()},t.useImperativeHandle=function(e,t,r){return x.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return x.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return x.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return x.current.useMemo(e,t)},t.useReducer=function(e,t,r){return x.current.useReducer(e,t,r)},t.useRef=function(e){return x.current.useRef(e)},t.useState=function(e){return x.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return x.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return x.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<o(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,a=i>>>1;n<a;){var s=2*(n+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,r))u<i&&0>o(c,l)?(e[n]=c,e[u]=r,n=u):(e[n]=l,e[s]=r,n=s);else{if(!(u<i&&0>o(c,r)))break e;e[n]=c,e[u]=r,n=u}}}return t}function o(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,d=null,h=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,r(u,t)}t=n(c)}}function E(e){if(m=!1,b(e),!g)if(null!==n(u))g=!0,D(w);else{var t=n(c);null!==t&&k(E,t.startTime-e)}}function w(e,r){g=!1,m&&(m=!1,v(I),I=-1),p=!0;var o=h;try{for(b(r),d=n(u);null!==d&&(!(d.expirationTime>r)||e&&!C());){var a=d.callback;if("function"===typeof a){d.callback=null,h=d.priorityLevel;var s=a(d.expirationTime<=r);r=t.unstable_now(),"function"===typeof s?d.callback=s:d===n(u)&&i(u),b(r)}else i(u);d=n(u)}if(null!==d)var l=!0;else{var f=n(c);null!==f&&k(E,f.startTime-r),l=!1}return l}finally{d=null,h=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,A=null,I=-1,R=5,N=-1;function C(){return!(t.unstable_now()-N<R)}function O(){if(null!==A){var e=t.unstable_now();N=e;var r=!0;try{r=A(!0,e)}finally{r?S():(T=!1,A=null)}}else T=!1}if("function"===typeof _)S=function(){_(O)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,x=P.port2;P.port1.onmessage=O,S=function(){x.postMessage(null)}}else S=function(){y(O,0)};function D(e){A=e,T||(T=!0,S())}function k(e,r){I=y(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,r(c,e),null===n(u)&&e===n(c)&&(m?(v(I),I=-1):m=!0,k(E,o-a))):(e.sortIndex=s,r(u,e),g||p||(g=!0,D(w))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}},261:e=>{self,e.exports=function(){var e={4593:function(e,t){var r,n,i,o,l,u=function(e){for(var t=[],r=0;r<e.length;++r){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?(t.push(192|n>>6),t.push(128|63&n)):n<65536?(t.push(224|n>>12),t.push(128|63&n>>6),t.push(128|63&n)):(t.push(240|n>>18),t.push(128|63&n>>12),t.push(128|63&n>>6),t.push(128|63&n))}return t},c=function(e){for(var t=[],r=0;r<e.length;){var n=e[r++];n<128||(n<224?(n=(31&n)<<6,n|=63&e[r++]):n<240?(n=(15&n)<<12,n|=(63&e[r++])<<6,n|=63&e[r++]):(n=(7&n)<<18,n|=(63&e[r++])<<12,n|=(63&e[r++])<<6,n|=63&e[r++])),t.push(String.fromCharCode(n))}return t.join("")},f={};r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(e){for(var t=0,n=[],i=0|e.length/3;0<i--;){var o=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(r.charAt(63&o>>18)),n.push(r.charAt(63&o>>12)),n.push(r.charAt(63&o>>6)),n.push(r.charAt(63&o))}return 2==e.length-t?(o=(e[t]<<16)+(e[t+1]<<8),n.push(r.charAt(63&o>>18)),n.push(r.charAt(63&o>>12)),n.push(r.charAt(63&o>>6)),n.push("=")):1==e.length-t&&(o=e[t]<<16,n.push(r.charAt(63&o>>18)),n.push(r.charAt(63&o>>12)),n.push("==")),n.join("")},i=function(){for(var e=[],t=0;t<r.length;++t)e[r.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),o=function(e){for(var t=0,r=[],n=0|e.length/4;0<n--;){var o=(i[e.charCodeAt(t)]<<18)+(i[e.charCodeAt(t+1)]<<12)+(i[e.charCodeAt(t+2)]<<6)+i[e.charCodeAt(t+3)];r.push(255&o>>16),r.push(255&o>>8),r.push(255&o),t+=4}return r&&("="==e.charAt(t-2)?(r.pop(),r.pop()):"="==e.charAt(t-1)&&r.pop()),r},l={encode:function(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},f.decodeArray=function(e){var t=o(e);return new Uint8Array(t)},f.encodeASCII=function(e){var t=l.encode(e);return n(t)},f.decodeASCII=function(e){var t=o(e);return l.decode(t)},f.encode=function(e){var t=u(e);return n(t)},f.decode=function(e){var t=o(e);return c(t)},t.decode=f.decode,t.decodeArray=f.decodeArray,t.encode=f.encode,t.encodeASCII=f.encodeASCII},452:function(e,t){!function(e){"use strict";var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},r=function(e){var r=e;return t.hasOwnProperty(e)&&(r=t[e]),String.fromCharCode(r)},n=15,i=32,o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},a={17:2,18:4,21:6,22:8,23:10,19:13,20:15},s={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},l={25:2,26:4,29:6,30:8,31:10,27:13,28:15},u=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],c={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var r=this.verboseFilter[e];this.verboseLevel>=r&&console.log(this.time+" ["+e+"] "+t)}},f=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},d=function(e,t,r,n,i){this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1};d.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var h=function(e,t,r,n,i,o){this.uchar=e||" ",this.penState=new d(t,r,n,i,o)};h.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var p=function(){this.chars=[];for(var e=0;e<i;e++)this.chars.push(new h);this.pos=0,this.currPenState=new d};p.prototype={equals:function(e){for(var t=!0,r=0;r<i;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},copy:function(e){for(var t=0;t<i;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<i;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(c.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>i&&(c.log("ERROR","Too large cursor position "+this.pos),this.pos=i)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=r(e);this.pos>=i?c.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<i;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,r=0;r<i;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var g=function(){this.rows=[];for(var e=0;e<n;e++)this.rows.push(new p);this.currRow=14,this.nrRollUpRows=null,this.reset()};g.prototype={reset:function(){for(var e=0;e<n;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,r=0;r<n;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},copy:function(e){for(var t=0;t<n;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<n;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){c.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){c.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var r=this.rows[this.currRow];if(null!==e.indent){var n=e.indent,i=Math.max(n-1,0);r.setCursor(e.indent),e.color=r.chars[i].penState.foreground}var o={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(o)},setBkgData:function(e){c.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){c.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),c.log("INFO","Rolling up")}else c.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],r="",i=-1,o=0;o<n;o++){var a=this.rows[o].getTextString();a&&(i=o+1,e?t.push("Row "+i+': "'+a+'"'):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},getTextAndFormat:function(){return this.rows}};var m=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new g,this.nonDisplayedMemory=new g,this.lastOutputScreen=new g,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};m.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,c.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";c.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(c.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){c.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){c.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){c.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){c.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){c.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){c.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){c.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){c.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){c.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){c.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){c.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(c.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,c.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){c.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}c.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=c.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var y=function(e,t,r){this.field=e||1,this.outputs=[t,r],this.channels=[new m(1,t),new m(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};y.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var r,n,i,o=!1;this.lastTime=e,c.setTime(e);for(var a=0;a<t.length;a+=2)n=127&t[a],i=127&t[a+1],n>=16&&n<=31&&n===this.lastCmdA&&i===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,c.log("DEBUG","Repeated command ("+f([n,i])+") is dropped")):0!==n||0!==i?(c.log("DATA","["+f([t[a],t[a+1]])+"] -> ("+f([n,i])+")"),(r=this.parseCmd(n,i))||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),r||(o=this.parseChars(n,i))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(o):c.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,c.log("WARNING","Couldn't parse cleaned data "+f([n,i])+" orig: "+f([t[a],t[a+1]])))):this.dataCounters.padding+=2},parseCmd:function(e,t){var r;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;r=20===e||21===e||23===e?1:2;var n=this.channels[r-1];return 20===e||21===e||28===e||29===e?32===t?n.cc_RCL():33===t?n.cc_BS():34===t?n.cc_AOF():35===t?n.cc_AON():36===t?n.cc_DER():37===t?n.cc_RU(2):38===t?n.cc_RU(3):39===t?n.cc_RU(4):40===t?n.cc_FON():41===t?n.cc_RDC():42===t?n.cc_TR():43===t?n.cc_RTD():44===t?n.cc_EDM():45===t?n.cc_CR():46===t?n.cc_ENM():47===t&&n.cc_EOC():n.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},parseMidrow:function(e,t){var r=null;if((17===e||25===e)&&32<=t&&t<=47){if((r=17===e?1:2)!==this.currChNr)return c.log("ERROR","Mismatch channel in midrow parsing"),!1;var n=this.channels[r-1];return n.insertChars([32]),n.cc_MIDROW(t),c.log("DEBUG","MIDROW ("+f([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var r,n;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;r=e<=23?1:2,n=64<=t&&t<=95?1===r?o[e]:s[e]:1===r?a[e]:l[e];var i=this.interpretPAC(n,t);return this.channels[r-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},interpretPAC:function(e,t){var r,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},parseChars:function(e,t){var n,i=null,o=null,a=null;if(e>=25?(i=2,a=e-8):(i=1,a=e),17<=a&&a<=19?(n=17===a?t+80:18===a?t+112:t+144,c.log("INFO","Special char '"+r(n)+"' in channel "+i),o=[n],this.lastCmdA=e,this.lastCmdB=t):32<=e&&e<=127&&(o=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null),o){var s=f(o);c.log("DEBUG","Char codes =  "+s.join(","))}return o},parseBackgroundAttributes:function(e,t){var r,n,i;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=u[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(r),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}},e.logger=c,e.PenState=d,e.CaptionScreen=g,e.Cea608Parser=y,e.findCea608Nalus=function(e,t,r){for(var n=0,i=t,o=[],a=function(e,t,r,n){if(4!==e||t<8)return null;var i=r.getUint8(n),o=r.getUint16(n+1),a=r.getUint32(n+3),s=r.getUint8(n+7);return 181==i&&49==o&&1195456820==a&&3==s};i<t+r;){if(n=e.getUint32(i),6==(31&e.getUint8(i+4)))for(var s=i+5,l=-1;s<i+4+n-1;){l=0;for(var u=255;255===u;)l+=u=e.getUint8(s),s++;var c=0;for(u=255;255===u;)c+=u=e.getUint8(s),s++;a(l,c,e,s)&&o.push([s,c]),s+=c}i+=n+4}return o},e.extractCea608DataFromRange=function(e,t){var r=t[0],n=[[],[]];r+=8;var i=31&e.getUint8(r);r+=2;for(var o=0;o<i;o++){var a=e.getUint8(r),s=4&a,l=3&a;r++;var u=e.getUint8(r);r++;var c=e.getUint8(r);r++,s&&(127&u)+(127&c)!=0&&(0===l?(n[0].push(u),n[0].push(c)):1===l&&(n[1].push(u),n[1].push(c)))}return n}}(t)},8416:function(e,t,r){"use strict";var n=r(1139),i=r(5448),o=r(6398),a=r(2032),s=(r(5530),"undefined"!=typeof window&&window||r.g),l=s.dashjs;l||(l=s.dashjs={}),l.MediaPlayer=n.Z,l.FactoryMaker=i.Z,l.Debug=o.Z,l.Version=(0,a.e)()},6398:function(e,t,r){"use strict";var n=r(5595),i=r(8512),o=r(5448),a=1,s=2,l=3,u=4,c=5;function f(e){e=e||{};var t,r,o,f,d=this.context,h=(0,n.Z)(d).getInstance(),p=e.settings,g=[];function m(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function y(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];w.apply(void 0,[a,this].concat(t))}function v(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];w.apply(void 0,[s,this].concat(t))}function _(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];w.apply(void 0,[l,this].concat(t))}function b(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];w.apply(void 0,[u,this].concat(t))}function E(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];w.apply(void 0,[c,this].concat(t))}function w(e,t){var n="",a=null;r&&(a=(new Date).getTime(),n+="["+(a-f)+"]"),o&&t&&t.getClassName&&(n+="["+t.getClassName()+"]",t.getType&&(n+="["+t.getType()+"]")),n.length>0&&(n+=" ");for(var s=arguments.length,l=new Array(s>2?s-2:0),u=2;u<s;u++)l[u-2]=arguments[u];Array.apply(null,l).forEach(function(e){n+=e+" "}),g[e]&&p&&p.get().debug.logLevel>=e&&g[e](n),p&&p.get().debug.dispatchEvent&&h.trigger(i.Z.LOG,{message:n,level:e})}return t={getLogger:function(e){return{fatal:y.bind(e),error:v.bind(e),warn:_.bind(e),info:b.bind(e),debug:E.bind(e)}},setLogTimestampVisible:function(e){r=e},setCalleeNameVisible:function(e){o=e}},r=!0,o=!0,f=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(g[a]=m(window.console.error),g[s]=m(window.console.error),g[l]=m(window.console.warn),g[u]=m(window.console.info),g[c]=m(window.console.debug)),t}f.__dashjs_factory_name="Debug";var d=o.Z.getSingletonFactory(f);d.LOG_LEVEL_NONE=0,d.LOG_LEVEL_FATAL=a,d.LOG_LEVEL_ERROR=s,d.LOG_LEVEL_WARNING=l,d.LOG_LEVEL_INFO=u,d.LOG_LEVEL_DEBUG=c,o.Z.updateSingletonFactory(f.__dashjs_factory_name,d),t.Z=d},5595:function(e,t,r){"use strict";var n=r(5448),i=r(8825);function o(){var e={};function t(t,r,n){var i=-1;return e[t]?(e[t].some(function(e,t){if(e&&e.callback===r&&(!n||n===e.scope))return i=t,!0}),i):i}var r={on:function(r,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!r)throw new Error("event type cannot be null or undefined");if(!n||"function"!=typeof n)throw new Error("listener must be a function: "+n);var a=o.priority||0;if(!(t(r,n,i)>=0)){e[r]=e[r]||[];var s={callback:n,scope:i,priority:a};i&&i.getStreamId&&(s.streamId=i.getStreamId()),i&&i.getType&&(s.mediaType=i.getType()),o&&o.mode&&(s.mode=o.mode);var l=e[r].some(function(t,n){if(t&&a>t.priority)return e[r].splice(n,0,s),!0});l||e[r].push(s)}},off:function(r,n,i){if(r&&n&&e[r]){var o=t(r,n,i);o<0||(e[r][o]=null)}},trigger:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e[t]){if((r=r||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");r.type=t,n.streamId&&(r.streamId=n.streamId),n.mediaType&&(r.mediaType=n.mediaType),e[t].filter(function(e){return!(!e||n.streamId&&e.streamId&&e.streamId!==n.streamId||n.mediaType&&e.mediaType&&e.mediaType!==n.mediaType||n.mode&&e.mode&&e.mode!==n.mode||!e.mode&&n.mode&&n.mode===i.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(e){return e&&e.callback.call(e.scope,r)})}},reset:function(){e={}}};return r}o.__dashjs_factory_name="EventBus";var a=n.Z.getSingletonFactory(o);a.EVENT_PRIORITY_LOW=0,a.EVENT_PRIORITY_HIGH=5e3,n.Z.updateSingletonFactory(o.__dashjs_factory_name,a),t.Z=a},5448:function(e,t){"use strict";var r=function(){var e,t=[],r={},n={};function i(e,r){for(var n in t){var i=t[n];if(i.context===e&&i.name===r)return i.instance}return null}function o(e,t){return t[e]}function a(e,t,r){e in r&&(r[e]=t)}function s(t,r,n){var i,o=t.__dashjs_factory_name,a=r[o];if(a){var s=a.instance;if(!a.override)return s.apply({context:r,factory:e},n);for(var l in i=t.apply({context:r},n),s=s.apply({context:r,factory:e,parent:i},n))i.hasOwnProperty(l)&&(i[l]=s[l])}else i=t.apply({context:r},n);return i.getClassName=function(){return o},i}return e={extend:function(e,t,r,n){!n[e]&&t&&(n[e]={instance:t,override:r})},getSingletonInstance:i,setSingletonInstance:function(e,r,n){for(var i in t){var o=t[i];if(o.context===e&&o.name===r)return void(t[i].instance=n)}t.push({name:r,context:e,instance:n})},deleteSingletonInstances:function(e){t=t.filter(function(t){return t.context!==e})},getSingletonFactory:function(e){var n=o(e.__dashjs_factory_name,r);return n||(n=function(r){var n;return void 0===r&&(r={}),{getInstance:function(){return n||(n=i(r,e.__dashjs_factory_name)),n||(n=s(e,r,arguments),t.push({name:e.__dashjs_factory_name,context:r,instance:n})),n}}},r[e.__dashjs_factory_name]=n),n},getSingletonFactoryByName:function(e){return o(e,r)},updateSingletonFactory:function(e,t){a(e,t,r)},getClassFactory:function(e){var t=o(e.__dashjs_factory_name,n);return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return s(e,t,arguments)}}},n[e.__dashjs_factory_name]=t),t},getClassFactoryByName:function(e){return o(e,n)},updateClassFactory:function(e,t){a(e,t,n)}},e}();t.Z=r},1264:function(e,t,r){"use strict";var n=r(5448),i=r(703),o=r(6398),a=r(3393),s=r(7855),l=r(5595),u=r(8512);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){var e,t,r=this.context,n=(0,l.Z)(r).getInstance(),d={"streaming.delay.liveDelay":u.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":u.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":u.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":u.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":u.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},h={debug:{logLevel:o.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:a.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:a.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:a.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:a.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(e={},f(e,s.w.MPD_TYPE,500),f(e,s.w.XLINK_EXPANSION_TYPE,500),f(e,s.w.MEDIA_SEGMENT_TYPE,1e3),f(e,s.w.INIT_SEGMENT_TYPE,1e3),f(e,s.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),f(e,s.w.INDEX_SEGMENT_TYPE,1e3),f(e,s.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),f(e,s.w.LICENSE,1e3),f(e,s.w.OTHER_TYPE,1e3),f(e,"lowLatencyReductionFactor",10),e),retryAttempts:(t={},f(t,s.w.MPD_TYPE,3),f(t,s.w.XLINK_EXPANSION_TYPE,1),f(t,s.w.MEDIA_SEGMENT_TYPE,3),f(t,s.w.INIT_SEGMENT_TYPE,3),f(t,s.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),f(t,s.w.INDEX_SEGMENT_TYPE,3),f(t,s.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),f(t,s.w.LICENSE,3),f(t,s.w.OTHER_TYPE,3),f(t,"lowLatencyMultiplyFactor",5),t),abr:{movingAverageMethod:a.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:a.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:a.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:a.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},p=i.Z.clone(h);function g(e,t,r){for(var o in e)e.hasOwnProperty(o)&&(t.hasOwnProperty(o)?"object"!==c(e[o])||e[o]instanceof Array||null===e[o]?(t[o]=i.Z.clone(e[o]),d[r+o]&&n.trigger(d[r+o])):g(e[o],t[o],r.slice()+o+"."):console.error("Settings parameter "+r+o+" is not supported"))}return{get:function(){return p},update:function(e){"object"===c(e)&&g(e,p,"")},reset:function(){p=i.Z.clone(h)}}}d.__dashjs_factory_name="Settings";var h=n.Z.getSingletonFactory(d);t.Z=h},703:function(e,t,r){"use strict";var n=r(3875),i=r.n(n),o=r(1067);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t;return t=[{key:"mixin",value:function(t,r,n){var i,o={};if(t)for(var s in r)r.hasOwnProperty(s)&&(i=r[s],s in t&&(t[s]===i||s in o&&o[s]===i)||("object"===a(t[s])&&null!==t[s]?t[s]=e.mixin(t[s],i,n):t[s]=n(i)));return t}},{key:"clone",value:function(t){if(!t||"object"!==a(t))return t;var r;if(t instanceof Array){r=[];for(var n=0,i=t.length;n<i;++n)n in t&&r.push(e.clone(t[n]))}else r={};return e.mixin(r,t,e.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(e,t){try{if(!t||0===t.length)return e;var r=new URL(e);return t.forEach(function(e){e.key&&e.value&&r.searchParams.set(e.key,e.value)}),r.href}catch(t){return e}}},{key:"parseHttpHeaders",value:function(e){var t={};if(!e)return t;for(var r=e.trim().split("\r\n"),n=0,i=r.length;n<i;n++){var o=r[n],a=o.indexOf(": ");a>0&&(t[o.substring(0,a)]=o.substring(a+2))}return t}},{key:"generateUuid",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)})}},{key:"generateHashCode",value:function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}},{key:"getRelativeUrl",value:function(e,t){try{var r=new URL(e),n=new URL(t);if(r.protocol=n.protocol,r.origin!==n.origin)return t;var o=i().relative(r.pathname.substr(0,r.pathname.lastIndexOf("/")),n.pathname.substr(0,n.pathname.lastIndexOf("/"))),a=0===o.length?1:0;return o+=n.pathname.substr(n.pathname.lastIndexOf("/")+a,n.pathname.length-1),n.pathname.length<o.length?n.pathname:o}catch(e){return t}}},{key:"parseUserAgent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var t=null===e&&"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";return(0,o.UAParser)(t)}catch(e){return{}}}},{key:"stringHasProtocol",value:function(e){return/(http(s?)):\/\//i.test(e)}}],t&&s(e,t),e}();t.Z=l},2032:function(e,t,r){"use strict";function n(){return"4.7.4"}r.d(t,{e:function(){return n}})},2230:function(e,t){"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t;return(t=[{key:"extend",value:function(e,t){if(e){var r=!!t&&t.override,n=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!r||n&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}])&&r(e.prototype,t),e}();t.Z=n},4351:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(s,e);var t,r,n=(t=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=a(t);if(r){var i=a(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return o(this,e)});function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=n.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",e.BUFFERING_COMPLETED="bufferingCompleted",e.BUFFER_CLEARED="bufferCleared",e.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",e.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",e.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",e.CMSD_STATIC_HEADER="cmsdStaticHeader",e.CURRENT_TRACK_CHANGED="currentTrackChanged",e.DATA_UPDATE_COMPLETED="dataUpdateCompleted",e.INBAND_EVENTS="inbandEvents",e.INITIAL_STREAM_SWITCH="initialStreamSwitch",e.INIT_FRAGMENT_LOADED="initFragmentLoaded",e.INIT_FRAGMENT_NEEDED="initFragmentNeeded",e.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",e.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",e.LOADING_COMPLETED="loadingCompleted",e.LOADING_PROGRESS="loadingProgress",e.LOADING_DATA_PROGRESS="loadingDataProgress",e.LOADING_ABANDONED="loadingAborted",e.MANIFEST_UPDATED="manifestUpdated",e.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",e.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",e.QUOTA_EXCEEDED="quotaExceeded",e.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",e.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",e.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",e.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",e.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",e.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",e.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",e.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",e.SOURCE_BUFFER_ERROR="sourceBufferError",e.STREAMS_COMPOSED="streamsComposed",e.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",e.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",e.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",e.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",e.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",e.URL_RESOLUTION_FAILED="urlResolutionFailed",e.VIDEO_CHUNK_RECEIVED="videoChunkReceived",e.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",e.XLINK_ELEMENT_LOADED="xlinkElementLoaded",e.XLINK_READY="xlinkReady",e.SEEK_TARGET="seekTarget",e.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",e.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",e.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",e.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",e.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",e}return s}(r(8342).Z);t.Z=s},8512:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,r,n=(t=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=s(t);if(r){var i=s(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return a(this,e)});function l(){return i(this,l),n.apply(this,arguments)}return l}(r(4351).Z),u=new l;t.Z=u},8342:function(e,t){"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t;return(t=[{key:"extend",value:function(e,t){if(e){var r=!!t&&t.override,n=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!r||n&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}])&&r(e.prototype,t),e}();t.Z=n},9326:function(e,t,r){"use strict";var n=r(3186),i=r(7855),o=r(5448),a=r(8825),s=r(7387),l=r(1553);function u(e){var t,r,o,u,c,f=(e=e||{}).eventBus,d=e.debug,h=e.urlUtils,p=e.type,g=e.streamInfo,m=e.segmentsController,y=e.timelineConverter,v=e.baseURLController;function _(){return p}function b(){o=null}function E(e,t,r){var n,i,o=v.resolve(r.path),a={};return o&&t!==o.url&&h.isRelative(t)?(n=o.url,i=o.serviceLocation,a=o.queryParams,t&&(n=h.resolve(t,n))):n=t,!h.isRelative(n)&&(e.url=n,e.serviceLocation=i,e.queryParams=a,!0)}function w(e,t){if(null==t)return null;var r=new n.Z,o=t.representation,a=o.adaptation.period.mpd.manifest.Period_asArray[o.adaptation.period.index].AdaptationSet_asArray[o.adaptation.index].Representation_asArray[o.index].bandwidth,l=t.media;return l=(0,s.vi)(l,"Number",t.replacementNumber),l=(0,s.vi)(l,"Time",t.replacementTime),l=(0,s.vi)(l,"Bandwidth",a),l=(0,s.Aj)(l,o.id),l=(0,s.eR)(l),r.mediaType=_(),r.type=i.w.MEDIA_SEGMENT_TYPE,r.range=t.mediaRange,r.startTime=t.presentationStartTime,r.mediaStartTime=t.mediaStartTime,r.duration=t.duration,r.timescale=o.timescale,r.availabilityStartTime=t.availabilityStartTime,r.availabilityEndTime=t.availabilityEndTime,r.availabilityTimeComplete=o.availabilityTimeComplete,r.wallStartTime=t.wallStartTime,r.quality=o.index,r.index=t.index,r.mediaInfo=e,r.adaptationIndex=o.adaptation.index,r.representationId=o.id,E(r,l,o)?r:void 0}function S(e,t,n){var i=null;if(!t||!t.segmentInfoType)return i;var a=m.getSegmentByTime(t,n);return a&&(o=a,r.debug("Index for time "+n+" is "+a.index),i=w(e,a)),i}function T(e,t,n){var i=null,a=m.getSegmentByIndex(t,n,o?o.mediaStartTime:-1);if(a)i=w(e,a),o=a;else{if(u&&!c)return r.debug(_()+" No segment found at index: "+n+". Wait for next loop"),null;c=!0}return i}function A(){r.debug("Dynamic stream complete"),c=!0}return t={getCurrentIndex:function(){return o?o.index:-1},getInitRequest:function(e,t){return t?function(e,t,r){var o=new n.Z,a=t.adaptation.period,l=a.start;if(o.mediaType=r,o.type=i.w.INIT_SEGMENT_TYPE,o.range=t.range,o.availabilityStartTime=y.calcAvailabilityStartTimeFromPresentationTime(l,t,u),o.availabilityEndTime=y.calcAvailabilityEndTimeFromPresentationTime(l+a.duration,t,u),o.quality=t.index,o.mediaInfo=e,o.representationId=t.id,E(o,t.initialization,t))return o.url=(0,s.vi)(o.url,"Bandwidth",t.bandwidth),o}(e,t,_()):null},getNextSegmentRequest:function(e,t){return t&&t.segmentInfoType?T(e,t,o?o.index+1:0):null},getNextSegmentRequestIdempotent:function(e,t){var r=o?o.index+1:0,n=m.getSegmentByIndex(t,r,o?o.mediaStartTime:-1);return n?w(e,n):null},getSegmentRequestForTime:S,getStreamId:function(){return g.id},getStreamInfo:function(){return g},getType:_,getValidTimeAheadOfTargetTime:function(e,t,r,n){try{if(isNaN(e)||!t||!r)return NaN;if(e<0&&(e=0),isNaN(n)&&(n=.5),S(t,r,e))return e;if(r.adaptation.period.start+r.adaptation.period.duration<e)return NaN;for(var i=isFinite(r.adaptation.period.duration)?r.adaptation.period.start+r.adaptation.period.duration:e+30,o=Math.min(e+n,i),a=NaN,s=null;o<=i;){var l=null;if(o<=i&&(l=S(t,r,o)),l){a=o,s=l;break}o+=n}if(s){var u=s.startTime+s.duration;return e>s.startTime&&u-e>n?e:!isNaN(s.startTime)&&e<s.startTime&&a>s.startTime?s.startTime+.001:Math.min(u-n,a)}return a}catch(e){return NaN}},initialize:function(e){u=e,c=!1,m.initialize(e)},isLastSegmentRequested:function(e,t){if(!e||!o)return!1;if(c)return!0;if(!isFinite(e.adaptation.period.duration))return!1;if(o.presentationStartTime+o.duration>t)return!1;if(e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.numberOfSegments)&&!isNaN(o.index)&&o.index>=e.mediaFinishedInformation.numberOfSegments-1){if(!u||e.segmentInfoType===l.Z.SEGMENT_TEMPLATE)return!0;if(u&&e.segmentInfoType===l.Z.SEGMENT_LIST&&e.adaptation.period.nextPeriodId)return!0}return!!(u&&e.adaptation.period.nextPeriodId&&e.segmentInfoType===l.Z.SEGMENT_TIMELINE&&e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&o&&!isNaN(o.mediaStartTime)&&!isNaN(o.duration)&&o.mediaStartTime+o.duration>=e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(e,t){return t&&t.segmentInfoType?T(e,t,o?o.index:0):null},reset:function(){b(),f.off(a.Z.DYNAMIC_TO_STATIC,A,t)}},r=d.getLogger(t),b(),f.on(a.Z.DYNAMIC_TO_STATIC,A,t),t}u.__dashjs_factory_name="DashHandler",t.Z=o.Z.getClassFactory(u)},1553:function(e,t){"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t;return(t=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&r(e.prototype,t),e}());t.Z=n},7802:function(e,t,r){"use strict";var n=r(5448),i=r(1724),o=r(3636),a=r(1736),s=r(5246);function l(e){e=e||{};var t,r,n=this.context,l=e.dashConstants,u=e.type,c=e.segmentBaseController;function f(e){return e?e.segments?r[l.SEGMENT_BASE]:r[e.segmentInfoType]:null}return t={initialize:function(t){r[l.SEGMENT_TIMELINE]=(0,i.Z)(n).create(e,t),r[l.SEGMENT_TEMPLATE]=(0,o.Z)(n).create(e,t),r[l.SEGMENT_LIST]=(0,a.Z)(n).create(e,t),r[l.SEGMENT_BASE]=(0,s.Z)(n).create(e,t)},updateInitData:function(e,t){return t?Promise.resolve():c.getSegmentBaseInitSegment({representation:e,mediaType:u})},updateSegmentData:function(e,t){return t?Promise.resolve():c.getSegmentList({mimeType:e.mimeType,representation:e,mediaType:u})},getSegmentByIndex:function(e,t,r){var n=f(e);return n?n.getSegmentByIndex(e,t,r):null},getSegmentByTime:function(e,t){var r=f(e);return r?r.getSegmentByTime(e,t):null},getMediaFinishedInformation:function(e){var t=f(e);return t?t.getMediaFinishedInformation(e):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},r={},t}l.__dashjs_factory_name="SegmentsController";var u=n.Z.getClassFactory(l);t.Z=u},1736:function(e,t,r){"use strict";var n=r(5448),i=r(3393),o=r(7387);function a(e,t){var r=(e=e||{}).timelineConverter;function n(){if(!r||!r.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.Z.MISSING_CONFIG_ERROR)}function a(e,i){if(n(),!e)return null;var a=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,s=a.SegmentURL_asArray.length,l=e&&!isNaN(e.startNumber)?e.startNumber:1,u=Math.max(l-1,0),c=Math.max(i-u,0),f=null;if(c<s){var d=a.SegmentURL_asArray[c];(f=(0,o.NF)(r,t,e,i))&&(f.replacementTime=(l+i-1)*e.segmentDuration,f.media=d.media?d.media:"",f.mediaRange=d.mediaRange,f.indexRange=d.indexRange)}return f}return{getSegmentByIndex:a,getSegmentByTime:function(e,t){if(n(),!e)return null;var i=e.segmentDuration;if(isNaN(i))return null;var o=r.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return a(e,Math.floor(o/i))},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!e)return t;var r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,n=e&&!isNaN(e.startNumber)?e.startNumber:1,i=Math.max(n-1,0);return t.numberOfSegments=i+r.SegmentURL_asArray.length,t}}}a.__dashjs_factory_name="ListSegmentsGetter";var s=n.Z.getClassFactory(a);t.Z=s},5246:function(e,t,r){"use strict";var n=r(5448),i=r(3393);function o(e){var t=(e=e||{}).timelineConverter;function r(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.Z.MISSING_CONFIG_ERROR)}function n(e,t){if(r(),!e)return null;var n,i=e.segments?e.segments.length:-1;if(t<i&&(n=e.segments[t])&&n.index===t)return n;for(var o=0;o<i;o++)if((n=e.segments[o])&&n.index===t)return n;return null}return{getSegmentByIndex:n,getSegmentByTime:function(e,t){r();var i=function(e,t){if(!e)return-1;var r,n,i,o,a,s=e.segments,l=s?s.length:null,u=-1;if(s&&l>0)for(a=0;a<l;a++)if(i=(n=s[a]).presentationStartTime,t+(r=(o=n.duration)/2)>=i&&t-r<i+o){u=n.index;break}return u}(e,t);return n(e,i)},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&e.segments?(t.numberOfSegments=e.segments.length,t):t}}}o.__dashjs_factory_name="SegmentBaseGetter";var a=n.Z.getClassFactory(o);t.Z=a},7387:function(e,t,r){"use strict";r.d(t,{Aj:function(){return a},NF:function(){return c},TJ:function(){return f},eR:function(){return o},vi:function(){return s}});var n=r(2011);function i(e,t){for(;e.length<t;)e="0"+e;return e}function o(e){return e?e.split("$$").join("$"):e}function a(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var r=t.toString();return e.split("$RepresentationID$").join(r)}function s(e,t,r){var n,o,a,s,l,u,c=t.length,f=2;if(!e)return e;for(;;){if((n=e.indexOf("$"+t))<0)return e;if((o=e.indexOf("$",n+c))<0)return e;if((a=e.indexOf("%0",n+c))>n&&a<o)switch(s=e.charAt(o-1),l=parseInt(e.substring(a+f,o-1),10),s){case"d":case"i":case"u":u=i(r.toString(),l);break;case"x":u=i(r.toString(16),l);break;case"X":u=i(r.toString(16),l).toUpperCase();break;case"o":u=i(r.toString(8),l);break;default:return e}else u=r;e=e.substring(0,n)+u+e.substring(o+1)}}function l(e,t,r,i,o,a,s,l){var u,c=new n.Z;return c.representation=e,c.duration=t,c.presentationStartTime=r,c.mediaStartTime=i,c.availabilityStartTime=o.calcAvailabilityStartTimeFromPresentationTime(a,e,s),c.availabilityEndTime=o.calcAvailabilityEndTimeFromPresentationTime(a+t,e,s),c.wallStartTime=o.calcWallTimeForSegment(c,s),c.replacementNumber=(u=l,c.representation.startNumber+u),c.index=l,c}function u(e,t,r,n){var i=t.adaptation.period;if(isFinite(i.duration)&&i.start+i.duration<=r.presentationStartTime)return!1;if(n){if("INF"===t.availabilityTimeOffset)return!0;var o=e.getClientReferenceTime();return r.availabilityStartTime.getTime()<=o&&(!isFinite(r.availabilityEndTime)||r.availabilityEndTime.getTime()>=o)}return!0}function c(e,t,r,n){var i,o,a;i=r.segmentDuration,isNaN(i)&&(i=r.adaptation.period.duration),o=parseFloat((r.adaptation.period.start+n*i).toFixed(5)),a=parseFloat((o+i).toFixed(5));var s=l(r,i,o,e.calcMediaTimeFromPresentationTime(o,r),e,a,t,n);return u(e,r,s,t)?s:null}function f(e,t,r,n,i,o,a,c,f,d){var h,p,g=n/o,m=i/o;return h=e.calcPresentationTimeFromMediaTime(g,r),u(e,r,p=l(r,m,h,g,e,h+m,t,f),t)?(p.replacementTime=d||n,a=s(a,"Number",p.replacementNumber),a=s(a,"Time",p.replacementTime),p.media=a,p.mediaRange=c,p):null}},3636:function(e,t,r){"use strict";var n=r(5448),i=r(3393),o=r(7387);function a(e,t){var r=(e=e||{}).timelineConverter;function n(){if(!r||!r.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.Z.MISSING_CONFIG_ERROR)}function a(e,i){if(n(),!e)return null;var a=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate;i=Math.max(i,0);var s=(0,o.NF)(r,t,e,i);if(s){s.replacementTime=Math.round((i-1)*e.segmentDuration*e.timescale,10);var l=a.media;l=(0,o.vi)(l,"Number",s.replacementNumber),l=(0,o.vi)(l,"Time",s.replacementTime),s.media=l}return s}return{getSegmentByIndex:a,getSegmentByTime:function(e,t){if(n(),!e)return null;var i=e.segmentDuration;if(isNaN(i))return null;var o=r.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return a(e,Math.floor(o/i))},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!e)return t;var r=e.segmentDuration;return isNaN(r)?t.numberOfSegments=1:t.numberOfSegments=Math.ceil(e.adaptation.period.duration/r),t}}}a.__dashjs_factory_name="TemplateSegmentsGetter";var s=n.Z.getClassFactory(a);t.Z=s},1724:function(e,t,r){"use strict";var n=r(5448),i=r(3393),o=r(7387);function a(e,t){var r=(e=e||{}).timelineConverter,n=e.dashMetrics;function a(){if(!r)throw new Error(i.Z.MISSING_CONFIG_ERROR)}function s(e,t){var r,n,i,o,a,s,u,c=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,f=c.SegmentTimeline,d=c.SegmentURL_asArray,h=0,p=-1;u=e.timescale;var g=!1;for(i=0,o=(r=f.S_asArray).length;i<o&&!g;i++)for(s=0,(n=r[i]).hasOwnProperty("r")&&(s=n.r),n.hasOwnProperty("t")&&(h=n.t),s<0&&(s=l(e,r[i+1],n,u,h/u)),a=0;a<=s&&!g;a++)(g=t(h,c,d,n,u,++p,i))&&(e.segmentDuration=n.d/u),h+=n.d}function l(e,t,i,o,a){var s;if(t&&t.hasOwnProperty("t"))s=t.t/o;else try{var l=0;if(isNaN(e.adaptation.period.start)||isNaN(e.adaptation.period.duration)||!isFinite(e.adaptation.period.duration)){var u=n.getCurrentDVRInfo();l=isNaN(u.end)?0:u.end}else l=e.adaptation.period.start+e.adaptation.period.duration;s=r.calcMediaTimeFromPresentationTime(l,e),e.segmentDuration=i.d/o}catch(e){s=0}return Math.max(Math.ceil((s-a)/(i.d/o))-1,0)}return{getSegmentByIndex:function(e,n,i){if(a(),!e)return null;var l=null,u=!1;return s(e,function(n,a,s,c,f,d,h){if(u||i<0){var p=a.media,g=c.mediaRange;return s&&(p=s[h].media||"",g=s[h].mediaRange),l=(0,o.TJ)(r,t,e,n,c.d,f,p,g,d,c.tManifest),!0}return n>=i*f-.5*c.d&&(u=!0),!1}),l},getSegmentByTime:function(e,n){if(a(),!e)return null;void 0===n&&(n=null);var i=null,l=r.calcMediaTimeFromPresentationTime(n,e);return s(e,function(n,a,s,u,c,f,d){var h=parseFloat((l*c).toPrecision(15));if(h<n+u.d&&h>=n){var p=a.media,g=u.mediaRange;return s&&(p=s[d].media||"",g=s[d].mediaRange),i=(0,o.TJ)(r,t,e,n,u.d,c,p,g,f,u.tManifest),!0}return!1}),i},getMediaFinishedInformation:function(e){if(!e)return 0;var t,r,n,i,o,a,s,u=(e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList).SegmentTimeline,c=0,f=0,d=0;for(s=e.timescale,i=(t=u.S_asArray).length,n=0;n<i;n++)for(a=0,(r=t[n]).hasOwnProperty("r")&&(a=r.r),r.hasOwnProperty("t")&&(f=(c=r.t)/s),a<0&&(a=l(e,t[n+1],r,s,f)),o=0;o<=a;o++)d++,f=(c+=r.d)/s;return{numberOfSegments:d,mediaTimeOfLastSignaledSegment:f}}}}a.__dashjs_factory_name="TimelineSegmentsGetter";var s=n.Z.getClassFactory(a);t.Z=s},2011:function(e,t){"use strict";t.Z=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(e,t){"use strict";t.Z=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""}},1139:function(e,t,r){"use strict";r.d(t,{Z:function(){return ea}});var n=r(452),i=r.n(n),o=r(3393),a=r(1553),s=r(3860),l=r(5595),u=r(8512),c=r(5448),f=r(6398),d=r(8825);function h(){var e,t,r,n,i,a,c,h,p,g,m,y,v,_,b,E,w,S,T,A,I,R,N,C,O,P=this.context,x=(0,l.Z)(P).getInstance();function D(){F(),_=!1,g=0,m=0,w=0,N=!1,S=!0,T=!1,C=!1,A=NaN,E=NaN,c&&(x.off(u.Z.DATA_UPDATE_COMPLETED,$,e),x.off(u.Z.LOADING_PROGRESS,ve,e),x.off(u.Z.MANIFEST_UPDATED,we,e),x.off(u.Z.STREAMS_COMPOSED,Se,e),x.off(d.Z.PLAYBACK_ENDED,ge,e),x.off(d.Z.STREAM_INITIALIZING,be,e),x.off(d.Z.REPRESENTATION_SWITCH,Ee,e),x.off(d.Z.BUFFER_LEVEL_STATE_CHANGED,te,e),X(),c.removeEventListener("canplay",J),c.removeEventListener("canplaythrough",ee),c.removeEventListener("play",re),c.removeEventListener("waiting",ne),c.removeEventListener("playing",ie),c.removeEventListener("pause",oe),c.removeEventListener("error",me),c.removeEventListener("seeking",ae),c.removeEventListener("seeked",se),c.removeEventListener("timeupdate",le),c.removeEventListener("progress",ue),c.removeEventListener("ratechange",ce),c.removeEventListener("loadedmetadata",fe),c.removeEventListener("loadeddata",de),c.removeEventListener("stalled",_e),c.removeEventListener("ended",he),c.removeEventListener("volumechange",pe)),p=null,c=null,y=null,v=null}function k(){return parseFloat((M(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)-Z()).toFixed(5))}function M(e){var t=e||y;return t.start+t.duration}function L(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];y&&c&&c.getElement()?(e&&v&&j(Z()),c.play()):_=!0}function F(){y&&c&&c.pause()}function U(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];y&&c&&c.getElement()&&e!==(isNaN(A)?c.getTime():A)&&((I=!0===n)||(A=e),t.info("Requesting seek to time: "+e+(I?" (internal)":"")),v&&i&&j(e),c.setCurrentTime(e,r))}function B(){if(y&&c&&v){var e=r&&r.hasVideoTrack()?o.Z.VIDEO:o.Z.AUDIO,t=i.getCurrentDVRInfo(e);return t&&t.range?t.range.end:0}}function j(e){var t=new Date(h.getClientReferenceTime()),r=a.getRegularPeriods()[0],n=h.calcPresentationTimeFromWallTime(t,r);g=n-e}function Z(){return y&&c?c.getTime():null}function q(){return y&&c?c.isPaused():null}function G(){return y&&c?c.isSeeking():null}function z(){return y&&c?c.isStalled():null}function H(){return y&&c?c.getPlaybackRate():null}function V(){return y&&c?c.getEnded():null}function W(){return v}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!q()&&v&&0!==c.getReadyState()&&!G()&&!N){e||(e=r.hasVideoTrack()?o.Z.VIDEO:o.Z.AUDIO);var n=Z(),i=K(n,e);!isNaN(i)&&i!==n&&!G()&&(z()||R||1===c.getReadyState())&&(t.debug("UpdateCurrentTime: Seek to actual time: ".concat(i," from currentTime: ").concat(n)),U(i,!1,!1))}}function K(e,t){var r=i.getCurrentDVRInfo(t),n=r?r.range:null;return n?e>n.end?Math.max(n.end-g,n.start):e>0&&e+.25<n.start&&Math.abs(e-n.start)<31536e4?T?Math.max(n.end-g,n.start):n.start:e:NaN}function Q(){null===p&&(p=setInterval(function(){!function(){if(x.trigger(u.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:v,time:new Date}),W()){var e=Date.now();(isNaN(E)||e>E+O.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(r.addDVRMetric(),q()?function(){var e=Date.now();(!b||e>b+500)&&(b=e,le())}():Y(),E=e)}}()},O.get().streaming.wallclockTimeUpdateInterval))}function X(){clearInterval(p),p=null}function $(e){var t=a.convertRepresentationToRepresentationInfo(e.currentRepresentation),r=t?t.mediaInfo.streamInfo:null;null!==r&&y.id===r.id&&(y=r)}function J(){x.trigger(u.Z.CAN_PLAY)}function ee(){x.trigger(u.Z.CAN_PLAY_THROUGH)}function te(e){e.streamId===r.getActiveStreamInfo().id&&(R=e.state===s.Z.BUFFER_EMPTY,O.get().streaming.buffer.setStallState&&c.setStallState(e.mediaType,e.state===s.Z.BUFFER_EMPTY))}function re(){t.info("Native video element event: play"),Y(),Q(),x.trigger(u.Z.PLAYBACK_STARTED,{startTime:Z()})}function ne(){t.info("Native video element event: waiting"),x.trigger(u.Z.PLAYBACK_WAITING,{playingTime:Z()})}function ie(){t.info("Native video element event: playing"),I=!1,x.trigger(u.Z.PLAYBACK_PLAYING,{playingTime:Z()})}function oe(){t.info("Native video element event: pause"),x.trigger(u.Z.PLAYBACK_PAUSED,{ended:V()})}function ae(){if(!I){var e=Z();isNaN(A)||A===e||(e=A),A=NaN,t.info("Seeking to: "+e),Q(),x.trigger(u.Z.PLAYBACK_SEEKING,{seekTime:e,streamId:y.id})}}function se(){t.info("Native video element event: seeked"),I=!1,x.trigger(u.Z.PLAYBACK_SEEKED)}function le(){y&&x.trigger(u.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:k(),time:Z(),streamId:y.id})}function ue(){x.trigger(u.Z.PLAYBACK_PROGRESS,{streamId:y.id})}function ce(){var e=H();t.info("Native video element event: ratechange: ",e),x.trigger(u.Z.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function fe(){t.info("Native video element event: loadedmetadata"),x.trigger(u.Z.PLAYBACK_METADATA_LOADED),Q()}function de(){t.info("Native video element event: loadeddata"),x.trigger(u.Z.PLAYBACK_LOADED_DATA)}function he(){t.info("Native video element event: ended"),F(),X();var e=r?r.getActiveStreamInfo():null;e&&x.trigger(u.Z.PLAYBACK_ENDED,{isLast:e.isLast})}function pe(){x.trigger(u.Z.PLAYBACK_VOLUME_CHANGED)}function ge(e){if(p&&e.isLast){t.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var r=e.seekTime?e.seekTime:M();c.setCurrentTime(r),F(),X()}}function me(e){var t=e.target||e.srcElement;x.trigger(u.Z.PLAYBACK_ERROR,{error:t.error})}function ye(){v=!1}function ve(e){if(!1===e.stream&&T&&!isNaN(e.request.duration)){var r=1.2*e.request.duration;r>g&&(t.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",r.toFixed(2)),g=r,m=r)}}function _e(e){x.trigger(u.Z.PLAYBACK_STALLED,{e:e})}function be(e){var r;(r=e.mediaInfo)&&r.supplementalProperties&&r.supplementalProperties[o.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&"true"===r.supplementalProperties[o.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value&&(t.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),T=!0)}function Ee(e){var t=r.getActiveStreamInfo();e&&t&&e.currentRepresentation&&e.streamId&&e.streamId===t.id&&e.mediaType&&(e.mediaType===o.Z.VIDEO||e.mediaType===o.Z.AUDIO)&&(S=e.currentRepresentation.availabilityTimeComplete,(T=!S)&&!C&&(C=!0))}function we(){N=!0}function Se(){N=!1}return e={initialize:function(t,r){y=t,!0!==r&&(c.addEventListener("canplay",J),c.addEventListener("canplaythrough",ee),c.addEventListener("play",re),c.addEventListener("waiting",ne),c.addEventListener("playing",ie),c.addEventListener("pause",oe),c.addEventListener("error",me),c.addEventListener("seeking",ae),c.addEventListener("seeked",se),c.addEventListener("timeupdate",le),c.addEventListener("progress",ue),c.addEventListener("ratechange",ce),c.addEventListener("loadedmetadata",fe),c.addEventListener("loadeddata",de),c.addEventListener("stalled",_e),c.addEventListener("ended",he),c.addEventListener("volumechange",pe),v=y.manifestInfo.isDynamic,R=!1,I=!1,x.on(u.Z.DATA_UPDATE_COMPLETED,$,e),x.on(u.Z.LOADING_PROGRESS,ve,e),x.on(u.Z.MANIFEST_UPDATED,we,e),x.on(u.Z.STREAMS_COMPOSED,Se,e),x.on(d.Z.PLAYBACK_ENDED,ge,e,{priority:l.Z.EVENT_PRIORITY_HIGH}),x.on(d.Z.STREAM_INITIALIZING,be,e),x.on(d.Z.REPRESENTATION_SWITCH,Ee,e),x.on(d.Z.BUFFER_LEVEL_STATE_CHANGED,te,e),x.on(d.Z.DYNAMIC_TO_STATIC,ye,e),_&&(_=!1,L()))},setConfig:function(e){e&&(e.streamController&&(r=e.streamController),e.serviceDescriptionController&&(n=e.serviceDescriptionController),e.dashMetrics&&(i=e.dashMetrics),e.adapter&&(a=e.adapter),e.videoModel&&(c=e.videoModel),e.timelineConverter&&(h=e.timelineConverter),e.settings&&(O=e.settings))},getTimeToStreamEnd:k,getBufferLevel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null;return r.getActiveStreamProcessors().forEach(function(r){if(!e||0===e.length||-1===e.indexOf(r.getType())){var n=r.getBufferLevel();t=null===t?n:Math.min(t,n)}}),t},getPlaybackStalled:function(){return R},getTime:Z,getLowLatencyModeEnabled:function(){return T},getInitialCatchupModeActivated:function(){return C},getIsManifestUpdateInProgress:function(){return N},getPlaybackRate:H,getPlayedRanges:function(){return y&&c?c.getPlayedRanges():null},getEnded:V,getIsDynamic:W,getStreamController:function(){return r},computeAndSetLiveDelay:function(e,t){var r,i,o,s=!isNaN(e)&&isFinite(e)?e:NaN,l=a.getSuggestedPresentationDelay(),u=n.getServiceDescriptionSettings();return r=isNaN(O.get().streaming.delay.liveDelay)?null===O.get().streaming.delay.liveDelayFragmentCount||isNaN(O.get().streaming.delay.liveDelayFragmentCount)||isNaN(s)?u&&!isNaN(u.liveDelay)&&u.liveDelay>0?u.liveDelay:!0===O.get().streaming.delay.useSuggestedPresentationDelay&&null!==l&&!isNaN(l)&&l>0?l:isNaN(s)?t&&!isNaN(t.minBufferTime)?4*t.minBufferTime:4*y.manifestInfo.minBufferTime:4*s:s*O.get().streaming.delay.liveDelayFragmentCount:O.get().streaming.delay.liveDelay,null!==(o=a.getAvailabilityStartTime())&&(w=o),i=t&&t.dvrWindowSize>0?Math.min(r,t.dvrWindowSize):r,g=i,m=i,i},getLiveDelay:function(){return g},getOriginalLiveDelay:function(){return m},getCurrentLiveLatency:function(){if(!v||isNaN(w))return NaN;var e=Z();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*h.getClientTimeOffset();return Math.max(((t-w-1e3*e)/1e3).toFixed(3),0)},play:L,isPaused:q,isStalled:z,pause:F,isSeeking:G,getStreamEndTime:M,seek:U,seekToOriginalLive:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=B();0!==n&&U(n-(g=m),e,t,r)},seekToCurrentLive:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=B();0!==n&&U(n-g,e,t,r)},reset:D,updateCurrentTime:Y,getAvailabilityStartTime:function(){return w}},t=(0,f.Z)(P).getInstance().getLogger(e),D(),e}h.__dashjs_factory_name="PlaybackController";var p=c.Z.getSingletonFactory(h),g=r(3186),m="loading",y="executed",v="failed";function _(e){var t,r,n,i,o=(e=e||{}).eventBus,a=e.events,s=e.dashMetrics,l=e.fragmentLoader,u=e.debug,c=e.streamInfo,f=e.type;function d(e){var t;return!!e&&(t=!1,n.some(function(r){if(n=e,i=r,!isNaN(n.index)&&n.startTime===i.startTime&&n.adaptationIndex===i.adaptationIndex&&n.type===i.type||function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality}(e,r)||function(e,t){return e.action===g.Z.ACTION_COMPLETE&&e.action===t.action}(e,r))return t=!0;var n,i}),t)}function h(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function p(e){n=n.filter(function(t){var r=h(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-r})}function _(e,t){t<=e+.5||(n=n.filter(function(r){var n=h(r);return isNaN(r.startTime)||r.startTime>=t-n||isNaN(r.duration)||r.startTime+r.duration<=e+n}))}function b(e,t,r){for(var n=e.length-1;n>=0;n--){var i=e[n],o=i.startTime,a=o+i.duration;if(r=isNaN(r)?h(i):r,!isNaN(o)&&!isNaN(a)&&t+r>=o&&t-r<a||isNaN(o)&&isNaN(t))return i}return null}function E(e,t){s.addSchedulingInfo(e,t),s.addRequestsQueue(e.mediaType,i,n)}function w(e){e.sender===l&&(i.splice(i.indexOf(e.request),1),e.response&&!e.error&&n.push(e.request),E(e.request,e.error?v:y),o.trigger(a.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:c.id,mediaType:f}))}function S(e){e.sender===l&&o.trigger(a.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:c.id,mediaType:f})}function T(e){e.sender===l&&o.trigger(a.FRAGMENT_LOADING_ABANDONED,{request:e.request},{streamId:c.id,mediaType:f})}function A(){n=[],i=[]}return t={getStreamId:function(){return c.id},getType:function(){return f},getRequests:function(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],r=[];return t.forEach(function(t){var o=function(e){var t;switch(e){case m:t=i;break;case y:t=n;break;default:t=[]}return t}(t);r=r.concat(function(e,t){return t.hasOwnProperty("time")?[b(e,t.time,t.threshold)]:e.filter(function(e){for(var r in t)if("state"!==r&&t.hasOwnProperty(r)&&e[r]!=t[r])return!1;return!0})}(o,e))}),r},isFragmentLoaded:d,isFragmentLoadedOrPending:function(e){var t,r=!1,n=0;if(!(r=d(e)))for(n=0;n<i.length;n++)t=i[n],e.url===t.url&&e.startTime===t.startTime&&(r=!0);return r},removeExecutedRequestsBeforeTime:p,removeExecutedRequestsAfterTime:function(e){n=n.filter(function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime<e})},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var r=0,n=0,i=e.length;n<i;n++)_(r,e.start(n)),r=e.end(n);t>0&&_(r,t)}else p()},abortRequests:function(){r.debug("abort requests"),l.abort(),i=[]},executeRequest:function(e){e.action===g.Z.ACTION_DOWNLOAD?(E(e,m),i.push(e),function(e){o.trigger(a.FRAGMENT_LOADING_STARTED,{request:e},{streamId:c.id,mediaType:f}),l.load(e)}(e)):r.warn("Unknown request action.")},reset:function(){o.off(a.LOADING_COMPLETED,w,this),o.off(a.LOADING_DATA_PROGRESS,S,this),o.off(a.LOADING_ABANDONED,T,this),l&&l.reset(),A()},resetInitialSettings:A,addExecutedRequest:function(e){n.push(e)}},r=u.getLogger(t),A(),o.on(a.LOADING_COMPLETED,w,t),o.on(a.LOADING_DATA_PROGRESS,S,t),o.on(a.LOADING_ABANDONED,T,t),t}_.__dashjs_factory_name="FragmentModel";var b=c.Z.getClassFactory(_);b.FRAGMENT_MODEL_LOADING=m,b.FRAGMENT_MODEL_EXECUTED=y,b.FRAGMENT_MODEL_CANCELED="canceled",b.FRAGMENT_MODEL_FAILED=v,c.Z.updateClassFactory(_.__dashjs_factory_name,b);var E=b,w=r(5459);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function T(e,t){return T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T(e,t)}function A(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var R=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=I(t);if(r){var i=I(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return A(this,e)});function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=n.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,e.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,e.SEGMENT_BASE_LOADER_ERROR_CODE=15,e.TIME_SYNC_FAILED_ERROR_CODE=16,e.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,e.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,e.APPEND_ERROR_CODE=20,e.REMOVE_ERROR_CODE=21,e.DATA_UPDATE_FAILED_ERROR_CODE=22,e.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,e.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,e.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,e.DOWNLOAD_ERROR_ID_SIDX_CODE=26,e.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,e.DOWNLOAD_ERROR_ID_XLINK_CODE=29,e.MANIFEST_ERROR_ID_PARSE_CODE=31,e.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,e.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,e.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,e.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,e.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",e.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",e.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",e.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",e.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",e.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",e.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",e.APPEND_ERROR_MESSAGE="chunk is not defined",e.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",e.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",e.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",e.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",e.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",e.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",e}return i}(r(2230).Z)),N=r(1264),C=r(7855);function O(e){var t,r,n,i,a,s,l=this.context,c=(0,N.Z)(l).getInstance(),d=e.textController,h=e.eventBus,p=[],g=[],m=!1,y=e.mediaSource,v=null;function _(e){return new Promise(function(t){x(function(){i.changeType&&i.changeType(e),t()})})}function b(e){return i=d.getTextSourceBuffer(e),Promise.resolve()}function E(){if("function"==typeof i.addEventListener)try{i.addEventListener("updateend",O,!1),i.addEventListener("error",P,!1),i.addEventListener("abort",P,!1)}catch(e){s=setInterval(O,50)}else s=setInterval(O,50)}function S(e){return new Promise(function(t){i&&c.get().streaming.buffer.useAppendWindow?x(function(){try{if(!i)return void t();var r=y.duration,o=0;e&&!isNaN(e.start)&&!isNaN(e.duration)&&isFinite(e.duration)&&(r=e.start+e.duration),e&&!isNaN(e.start)&&(o=e.start),i.appendWindowEnd===r&&i.appendWindowStart===o||(i.appendWindowStart=0,i.appendWindowEnd=r+.01,i.appendWindowStart=Math.max(o-.1,0),n.debug("Updated append window for ".concat(a.type,". Set start to ").concat(i.appendWindowStart," and end to ").concat(i.appendWindowEnd))),t()}catch(e){n.warn("Failed to set append window"),t()}}):t()})}function T(e){return new Promise(function(t){i?x(function(){try{i.timestampOffset===e||isNaN(e)||(i.timestampOffset=e,n.debug("Set MSE timestamp offset to ".concat(e))),t()}catch(e){t()}}):t()})}function A(){if(!m&&g.length>0){m=!0;var e=g[0];g.splice(0,1);var t=function(){m=!1,g.length>0&&A.call(this),e&&e.data&&e.data.segmentType&&e.data.segmentType!==C.w.INIT_SEGMENT_TYPE&&delete e.data.bytes,e.promise.resolve({chunk:e.data})};try{v=e.request,0===e.data.bytes.byteLength?t.call(this):(i.appendBuffer?i.appendBuffer(e.data.bytes):i.append(e.data.bytes,e.data),x(t.bind(this)))}catch(t){n.fatal('SourceBuffer append failed "'+t+'"'),g.length>0?A():m=!1,delete e.data.bytes,e.promise.reject({chunk:e.data,error:new w.Z(t.code,t.message)})}}}function I(){p.length>0&&(i.updating||(p.shift()(),I()))}function O(){i.updating||I()}function P(e){var t,n,i=e.target||{};t=u.Z.SOURCE_BUFFER_ERROR,n={error:i,lastRequestAppended:v}||{},h.trigger(t,n,{streamId:a.streamInfo.id,mediaType:r})}function x(e){p.push(e),i.updating||I()}return t={getType:function(){return r},getAllBufferRanges:function(){try{return i.buffered}catch(e){return n.error("getAllBufferRanges exception: "+e.message),null}},getBuffer:function(){return i},append:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(n,i){e?(g.push({data:e,promise:{resolve:n,reject:i},request:r}),x(A.bind(t))):i({chunk:e,error:new w.Z(R.APPEND_ERROR_CODE,R.APPEND_ERROR_MESSAGE)})})},remove:function(e){return new Promise(function(t,r){var n=e.start,o=e.end;n>=0&&o>n?x(function(){try{i.remove(n,o),x(function(){t({from:n,to:o,unintended:!1}),e.resolve&&e.resolve()})}catch(t){r({from:n,to:o,unintended:!1,error:new w.Z(R.REMOVE_ERROR_CODE,R.REMOVE_ERROR_MESSAGE)}),e.reject&&e.reject(t)}}):t()})},abort:function(){return new Promise(function(e){try{g=[],"open"===y.readyState?x(function(){try{i&&i.abort(),e()}catch(t){e()}}):i&&i.setTextTrack&&"ended"===y.readyState?(i.abort(),e()):e()}catch(t){e()}})},reset:function(){if(i){try{p=[],function(){try{"function"==typeof i.removeEventListener&&(i.removeEventListener("updateend",O,!1),i.removeEventListener("error",P,!1),i.removeEventListener("abort",P,!1)),clearInterval(s)}catch(e){n.error(e)}}(),m=!1,g=[],i.getClassName&&"TextSourceBuffer"===i.getClassName()||(n.debug("Removing sourcebuffer from media source"),y.removeSourceBuffer(i))}catch(e){}i=null}v=null},updateTimestampOffset:T,initializeForStreamSwitch:function(e,t,n){r=(a=e).type;var o=a.codec;!function(e){i=e.getBuffer()}(n),E();var s=[];return s.push(new Promise(function(e){x(function(){var t=i.appendWindowStart,r=i.appendWindowEnd;i&&(i.abort(),i.appendWindowStart=t,i.appendWindowEnd=r),e()})})),s.push(S(a.streamInfo)),c.get().streaming.buffer.useChangeTypeForTrackSwitch&&s.push(_(o)),t&&void 0!==t.MSETimeOffset&&s.push(T(t.MSETimeOffset)),Promise.all(s)},initializeForFirstUse:function(e,t,n){r=(a=t).type;var s=a.codec;try{if(s.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return b(e);i=y.addSourceBuffer(s),E();var l=[];return l.push(S(a.streamInfo)),n&&void 0!==n.MSETimeOffset&&l.push(T(n.MSETimeOffset)),Promise.all(l)}catch(t){return a.type==o.Z.TEXT&&!a.isFragmented||-1!==s.indexOf('codecs="stpp')||-1!==s.indexOf('codecs="vtt')||-1!==s.indexOf("text/vtt")?b(e):Promise.reject(t)}},updateAppendWindow:S,changeType:_},n=(0,f.Z)(l).getInstance().getLogger(t),t}O.__dashjs_factory_name="SourceBufferSink";var P=c.Z.getClassFactory(O);function x(e){var t,r,n,i=this.context,o=[],a=e;function s(e,t){return o=o.filter(function(r){return!((isNaN(t)||r.start<t)&&(isNaN(e)||r.end>e))}),Promise.resolve()}return t={getAllBufferRanges:function(){for(var e=[],t=0;t<o.length;t++){var r=o[t];0===e.length||r.start>e[e.length-1].end?e.push({start:r.start,end:r.end}):e[e.length-1].end=r.end}var n={start:function(t){return e[t].start},end:function(t){return e[t].end}};return Object.defineProperty(n,"length",{get:function(){return e.length}}),n},append:function(e){return"InitializationSegment"!==e.segmentType?(o.push(e),o.sort(function(e,t){return e.start-t.start}),n=null):n=e,r.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),a&&a({chunk:e}),Promise.resolve()},remove:s,abort:function(){return Promise.resolve()},discharge:function(e,t){var r=function(e,t){return o.filter(function(r){return(isNaN(t)||r.start<t)&&(isNaN(e)||r.end>e)})}(e,t);return n&&(r.push(n),n=null),s(e,t),r},reset:function(){o=[],n=null,a=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(e){e()},getBuffer:function(){return this}},r=(0,f.Z)(i).getInstance().getLogger(t),t}x.__dashjs_factory_name="PreBufferSink";var D=c.Z.getClassFactory(x);function k(){var e={};return{save:function(t){var r=t.streamId,n=t.representationId;e[r]=e[r]||{},e[r][n]=t},extract:function(t,r){return e&&e[t]&&e[t][r]?e[t][r]:null},reset:function(){e={}}}}k.__dashjs_factory_name="InitCache";var M=c.Z.getSingletonFactory(k),L=.01,F="BufferController";function U(e){e=e||{};var t,r,n,i,a,c,h,p,g,m,y,v,_,b,S,T,A,I,N,O,x,k=this.context,U=(0,l.Z)(k).getInstance(),B=e.errHandler,j=e.fragmentModel,Z=e.representationController,q=e.adapter,G=e.textController,z=e.abrController,H=e.playbackController,V=e.streamInfo,W=e.type,Y=e.settings;function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(r,n){c=e,g&&t&&"function"==typeof g.discharge?(m=g,X(t).then(function(){r()}).catch(function(e){n(e)})):r()})}function Q(e){return q.convertRepresentationToRepresentationInfo(Z.getRepresentationForQuality(e))}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(r,n){I&&e?c?(y=!1,J(e,t).then(function(e){r(e)}).catch(function(e){n(e)})):(y=!0,$().then(function(e){r(e)}).catch(function(e){n(e)})):r(null)})}function $(){var e=this;return new Promise(function(t,r){var n=z.getQualityFor(W,V.id);g=D(k).create(ie.bind(e)),be(Q(n)).then(function(){t(g)}).catch(function(){r()})})}function J(e,t){return new Promise(function(n,i){var a=z.getQualityFor(W,V.id);g=P(k).create({mediaSource:c,textController:G,eventBus:U}),function(e,t,r){var n=Q(r);return t&&t[W]&&(W===o.Z.VIDEO||W===o.Z.AUDIO)?g.initializeForStreamSwitch(e,n,t[W]):g.initializeForFirstUse(V,e,n)}(e,t,a).then(function(){return be(Q(a))}).then(function(){n(g)}).catch(function(e){r.fatal("Caught error on create SourceBuffer: "+e),B.error(new w.Z(R.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,R.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+W)),i(e)})})}function ee(e){Y.get().streaming.cacheInitSegments&&(r.info("Init fragment finished loading saving to",W+"'s init cache"),I.save(e.chunk)),r.debug("Append Init fragment",W," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),re(e.chunk)}function te(e){re(e.chunk,e.request)}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;g&&(g.append(e,t).then(function(e){ie(e)}).catch(function(e){ie(e)}),e.mediaInfo.type===o.Z.VIDEO&&Ne(u.Z.VIDEO_CHUNK_RECEIVED,{chunk:e}))}function ne(e){if(e&&e.length>0)for(var t=0,n=e.length;t<n;t++)r.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",H.getTime())}function ie(e){if(e.error)return 22===e.error.code&&function(){if(A=!0,a=.8*Ae(),r.warn("Quota exceeded, Critical Buffer: "+a),a>0){var e=Math.max(.2*a,1),t=a-e,n=Math.min(Y.get().streaming.buffer.bufferTimeAtTopQuality,.9*t),i=Math.min(Y.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*t),o={streaming:{buffer:{bufferToKeep:parseFloat(e.toFixed(5)),bufferTimeAtTopQuality:parseFloat(n.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(i.toFixed(5))}}};Y.update(o)}}(),void(22!==e.error.code&&Re()||(r.warn("Clearing playback buffer to overcome quota exceed situation"),Ne(u.Z.QUOTA_EXCEEDED,{criticalBufferLevel:a,quotaExceededTime:e.chunk.start}),ye(me())));if(g&&(fe(),A=!1,(b=e.chunk)&&b.endFragment)){b&&!isNaN(b.index)&&(h=Math.max(b.index,h),de());var t=g.getAllBufferRanges();b.segmentType===C.w.MEDIA_SEGMENT_TYPE&&(ne(t),se(),function(){if(!isNaN(x)&&!y)if(W===o.Z.AUDIO||W===o.Z.VIDEO){var e=H.getTime(),t=ce(e,0),r=ce(x,0);if(t&&r&&t.start===r.start)x=NaN;else{var n=Z.getCurrentRepresentation().segmentDuration,i=ce(x,n);i&&(Y.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(e-x)>n?x<=i.end&&H.seek(Math.max(x,i.start),!1,!0):e<i.start&&H.seek(i.start,!1,!0))}}else x=NaN}());var n=!1;v&&(v.indexOf(b)>0&&(n=!0),v=null),b&&!n&&Ne(u.Z.BYTES_APPENDED_END_FRAGMENT,{quality:b.quality,startTime:b.start,index:b.index,bufferedRanges:t,segmentType:b.segmentType,mediaType:W})}}function oe(){return new Promise(function(e,t){var r=ae();if(!r||0===r.length)return se(),void e();ye(r).then(function(){e()}).catch(function(e){t(e)})})}function ae(e){var t=[],n=g.getAllBufferRanges();if(!n||0===n.length)return t;if(!e&&0!==e||isNaN(e))t.push({start:n.start(0),end:n.end(n.length-1)+.5});else{var i=function(e,t){var r=Y.get().streaming.buffer.bufferToKeep,n=t.start(0);if(e-n>r){var i=Math.max(0,e-r),o=j.getRequests({state:E.FRAGMENT_MODEL_EXECUTED,time:e,threshold:L})[0];if(o&&(i=Math.min(o.startTime,i)),i>0)return{start:n,end:i}}return null}(e,n),o=function(e,t){var n=t.end(t.length-1)+.5,i=Ie(e),o=V.manifestInfo.duration>=Y.get().streaming.buffer.longFormContentDurationThreshold?Y.get().streaming.buffer.bufferTimeAtTopQualityLongForm:Y.get().streaming.buffer.bufferTimeAtTopQuality,a=isNaN(i)?e:Math.min(i,e+o);if(a>=t.end(t.length-1))return null;var s=j.getRequests({state:E.FRAGMENT_MODEL_EXECUTED,time:e,threshold:L})[0];if(s&&(a=Math.max(s.startTime+s.duration,a)),Y.get().streaming.buffer.avoidCurrentTimeRangePruning)for(var l=0;l<t.length;l++)if(t.start(l)<=e&&e<=t.end(l)&&t.start(l)<=a&&a<=t.end(l)){var u=a;a=l+1<t.length?t.start(l+1):t.end(l)+1,r.debug("Buffered range ["+t.start(l)+", "+t.end(l)+"] overlaps with targetTime "+e+" and range to be pruned ["+u+", "+n+"], using ["+a+", "+n+"] instead"+(a<n?"":" (no actual pruning)"));break}return a<t.end(t.length-1)?{start:a,end:n}:null}(e,n);i&&t.push(i),o&&t.push(o)}return t}function se(){(!O||W===o.Z.TEXT&&G.isTextEnabled())&&fe()}function le(){he()}function ue(){he(),x=NaN}function ce(e,t){if(!g)return null;var r,n,i=g.getAllBufferRanges(),o=0,a=0,s=null,l=null,u=0,c=isNaN(t)?.15:t;if(null!=i){for(n=0,r=i.length;n<r;n++)if(o=i.start(n),a=i.end(n),null===s)u=Math.abs(o-e),(e>=o&&e<a||u<=c)&&(s=o,l=a);else{if(!((u=o-l)<=c))break;l=a}if(null!==s)return{start:s,end:l}}return null}function fe(){if(H){var e=H.getTime()||0;y&&(e=isNaN(x)?0:x);var t=Y.get().streaming.gaps.jumpGaps&&!isNaN(Y.get().streaming.gaps.smallGapLimit)?Y.get().streaming.gaps.smallGapLimit:NaN;i=Math.max(function(e,t){var r;return Y.get().streaming.gaps.jumpGaps&&(t=Y.get().streaming.gaps.smallGapLimit),null===(r=ce(e,t))?0:r.end-e}(e,t),0),Ne(u.Z.BUFFER_LEVEL_UPDATED,{mediaType:W,bufferLevel:i}),he()}}function de(){var e=h>=p-1,t=H.getTimeToStreamEnd(V)-i<1e-5;!e&&!t||n||(Te(!0),r.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(V.id," and type ").concat(W)))}function he(){W!==o.Z.AUDIO&&W!==o.Z.VIDEO||((!H.getLowLatencyModeEnabled()&&i<Y.get().streaming.buffer.stallThreshold||0===i)&&!n?pe(s.Z.BUFFER_EMPTY):(n||i>=Y.get().streaming.buffer.stallThreshold||H.getLowLatencyModeEnabled()&&i>0)&&pe(s.Z.BUFFER_LOADED))}function pe(e){_===e||e===s.Z.BUFFER_EMPTY&&0===H.getTime()||W===o.Z.TEXT&&!G.isTextEnabled()||(_=e,Ne(u.Z.BUFFER_LEVEL_STATE_CHANGED,{state:e}),Ne(e===s.Z.BUFFER_LOADED?u.Z.BUFFER_LOADED:u.Z.BUFFER_EMPTY),r.debug(e===s.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function ge(){g&&W!==o.Z.TEXT&&(n||ye(me()))}function me(){var e=[],t=g.getAllBufferRanges();if(!t||0===t.length)return e;var r=H.getTime(),n=Math.max(0,r-Y.get().streaming.buffer.bufferToKeep),i=j.getRequests({state:E.FRAGMENT_MODEL_EXECUTED,time:r,threshold:L})[0];if(i)n=Math.min(i.startTime,n);else if(0===r&&H.getIsDynamic())return[];if(t.start(0)<=n){for(var o={start:0,end:n},a=0;a<t.length&&t.end(a)<=n;a++)o.end=t.end(a);o.start<o.end&&e.push(o)}return e}function ye(e){return new Promise(function(t,r){if(e&&g&&0!==e.length){var n=[];e.forEach(function(e){n.push(function(e){return new Promise(function(t,r){e.resolve=t,e.reject=r,N.push(e)})}(e))}),T||ve(),Promise.all(n).then(function(){t()}).catch(function(e){r(e)})}else t()})}function ve(){try{if(0===N.length||!g)return r.debug("Nothing to prune, halt pruning"),N=[],void(T=!1);var e=g.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return r.debug("SourceBuffer is empty (or does not exist), halt pruning"),N=[],void(T=!1);var t=N.shift();r.debug("".concat(W,": Removing buffer from: ").concat(t.start," to ").concat(t.end)),T=!0,H.getTime()<t.end&&Te(!1),g.remove(t).then(function(e){_e(e)}).catch(function(e){_e(e)})}catch(e){T=!1}}function _e(e){r.debug("onRemoved buffer from:",e.from,"to",e.to),g&&(ne(g.getAllBufferRanges()),0===N.length&&(T=!1,fe()),e.unintended&&(r.warn("Detected unintended removal from:",e.from,"to",e.to,"setting streamprocessor time to",e.from),Ne(u.Z.SEEK_TARGET,{time:e.from})),T?ve():(O?O=!1:fe(),Ne(u.Z.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:Re(),quotaExceeded:A})))}function be(e){return new Promise(function(t){e&&void 0!==e.MSETimeOffset&&g&&g.updateTimestampOffset?g.updateTimestampOffset(e.MSETimeOffset).then(function(){t()}).catch(function(){t()}):t()})}function Ee(){return g&&!n?g.updateAppendWindow(V):Promise.resolve()}function we(){++S*(Y.get().streaming.wallclockTimeUpdateInterval/1e3)>=Y.get().streaming.buffer.bufferPruningInterval&&(S=0,ge())}function Se(){he()}function Te(e){(n=e)?Ne(u.Z.BUFFERING_COMPLETED):p=Number.POSITIVE_INFINITY}function Ae(){try{var e,t,r=g.getAllBufferRanges(),n=0;if(!r)return n;for(t=0,e=r.length;t<e;t++)n+=r.end(t)-r.start(t);return n}catch(e){return 0}}function Ie(e){try{var t=e,r=g.getAllBufferRanges();if(!r||0===r.length)return NaN;for(var n=0;t===e&&n<r.length;){var i=r.start(n),o=r.end(n);t>=i&&t<=o&&(t=o),n+=1}return t===e?NaN:t}catch(e){}}function Re(){var e=Ae();return isNaN(e)||e<a}function Ne(e,t){var r=t||{};U.trigger(e,r,{streamId:V.id,mediaType:W})}function Ce(e,t){if(a=Number.POSITIVE_INFINITY,_=void 0,p=Number.POSITIVE_INFINITY,h=0,b=null,n=!1,T=!1,A=!1,i=0,S=0,N=[],x=NaN,y=!1,g){var r=g;g=null,e||t||r.abort().then(function(){r.reset(t),r=null})}O=!1}return t={initialize:function(e){K(e),U.on(u.Z.INIT_FRAGMENT_LOADED,ee,t),U.on(u.Z.MEDIA_FRAGMENT_LOADED,te,t),U.on(u.Z.WALLCLOCK_TIME_UPDATED,we,t),U.on(d.Z.PLAYBACK_PLAYING,ue,t),U.on(d.Z.PLAYBACK_PROGRESS,se,t),U.on(d.Z.PLAYBACK_TIME_UPDATED,se,t),U.on(d.Z.PLAYBACK_RATE_CHANGED,Se,t),U.on(d.Z.PLAYBACK_STALLED,le,t)},getStreamId:function(){return V.id},getType:function(){return W},getBufferControllerType:function(){return F},createBufferSink:X,dischargePreBuffer:function(){if(g&&m&&"function"==typeof m.discharge){var e=m.getAllBufferRanges();if(e.length>0){for(var t="Beginning "+W+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";r.debug(t)}else r.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");v=[];for(var i=m.discharge(),o=null,a=0;a<i.length;a++){var s=i[a];if(s.segmentType!==C.w.INIT_SEGMENT_TYPE){var l=I.extract(s.streamId,s.representationId);l&&o!==l&&(v.push(l),g.append(l),o=l)}v.push(s),g.append(s)}m.reset(),m=null}},getBuffer:function(){return g},getBufferLevel:function(){return i},getRangeAt:ce,hasBufferAtTime:function(e){try{var t=g.getAllBufferRanges();if(!t||0===t.length)return!1;for(var n=0;n<t.length;){var i=t.start(n),o=t.end(n);if(e>=i&&e<=o)return!0;n+=1}return!1}catch(e){return r.error(e),!1}},pruneBuffer:ge,setMediaSource:K,getMediaSource:function(){return c},appendInitSegmentFromCache:function(e){var t=I.extract(V.id,e);return!!t&&(r.info("Append Init fragment",W," with representationId:",t.representationId," and quality:",t.quality,", data size:",t.bytes.byteLength),re(t),!0)},getIsBufferingCompleted:function(){return n},setIsBufferingCompleted:Te,getIsPruningInProgress:function(){return T},reset:function(e,t){U.off(u.Z.INIT_FRAGMENT_LOADED,ee,this),U.off(u.Z.MEDIA_FRAGMENT_LOADED,te,this),U.off(u.Z.WALLCLOCK_TIME_UPDATED,we,this),U.off(d.Z.PLAYBACK_PLAYING,ue,this),U.off(d.Z.PLAYBACK_PROGRESS,se,this),U.off(d.Z.PLAYBACK_TIME_UPDATED,se,this),U.off(d.Z.PLAYBACK_RATE_CHANGED,Se,this),U.off(d.Z.PLAYBACK_STALLED,le,this),Ce(e,t)},prepareForPlaybackSeek:function(){return n&&Te(!1),g.abort()},prepareForReplacementTrackSwitch:function(e){return new Promise(function(t,r){g.abort().then(function(){return Ee()}).then(function(){return Y.get().streaming.buffer.useChangeTypeForTrackSwitch?g.changeType(e):Promise.resolve()}).then(function(){return oe()}).then(function(){Te(!1),t()}).catch(function(e){r(e)})})},prepareForNonReplacementTrackSwitch:function(e){return new Promise(function(t,r){Ee().then(function(){return Y.get().streaming.buffer.useChangeTypeForTrackSwitch?g.changeType(e):Promise.resolve()}).then(function(){t()}).catch(function(e){r(e)})})},prepareForForceReplacementQualitySwitch:function(e){return new Promise(function(t,r){g.abort().then(function(){return Ee()}).then(function(){return oe()}).then(function(){return be(e)}).then(function(){Te(!1),t()}).catch(function(e){r(e)})})},updateAppendWindow:Ee,getAllRangesWithSafetyFactor:ae,getContinuousBufferTimeForTargetTime:Ie,clearBuffers:ye,pruneAllSafely:oe,updateBufferTimestampOffset:be,setSeekTarget:function(e){x=e},segmentRequestingCompleted:function(e){isNaN(e)||(p=e,de())}},r=(0,f.Z)(k).getInstance().getLogger(t),I=M(k).getInstance(),Ce(),t}U.__dashjs_factory_name=F;var B=c.Z.getClassFactory(U),j="NotFragmentedTextBufferController";function Z(e){e=e||{};var t,r,n,i,o,a,s=this.context,c=(0,l.Z)(s).getInstance(),f=e.textController,d=e.errHandler,h=e.streamInfo,p=e.type;function g(e){i=e}function m(e){var t,n;r!==e&&(r=e)&&(t=u.Z.BUFFERING_COMPLETED,n={},c.trigger(t,n,{streamId:h.id,mediaType:p}))}function y(e){e.chunk.bytes&&!r&&(a.save(e.chunk),o.append(e.chunk),m(!0))}return t={initialize:function(e){g(e)},getStreamId:function(){return h.id},getType:function(){return p},getBufferControllerType:function(){return j},createBufferSink:function(e){return new Promise(function(t,r){try{(o=P(s).create({mediaSource:i,textController:f,eventBus:c})).initializeForFirstUse(h,e),n||(o.getBuffer()&&"function"==typeof o.getBuffer().initialize&&o.getBuffer().initialize(),n=!0),t(o)}catch(e){d.error(new w.Z(R.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,R.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+p)),r(e)}})},dischargePreBuffer:function(){},getBuffer:function(){return o},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:g,getMediaSource:function(){return i},appendInitSegmentFromCache:function(e){return null!==a.extract(h.id,e)},getIsBufferingCompleted:function(){return r},setIsBufferingCompleted:m,getIsPruningInProgress:function(){return!1},reset:function(e){c.off(u.Z.INIT_FRAGMENT_LOADED,y,t),!e&&o&&(o.abort(),o.reset(),o=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return r=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},n=!1,i=null,r=!1,a=M(s).getInstance(),c.on(u.Z.INIT_FRAGMENT_LOADED,y,t),t}Z.__dashjs_factory_name=j;var q=c.Z.getClassFactory(Z);function G(e){e=e||{};var t,r,n,i,a,c,h,p,g,m,y,v,_,b=this.context,w=(0,l.Z)(b).getInstance(),S=e.dashMetrics,T=e.mediaPlayerModel,A=e.fragmentModel,I=e.abrController,R=e.playbackController,N=e.textController,C=e.type,O=e.bufferController,P=e.representationController,x=e.settings;function D(){v=!0}function k(){v=!1}function M(e){if(!O.getIsBufferingCompleted()){L();var t=isNaN(e)?0:e;a=setTimeout(F,t)}}function L(){a&&(clearTimeout(a),a=null)}function F(){try{if(function(){try{return C===o.Z.TEXT&&!N.isTextEnabled()||R.isPaused()&&(!R.getStreamController().getInitialPlayback()||!R.getStreamController().getAutoPlay())&&!x.get().streaming.scheduling.scheduleWhilePaused}catch(e){return!1}}())return void L();if(function(){try{return!!v&&P.getCurrentRepresentationInfo()&&(isNaN(g)||m||(e=r.id,t=I.getMaxAllowedIndexFor(C,e),!(!isNaN(p)&&p==t||(n.info("Top quality "+C+" index has changed from "+p+" to "+t),p=t,0)))||function(){var e=P.getCurrentRepresentationInfo();return!C||!e||S.getCurrentBufferLevel(C)<U()}())}catch(e){return!1}var e,t}()){var e=!1;_&&(e=I.checkPlaybackQuality(C,r.id)),e||(i=P.getCurrentRepresentationInfo(),y||i.quality!==g||m?(m?(n.debug("Switch track for "+C+", representation id = "+i.id),m=!1):n.debug("Quality has changed, get init request for representationid = "+i.id),w.trigger(u.Z.INIT_FRAGMENT_NEEDED,{representationId:i.id,sender:t},{streamId:r.id,mediaType:C}),_=!1,y=!1):(n.debug("Media segment needed for ".concat(C," and stream id ").concat(r.id)),w.trigger(u.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:r.id,mediaType:C}),_=!0))}else M(R.getLowLatencyModeEnabled()?x.get().streaming.scheduling.lowLatencyTimeout:x.get().streaming.scheduling.defaultTimeout)}catch(e){M(R.getLowLatencyModeEnabled()?x.get().streaming.scheduling.lowLatencyTimeout:x.get().streaming.scheduling.defaultTimeout)}var i}function U(){var e=NaN,t=P.getCurrentRepresentationInfo();return C&&t?(e=C===o.Z.TEXT?function(){try{if(N.isTextEnabled()){var e=P.getCurrentRepresentationInfo();if(isNaN(e.fragmentDuration)){var t=S.getCurrentSchedulingInfo(s.Z.SCHEDULING_INFO);return t?t.duration:0}return e.fragmentDuration}return 0}catch(e){return 0}}():C===o.Z.AUDIO&&c?function(){try{var e=S.getCurrentBufferLevel(o.Z.VIDEO),t=P.getCurrentRepresentationInfo();return isNaN(t.fragmentDuration)?e+1:Math.max(e+1,t.fragmentDuration)}catch(e){return 0}}():function(){try{var e=P.getCurrentRepresentationInfo().mediaInfo.streamInfo;return I.isPlayingAtTopQuality(e)?e.manifestInfo.duration>=x.get().streaming.buffer.longFormContentDurationThreshold?x.get().streaming.buffer.bufferTimeAtTopQualityLongForm:x.get().streaming.buffer.bufferTimeAtTopQuality:T.getStableBufferTime()}catch(e){return T.getStableBufferTime()}}(),e):e}function B(){j(!0)}function j(e){if(R&&A){var t=A.getRequests({state:E.FRAGMENT_MODEL_EXECUTED,time:R.getTime(),threshold:0})[0];t&&R.getTime()>=t.startTime&&((!h.mediaInfo||t.mediaInfo.type===h.mediaInfo.type&&t.mediaInfo.index!==h.mediaInfo.index)&&e&&w.trigger(u.Z.TRACK_CHANGE_RENDERED,{mediaType:C,oldMediaInfo:h.mediaInfo,newMediaInfo:t.mediaInfo,streamId:r.id}),t.quality===h.quality&&t.adaptationIndex===h.adaptationIndex||!e||(n.debug("Quality change rendered for streamId ".concat(r.id," and type ").concat(C)),w.trigger(u.Z.QUALITY_CHANGE_RENDERED,{mediaType:C,oldQuality:h.quality,newQuality:t.quality,streamId:r.id})),h={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}}function Z(){A.abortRequests(),L()}function q(){x.get().streaming.scheduling.scheduleWhilePaused||M()}function G(e){S.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function z(){_=!0,i=0,g=NaN,h={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},p=NaN,m=!1,y=!1,v=!0}return t={initialize:function(e){c=e,w.on(u.Z.URL_RESOLUTION_FAILED,Z,t),w.on(d.Z.PLAYBACK_STARTED,q,t),w.on(d.Z.PLAYBACK_RATE_CHANGED,G,t),w.on(d.Z.PLAYBACK_TIME_UPDATED,B,t),w.on(d.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,D,t),w.on(d.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,k,t)},getType:function(){return C},getStreamId:function(){return r.id},setTimeToLoadDelay:function(e){i=e},getTimeToLoadDelay:function(){return i},setSwitchTrack:function(e){m=e},getSwitchTrack:function(){return m},startScheduleTimer:M,clearScheduleTimer:L,reset:function(){w.off(u.Z.URL_RESOLUTION_FAILED,Z,t),w.off(d.Z.PLAYBACK_STARTED,q,t),w.off(d.Z.PLAYBACK_RATE_CHANGED,G,t),w.off(d.Z.PLAYBACK_TIME_UPDATED,B,t),w.off(d.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,D,t),w.off(d.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,k,t),L(),j(!1),z(),r=null},getBufferTarget:U,getPlaybackController:function(){return R},setCheckPlaybackQuality:function(e){_=e},setInitSegmentRequired:function(e){y=e},setLastInitializedQuality:function(e){g=e}},n=(0,f.Z)(b).getInstance().getLogger(t),z(),r=e.streamInfo,t}G.__dashjs_factory_name="ScheduleController";var z=c.Z.getClassFactory(G),H=r(7387);function V(e){var t,r,n,i,a,s,l=(e=e||{}).eventBus,u=e.events,c=e.abrController,f=e.dashMetrics,h=e.playbackController,p=e.timelineConverter,g=e.type,m=e.streamInfo,y=e.dashConstants,v=e.segmentsController,_=e.isDynamic,b=e.adapter;function E(){return g}function w(){return n}function S(){return s}function T(){r=null,n=!0,i=[],a=null}function A(e){return new Promise(function(t,r){var n=e.hasInitialization(),o=e.hasSegments(),a=[];a.push(v.updateInitData(e,n)),a.push(v.updateSegmentData(e,o)),Promise.all(a).then(function(r){var n;r[0]&&!r[0].error&&(e=function(e,t){return t&&!t.error&&t.representation?t.representation:e}(e,r[0])),r[1]&&!r[1].error&&(e=function(e,t){if(t&&!t.error){var r,n,i,o,a=t.segments,s=[],l=0;for(r=0,n=a?a.length:0;r<n;r++)i=a[r],(o=(0,H.TJ)(p,_,e,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,l))&&(s.push(o),o=null,l++);return s.length>0&&(e.segments=s),e}}(e,r[1])),(n=e).mediaFinishedInformation=v.getMediaFinishedInformation(n),function(e){if(w()){var t,r,n=f.getCurrentManifestUpdate(),o=!1;if(n){for(var a=0;a<n.representationInfo.length;a++)if((t=n.representationInfo[a]).index===e.index&&t.mediaType===E()){o=!0;break}o||f.addManifestUpdateRepresentationInfo(e,E())}if(function(){for(var e=0,t=i.length;e<t;e++){var r=i[e].segmentInfoType;if(!i[e].hasInitialization()||(r===y.SEGMENT_BASE||r===y.BASE_URL)&&!i[e].segments)return!1}return!0}()){c.setPlaybackQuality(g,m,(r=s,i.indexOf(r)));var l=f.getCurrentDVRInfo(g);l&&f.updateManifestUpdateInfo({latency:l.range.end-h.getTime()}),f.getCurrentRepresentationSwitch(S().adaptation.type)||I(),N()}}}(e),t()}).catch(function(e){r(e)})})}function I(){!function(){if(!(c&&f&&h&&p))throw new Error(o.Z.MISSING_CONFIG_ERROR)}();var e=new Date,t=S(),r=1e3*h.getTime();t&&f.addRepresentationSwitch(t.adaptation.type,e,r,t.id),l.trigger(d.Z.REPRESENTATION_SWITCH,{mediaType:g,streamId:m.id,currentRepresentation:t,numberOfRepresentations:i.length},{streamId:m.id,mediaType:g})}function R(e){return null==e||e>=i.length?null:i[e]}function N(e){n=!1,l.trigger(u.DATA_UPDATE_COMPLETED,{data:r,currentRepresentation:s,error:e},{streamId:m.id,mediaType:g})}function C(e){s=e,a=b.convertRepresentationToRepresentationInfo(s)}function O(e){if(e.newDuration){var t=S();t&&t.adaptation.period&&(t.adaptation.period.duration=e.newDuration)}}return t={getStreamId:function(){return m.id},getType:E,getData:function(){return r},isUpdating:w,updateData:function(e,t,a,s,l){return new Promise(function(u,c){if(n=!0,i=t,r=e,C(R(l)),a!==o.Z.VIDEO&&a!==o.Z.AUDIO&&(a!==o.Z.TEXT||!s))return N(),void u();for(var f=[],d=0,h=i.length;d<h;d++){var p=i[d];f.push(A(p))}Promise.all(f).then(function(){C(R(l)),u()}).catch(function(e){c(e)})})},getCurrentRepresentation:S,getCurrentRepresentationInfo:function(){return a},getRepresentationForQuality:R,prepareQualityChange:function(e){C(R(e)),I()},reset:function(){l.off(d.Z.MANIFEST_VALIDITY_CHANGED,O,t),T()}},T(),l.on(d.Z.MANIFEST_VALIDITY_CHANGED,O,t),t}V.__dashjs_factory_name="RepresentationController";var W=c.Z.getClassFactory(V),Y=r(3106),K=r(9326),Q=r(7473),X=r(2594);function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var J=function e(){$(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};J.INITIAL_PLAYOUT_START_REASON="initial_playout",J.SEEK_START_REASON="seek",J.RESUME_FROM_PAUSE_START_REASON="resume",J.METRICS_COLLECTION_START_REASON="metrics_collection_start";var ee=function e(){$(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};ee.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",ee.REBUFFERING_REASON="rebuffering",ee.USER_REQUEST_STOP_REASON="user_request",ee.END_OF_PERIOD_STOP_REASON="end_of_period",ee.END_OF_CONTENT_STOP_REASON="end_of_content",ee.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",ee.FAILURE_STOP_REASON="failure";var te=r(7802);function re(){return{ntpToUTC:function(e){var t=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(t.getTime()+e).getTime()}}}re.__dashjs_factory_name="TimeUtils";var ne=c.Z.getSingletonFactory(re);function ie(e){e=e||{};var t,r,n,i,c,h,p,g,m,y,v,_,b,S,T,A=this.context,I=(0,l.Z)(A).getInstance(),N=e.streamInfo,O=e.type,P=e.errHandler,x=e.mimeType,D=e.timelineConverter,k=e.adapter,M=e.manifestModel,L=e.mediaPlayerModel,F=e.fragmentModel,U=e.abrController,j=e.playbackController,Z=e.mediaController,G=e.textController,H=e.dashMetrics,V=e.settings,$=e.boxParser,J=e.segmentBlacklistController;function re(){return N.id}function ie(){return O}function oe(){return k.getIsTextTrack(g.getData())}function ae(){c=[],i=null,S=0,m=!1,y=!1,v=!1,T=null}function se(e){return!isNaN(e)&&!isNaN(N.duration)&&isFinite(N.duration)&&e>=N.start+N.duration}function le(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.sender)if(j.getIsManifestUpdateInProgress())he();else if((!oe()||G.isTextEnabled())&&h&&e.representationId&&!h.appendInitSegmentFromCache(e.representationId)){var r=g.getCurrentRepresentation();if(0===r.range)return void ue();var n=_?_.getInitRequest(i,r):null;n?F.executeRequest(n):t&&(p.setInitSegmentRequired(!0),he())}}function ue(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(j.getIsManifestUpdateInProgress()||h.getIsPruningInProgress())he();else{var r=de();r?(m=!1,y=!1,ce(r)):fe(t)}}function ce(e){isNaN(e.startTime+e.duration)||(S=e.startTime+e.duration),e.delayLoadingTime=(new Date).getTime()+p.getTimeToLoadDelay(),p.setTimeToLoadDelay(0),function(e){var t=e.url;return e.range&&(t=t.concat("_",e.range)),J.contains(t)}(e)?(r.warn("Fragment request url ".concat(e.url," for stream id ").concat(N.id," and media type ").concat(O," is on the ignore list and will be skipped")),he()):(r.debug("Next fragment request url for stream id ".concat(N.id," and media type ").concat(O," is ").concat(e.url)),F.executeRequest(e))}function fe(e){var t,o=g.getCurrentRepresentation();if(!V.get().streaming.gaps.enableSeekFix||!m&&0!==j.getTime()||(n?n&&o.segmentInfoType===a.Z.SEGMENT_TIMELINE&&(t=_.getValidTimeAheadOfTargetTime(S,i,o,V.get().streaming.gaps.threshold)):t=_.getValidTimeAheadOfTargetTime(S,i,o,V.get().streaming.gaps.threshold),isNaN(t)||t===S)){if(_.isLastSegmentRequested(o,S)){var s=_.getCurrentIndex();return r.debug("Segment requesting for stream ".concat(N.id," has finished")),I.trigger(u.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:s},{streamId:N.id,mediaType:O}),h.segmentRequestingCompleted(s),void p.clearScheduleTimer()}e&&he()}else j.isSeeking()||0===j.getTime()?(r.warn("Adjusting playback time ".concat(t," because of gap in the manifest. Seeking by ").concat(t-S)),j.seek(t,!1,!1)):(r.warn("Adjusting buffering time ".concat(t," because of gap in the manifest. Adjusting time by ").concat(t-S)),Me(t),e&&he())}function de(){var e,t=Ne();if(isNaN(S)||ie()===o.Z.TEXT&&!G.isTextEnabled())return null;if(_){var r=g&&t?g.getRepresentationForQuality(t.quality):null;e=m?_.getSegmentRequestForTime(i,r,S):y?_.repeatSegmentRequest(i,r):_.getNextSegmentRequest(i,r)}return e}function he(){p.startScheduleTimer(j.getLowLatencyModeEnabled()?V.get().streaming.scheduling.lowLatencyTimeout:V.get().streaming.scheduling.defaultTimeout)}function pe(e){e.error||h.getIsBufferingCompleted()||h.updateBufferTimestampOffset(e.currentRepresentation)}function ge(e){H.addBufferState(O,e.state,p.getBufferTarget()),e.state!==s.Z.BUFFER_EMPTY||j.isSeeking()||(r.info("Buffer is empty! Stalling!"),H.pushPlayListTraceMetrics(new Date,ee.REBUFFERING_REASON))}function me(e){F.syncExecutedRequestsWithBufferedRange(h.getBuffer().getAllBufferRanges(),N.duration),e.quotaExceeded&&e.from>j.getTime()&&Me(e.from),e.hasEnoughSpaceToAppend&&e.quotaExceeded&&p.startScheduleTimer()}function ye(e){if(e&&e.lastRequestAppended&&e.lastRequestAppended.url){var t=e.lastRequestAppended.url;e.lastRequestAppended.range&&(t=t.concat("_",e.lastRequestAppended.range)),r.warn("Blacklisting segment with url ".concat(t)),J.add(t)}}function ve(e){if(r.debug("Appended bytes for ".concat(e.mediaType," and stream id ").concat(e.streamId)),e.segmentType===C.w.INIT_SEGMENT_TYPE){var t=e.quality;p.setLastInitializedQuality(t),r.info("["+O+"] lastInitializedRepresentationInfo changed to "+e.quality)}T?_e(T):p.startScheduleTimer(0)}function _e(e){var t=F.getRequests({state:E.FRAGMENT_MODEL_LOADING});if(t&&t.length>0)return r.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(T=e);h.updateBufferTimestampOffset(e).then(function(){p.setCheckPlaybackQuality(!1),i.segmentAlignment||i.subSegmentAlignment?p.startScheduleTimer():De(),T=null,v=!1}).catch(function(){T=null,v=!1})}function be(e){r.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),j.isSeeking()||p.getSwitchTrack()||v||(r.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),e.request&&e.request.isInitializationRequest()?p.setInitSegmentRequired(!0):Me(e.request.startTime+e.request.duration/2),p.startScheduleTimer(0))}function Ee(e){r.info("OnFragmentLoadingCompleted for stream id "+N.id+" and media type "+O+" - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),oe()&&p.startScheduleTimer(0),e.error&&e.request.serviceLocation&&function(e){r.info("Fragment loading completed with an error"),e&&e.request&&e.request.type&&(e.request.type===C.w.INIT_SEGMENT_TYPE?le({representationId:e.request.representationId,sender:{}},!1):e.request.type===C.w.MEDIA_SEGMENT_TYPE&&(Me(e.request.startTime+e.request.duration/2),ue({},!1)))}(e)}function we(){Me(j.getTime()),Re().startScheduleTimer()}function Se(e){var t=e.currentTrackInfo;if(t){var r=c.find(function(e){return e.index===t.index&&e.lang===t.lang});r&&Ie(r).then(function(){h.setIsBufferingCompleted(!1),Me(j.getTime()),p.setInitSegmentRequired(!0),p.startScheduleTimer()})}}function Te(e){Me(e.quotaExceededTime),p.clearScheduleTimer()}function Ae(){return h?h.getBuffer():null}function Ie(e){e===i||e&&i&&e.type!==i.type||(i=e);var t=k.getRealAdaptation(N,i),r=k.getVoRepresentations(i);if(g){var a,s=g.getData(),l=U.getMaxAllowedIndexFor(O,N.id),u=U.getMinAllowedIndexFor(O,N.id),c=null;return null!==s&&s.id===t.id||O===o.Z.TEXT?a=U.getQualityFor(O,N.id):(c=U.getThroughputHistory().getAverageThroughput(O,n)||U.getInitialBitrateFor(O,N.id),a=U.getQualityForBitrate(i,c,N.id)),void 0!==u&&a<u&&(a=u),a>l&&(a=l),g.updateData(t,r,O,i.isFragmented,a)}return Promise.resolve()}function Re(){return p}function Ne(e){var t;return void 0!==e?((0,Y.SE)(e),t=g?g.getRepresentationForQuality(e):null):t=g?g.getCurrentRepresentation():null,k.convertRepresentationToRepresentationInfo(t)}function Ce(){return!!h&&h.getIsBufferingCompleted()}function Oe(e){if(V.get().streaming.enableManifestTimescaleMismatchFix){var t=e.chunk,r=t.bytes,n=Ne(t.quality),i=g&&n?g.getRepresentationForQuality(n.quality):null;n&&i&&(i.timescale=$.getMediaTimescaleFromMoov(r))}}function Pe(e){var t=e.chunk,r=t.bytes,n=t.quality,i=Ne(n),o=g&&i?g.getRepresentationForQuality(i.quality):null;if(i&&o){var s;if(V.get().streaming.parseInbandPrft&&e.request.type===C.w.MEDIA_SEGMENT_TYPE){var l=function(e,t){var r=e.getBoxes("prft"),n=[];return r.forEach(function(e){n.push(function(e,t){var r="unknown";switch(e.flags){case 0:r=a.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:r=a.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:r=a.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var n=1e3*e.ntp_timestamp_sec+e.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:r,ntpTimestamp:n=ne(A).getInstance().ntpToUTC(n),mediaTime:e.media_time/t}}(e,t))}),n}(s=s||$.parse(r),o.timescale);l&&l.length&&I.trigger(d.Z.INBAND_PRFT,{data:l},{streamId:N.id,mediaType:O})}var c=k.getEventsFor(i.mediaInfo,null,N),f=k.getEventsFor(i,o,N);if(c&&c.length>0||f&&f.length>0){var h=F.getRequests({state:E.FRAGMENT_MODEL_EXECUTED,quality:n,index:t.index})[0],p=function(e,t,r,n){try{for(var i={},o=[],a=r.concat(n),s=0,l=a.length;s<l;s++)i[a[s].schemeIdUri+"/"+a[s].value]=a[s];var u=e.getBoxes("emsg");if(!u||0===u.length)return o;for(var c=e.getBox("sidx"),f=!c||isNaN(c.earliest_presentation_time)||isNaN(c.timescale)?t&&!isNaN(t.mediaStartTime)?t.mediaStartTime:0:c.earliest_presentation_time/c.timescale,d=Math.max(f,0),h=g.getCurrentRepresentation(),p=0,m=u.length;p<m;p++){var y=k.getEvent(u[p],i,d,h);y&&o.push(y)}return o}catch(e){return[]}}(s=s||$.parse(r),h,c,f);I.trigger(u.Z.INBAND_EVENTS,{events:p},{streamId:N.id})}}}function xe(){var e=j.getTime();V.get().streaming.buffer.flushBufferAtTrackSwitch&&j.seek(e+.001,!1,!0),Me(e),h.setSeekTarget(e),p.startScheduleTimer()}function De(){var e=j.getTime(),t=h.getContinuousBufferTimeForTargetTime(e);Me(isNaN(t)?e:t),p.startScheduleTimer()}function ke(e){e&&!isNaN(e.time)&&(Me(e.time),h.setSeekTarget(e.time))}function Me(e){S=e,m=!0}return t={initialize:function(r,i,s){b=(0,te.Z)(A).create({events:u.Z,eventBus:I,streamInfo:N,timelineConverter:D,dashConstants:a.Z,segmentBaseController:e.segmentBaseController,type:O}),_=(0,K.Z)(A).create({streamInfo:N,type:O,timelineConverter:D,dashMetrics:H,mediaPlayerModel:L,baseURLController:e.baseURLController,errHandler:P,segmentsController:b,settings:V,boxParser:$,events:u.Z,eventBus:I,errors:R,debug:(0,f.Z)(A).getInstance(),requestModifier:(0,Q.Z)(A).getInstance(),dashConstants:a.Z,constants:o.Z,urlUtils:(0,X.Z)(A).getInstance()}),n=N.manifestInfo.isDynamic,_.initialize(n),U.registerStreamType(O,t),g=W(A).create({streamInfo:N,type:O,abrController:U,dashMetrics:H,playbackController:j,timelineConverter:D,dashConstants:a.Z,events:u.Z,eventBus:I,errors:R,isDynamic:n,adapter:k,segmentsController:b}),h=function(e,t){return e?e!==o.Z.TEXT||t?B(A).create({streamInfo:N,type:e,mediaPlayerModel:L,manifestModel:M,fragmentModel:F,errHandler:P,mediaController:Z,representationController:g,adapter:k,textController:G,abrController:U,playbackController:j,settings:V}):q(A).create({streamInfo:N,type:e,mimeType:x,fragmentModel:F,textController:G,errHandler:P,settings:V}):(P.error(new w.Z(R.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,R.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(O,s),h&&h.initialize(r),(p=z(A).create({streamInfo:N,type:O,mimeType:x,adapter:k,dashMetrics:H,mediaPlayerModel:L,fragmentModel:F,abrController:U,playbackController:j,textController:G,mediaController:Z,bufferController:h,representationController:g,settings:V})).initialize(i),S=0,m=!1,y=!1},getStreamId:re,getType:ie,isUpdating:function(){return!!g&&g.isUpdating()},getBufferController:function(){return h},dischargePreBuffer:function(){h.dischargePreBuffer()},getFragmentModel:function(){return F},getScheduleController:Re,getRepresentationController:function(){return g},getRepresentationInfo:Ne,getBufferLevel:function(){return h?h.getBufferLevel():0},isBufferingCompleted:Ce,createBufferSinks:function(e){var t=Ae();return t?Promise.resolve(t):h?h.createBufferSink(i,e):Promise.resolve(null)},updateStreamInfo:function(e){return N=e,Ce()?Promise.resolve():h.updateAppendWindow()},getStreamInfo:function(){return N},selectMediaInfo:Ie,clearMediaInfoArray:function(){c=[]},addMediaInfo:function(e){-1===c.indexOf(e)&&c.push(e)},prepareTrackSwitch:function(){return new Promise(function(e){r.debug("Preparing track switch for type ".concat(O));var t=O===o.Z.TEXT||V.get().streaming.trackSwitchMode[O]===o.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&j.getTimeToStreamEnd(N)>V.get().streaming.buffer.stallThreshold;if(h.getIsBufferingCompleted()&&!t)return h.prepareForNonReplacementTrackSwitch(i.codec).then(function(){I.trigger(u.Z.BUFFERING_COMPLETED,{},{streamId:N.id,mediaType:O})}).catch(function(){I.trigger(u.Z.BUFFERING_COMPLETED,{},{streamId:N.id,mediaType:O})}),void e();p.clearScheduleTimer(),p.setSwitchTrack(!0),t?(I.trigger(u.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:O,streamId:N.id},{mediaType:O,streamId:N.id}),F.abortRequests(),h.prepareForReplacementTrackSwitch(i.codec).then(function(){var e=Ne();return h.updateBufferTimestampOffset(e)}).then(function(){xe(),e()}).catch(function(){xe(),e()})):h.prepareForNonReplacementTrackSwitch(i.codec).then(function(){De(),e()}).catch(function(){De(),e()})})},prepareQualityChange:function(e){T&&r.warn("Canceling queued representation switch to ".concat(T.quality," for ").concat(O)),r.debug("Preparing quality switch for type ".concat(O));var t=e.newQuality;v=!0,p.clearScheduleTimer(),g.prepareQualityChange(t);var n=Ne(t);e.reason&&e.reason.forceReplace?function(e){F.abortRequests(),I.trigger(u.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:O,streamId:N.id},{mediaType:O,streamId:N.id}),p.setCheckPlaybackQuality(!1),h.prepareForForceReplacementQualitySwitch(e).then(function(){xe(),T=null,v=!1}).catch(function(){xe(),T=null,v=!1})}(n):e&&e.reason&&e.reason.forceAbandon?function(e){h.updateBufferTimestampOffset(e).then(function(){F.abortRequests(),y=!0,p.setCheckPlaybackQuality(!1),p.startScheduleTimer(),v=!1,T=null}).catch(function(){T=null,v=!1})}(n):V.get().streaming.buffer.fastSwitchEnabled?function(e){var t=j.getTime(),r=1.5*(isNaN(e.fragmentDuration)?1:e.fragmentDuration),n=F.getRequests({state:E.FRAGMENT_MODEL_EXECUTED,time:t+r,threshold:0})[0];if(n&&!oe()){var i=h.getBufferLevel(),o=U.getAbandonmentStateFor(N.id,O);n.quality<e.quality&&i>=r&&o!==s.Z.ABANDON_LOAD?h.updateBufferTimestampOffset(e).then(function(){F.abortRequests(),Me(t+r),p.setCheckPlaybackQuality(!1),p.startScheduleTimer(),v=!1}).catch(function(){v=!1}):_e(e)}else _e(e)}(n):_e(n),H.pushPlayListTraceMetrics(new Date,ee.REPRESENTATION_SWITCH_STOP_REASON),H.createPlaylistTraceMetrics(n.id,1e3*j.getTime(),j.getPlaybackRate())},getMediaInfo:function(){return i},getMediaSource:function(){return h.getMediaSource()},setMediaSource:function(e){return h.setMediaSource(e,i)},getBuffer:Ae,setExplicitBufferingTime:Me,finalisePlayList:function(e,t){H.pushPlayListTraceMetrics(e,t)},probeNextRequest:function(){var e=Ne(),t=g&&e?g.getRepresentationForQuality(e.quality):null;return _.getNextSegmentRequestIdempotent(i,t)},prepareInnerPeriodPlaybackSeeking:function(e){return new Promise(function(t){if(h.hasBufferAtTime(e.seekTime))return h.pruneBuffer(),se(h.getContinuousBufferTimeForTargetTime(e.seekTime))&&h.setIsBufferingCompleted(!0),void t();p.clearScheduleTimer(),F.abortRequests(),h.prepareForPlaybackSeek().then(function(){var t=h.getAllRangesWithSafetyFactor(e.seekTime);return h.clearBuffers(t)}).then(function(){var r=h.getContinuousBufferTimeForTargetTime(e.seekTime);if(se(r))h.setIsBufferingCompleted(!0),t();else{var n=isNaN(r)?e.seekTime:r;Me(n),h.setSeekTarget(n);var i=[];i.push(h.updateAppendWindow());var o=Ne();i.push(h.updateBufferTimestampOffset(o)),Promise.all(i).then(function(){p.setInitSegmentRequired(!0),p.setCheckPlaybackQuality(!1),p.startScheduleTimer(),t()})}}).catch(function(e){r.error(e)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(e,t){try{p.clearScheduleTimer(),F.abortRequests(),h.prepareForPlaybackSeek().then(function(){return h.pruneAllSafely()}).then(function(){e()})}catch(e){t(e)}})},reset:function(e,r){_&&_.reset(),h&&(h.reset(e,r),h=null),p&&(p.reset(),p=null),g&&(g.reset(),g=null),b&&(b=null),U&&U.unRegisterStreamType(re(),O),I.off(u.Z.DATA_UPDATE_COMPLETED,pe,t),I.off(u.Z.INIT_FRAGMENT_NEEDED,le,t),I.off(u.Z.MEDIA_FRAGMENT_NEEDED,ue,t),I.off(u.Z.INIT_FRAGMENT_LOADED,Oe,t),I.off(u.Z.MEDIA_FRAGMENT_LOADED,Pe,t),I.off(u.Z.BUFFER_LEVEL_STATE_CHANGED,ge,t),I.off(u.Z.BUFFER_CLEARED,me,t),I.off(u.Z.SEEK_TARGET,ke,t),I.off(u.Z.FRAGMENT_LOADING_ABANDONED,be,t),I.off(u.Z.FRAGMENT_LOADING_COMPLETED,Ee,t),I.off(u.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,we,t),I.off(u.Z.SET_NON_FRAGMENTED_TEXT,Se,t),I.off(u.Z.QUOTA_EXCEEDED,Te,t),I.off(u.Z.SOURCE_BUFFER_ERROR,ye,t),I.off(u.Z.BYTES_APPENDED_END_FRAGMENT,ve,t),ae(),O=null,N=null}},r=(0,f.Z)(A).getInstance().getLogger(t),ae(),I.on(u.Z.DATA_UPDATE_COMPLETED,pe,t,{priority:l.Z.EVENT_PRIORITY_HIGH}),I.on(u.Z.INIT_FRAGMENT_NEEDED,le,t),I.on(u.Z.MEDIA_FRAGMENT_NEEDED,ue,t),I.on(u.Z.INIT_FRAGMENT_LOADED,Oe,t),I.on(u.Z.MEDIA_FRAGMENT_LOADED,Pe,t),I.on(u.Z.BUFFER_LEVEL_STATE_CHANGED,ge,t),I.on(u.Z.BUFFER_CLEARED,me,t),I.on(u.Z.SEEK_TARGET,ke,t),I.on(u.Z.FRAGMENT_LOADING_ABANDONED,be,t),I.on(u.Z.FRAGMENT_LOADING_COMPLETED,Ee,t),I.on(u.Z.QUOTA_EXCEEDED,Te,t),I.on(u.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,we,t),I.on(u.Z.SET_NON_FRAGMENTED_TEXT,Se,t),I.on(u.Z.SOURCE_BUFFER_ERROR,ye,t),I.on(u.Z.BYTES_APPENDED_END_FRAGMENT,ve,t),t}ie.__dashjs_factory_name="StreamProcessor";var oe=c.Z.getClassFactory(ie),ae=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},se=r(9032);function le(e,t){if(e){if("string"==typeof e)return ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ce(e){e=e||{};var t,r,n=this.context,i=e.requestModifier,a=e.lowLatencyThroughputModel,s=e.boxParser,l=(0,N.Z)(n).getInstance();function u(e){var t,n=new Date,u=e.request,d=new Headers;if(u.range&&d.append("Range","bytes="+u.range),e.headers)for(var h in e.headers){var p=e.headers[h];p&&d.append(h,p)}u.requestStartDate||(u.requestStartDate=n),i&&i.modifyRequestHeader&&i.modifyRequestHeader({setRequestHeader:function(e,t){d.append(e,t)}},{url:e.url}),"function"==typeof window.AbortController&&(t=new AbortController,e.abortController=t,t.signal.onabort=e.onabort);var g={method:e.method,headers:d,credentials:e.withCredentials?"include":void 0,signal:t?t.signal:void 0},m=l.get().streaming.abr.fetchThroughputCalculationMode,y=Date.now(),v=0;new Promise(function(e){if(m===o.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&a&&(v=a.getThroughputCapacityDelayMS(u,1e3*r.getCurrentBufferLevel(u.mediaType))))return setTimeout(e,v);e()}).then(function(){var t=Date.now();fetch(e.url,g).then(function(n){e.response||(e.response={}),e.response.status=n.status,e.response.statusText=n.statusText,e.response.responseURL=n.url,n.ok||e.onerror();var i,l="",d=function(e){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=le(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(a)throw i}}}}(n.headers.keys());try{for(d.s();!(i=d.n()).done;){var h=i.value;l+=h+": "+n.headers.get(h)+"\r\n"}}catch(e){d.e(e)}finally{d.f()}if(e.response.responseHeaders=l,!n.body)return n.arrayBuffer().then(function(t){e.response.response=t;var r={loaded:t.byteLength,total:t.byteLength,stream:!1};e.progress(r),e.onload(),e.onend()});var p,g,_,b,E=parseInt(n.headers.get("Content-Length"),10),w=0,S=!1,T=new Uint8Array,A=0;if(m===o.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&a){var I=t,R=0,N=(b=2,function(e){if(Array.isArray(e))return e}(_=n.body.tee())||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(_,b)||le(_,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),C=N[0],O=N[1];p=C.getReader(),g=[],p.read().then(function n(i){var o=i.value,s=i.done;if(R=Date.now(),o&&o.length){var c=R-I,f=o.length;g.push({chunkDownloadTimeRelativeMS:R-t,chunkDownloadDurationMS:c,chunkBytes:f,kbps:Math.round(8*f/(c/1e3)),bufferLevel:r.getCurrentBufferLevel(u.mediaType)})}if(s){var d=R-t,h=g.reduce(function(e,t){return e+t.chunkBytes},0);return a.addMeasurement(u,d,g,y,v,l),void e.progress({loaded:h,total:h,lengthComputable:!0,time:a.getEstimatedDownloadDurationMS(u),stream:!0})}return I=Date.now(),p.read().then(n)}),e.reader=O.getReader()}else e.reader=n.body.getReader();var P=[],x=[],D=[],k=!0;c(e,function t(r){var n=r.value;if(r.done){if(T){if(m!==o.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var i=null,a=null;m===o.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(i=function(e,t){try{var r,n;r=e.filter(function(t,r){return r<e.length-1}),n=t.filter(function(e,r){return r<t.length-1});var i=[];if(r.length>1){for(var o=0,a=0,s=0;s<r.length;s++)if(r[s]&&n[s]){var l=n[s].ts-r[s].ts;if(l>1)i.push(8*n[s].bytes/l),a=0;else{0===a&&(a=r[s].ts,o=0);var u=n[s].ts-a;u>1?(o+=n[s].bytes,i.push(8*o/u),a=0):o+=n[s].bytes}}if(i.length>0)return i.reduce(function(e,t){return e+t},0)/i.length}return null}catch(e){return null}}(x,D),i&&(a=8*w/i)):m===o.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(a=f(P,w)),e.progress({loaded:w,total:isNaN(E)?w:E,lengthComputable:!0,time:a,stream:!0})}e.response.response=T.buffer}return e.onload(),void e.onend()}if(n&&n.length>0){T=function(e,t){if(0===e.length)return t;var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(T,n),w+=n.length,P.push({ts:Date.now(),bytes:n.length}),m===o.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&k&&s.findLastTopIsoBoxCompleted(["moof"],T,A).found&&(k=!1,x.push({ts:performance.now(),bytes:n.length}));var l=s.findLastTopIsoBoxCompleted(["moov","mdat"],T,A);if(l.found){var u,d=l.lastCompletedOffset+l.size;m!==o.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||k||(k=!0,D.push({ts:performance.now(),bytes:T.length})),d===T.length?(u=T,T=new Uint8Array):(u=new Uint8Array(T.subarray(0,d)),T=T.subarray(d)),e.progress({data:u.buffer,lengthComputable:!1,noTrace:!0}),A=0}else A=l.lastCompletedOffset,S||(e.progress({lengthComputable:!1,noTrace:!0}),S=!0)}c(e,t)})}).catch(function(t){e.onerror&&e.onerror(t)})})}function c(e,t){e.reader.read().then(t).catch(function(t){e.onerror&&200===e.response.status&&e.onerror(t)})}function f(e,t){try{if((e=e.filter(function(r){return r.bytes>t/4/e.length})).length>1){var r=0,n=(e[e.length-1].ts-e[0].ts)/e.length;return e.forEach(function(t,i){var o=e[i+1];if(o){var a=o.ts-t.ts;r+=a<n?a:0}}),r}return null}catch(e){return null}}return t={load:function(e){i&&i.modifyRequest?(0,Q.k)(e,i).then(function(){return u(e)}):u(e)},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel(),e.onabort()}catch(e){}},calculateDownloadedTime:f,setup:function(e){r=e.dashMetrics}},t}ce.__dashjs_factory_name="FetchLoader";var fe=c.Z.getClassFactory(ce),de=r(1180);function he(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var t;return(t=[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==a.Z.BASE_URL&&this.segmentInfoType!==a.Z.SEGMENT_BASE&&!this.indexRange}}])&&he(e.prototype,t),e}(),ge=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.period=null,this.index=-1,this.type=null},me=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};me.DEFAULT_ID="defaultId";var ye=me,ve=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},_e=r(2610),be=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},Ee=function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t||"",this.serviceLocation=r||t||"",this.dvbPriority=n||1,this.dvbWeight=i||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};Ee.DEFAULT_DVB_PRIORITY=1,Ee.DEFAULT_DVB_WEIGHT=1;var we=Ee,Se=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},Te=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},Ae=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Re=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri=null,this.value=null,this.id=null}var t;return(t=[{key:"init",value:function(e){return e&&(this.schemeIdUri=e.schemeIdUri?e.schemeIdUri:null,this.value=e.value?e.value:null,this.id=e.id?e.id:null,e[a.Z.DVB_URL]&&(this.dvbUrl=e[a.Z.DVB_URL]),e[a.Z.DVB_MIMETYPE]&&(this.dvbMimeType=e[a.Z.DVB_MIMETYPE]),e[a.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=e[a.Z.DVB_FONTFAMILY])),this}}])&&Ie(e.prototype,t),e}(),Ne=r(3101),Ce=r.n(Ne);function Oe(){return{areEqual:function(e,t){return Ce()(e,t)}}}Oe.__dashjs_factory_name="ObjectUtils";var Pe=c.Z.getSingletonFactory(Oe),xe=r(7803),De=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t||"",this.serviceLocation=r||null,this.queryParams={}},ke=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t||"",this.serviceLocation=r||null,this.ttl=n||NaN,this.queryParams={}};function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach(function(t){Fe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ue(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=Be(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Be(e,t){if(e){if("string"==typeof e)return je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?je(e,t):void 0}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ze(){var e,t,r,n,i=this.context,s=(0,X.Z)(i).getInstance(),l=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function u(e,t){if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.Representation_asArray&&e.Representation_asArray.length){var r=_(e.Representation_asArray[0]);if(r&&r.length>0&&xe.Y.indexOf(r[0].schemeIdUri)>=0)return t===o.Z.IMAGE}if(e.ContentComponent_asArray&&e.ContentComponent_asArray.length>0){if(e.ContentComponent_asArray.length>1)return t===o.Z.MUXED;if(e.ContentComponent_asArray[0].contentType===t)return!0}var n=t===o.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(t);if(e.Representation_asArray&&e.Representation_asArray.length){var i=e.Representation_asArray[0].codecs;if(n.test(i))return!0}if(e.hasOwnProperty(a.Z.MIME_TYPE))return n.test(e.mimeType);if(e.Representation_asArray)for(var s,l=0;l<e.Representation_asArray.length;l++)if((s=e.Representation_asArray[l]).hasOwnProperty(a.Z.MIME_TYPE))return n.test(s.mimeType);return!1}function c(e){if(!e)throw new Error("adaptation is not defined");if(e.hasOwnProperty(a.Z.SEGMENT_TEMPLATE)||e.hasOwnProperty(a.Z.SEGMENT_TIMELINE)||e.hasOwnProperty(a.Z.SEGMENT_LIST)||e.hasOwnProperty(a.Z.SEGMENT_BASE))return!0;if(e.Representation_asArray&&e.Representation_asArray.length>0){var t=e.Representation_asArray[0];if(t.hasOwnProperty(a.Z.SEGMENT_TEMPLATE)||t.hasOwnProperty(a.Z.SEGMENT_TIMELINE)||t.hasOwnProperty(a.Z.SEGMENT_LIST)||t.hasOwnProperty(a.Z.SEGMENT_BASE))return!0}return!1}function d(e){return u(e,o.Z.VIDEO)}function h(e){return u(e,o.Z.TEXT)}function p(e){return u(e,o.Z.IMAGE)}function g(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort(function(e,t){return e.bandwidth-t.bandwidth}),e}function m(e,t){return e&&e.Period_asArray&&l(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function y(e){return e&&e.Period_asArray?e.Period_asArray:[]}function v(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===a.Z.DYNAMIC),t}function _(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null}function b(e){if(!e||!e.S_asArray)return NaN;var t=e.S_asArray[0],r=e.S_asArray[1];return t.hasOwnProperty("d")?t.d:r.t-t.t}function E(e,t){if(!e)throw new Error("Period cannot be null or undefined");var r=ye.DEFAULT_ID+"_"+t;return e.hasOwnProperty(a.Z.ID)&&e.id.length>0&&"__proto__"!==e.id&&(r=e.id),r}function S(e,t,r){var n,i=[];if(!e)return i;for(n=0;n<e.length;n++){var s=new Se;if(s.timescale=1,s.representation=t,!e[n].hasOwnProperty(o.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");s.schemeIdUri=e[n].schemeIdUri,e[n].hasOwnProperty(a.Z.TIMESCALE)&&(s.timescale=e[n].timescale),e[n].hasOwnProperty(a.Z.VALUE)&&(s.value=e[n].value),i.push(s),s.period=r}return i}function T(e){var t=[],r=e.BaseURL_asArray||[e.baseUri],n=!1;return r.some(function(r){if(r){var i=new we,o=r.__text||r;return s.isRelative(o)&&(n=!0,e.baseUri&&(o=s.resolve(o,e.baseUri))),i.url=o,r.hasOwnProperty(a.Z.SERVICE_LOCATION)&&r.serviceLocation.length?i.serviceLocation=r.serviceLocation:i.serviceLocation=o,r.hasOwnProperty(a.Z.DVB_PRIORITY)&&(i.dvbPriority=r[a.Z.DVB_PRIORITY]),r.hasOwnProperty(a.Z.DVB_WEIGHT)&&(i.dvbWeight=r[a.Z.DVB_WEIGHT]),r.hasOwnProperty(a.Z.AVAILABILITY_TIME_OFFSET)&&(i.availabilityTimeOffset=r[a.Z.AVAILABILITY_TIME_OFFSET]),r.hasOwnProperty(a.Z.AVAILABILITY_TIME_COMPLETE)&&(i.availabilityTimeComplete="false"!==r[a.Z.AVAILABILITY_TIME_COMPLETE]),t.push(i),n}}),t}function A(e){var t=new Ae;return t.serverUrl=e.__text,e.hasOwnProperty(a.Z.DEFAULT_SERVICE_LOCATION)&&(t.defaultServiceLocation=e[a.Z.DEFAULT_SERVICE_LOCATION],t.defaultServiceLocationArray=t.defaultServiceLocation.split(" ")),e.hasOwnProperty(a.Z.QUERY_BEFORE_START)&&(t.queryBeforeStart="true"===e[a.Z.QUERY_BEFORE_START].toLowerCase()),e.hasOwnProperty(a.Z.CLIENT_REQUIREMENT)&&(t.clientRequirement="false"!==e[a.Z.CLIENT_REQUIREMENT].toLowerCase()),t}return e={getIsTypeOf:u,getIsText:h,getIsFragmented:c,getProducerReferenceTimesForAdaptation:function(e){var t=e&&e.hasOwnProperty(a.Z.PRODUCERREFERENCETIME_ASARRAY)?e[a.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(e&&e.hasOwnProperty(a.Z.REPRESENTATION_ASARRAY)?e[a.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(e){var r;e.hasOwnProperty(a.Z.PRODUCERREFERENCETIME_ASARRAY)&&t.push.apply(t,function(e){if(Array.isArray(e))return je(e)}(r=e[a.Z.PRODUCERREFERENCETIME_ASARRAY])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(r)||Be(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var r=[];return t.forEach(function(e){var t=new Te;e.hasOwnProperty(a.Z.ID)&&(t[a.Z.ID]=e[a.Z.ID],e.hasOwnProperty(a.Z.WALL_CLOCK_TIME)&&(t[a.Z.WALL_CLOCK_TIME]=e[a.Z.WALL_CLOCK_TIME],e.hasOwnProperty(a.Z.PRESENTATION_TIME)&&(t[a.Z.PRESENTATION_TIME]=e[a.Z.PRESENTATION_TIME],e.hasOwnProperty(a.Z.INBAND)&&(t[a.Z.INBAND]="false"!==e[a.Z.INBAND]),e.hasOwnProperty(a.Z.TYPE)&&(t[a.Z.TYPE]=e[a.Z.TYPE]),r.push(t))))}),r},getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(a.Z.LANG)&&(t=e.lang),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(a.Z.VIEWPOINT_ASARRAY)&&e[a.Z.VIEWPOINT_ASARRAY].length?e[a.Z.VIEWPOINT_ASARRAY].map(function(e){return(new Re).init(e)}):[]},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(a.Z.ROLE_ASARRAY)&&e[a.Z.ROLE_ASARRAY].length?e[a.Z.ROLE_ASARRAY].map(function(e){return(new Re).init(e)}):[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(a.Z.ACCESSIBILITY_ASARRAY)&&e[a.Z.ACCESSIBILITY_ASARRAY].length?e[a.Z.ACCESSIBILITY_ASARRAY].map(function(e){return(new Re).init(e)}):[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(a.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&e[a.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?e[a.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(e){return(new Re).init(e)}):[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(a.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&e[a.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?e[a.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(e){return(new Re).init(e)}):[]},getAdaptationForIndex:function(e,t,r){var n=m(t,r);return n.length>0&&l(e)?n[e]:null},getIndexForAdaptation:function(e,t,r){if(!e)return-1;for(var n=m(t,r),o=0;o<n.length;o++)if(Pe(i).getInstance().areEqual(n[o],e))return o;return-1},getAdaptationForId:function(e,t,r){var n,i,o=m(t,r);for(n=0,i=o.length;n<i;n++)if(o[n].hasOwnProperty(a.Z.ID)&&o[n].id===e)return o[n];return null},getAdaptationsForType:function(e,t,r){var n,i,o=m(e,t),a=[];for(n=0,i=o.length;n<i;n++)u(o[n],r)&&a.push(g(o[n]));return a},getRealPeriods:y,getRealPeriodForIndex:function(e,t){var r=y(t);return r.length>0&&l(e)?r[e]:null},getCodec:function(e,t,r){var n=null;if(e&&e.Representation_asArray&&e.Representation_asArray.length>0){var i=l(t)&&t>=0&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0];i&&(n=i.mimeType+';codecs="'+i.codecs+'"',r&&void 0!==i.width&&(n+=';width="'+i.width+'";height="'+i.height+'"'))}return n&&(n=n.replace(/\sprofiles=[^;]*/g,"")),n},getSelectionPriority:function(e){try{var t=e&&void 0!==e.selectionPriority?parseInt(e.selectionPriority):1;return isNaN(t)?1:t}catch(e){return 1}},getMimeType:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(a.Z.CENC_DEFAULT_KID)?e[a.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return[];for(var t=[],r=0;r<e.Label_asArray.length;r++)t.push({lang:e.Label_asArray[r].lang,text:e.Label_asArray[r].__text||e.Label_asArray[r]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(a.Z.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:v,getId:function(e){return e&&e[a.Z.ID]||null},hasProfile:function(e,t){var r=!1;return e&&e.profiles&&e.profiles.length>0&&(r=-1!==e.profiles.indexOf(t)),r},getDuration:function(e){return e&&e.hasOwnProperty(a.Z.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=NaN;return e&&e.hasOwnProperty(a.Z.MINIMUM_UPDATE_PERIOD)&&(r=e.minimumUpdatePeriod),isNaN(r)?r:Math.max(r-t,1)},getPublishTime:function(e){return e&&e.hasOwnProperty(a.Z.PUBLISH_TIME)?new Date(e[a.Z.PUBLISH_TIME]):null},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){var t=g(e);return(t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray:[]).map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}})},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&l(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,r,n,i,o=[],s=function(e){if(e&&e.period&&l(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&l(e.index))return g(t.AdaptationSet_asArray[e.index])}}(e);if(s&&s.Representation_asArray){if(e&&e.period&&l(e.period.index)){var u=T(e.period.mpd.manifest);u&&(r=u[0])}for(var f=0,d=s.Representation_asArray.length;f<d;++f){var p=s.Representation_asArray[f],m=new pe;if(m.index=f,m.adaptation=e,p.hasOwnProperty(a.Z.ID)&&(m.id=p.id),p.hasOwnProperty(a.Z.CODECS)&&(m.codecs=p.codecs),p.hasOwnProperty(a.Z.MIME_TYPE)&&(m.mimeType=p[a.Z.MIME_TYPE]),p.hasOwnProperty(a.Z.CODEC_PRIVATE_DATA)&&(m.codecPrivateData=p.codecPrivateData),p.hasOwnProperty(a.Z.BANDWITH)&&(m.bandwidth=p.bandwidth),p.hasOwnProperty(a.Z.WIDTH)&&(m.width=p.width),p.hasOwnProperty(a.Z.HEIGHT)&&(m.height=p.height),p.hasOwnProperty(a.Z.SCAN_TYPE)&&(m.scanType=p.scanType),p.hasOwnProperty(a.Z.MAX_PLAYOUT_RATE)&&(m.maxPlayoutRate=p.maxPlayoutRate),p.hasOwnProperty(a.Z.SEGMENT_BASE)?(t=p.SegmentBase,m.segmentInfoType=a.Z.SEGMENT_BASE):p.hasOwnProperty(a.Z.SEGMENT_LIST)?(t=p.SegmentList).hasOwnProperty(a.Z.SEGMENT_TIMELINE)?m.segmentInfoType=a.Z.SEGMENT_TIMELINE:m.segmentInfoType=a.Z.SEGMENT_LIST:p.hasOwnProperty(a.Z.SEGMENT_TEMPLATE)?((t=p.SegmentTemplate).hasOwnProperty(a.Z.SEGMENT_TIMELINE)?m.segmentInfoType=a.Z.SEGMENT_TIMELINE:m.segmentInfoType=a.Z.SEGMENT_TEMPLATE,t.hasOwnProperty(a.Z.INITIALIZATION_MINUS)&&(m.initialization=t.initialization.split("$Bandwidth$").join(p.bandwidth).split("$RepresentationID$").join(p.id))):m.segmentInfoType=a.Z.BASE_URL,m.essentialProperties=_(p),t){if(t.hasOwnProperty(a.Z.INITIALIZATION)){var y=t.Initialization;y.hasOwnProperty(a.Z.SOURCE_URL)&&(m.initialization=y.sourceURL),y.hasOwnProperty(a.Z.RANGE)&&(m.range=y.range)}else h(s)&&c(s)&&s.mimeType&&-1===s.mimeType.indexOf("application/mp4")&&(m.range=0);t.hasOwnProperty(a.Z.TIMESCALE)&&(m.timescale=t.timescale),t.hasOwnProperty(a.Z.DURATION)?m.segmentDuration=t.duration/m.timescale:p.hasOwnProperty(a.Z.SEGMENT_TEMPLATE)&&(t=p.SegmentTemplate).hasOwnProperty(a.Z.SEGMENT_TIMELINE)&&(m.segmentDuration=b(t.SegmentTimeline)/m.timescale),t.hasOwnProperty(a.Z.MEDIA)&&(m.media=t.media),t.hasOwnProperty(a.Z.START_NUMBER)&&(m.startNumber=t.startNumber),t.hasOwnProperty(a.Z.INDEX_RANGE)&&(m.indexRange=t.indexRange),t.hasOwnProperty(a.Z.PRESENTATION_TIME_OFFSET)&&(m.presentationTimeOffset=t.presentationTimeOffset/m.timescale),t.hasOwnProperty(a.Z.AVAILABILITY_TIME_OFFSET)?m.availabilityTimeOffset=t.availabilityTimeOffset:r&&void 0!==r.availabilityTimeOffset&&(m.availabilityTimeOffset=r.availabilityTimeOffset),t.hasOwnProperty(a.Z.AVAILABILITY_TIME_COMPLETE)?m.availabilityTimeComplete="false"!==t.availabilityTimeComplete:r&&void 0!==r.availabilityTimeComplete&&(m.availabilityTimeComplete=r.availabilityTimeComplete)}m.MSETimeOffset=(i=(n=m).presentationTimeOffset,n.adaptation.period.start-i),m.path=[e.period.index,e.index,f],o.push(m)}}return o},getAdaptationsForPeriod:function(e){var r,n,i,s=e&&l(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,c=[];if(s&&s.AdaptationSet_asArray)for(i=0;i<s.AdaptationSet_asArray.length;i++)n=s.AdaptationSet_asArray[i],r=new ge,n.hasOwnProperty(a.Z.ID)&&(r.id=n.id),r.index=i,r.period=e,u(n,o.Z.MUXED)?r.type=o.Z.MUXED:u(n,o.Z.AUDIO)?r.type=o.Z.AUDIO:d(n)?r.type=o.Z.VIDEO:h(n)?r.type=o.Z.TEXT:p(n)?r.type=o.Z.IMAGE:t.warn("Unknown Adaptation stream type"),c.push(r);return c},getRegularPeriods:function(e){var n,i,s=!!e&&v(e.manifest),l=[],u=null,c=null,f=null,d=null;for(i=0,n=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;i<n;i++)(c=e.manifest.Period_asArray[i]).hasOwnProperty(a.Z.START)?(d=new ye).start=c.start:null!==u&&u.hasOwnProperty(a.Z.DURATION)&&null!==f?(d=new ye).start=parseFloat((f.start+f.duration).toFixed(5)):0!==i||s||((d=new ye).start=0),null!==f&&isNaN(f.duration)&&(null!==d?f.duration=parseFloat((d.start-f.start).toFixed(5)):t.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==d&&(d.id=E(c,i),d.index=i,d.mpd=e,c.hasOwnProperty(a.Z.DURATION)&&(d.duration=c.duration),f&&(f.nextPeriodId=d.id),l.push(d),u=c,f=d),c=null,d=null;return 0===l.length||null!==f&&isNaN(f.duration)&&(f.duration=parseFloat((function(e){!function(){if(!r||!r.hasOwnProperty("error"))throw new Error(o.Z.MISSING_CONFIG_ERROR)}();var t,n=v(e.mpd.manifest);return e.mpd.manifest.mediaPresentationDuration?t=e.mpd.manifest.mediaPresentationDuration:e.duration?t=e.duration:n?t=Number.POSITIVE_INFINITY:r.error(new w.Z(R.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e)),t}(f)-f.start).toFixed(5))),l},getMpd:function(e){var t=new ve;return e&&(t.manifest=e,e.hasOwnProperty(a.Z.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(a.Z.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(a.Z.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(a.Z.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(a.Z.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(a.Z.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(a.Z.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration),e.hasOwnProperty(a.Z.PUBLISH_TIME)&&(t.publishTime=new Date(e.publishTime))),t},getEventsForPeriod:function(e){var t,r,i=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,s=i?i.Period_asArray:null,u=s&&e&&l(e.index)?s[e.index].EventStream_asArray:null,c=[];if(u)for(t=0;t<u.length;t++){var f=new Se;if(f.period=e,f.timescale=1,!u[t].hasOwnProperty(o.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(f.schemeIdUri=u[t][o.Z.SCHEME_ID_URI],u[t].hasOwnProperty(a.Z.TIMESCALE)&&(f.timescale=u[t][a.Z.TIMESCALE]),u[t].hasOwnProperty(a.Z.VALUE)&&(f.value=u[t][a.Z.VALUE]),u[t].hasOwnProperty(a.Z.PRESENTATION_TIME_OFFSET)&&(f.presentationTimeOffset=u[t][a.Z.PRESENTATION_TIME_OFFSET]),r=0;u[t].Event_asArray&&r<u[t].Event_asArray.length;r++){var d=u[t].Event_asArray[r],h=new be;h.presentationTime=0,h.eventStream=f,d.hasOwnProperty(a.Z.PRESENTATION_TIME)&&(h.presentationTime=d.presentationTime);var p=f.presentationTimeOffset?f.presentationTimeOffset/f.timescale:0;h.calculatedPresentationTime=h.presentationTime/f.timescale+e.start-p,d.hasOwnProperty(a.Z.DURATION)&&(h.duration=d.duration/f.timescale),d.hasOwnProperty(a.Z.ID)?h.id=d.id:h.id=null,d.Signal&&d.Signal.Binary?h.messageData=n.decodeArray(d.Signal.Binary.toString()):h.messageData=d.messageData||d.__cdata||d.__text,c.push(h)}}return c},getEssentialPropertiesForAdaptation:function(e){var t={};if(e&&e.hasOwnProperty(a.Z.ESSENTIAL_PROPERTY_ASARRAY)){var r,n=Ue(e.EssentialProperty_asArray);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.hasOwnProperty(o.Z.SCHEME_ID_URI)&&(t[i[o.Z.SCHEME_ID_URI]]=Le({},i))}}catch(e){n.e(e)}finally{n.f()}}return t},getEssentialPropertiesAsArrayForAdaptation:function(e){return e&&e.hasOwnProperty(a.Z.ESSENTIAL_PROPERTY_ASARRAY)&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return(new Re).init(e)}):[]},getEssentialPropertiesForRepresentation:_,getEventStreamForAdaptationSet:function(e,t,r){var n,i,o;return e&&e.Period_asArray&&t&&t.period&&l(t.period.index)&&(i=e.Period_asArray[t.period.index])&&i.AdaptationSet_asArray&&l(t.index)&&(o=i.AdaptationSet_asArray[t.index])&&(n=o.InbandEventStream_asArray),S(n,null,r)},getEventStreamForRepresentation:function(e,t,r){var n,i,o,a;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&l(t.adaptation.period.index)&&(i=e.Period_asArray[t.adaptation.period.index])&&i.AdaptationSet_asArray&&l(t.adaptation.index)&&(o=i.AdaptationSet_asArray[t.adaptation.index])&&o.Representation_asArray&&l(t.index)&&(a=o.Representation_asArray[t.index])&&(n=a.InbandEventStream_asArray),S(n,t,r)},getUTCTimingSources:function(e){var t=v(e),r=!!e&&e.hasOwnProperty(a.Z.AVAILABILITY_START_TIME),n=e?e.UTCTiming_asArray:null,i=[];return(t||r)&&n&&n.forEach(function(e){var t=new _e.Z;e.hasOwnProperty(o.Z.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(a.Z.VALUE)&&(t.value=e.value.toString(),i.push(t)))}),i},getBaseURLsFromElement:T,getRepresentationSortFunction:function(){return function(e,t){return e.bandwidth-t.bandwidth}},getContentSteering:function(e){if(e&&e.hasOwnProperty(a.Z.CONTENT_STEERING_AS_ARRAY))return A(e[a.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(e){return e&&e.hasOwnProperty(a.Z.LOCATION_AS_ARRAY)?e[a.Z.LOCATION_AS_ARRAY].map(function(e){var t=e.__text||e,r=e.hasOwnProperty(a.Z.SERVICE_LOCATION)?e[a.Z.SERVICE_LOCATION]:null;return new De(t,r)}):[]},getPatchLocation:function(e){return e&&e.hasOwnProperty(a.Z.PATCH_LOCATION_AS_ARRAY)?e[a.Z.PATCH_LOCATION_AS_ARRAY].map(function(e){var t=e.__text||e,r=e.hasOwnProperty(a.Z.SERVICE_LOCATION)?e[a.Z.SERVICE_LOCATION]:null,n=e.hasOwnProperty(a.Z.TTL)?1e3*parseFloat(e[a.Z.TTL]):NaN;return new ke(t,r,n)}):[]},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(a.Z.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(a.Z.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(a.Z.SERVICE_DESCRIPTION)){var r,n=Ue(e.ServiceDescription_asArray);try{for(n.s();!(r=n.n()).done;){var i=r.value,o=null,s=null,l=null,u=null,c=null,f=null,d=null;for(var h in i)i.hasOwnProperty(h)&&(h===a.Z.ID?o=i[h]:h===a.Z.SERVICE_DESCRIPTION_SCOPE?s=i[h].schemeIdUri:h===a.Z.SERVICE_DESCRIPTION_LATENCY?l={target:parseInt(i[h].target),max:parseInt(i[h].max),min:parseInt(i[h].min),referenceId:parseInt(i[h].referenceId)}:h===a.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?u={max:parseFloat(i[h].max),min:parseFloat(i[h].min)}:h===a.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?c={mediaType:i[h].mediaType,max:parseInt(i[h].max),min:parseInt(i[h].min),target:parseInt(i[h].target),type:i[h].type,maxQualityDifference:parseInt(i[h].maxQualityDifference)}:h===a.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?f={mediaType:i[h].mediaType,max:parseInt(i[h].max),min:parseInt(i[h].min),target:parseInt(i[h].target)}:h===a.Z.CONTENT_STEERING&&(d=A(i[h])));t.push({id:o,schemeIdUri:s,latency:l,playbackRate:u,operatingQuality:c,operatingBandwidth:f,contentSteering:d})}}catch(e){n.e(e)}finally{n.f()}}return t},getSegmentAlignment:function(e){return!(!e||!e.hasOwnProperty(a.Z.SEGMENT_ALIGNMENT))&&"true"===e[a.Z.SEGMENT_ALIGNMENT]},getSubSegmentAlignment:function(e){return!(!e||!e.hasOwnProperty(a.Z.SUB_SEGMENT_ALIGNMENT))&&"true"===e[a.Z.SUB_SEGMENT_ALIGNMENT]},getSupplementalPropertiesForAdaptation:function(e){var t={};if(e&&e.hasOwnProperty(a.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var r,n=Ue(e.SupplementalProperty_asArray);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.hasOwnProperty(o.Z.SCHEME_ID_URI)&&(t[i[o.Z.SCHEME_ID_URI]]=Le({},i))}}catch(e){n.e(e)}finally{n.f()}}return t},getSupplementalPropertiesAsArrayForAdaptation:function(e){return e&&e.hasOwnProperty(a.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&e.SupplementalProperty_asArray.length?e.SupplementalProperty_asArray.map(function(e){return(new Re).init(e)}):[]},getSupplementalPropertiesForRepresentation:function(e){var t={};if(e&&e.hasOwnProperty(a.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var r,n=Ue(e.SupplementalProperty_asArray);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.hasOwnProperty(o.Z.SCHEME_ID_URI)&&(t[i[o.Z.SCHEME_ID_URI]]=Le({},i))}}catch(e){n.e(e)}finally{n.f()}}return t},getSupplementalPropertiesAsArrayForRepresentation:function(e){return e&&e.hasOwnProperty(a.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&e.SupplementalProperty_asArray.length?e.SupplementalProperty_asArray.map(function(e){return(new Re).init(e)}):[]},setConfig:function(e){e&&(e.errHandler&&(r=e.errHandler),e.BASE64&&(n=e.BASE64))}},t=(0,f.Z)(i).getInstance().getLogger(e),e}Ze.__dashjs_factory_name="DashManifestModel";var qe=c.Z.getSingletonFactory(Ze),Ge=r(703);function ze(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return He(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?He(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ve(){var e,t,r,n,i,a,s,u,c,f,h=this.context,p=(0,l.Z)(h).getInstance(),g=(0,N.Z)(h).getInstance();function m(){r={pr:1,nor:null,st:null,sf:null,sid:"".concat(Ge.Z.generateUuid()),cid:null},c={},u={},f={},v()}function y(){v()}function v(){if(a){var e=a.getStreamController();if(e&&"function"==typeof e.getActiveStream){var t=e.getActiveStream();t&&(s=t.getProcessors())}}}function _(e,t){var r,n={},i=ze(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;e[o]&&(n[o]=e[o])}}catch(e){i.e(e)}finally{i.f()}return n}function b(e){var t=g.get().streaming.cmcd.enabledKeys;return e.filter(function(e){return t.includes(e)})}function E(e){try{return e.type===C.w.MPD_TYPE?((l=w()).ot="m",l):e.type===C.w.MEDIA_SEGMENT_TYPE?(t=e.mediaType,f.hasOwnProperty(t)||(f[t]=!1),u.hasOwnProperty(t)||(u[t]=!1),c.hasOwnProperty(t)||(c[t]=!1),function(e){var t,l=w(),d=function(e){try{var t=e.quality,r=e.mediaInfo.bitrateList;return parseInt(r[t].bandwidth/1e3)}catch(e){return null}}(e),h=function(e){try{return isNaN(e.duration)?NaN:Math.round(1e3*e.duration)}catch(e){return null}}(e),p=function(e){try{return 100*parseInt(n.getThroughputHistory().getSafeAverageThroughput(e)/100)}catch(e){return null}}(e.mediaType),m=function(e){try{var t=r.pr,n=i.getCurrentBufferLevel(e);return isNaN(t)||isNaN(n)?null:100*parseInt(n/t*10)}catch(e){return null}}(e.mediaType),y=S(e.mediaType),v=function(e){try{var t=n.getTopBitrateInfoFor(e);return Math.round(t.bitrate/1e3)}catch(e){return null}}(e.mediaType),_=r.pr,b=function(e){if(s&&0!==s.length){var t,r=ze(s);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.getType()===e)return n.probeNextRequest()}}catch(e){r.e(e)}finally{r.f()}}}(e.mediaType);e.mediaType===o.Z.VIDEO&&(t="v"),e.mediaType===o.Z.AUDIO&&(t="a"),e.mediaType===o.Z.TEXT&&(t="application/mp4"===e.mediaInfo.mimeType?"tt":"c");var E=g.get().streaming.cmcd.rtp;return E||(E=function(e){try{var t=a.getPlaybackRate();t||(t=1);var r=e.quality,n=e.mediaType,i=e.mediaInfo,o=e.duration;if(!i)return NaN;var s=S(n);0===s&&(s=500);var l=i.bitrateList[r].bandwidth*o/1e3/(s/t/1e3),u=g.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(g.get().streaming.cmcd.rtpSafetyFactor)?g.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(l*u/100)+1)}catch(e){return NaN}}(e)),isNaN(E)||(l.rtp=E),b&&(e.url!==b.url?l.nor=encodeURIComponent(Ge.Z.getRelativeUrl(e.url,b.url)):b.range&&(l.nrr=b.range)),d&&(l.br=d),t&&(l.ot=t),isNaN(h)||(l.d=h),isNaN(p)||(l.mtp=p),isNaN(m)||(l.dl=m),isNaN(y)||(l.bl=y),isNaN(v)||(l.tb=v),isNaN(_)||1===_||(l.pr=_),c[e.mediaType]&&(l.bs=!0,c[e.mediaType]=!1),!u[e.mediaType]&&f[e.mediaType]||(l.su=!0,u[e.mediaType]=!1,f[e.mediaType]=!0),l}(e)):e.type===C.w.INIT_SEGMENT_TYPE?function(){var e=w();return e.ot="i",e.su=!0,e}():e.type===C.w.OTHER_TYPE||e.type===C.w.XLINK_EXPANSION_TYPE?function(){var e=w();return e.ot="o",e}():e.type===C.w.LICENSE?function(){var e=w();return e.ot="k",e}():null}catch(e){return null}var t,l}function w(){var e={},t=g.get().streaming.cmcd.cid?g.get().streaming.cmcd.cid:r.cid;return e.v=1,e.sid=g.get().streaming.cmcd.sid?g.get().streaming.cmcd.sid:r.sid,e.sid="".concat(e.sid),t&&(e.cid="".concat(t)),isNaN(r.pr)||1===r.pr||null===r.pr||(e.pr=r.pr),r.st&&(e.st=r.st),r.sf&&(e.sf=r.sf),e}function S(e){try{var t=i.getCurrentBufferLevel(e);return isNaN(t)?null:100*parseInt(10*t)}catch(e){return null}}function T(e){try{r.pr=e.playbackRate}catch(e){}}function A(t){try{var n=e.getIsDynamic(t.data)?"l":"v",i=t.protocol&&"MSS"===t.protocol?"s":"d";r.st="".concat(n),r.sf="".concat(i)}catch(e){}}function I(e){try{e.state&&e.mediaType&&e.state===d.Z.BUFFER_EMPTY&&(c[e.mediaType]||(c[e.mediaType]=!0),u[e.mediaType]||(u[e.mediaType]=!0))}catch(e){}}function R(){for(var e in c)c.hasOwnProperty(e)&&(c[e]=!0);for(var t in u)u.hasOwnProperty(t)&&(u[t]=!0)}function O(e){try{if(!e)return null;var t=Object.keys(e).sort(function(e,t){return e.localeCompare(t)}),r=t.length,n=t.reduce(function(t,n,i){return"v"===n&&1===e[n]||("string"==typeof e[n]&&"ot"!==n&&"sf"!==n&&"st"!==n?t+="".concat(n,"=").concat(JSON.stringify(e[n])):t+="".concat(n,"=").concat(e[n]),i<r-1&&(t+=",")),t},"");return(n=n.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(e){return null}}return t={getQueryParameter:function(e){try{if(g.get().streaming.cmcd&&g.get().streaming.cmcd.enabled){var t=E(e),r=function(e){try{var t=g.get().streaming.cmcd.enabledKeys;return Object.keys(e).filter(function(e){return t.includes(e)}).reduce(function(t,r){return t[r]=e[r],t},{})}catch(t){return e}}(t),n=O(r);return p.trigger(de.Z.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,cmcdString:n}),{key:"CMCD",value:n}}return null}catch(e){return null}},getHeaderParameters:function(e){try{if(g.get().streaming.cmcd&&g.get().streaming.cmcd.enabled){var t=E(e),r=_(t,b(["br","d","ot","tb"])),n=_(t,b(["bl","dl","mtp","nor","nrr","su"])),i=_(t,b(["bs","rtp"])),o=_(t,b(["cid","pr","sf","sid","st","v"])),a={"CMCD-Object":O(r),"CMCD-Request":O(n),"CMCD-Status":O(i),"CMCD-Session":O(o)};return p.trigger(de.Z.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,headers:a}),a}return null}catch(e){return null}},setConfig:function(e){e&&(e.abrController&&(n=e.abrController),e.dashMetrics&&(i=e.dashMetrics),e.playbackController&&(a=e.playbackController))},reset:function(){p.off(d.Z.PLAYBACK_RATE_CHANGED,T,this),p.off(d.Z.MANIFEST_LOADED,A,this),p.off(d.Z.BUFFER_LEVEL_STATE_CHANGED,I,t),p.off(d.Z.PLAYBACK_SEEKED,R,t),m()},initialize:function(){p.on(d.Z.PLAYBACK_RATE_CHANGED,T,t),p.on(d.Z.MANIFEST_LOADED,A,t),p.on(d.Z.BUFFER_LEVEL_STATE_CHANGED,I,t),p.on(d.Z.PLAYBACK_SEEKED,R,t),p.on(d.Z.PERIOD_SWITCH_COMPLETED,y,t)}},e=qe(h).getInstance(),m(),t}Ve.__dashjs_factory_name="CmcdModel";var We=c.Z.getSingletonFactory(Ve);function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function Ke(e,t){Ke=function(e,t){return new o(e,void 0,t)};var r=Xe(RegExp),n=RegExp.prototype,i=new WeakMap;function o(e,t,n){var o=r.call(this,e,t);return i.set(o,n||i.get(e)),o}function a(e,t){var r=i.get(t);return Object.keys(r).reduce(function(t,n){return t[n]=e[r[n]],t},Object.create(null))}return Qe(o,r),o.prototype.exec=function(e){var t=n.exec.call(this,e);return t&&(t.groups=a(t,this)),t},o.prototype[Symbol.replace]=function(e,t){if("string"==typeof t){var r=i.get(this);return n[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+r[t]}))}if("function"==typeof t){var o=this;return n[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==Ye(e[e.length-1])&&e.push(a(e,o)),t.apply(this,e)})}return n[Symbol.replace].call(this,e,t)},Ke.apply(this,arguments)}function Qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}function Xe(e){var t="function"==typeof Map?new Map:void 0;return Xe=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return $e(e,arguments,tt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),et(n,e)},Xe(e)}function $e(e,t,r){return $e=Je()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&et(i,r.prototype),i},$e.apply(null,arguments)}function Je(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function et(e,t){return et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},et(e,t)}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}var rt="static",nt="dynamic",it="cmsd-",ot=it+rt,at=it+nt,st="stream",lt=["mb","st","sf","v"],ut={video:"v",audio:"a",text:"tt",stream:st},ct=/^[-0-9]/;function ft(){var e,t,r,n,i=this.context,o=(0,l.Z)(i).getInstance();function a(){r={},n={}}function s(e){e&&Object.keys(e).forEach(function(t){lt.includes(t)||delete e[t]})}function c(e){return!e||"false"!==e.toLowerCase()&&(ct.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}function d(e){try{for(var r={},n=e.split(","),i=0;i<n.length;i++){var o=n[i].split("="),a=o[0],s=c(o[1]);r[a]=s}return r}catch(e){t.error("Failed to parse CMSD-Static response header value:",e)}}function h(e){try{for(var r={},n=e.split(","),i=n[n.length-1].split(";"),o=1;o<i.length;o++){var a=i[o].split("="),s=a[0],l=c(a[1]);r[s]=l}return r}catch(e){return t.error("Failed to parse CMSD-Dynamic response header value:",e),[]}}function p(e){return ut[e]||"o"}function g(e,t,i){var o=e===rt?r:n,a=o[t]||{},s=o[st]||{};return a[i]||s[i]}return e={setConfig:function(){},initialize:function(){},reset:function(){a()},parseResponseHeaders:function(e,t){for(var i=null,a=null,l=e.split("\r\n"),c=l.length-1;c>=0;c--){var f=l[c].match(Ke(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(f&&f.groups){var g=f.groups.key.toLowerCase(),m=f.groups.value;switch(g){case ot:i=d(m),o.trigger(u.Z.CMSD_STATIC_HEADER,i);break;case at:a||(a=h(m))}}}var y=st;return i&&i.ot?y=i.ot:t&&(y=p(t)),s(r[y]),s(n[y]),i&&(r[y]=Object.assign(r[y]||{},i)),a&&(n[y]=Object.assign(n[y]||{},a)),{static:i,dynamic:a}},getMaxBitrate:function(e){var t=p(e);return g(nt,t,"mb")||-1},getEstimatedThroughput:function(e){var t=p(e);return g(nt,t,"etp")||null},getResponseDelay:function(e){var t=p(e);return g(nt,t,"rd")||null},getRoundTripTime:function(e){var t=p(e);return g(nt,t,"rtt")||null}},t=(0,f.Z)(i).getInstance().getLogger(e),a(),e}ft.__dashjs_factory_name="CmsdModel";var dt=c.Z.getSingletonFactory(ft);function ht(){var e,t,r=this.context,n={};function i(){t=(0,f.Z)(r).getInstance().getLogger(e)}function o(e){for(var t={},r=0,n=0,i=0,o=0,a=e.length,s=0;s<a;++s)r+=e[s].chunkDownloadTimeRelativeMS,n+=e[s].bufferLevel,i+=e[s].chunkDownloadTimeRelativeMS*e[s].bufferLevel,o+=e[s].chunkDownloadTimeRelativeMS*e[s].chunkDownloadTimeRelativeMS;return t.m=(i-r*n/a)/(o-r*r/a),t.b=n/a-t.m*r/a,function(e){return t.m*e+t.b}}function a(e){var t,r=!0,n=e.reduce(function(e,t){return e+t.bufferLevelAtSegmentEnd},0)/e.length;return e.forEach(function(e){Math.abs(e.bufferLevelAtSegmentEnd/e.bufferLevelAtSegmentStart)<.95&&(r=!1),e.bufferLevelAtSegmentEnd/n<.8&&(r=!1),t?t>e.bitrate&&(r=!1):t=e.bitrate}),r}return e={setup:i,addMeasurement:function(e,t,r,i,a){e&&e.mediaType&&!n[e.mediaType]&&(n[e.mediaType]=[]);var s=e.mediaInfo.bitrateList.find(function(t){return t.id===e.representationId});n[e.mediaType].push({index:e.index,repId:e.representationId,mediaType:e.mediaType,requestTimeMS:i,adjustedAvailabilityStartTimeMS:e.availabilityStartTime.getTime(),segDurationMS:1e3*e.duration,chunksDurationMS:r.reduce(function(e,t){return e+t.chunkDownloadDurationMS},0),segmentBytes:r.reduce(function(e,t){return e+t.chunkBytes},0),bitrate:s&&s.bandwidth,bitrateList:e.mediaInfo.bitrateList,chunkMeasurements:r,fetchDownloadDurationMS:t,throughputCapacityDelayMS:a,getEstimatedBufferLevel:o(r.slice(1))}),n[e.mediaType].length>10&&n[e.mediaType].shift()},getThroughputCapacityDelayMS:function(e,t){var r=n[e.mediaType]&&n[e.mediaType].slice(-3);return!r||r.length<3?0:a(r)?t/4>250?250:t/4:0},getEstimatedDownloadDurationMS:function(e){var r=n[e.mediaType].slice(-1).pop(),i=n[e.mediaType].slice(-3),o=r.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;r.bufferLevelAtSegmentStart=r.getEstimatedBufferLevel(o/2),r.bufferLevelAtSegmentEnd=r.getEstimatedBufferLevel(o);var s=a(i),l=s?.6:.8;if(r.isBufferStable&&1.05*r.segDurationMS<r.fetchDownloadDurationMS)return r.fetchDownloadDurationMS;if(!s||r.segDurationMS<r.fetchDownloadDurationMS)return.8*r.fetchDownloadDurationMS;if(r.adjustedAvailabilityStartTimeMS<=r.requestTimeMS+r.throughputCapacityDelayMS-r.segDurationMS)return.8*r.fetchDownloadDurationMS;for(var u=r.requestTimeMS+r.throughputCapacityDelayMS-r.adjustedAvailabilityStartTimeMS,c=0,f=0,d=0,h=0;h<r.chunkMeasurements.length;h++){var p=r.chunkMeasurements[h];if(u<f+p.chunkDownloadDurationMS)break;f+=p.chunkDownloadDurationMS,c+=p.chunkBytes,d++}if(u<0&&t.warn("request time was before adjusted availibitly start time"),c&&f&&d>.2*r.chunkMeasurements.length){var g=c/f,m=r.segmentBytes/g;return r.fetchDownloadDurationMS<m?r.fetchDownloadDurationMS*l:m*l}var y=r.bitrate;return r.bitrateList.some(function(e){if(e.bandwidth>r.bitrate)return y=e.bandwidth,!0}),y===r.bitrate?r.fetchDownloadDurationMS*l:l*r.segmentBytes*8*1e3/y}},i(),e}ht.__dashjs_factory_name="LowLatencyThroughputModel";var pt=c.Z.getSingletonFactory(ht),gt=r(5717);function mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yt(e){e=e||{};var t,r,n,i,a,s,c,d,h,p,g,m=this.context,y=e.errHandler,v=e.dashMetrics,_=e.mediaPlayerModel,b=e.requestModifier,E=e.boxParser,S=e.errors,T=e.requestTimeout||0,A=(0,l.Z)(m).getInstance(),I=(0,N.Z)(m).getInstance();function R(e,t){var l,f=e.request,g=[],S=!0,N=!0,O=new Date,P=O,x=0,D=null,k=null;if(!b||!v||!y)throw new Error("config object is not correct or missing");var M,L=function(e){f.requestStartDate=O,f.requestEndDate=new Date,f.firstByteDate=f.firstByteDate||O,f.fileLoaderType=k;var t=l.response?l.response.responseURL:null,r=l.response?l.response.status:null,n=l.response&&l.response.getAllResponseHeaders?l.response.getAllResponseHeaders():l.response?l.response.responseHeaders:null,i=n&&I.get().streaming.cmsd&&I.get().streaming.cmsd.enabled?c.parseResponseHeaders(n,f.mediaType):null;v.addHttpRequest(f,t,r,n,e?g:null,i)},F=function(e){N=!1,L(e),f.type===C.w.MPD_TYPE&&(v.addManifestUpdate(f),A.trigger(u.Z.MANIFEST_LOADING_FINISHED,{request:f}))},U=function(){if(D&&(clearTimeout(D),D=null),-1!==r.indexOf(l)&&(r.splice(r.indexOf(l),1),N))if(F(!1),t>0){try{I.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&f.type===C.w.MEDIA_SEGMENT_TYPE&&_.getRetryAttemptsForType(C.w.MEDIA_SEGMENT_TYPE)===t&&A.trigger(u.Z.ATTEMPT_BACKGROUND_SYNC)}catch(e){}t--;var n={config:e};i.push(n),n.timeout=setTimeout(function(){-1!==i.indexOf(n)&&(i.splice(i.indexOf(n),1),R(e,t))},_.getRetryIntervalsForType(f.type))}else{if(f.type===C.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;y.error(new w.Z(a[f.type],f.url+" is not available",{request:f,response:l.response})),e.error&&e.error(f,"error",l.response.statusText,l.response),e.complete&&e.complete(f,l.response.statusText)}};f.hasOwnProperty("availabilityTimeComplete")&&!1===f.availabilityTimeComplete&&window.fetch&&"arraybuffer"===f.responseType&&f.type===C.w.MEDIA_SEGMENT_TYPE?((M=fe(m).create({requestModifier:b,lowLatencyThroughputModel:h,boxParser:E})).setup({dashMetrics:v}),k=o.Z.FILE_LOADER_TYPES.FETCH):(M=(0,se.Z)(m).create({requestModifier:b}),k=o.Z.FILE_LOADER_TYPES.XHR);var B=null,j=b.modifyRequestURL?b.modifyRequestURL(f.url):f.url;if(I.get().streaming.cmcd&&I.get().streaming.cmcd.enabled){var Z=I.get().streaming.cmcd.mode;if(Z===o.Z.CMCD_MODE_QUERY){var q=function(e){try{var t=[],r=s.getQueryParameter(e);return r&&t.push(r),t}catch(e){return[]}}(f);j=Ge.Z.addAditionalQueryParameterToUrl(j,q)}else Z===o.Z.CMCD_MODE_HEADER&&(B=s.getHeaderParameters(f))}var G=d.getXHRWithCredentialsForType(f.type);if(f.queryParams){var z=Object.keys(f.queryParams).map(function(e){return{key:e,value:f.queryParams[e]}});j=Ge.Z.addAditionalQueryParameterToUrl(j,z)}f.url=j,l={url:j,method:C.w.GET,withCredentials:G,request:f,onload:function(){l.response.status>=200&&l.response.status<=299&&(F(!0),e.success&&e.success(l.response.response,l.response.statusText,l.response.responseURL),e.complete&&e.complete(f,l.response.statusText))},onend:U,onerror:U,progress:function(t){var r=new Date;S&&(S=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(f.firstByteDate=r)),t.lengthComputable&&(f.bytesLoaded=t.loaded,f.bytesTotal=t.total),t.noTrace||(g.push({s:P,d:t.time?t.time:r.getTime()-P.getTime(),b:[t.loaded?t.loaded-x:0]}),P=r,x=t.loaded),D&&(clearTimeout(D),D=null),I.get().streaming.fragmentRequestProgressTimeout>0&&(D=setTimeout(function(){p.warn("Abort request "+l.url+" due to progress timeout"),l.response.onabort=null,l.loader.abort(l),U()},I.get().streaming.fragmentRequestProgressTimeout)),e.progress&&t&&e.progress(t)},onabort:function(){L(!0),D&&(clearTimeout(D),D=null),e.abort&&e.abort(f)},ontimeout:function(e){var t;if(e.lengthComputable){var r=e.loaded/e.total*100;t="Request timeout: loaded: "+e.loaded+", out of: "+e.total+" : "+r.toFixed(3)+"% Completed"}else t="Request timeout: non-computable download size";p.warn(t)},loader:M,timeout:T,headers:B};var H=(new Date).getTime();if(isNaN(f.delayLoadingTime)||H>=f.delayLoadingTime)r.push(l),M.load(l);else{var V={httpRequest:l};n.push(V),V.delayTimeout=setTimeout(function(){if(-1!==n.indexOf(V)){n.splice(n.indexOf(V),1);try{O=new Date,P=O,r.push(V.httpRequest),M.load(V.httpRequest)}catch(e){V.httpRequest.onerror()}}},f.delayLoadingTime-H)}}return t={load:function(e){e.request?R(e,_.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error")},abort:function(){i.forEach(function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)}),i=[],n.forEach(function(e){return clearTimeout(e.delayTimeout)}),n=[],r.forEach(function(e){e.request.type!==C.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e))}),r=[]}},p=(0,f.Z)(m).getInstance().getLogger(t),r=[],n=[],i=[],s=We(m).getInstance(),c=dt(m).getInstance(),h=pt(m).getInstance(),d=(0,gt.Z)(m).getInstance(),mt(g={},C.w.MPD_TYPE,S.DOWNLOAD_ERROR_ID_MANIFEST_CODE),mt(g,C.w.XLINK_EXPANSION_TYPE,S.DOWNLOAD_ERROR_ID_XLINK_CODE),mt(g,C.w.INIT_SEGMENT_TYPE,S.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),mt(g,C.w.MEDIA_SEGMENT_TYPE,S.DOWNLOAD_ERROR_ID_CONTENT_CODE),mt(g,C.w.INDEX_SEGMENT_TYPE,S.DOWNLOAD_ERROR_ID_CONTENT_CODE),mt(g,C.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,S.DOWNLOAD_ERROR_ID_CONTENT_CODE),mt(g,C.w.OTHER_TYPE,S.DOWNLOAD_ERROR_ID_CONTENT_CODE),a=g,t}yt.__dashjs_factory_name="HTTPLoader";var vt=c.Z.getClassFactory(yt);function _t(){var e;function t(){e={}}function r(){t()}return r(),{getLoader:function(t){for(var r in e)if(e.hasOwnProperty(r)&&t.startsWith(r))return e[r];return vt},registerLoader:function(t,r){e[t]=r},unregisterLoader:function(t){e[t]&&delete e[t]},unregisterAllLoader:t,reset:r}}_t.__dashjs_factory_name="SchemeLoaderFactory";var bt=c.Z.getSingletonFactory(_t);function Et(e){e=e||{};var t,r,n=this.context;return t=bt(n).getInstance(),{load:function(i){if(!r){var o=t.getLoader(i&&i.request?i.request.url:null);r=o(n).create({errHandler:e.errHandler,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,dashMetrics:e.dashMetrics,boxParser:e.boxParser?e.boxParser:null,constants:e.constants?e.constants:null,dashConstants:e.dashConstants?e.dashConstants:null,urlUtils:e.urlUtils?e.urlUtils:null,requestTimeout:isNaN(e.requestTimeout)?0:e.requestTimeout,errors:e.errors})}r.load(i)},abort:function(){r&&r.abort()}}}Et.__dashjs_factory_name="URLLoader";var wt=c.Z.getClassFactory(Et);function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}function Tt(e,t){return Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Tt(e,t)}function At(e,t){return!t||"object"!==St(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function It(e){return It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},It(e)}var Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=It(t);if(r){var i=It(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return At(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this,e)).checkForExistenceOnly=!0,t}return i}(g.Z);function Nt(e){e=e||{};var t,r,n=this.context,i=e.eventBus,a=e.events,s=e.urlUtils,l=e.errors,u=e.streamId;return t={checkForExistence:function(e){var t=function(t){i.trigger(a.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var n=new Rt(e.url);r.load({request:n,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)},load:function(e){var n=function(r,n){i.trigger(a.LOADING_COMPLETED,{request:e,response:r||null,error:n||null,sender:t})};e?r.load({request:e,progress:function(r){i.trigger(a.LOADING_PROGRESS,{request:e,stream:r.stream,streamId:u}),r.data&&i.trigger(a.LOADING_DATA_PROGRESS,{request:e,response:r.data||null,error:null,sender:t})},success:function(e){n(e)},error:function(e,t,r){n(void 0,new w.Z(l.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,r,t))},abort:function(e){e&&i.trigger(a.LOADING_ABANDONED,{mediaType:e.mediaType,request:e,sender:t})}}):n(void 0,new w.Z(l.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,l.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){r&&r.abort()},reset:function(){r&&(r.abort(),r=null)}},r=wt(n).create({errHandler:e.errHandler,errors:l,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:s,constants:o.Z,boxParser:e.boxParser,dashConstants:e.dashConstants,requestTimeout:e.settings.get().streaming.fragmentRequestTimeout}),t}Nt.__dashjs_factory_name="FragmentLoader";var Ct=c.Z.getClassFactory(Nt);function Ot(){return{modifyResponseAsync:function(e){return Promise.resolve(e)}}}Ot.__dashjs_factory_name="SegmentResponseModifier";var Pt=c.Z.getSingletonFactory(Ot);function xt(e){e=e||{};var t,r,n,i=this.context,a=(0,l.Z)(i).getInstance(),s=e.errHandler,c=e.mediaPlayerModel,h=e.dashMetrics,p=(0,f.Z)(i).getInstance(),g=Pt(i).getInstance(),m=e.streamInfo;function y(){return m.id}function v(){for(var e in n)n[e].reset();n={}}function _(e){if(e.sender){var t=e.request,n=e.response,i=t.isInitializationRequest(),s=t.mediaInfo.streamInfo;if(e.error&&(t.mediaType===o.Z.AUDIO||t.mediaType===o.Z.VIDEO||t.mediaType===o.Z.TEXT&&t.mediaInfo.isFragmented)&&a.trigger(u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:e.request.serviceLocation}),n&&s){var l=function(e,t,r,n){var i=new ae;return i.streamId=r,i.mediaInfo=t.mediaInfo,i.segmentType=t.type,i.start=t.startTime,i.duration=t.duration,i.end=i.start+i.duration,i.bytes=e,i.index=t.index,i.quality=t.quality,i.representationId=t.representationId,i.endFragment=n,i}(n,t,m.id,e.type!==u.Z.FRAGMENT_LOADING_PROGRESS);g.modifyResponseAsync(l).then(function(e){a.trigger(i?u.Z.INIT_FRAGMENT_LOADED:u.Z.MEDIA_FRAGMENT_LOADED,{chunk:e,request:t},{streamId:s.id,mediaType:t.mediaType})}).catch(function(e){r.error(e),a.trigger(i?u.Z.INIT_FRAGMENT_LOADED:u.Z.MEDIA_FRAGMENT_LOADED,{chunk:l,request:t},{streamId:s.id,mediaType:t.mediaType})})}else r.warn("No "+t.mediaType+" bytes to push or stream is inactive.")}}return t={getStreamId:y,getModel:function(t){var r=n[t];return r||(r=E(i).create({streamInfo:m,type:t,dashMetrics:h,fragmentLoader:Ct(i).create({dashMetrics:h,mediaPlayerModel:c,errHandler:s,requestModifier:(0,Q.Z)(i).getInstance(),settings:e.settings,boxParser:e.boxParser,eventBus:a,events:u.Z,errors:R,dashConstants:e.dashConstants,urlUtils:e.urlUtils,streamId:y()}),debug:p,eventBus:a,events:u.Z}),n[t]=r),r},reset:function(){a.off(d.Z.FRAGMENT_LOADING_COMPLETED,_,this),a.off(d.Z.FRAGMENT_LOADING_PROGRESS,_,this),v()}},r=p.getLogger(t),v(),a.on(d.Z.FRAGMENT_LOADING_COMPLETED,_,t),a.on(d.Z.FRAGMENT_LOADING_PROGRESS,_,t),t}xt.__dashjs_factory_name="FragmentController";var Dt=c.Z.getClassFactory(xt),kt=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},Mt=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function Lt(e){var t,r,n=this.context,i=e.streamInfo;function a(e){r.setTrackByIndex(e)}function s(){r&&r.reset()}return t={getStreamId:function(){return i.id},initialize:function(){r.addTracks();var e=r.getTracks();e&&e.length>0&&a(0)},provide:function(e,t){if("function"==typeof t){var n,i,o=r.getCurrentTrack();if(!o||o.segmentDuration<=0||null==e)t(null);else{(i=r.getThumbnailRequestForTime(e))&&(o.segmentDuration=i.duration),n=e%o.segmentDuration;var a=Math.floor(n*o.tilesHor*o.tilesVert/o.segmentDuration),s=new kt;if(s.width=Math.floor(o.widthPerTile),s.height=Math.floor(o.heightPerTile),s.x=Math.floor(a%o.tilesHor)*o.widthPerTile,s.y=Math.floor(a/o.tilesHor)*o.heightPerTile,"readThumbnail"in o)return o.readThumbnail(e,function(e){s.url=e,t(s)});if(i)s.url=i.url,o.segmentDuration=NaN;else{var l=Math.floor(e/o.segmentDuration);s.url=function(e,t){var r=t+e.startNumber,n=(0,H.vi)(e.templateUrl,"Number",r);return n=(0,H.vi)(n,"Time",(r-1)*e.segmentDuration*e.timescale),n=(0,H.vi)(n,"Bandwidth",e.bandwidth),(0,H.eR)(n)}(o,l)}t(s)}}},setTrackByIndex:a,getCurrentTrackIndex:function(){return r.getCurrentTrackIndex()},getBitrateList:function(){var e=r.getTracks(),t=0;return e.map(function(e){var r=new Mt;return r.mediaType=o.Z.IMAGE,r.qualityIndex=t++,r.bitrate=e.bitrate,r.width=e.width,r.height=e.height,r})},reset:s},s(),r=(0,xe.Z)(n).create({streamInfo:i,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController}),t}Lt.__dashjs_factory_name="ThumbnailController";var Ft=c.Z.getClassFactory(Lt),Ut=r(7417);function Bt(e){var t;e=e||{};var r=[],n=(0,l.Z)(this.context).getInstance(),i=e.updateEventName,o=e.addBlacklistEventName;function a(e){-1===r.indexOf(e)&&(r.push(e),n.trigger(i,{entry:e}))}return t={add:a,contains:function(e){return!!(r.length&&e&&e.length)&&-1!==r.indexOf(e)},reset:function(){r=[]}},o&&n.on(o,function(e){a(e.entry)},t),t}Bt.__dashjs_factory_name="BlackListController";var jt=c.Z.getClassFactory(Bt),Zt=[o.Z.VIDEO,o.Z.AUDIO,o.Z.TEXT,o.Z.MUXED,o.Z.IMAGE];function qt(e){e=e||{};var t,r,n,i,s,c,d,h,p,g,m,y,v,_,b,E,S,T,A=this.context,I=(0,l.Z)(A).getInstance(),N=(0,X.Z)(A).getInstance(),C=e.manifestModel,O=e.mediaPlayerModel,P=e.dashMetrics,x=e.manifestUpdater,D=e.adapter,k=e.timelineConverter,M=e.capabilities,L=e.errHandler,F=e.abrController,U=e.playbackController,B=e.eventController,j=e.mediaController,Z=e.protectionController,q=e.textController,G=e.videoModel,z=e.streamInfo,H=e.settings;function V(e,t){return new Promise(function(i,a){re(),g=!0,ie();var s=G.getElement(),l=[];Zt.forEach(function(t){(t!==o.Z.TEXT||e)&&(t!==o.Z.VIDEO||!s||s&&/^VIDEO$/i.test(s.nodeName))&&l.push(W(t,e))}),Promise.all(l).then(function(){return e=t,new Promise(function(t){var r={},i=n.map(function(t){return t.createBufferSinks(e)});Promise.all(i).then(function(e){e.forEach(function(e){e&&(r[e.getType()]=e)}),t(r)}).catch(function(){t(r)})});var e}).then(function(t){if(g=!1,0===n.length){var o="No streams to play.";L.error(new w.Z(R.MANIFEST_ERROR_ID_NOSTREAMS_CODE,o,C.getValue())),r.fatal(o)}else ae();e&&q.createTracks(z),i(t)}).catch(function(e){a(e)})})}function W(t,i){var s,l=D.getAllMediaInfoForType(z,t),c=[],f=null;if(!l||0===l.length)return r.info("No "+t+" data."),Promise.resolve();t===o.Z.VIDEO&&(d=!0),t===o.Z.AUDIO&&(h=!0);for(var p=0,g=l.length;p<g;p++)f=l[p],t===o.Z.TEXT&&f.isEmbedded&&(q.addEmbeddedTrack(z,f),c.push(f)),Y(f)&&j.addTrack(f);if(c.length>0&&(j.setInitialMediaSettingsForType(t,z),q.addMediaInfosToBuffer(z,t,c)),l=l.filter(function(e){return!e.isEmbedded}),0===l.length)return Promise.resolve();if(t===o.Z.IMAGE)return(y=Ft(A).create({streamInfo:z,adapter:D,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:E,eventBus:I,events:u.Z,dashConstants:a.Z,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController})).initialize(),Promise.resolve();I.trigger(u.Z.STREAM_INITIALIZING,{streamInfo:z,mediaInfo:f}),j.setInitialMediaSettingsForType(t,z);var _=function(t,r){var i=t&&t.length>0?t[0]:null,a=m.getModel(i?i.type:null),s=i?i.type:null,l=i?i.mimeType:null,u=i?i.isFragmented:null,c=oe(A).create({streamInfo:z,type:s,mimeType:l,timelineConverter:k,adapter:D,manifestModel:C,mediaPlayerModel:O,fragmentModel:a,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,segmentBaseController:e.segmentBaseController,abrController:F,playbackController:U,mediaController:j,textController:q,errHandler:L,settings:H,boxParser:b,segmentBlacklistController:v});c.initialize(r,d,u),n.push(c);for(var f=0;f<t.length;f++)c.addMediaInfo(t[f]);return s===o.Z.TEXT&&q.addMediaInfosToBuffer(z,s,t,a),c}(l,i);return(s=j.getCurrentTrackFor(t,z.id))?(F.updateTopQualityIndex(s),_.selectMediaInfo(t===o.Z.TEXT&&s.isEmbedded?l[0]:s)):Promise.resolve()}function Y(e){var t,n=e?e.type:null;return n===o.Z.MUXED?(t="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",r.fatal(t),L.error(new w.Z(R.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,t,C.getValue())),!1):!(n!==o.Z.TEXT&&n!==o.Z.IMAGE&&e.contentProtection&&!M.supportsEncryptedMedia()&&(L.error(new w.Z(R.CAPABILITY_MEDIAKEYS_ERROR_CODE,R.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function K(e){for(var t=n?n.length:0,r=0;r<t;r++){var i=n[r].getFragmentModel();i.abortRequests(),i.resetInitialSettings(),n[r].reset(!1,e)}q&&q.deactivateStream(z),n=[],s=!1,c=!1,me(!1),$(!1),I.trigger(u.Z.STREAM_DEACTIVATED,{streamInfo:z})}function Q(e){K(e),i=!1,d=!1,h=!1,p={},g=!1,S=!1,T=[]}function $(e){S=e}function J(){return z?z.start:NaN}function ee(){return z?z.id:null}function te(){return z}function re(){if(!G||!F)throw new Error(o.Z.MISSING_CONFIG_ERROR)}function ne(e){e.error&&(L.error(e.error),r.fatal(e.error.message))}function ie(){if(B){var e=D.getEventsFor(z);e&&e.length>0&&B.addInlineEvents(e,z.id)}}function ae(){for(var e=n.length,t=p.audio||p.video?new w.Z(R.DATA_UPDATE_FAILED_ERROR_CODE,R.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,r=0;r<e;r++)if(n[r].isUpdating()||g)return;if(Z){Z.clearMediaInfoArray();for(var a=0;a<e&&n[a];a++){var s=n[a].getType(),l=n[a].getMediaInfo();if(s===o.Z.AUDIO||s===o.Z.VIDEO||s===o.Z.TEXT&&l.isFragmented){var c=n[a].getMediaInfo();c&&Z.initializeForMedia(c)}}Z.handleKeySystemFromManifest()}t?L.error(t):i||(i=!0,G.waitForReadyState(o.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){I.trigger(u.Z.STREAM_INITIALIZED,{streamInfo:z})}))}function se(){var e=de(),t=e.length;if(0!==t){for(var n=0;n<t;n++)if(!e[n].isBufferingCompleted()&&(e[n].getType()===o.Z.AUDIO||e[n].getType()===o.Z.VIDEO))return void r.debug("onBufferingCompleted - One streamProcessor has finished but",e[n].getType(),"one is not buffering completed");r.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),c=!0,I.trigger(u.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:z},{streamInfo:z})}else r.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function le(e){p[e.mediaType]=e.error,ae()}function ue(e){B&&B.addInbandEvents(e.events,z.id)}function ce(e){return e&&e.type?fe(e.type):null}function fe(e){return e?de().filter(function(t){return t.getType()===e})[0]:null}function de(){for(var e,t,r=[],i=0;i<n.length;i++)(e=(t=n[i]).getType())!==o.Z.AUDIO&&e!==o.Z.VIDEO&&e!==o.Z.TEXT||r.push(t);return r}function he(e,t){var r=te(),n=t.getStreamInfo();if(!n||!r)return!0;var i=D.getAdaptationForType(n.index,e,n),o=D.getAdaptationForType(r.index,e,r);return i&&o?!(!pe(o)&&pe(i)):!i&&!o}function pe(e){return!!e&&!!(e.ContentProtection||e.Representation_asArray&&e.Representation_asArray.length>0&&e.Representation_asArray[0].ContentProtection)}function ge(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||!e.hasOwnProperty("getStreamInfo"))return!1;var n=e.getStreamInfo(),i=r?r.getStreamInfo():te();if(!n||!i)return!1;var o=D.getAdaptationForType(n.index,t,n),a=D.getAdaptationForType(i.index,t,i);if(!o||!a)return!o&&!a;var s=o&&a&&o.mimeType===a.mimeType,l=a.Representation_asArray.map(function(e){return e.codecs}),u=o.Representation_asArray.map(function(e){return e.codecs}),c=u.some(function(e){return l.indexOf(e)>-1}),f=u.some(function(e){return l.some(function(t){return M.codecRootCompatibleWithCodec(t,e)})});return c||f&&s}function me(e){_=e}function ye(){return _}return t={initialize:function(){I.on(u.Z.BUFFERING_COMPLETED,se,t),I.on(u.Z.DATA_UPDATE_COMPLETED,le,t),I.on(u.Z.INBAND_EVENTS,ue,t),Z&&(I.on(u.Z.KEY_ERROR,ne,t),I.on(u.Z.SERVER_CERTIFICATE_UPDATED,ne,t),I.on(u.Z.LICENSE_REQUEST_COMPLETE,ne,t),I.on(u.Z.KEY_SYSTEM_SELECTED,ne,t),I.on(u.Z.KEY_SESSION_CREATED,ne,t),I.on(u.Z.KEY_STATUSES_CHANGED,ne,t)),q.initializeForStream(z),I.trigger(u.Z.STREAM_UPDATED,{streamInfo:z})},getStreamId:function(){return z?z.id:null},activate:function(e,t){return new Promise(function(r,n){if(!s)return ye()?(s=!0,I.trigger(u.Z.STREAM_ACTIVATED,{streamInfo:z}),void r(t)):void function(e,t){return V(e,t)}(e,t).then(function(e){s=!0,I.trigger(u.Z.STREAM_ACTIVATED,{streamInfo:z}),r(e)}).catch(function(e){n(e)});r(t)})},deactivate:K,getIsActive:function(){return s},getDuration:function(){return z?z.duration:NaN},getStartTime:J,getId:ee,getStreamInfo:te,getHasAudioTrack:function(){return h},getHasVideoTrack:function(){return d},startPreloading:function(e,t){return new Promise(function(i,o){ye()?o():(r.info("[startPreloading] Preloading next stream with id ".concat(ee())),me(!0),V(e,t).then(function(){for(var e=0;e<n.length&&n[e];e++)n[e].setExplicitBufferingTime(J()),n[e].getScheduleController().startScheduleTimer();i()}).catch(function(){me(!1),o()}))})},initializeForTextWithMediaSource:function(e){return new Promise(function(t,r){W(o.Z.TEXT,e).then(function(){return(e=fe(o.Z.TEXT))?e.createBufferSinks():Promise.resolve();var e}).then(function(){q.createTracks(z),t()}).catch(function(e){r(e)})})},getThumbnailController:function(){return y},getBitrateListFor:function(e){if(re(),e===o.Z.IMAGE)return y?y.getBitrateList():[];var t=function(e){for(var t=null,r=0;r<n.length;r++)if((t=n[r]).getType()===e)return t.getMediaInfo();return null}(e);return F.getBitrateList(t)},updateData:function(e){return new Promise(function(t){g=!0,z=e,B&&ie();for(var r=[],i=0,o=n.length;i<o;i++){var a=n[i],s=a.getMediaInfo();r.push(a.updateStreamInfo(z));var l=D.getAllMediaInfoForType(z,a.getType());if(l=l.filter(function(e){return!e.isEmbedded})){a.clearMediaInfoArray();for(var c=0;c<l.length;c++){var f=l[c];a.addMediaInfo(l[c]),D.areMediaInfosEqual(s,f)&&(F.updateTopQualityIndex(f),r.push(a.selectMediaInfo(f)))}}}Promise.all(r).then(function(){for(r=[];T.length>0;){var e=T.pop(),t=e.newMediaInfo,n=ce(e.oldMediaInfo);if(!n)return;r.push(n.prepareTrackSwitch()),r.push(n.selectMediaInfo(t))}return Promise.all(r)}).then(function(){g=!1,ae(),I.trigger(u.Z.STREAM_UPDATED,{streamInfo:z}),t()})})},reset:function(e){m&&(m.reset(),m=null),F&&z&&F.clearDataForStream(z.id),v&&(v.reset(),v=null),Q(e),z=null,I.off(u.Z.DATA_UPDATE_COMPLETED,le,t),I.off(u.Z.BUFFERING_COMPLETED,se,t),I.off(u.Z.INBAND_EVENTS,ue,t),Z&&(I.off(u.Z.KEY_ERROR,ne,t),I.off(u.Z.SERVER_CERTIFICATE_UPDATED,ne,t),I.off(u.Z.LICENSE_REQUEST_COMPLETE,ne,t),I.off(u.Z.KEY_SYSTEM_SELECTED,ne,t),I.off(u.Z.KEY_SESSION_CREATED,ne,t),I.off(u.Z.KEY_STATUSES_CHANGED,ne,t))},getProcessors:de,setMediaSource:function(e){return new Promise(function(t,i){for(var o=[],a=0;a<n.length;)Y(n[a].getMediaInfo())?(o.push(n[a].setMediaSource(e)),a++):(n[a].reset(),n.splice(a,1));Promise.all(o).then(function(){for(var e=0;e<n.length;e++)n[e].dischargePreBuffer();if(0===n.length){var i="No streams to play.";L.error(new w.Z(R.MANIFEST_ERROR_ID_NOSTREAMS_CODE,i+"nostreams",C.getValue())),r.fatal(i)}t()}).catch(function(e){r.error(e),i(e)})})},isMediaCodecCompatible:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return ge(e,o.Z.VIDEO,t)&&ge(e,o.Z.AUDIO,t)},isProtectionCompatible:function(e){return!e||he(o.Z.VIDEO,e)&&he(o.Z.AUDIO,e)},getPreloaded:ye,getIsEndedEventSignaled:function(){return S},setIsEndedEventSignaled:$,getAdapter:function(){return D},getHasFinishedBuffering:function(){return c},setPreloaded:me,startScheduleControllers:function(){for(var e=n.length,t=0;t<e&&n[t];t++)n[t].getScheduleController().startScheduleTimer()},prepareTrackChange:function(e){if(s&&z){c=!1;var t=e.newMediaInfo,n=C.getValue();D.setCurrentMediaInfo(z.id,t.type,t);var i=ce(t);if(i){var a=U.getTime();r.info("Stream -  Process track changed at current time "+a),n.refreshManifestOnSwitchTrack?(T.push(e),x.getIsUpdating()||(r.debug("Stream -  Refreshing manifest for switch track"),x.refreshManifest())):i.selectMediaInfo(t).then(function(){t.type!==o.Z.VIDEO&&t.type!==o.Z.AUDIO||F.updateTopQualityIndex(t),i.prepareTrackSwitch()})}}},prepareQualityChange:function(e){var t=fe(e.mediaType);t&&t.prepareQualityChange(e)}},function(){try{E=(0,f.Z)(A).getInstance(),r=E.getLogger(t),Q(),b=(0,Ut.Z)(A).getInstance(),v=jt(A).create({updateEventName:u.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:u.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),m=Dt(A).create({streamInfo:z,mediaPlayerModel:O,dashMetrics:P,errHandler:L,settings:H,boxParser:b,dashConstants:a.Z,urlUtils:N})}catch(e){throw e}}(),t}qt.__dashjs_factory_name="Stream";var Gt=c.Z.getClassFactory(qt),zt=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t||null,this.type=C.w.CONTENT_STEERING_TYPE,this.responseType="json"},Ht=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function Vt(){var e,t,r,n,i,o,s,l,u,c,h,p,g,m,y,v=this.context,_=(0,X.Z)(v).getInstance();function b(e){A(e,"baseUrl")}function E(e){A(e,"location")}function w(e){if(e&&e.request&&e.request.serviceLocation&&e.request.requestStartDate&&e.request.requestEndDate&&!isNaN(e.request.bytesTotal)){var t=e.request.serviceLocation,r=e.request.requestEndDate.getTime()-e.request.requestStartDate.getTime();T(t,parseInt(8*e.request.bytesTotal/r*1e3))}}function S(e){e&&e.httpRequest&&e.httpRequest._serviceLocation&&!isNaN(e.throughput)&&T(e.httpRequest._serviceLocation,1e3*e.throughput)}function T(e,t){i[e]||(i[e]=[]),i[e].push(t),i[e].length>4&&i[e].shift()}function A(e,t){if(e&&e.request&&e.request.serviceLocation){var r=e.request.serviceLocation;-1===n[t].all.indexOf(r)&&n[t].all.push(r),n[t].current=r}}function I(){var e=h.getValue(),t=y.getContentSteering(e);return t||(t=g.getServiceDescriptionSettings().contentSteering),t}function N(){return new Promise(function(e){try{var o=I();if(!o||!o.serverUrl)return void e();var l=function(e){var t=e.serverUrl;r&&r.reloadUri&&(t=_.isRelative(r.reloadUri)?_.resolve(r.reloadUri,e.serverUrl):r.reloadUri);var o=[],a=n.baseUrl.all.concat(n.location.all);if(a.length>0){var s=a.map(function(e){var t=function(e){if(!e||!i[e]||0===i[e].length)return-1;var t=i[e].reduce(function(e,t){return e+t})/i[e].length;return parseInt(t)}(e);return{serviceLocation:e,throughput:t}});s.sort(function(e,t){return t.throughput-e.throughput});var l="",u="";s.forEach(function(e,t){0!==t&&(l="".concat(l,","),e.throughput>-1&&(u="".concat(u,","))),l="".concat(l).concat(e.serviceLocation),e.throughput>-1&&(u="".concat(u).concat(e.throughput))}),o.push({key:"_DASH_pathway",value:'"'.concat(l,'"')}),o.push({key:"_DASH_throughput",value:u})}return Ge.Z.addAditionalQueryParameterToUrl(t,o)}(o),u=new zt(l);s.load({request:u,success:function(t){!function(e){e&&e[a.Z.CONTENT_STEERING_RESPONSE.VERSION]&&1===parseInt(e[a.Z.CONTENT_STEERING_RESPONSE.VERSION])&&((r=new Ht).version=e[a.Z.CONTENT_STEERING_RESPONSE.VERSION],e[a.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(e[a.Z.CONTENT_STEERING_RESPONSE.TTL])&&(r.ttl=e[a.Z.CONTENT_STEERING_RESPONSE.TTL]),e[a.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(r.reloadUri=e[a.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),e[a.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(r.pathwayPriority=e[a.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),e[a.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(r.pathwayClones=e[a.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],r.pathwayClones=r.pathwayClones.filter(function(e){return function(e){return e[a.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&e[a.Z.CONTENT_STEERING_RESPONSE.ID]&&e[a.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&e[a.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][a.Z.CONTENT_STEERING_RESPONSE.HOST]}(e)})),P())}(t),m.trigger(d.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:r,url:l}),e()},error:function(n,i,o,a){!function(e,n){try{switch(t.warn("Error fetching data from content steering server",e),n.status){case 410:break;case 429:var i=n&&n.getResponseHeader?n.getResponseHeader("retry-after"):null;null!==i&&(r||(r={}),r.ttl=parseInt(i)),P();break;default:P()}}catch(e){t.error(e)}}(n,a),e(n)},complete:function(){n.baseUrl.all=C(n.baseUrl),n.location.all=C(n.location)}})}catch(t){e(t)}})}function C(e){return e.all&&0!==e.all.length&&e.current?e.all.filter(function(t){return t===e.current}):[]}function O(e){try{var n=[];return e&&0!==e.length&&r&&r.pathwayClones&&0!==r.pathwayClones.length?(r.pathwayClones.forEach(function(t){var r=e.filter(function(e){return t[a.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===e.serviceLocation}),i=null;if(r&&r.length>0&&(i=r[0]),i){var o=new URL(i.url),s=t[a.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][a.Z.CONTENT_STEERING_RESPONSE.HOST];s=Ge.Z.stringHasProtocol(s)?s:"".concat(o.protocol,"//").concat(s);var l={synthesizedUrl:"".concat(s).concat(o.pathname),serviceLocation:t[a.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:t[a.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][a.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:i};n.push(l)}}),n):n}catch(e){return t.error(e),[]}}function P(){r&&r.ttl&&!isNaN(r.ttl)&&(o&&clearTimeout(o),o=setTimeout(function(){N()},1e3*r.ttl))}function x(){o&&clearTimeout(o),o=null}function D(){r=null,i={},n={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},x()}return e={reset:function(){D(),m.off(d.Z.FRAGMENT_LOADING_STARTED,b,e),m.off(d.Z.MANIFEST_LOADING_STARTED,E,e),m.off(d.Z.MANIFEST_LOADING_FINISHED,w,e),m.off(d.Z.THROUGHPUT_MEASUREMENT_STORED,S,e)},setConfig:function(e){e&&(e.adapter&&(y=e.adapter),e.errHandler&&(l=e.errHandler),e.dashMetrics&&(u=e.dashMetrics),e.mediaPlayerModel&&(c=e.mediaPlayerModel),e.requestModifier&&(p=e.requestModifier),e.manifestModel&&(h=e.manifestModel),e.serviceDescriptionController&&(g=e.serviceDescriptionController),e.eventBus&&(m=e.eventBus))},loadSteeringData:N,getCurrentSteeringResponseData:function(){return r},shouldQueryBeforeStart:function(){var e=I();return!!e&&e.queryBeforeStart},getSteeringDataFromManifest:I,stopSteeringRequestTimer:x,getSynthesizedBaseUrlElements:function(e){try{return O(e).map(function(e){var t=new we(e.synthesizedUrl,e.serviceLocation);return t.queryParams=e.queryParams,t.dvbPriority=e.reference.dvbPriority,t.dvbWeight=e.reference.dvbWeight,t.availabilityTimeOffset=e.reference.availabilityTimeOffset,t.availabilityTimeComplete=e.reference.availabilityTimeComplete,t})}catch(e){return t.error(e),[]}},getSynthesizedLocationElements:function(e){try{return O(e).map(function(e){var t=new De(e.synthesizedUrl,e.serviceLocation);return t.queryParams=e.queryParams,t})}catch(e){return t.error(e),[]}},initialize:function(){s=wt(v).create({errHandler:l,dashMetrics:u,mediaPlayerModel:c,requestModifier:p,errors:R}),m.on(d.Z.FRAGMENT_LOADING_STARTED,b,e),m.on(d.Z.MANIFEST_LOADING_STARTED,E,e),m.on(d.Z.MANIFEST_LOADING_FINISHED,w,e),m.on(d.Z.THROUGHPUT_MEASUREMENT_STORED,S,e)}},t=(0,f.Z)(v).getInstance().getLogger(e),D(),e}Vt.__dashjs_factory_name="ContentSteeringController";var Wt=c.Z.getSingletonFactory(Vt);function Yt(){var e,t,r,n=this.context,i=(0,N.Z)(n).getInstance();return e={select:function(e){if(!e||0===e.length)return null;var n=null;return i.get().streaming.applyContentSteering&&(n=function(e){var n=r.getCurrentSteeringResponseData();return n&&n.pathwayPriority&&n.pathwayPriority.length>0?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0,i=null,o=function(){var o=e[n],a=r.findIndex(function(e){return e.serviceLocation&&e.serviceLocation===o});if(-1!==a&&!t.contains(r[a].serviceLocation))return i=r[a],"break";n+=1};n<e.length&&"break"!==o(););return i}(n.pathwayPriority,e):null}(e)),n||(n=function(e){return e[0]}(e)),n},setConfig:function(e){e.blacklistController&&(t=e.blacklistController),e.contentSteeringController&&(r=e.contentSteeringController)},reset:function(){t.reset()}},t=jt(n).create({updateEventName:u.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:u.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),r=Wt(n).getInstance(),e}Yt.__dashjs_factory_name="LocationSelector";var Kt=c.Z.getClassFactory(Yt);function Qt(){var e,t,r,n,i,o,s,c,h,p,g,m,y,v,_=this.context,b=(0,l.Z)(_).getInstance(),E=(0,X.Z)(_).getInstance();function w(){r=NaN,s=!1,i=!0,o=!1,S()}function S(){null!==n&&(clearTimeout(n),n=null)}function T(e){S(),o||(isNaN(e)&&!isNaN(r)&&(e=1e3*r),isNaN(e)||(t.debug("Refresh manifest in "+e+" milliseconds."),n=setTimeout(C,e)))}function A(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s=!0;var t=h.getValue(),r=t.url,n=null,i=g.getPatchLocation(t),o=p.select(i),a=null;if(o&&!e)r=o.url,n=o.serviceLocation,a=o.queryParams;else{var l=I(t),u=p.select(l);u&&(r=u.url,n=u.serviceLocation,a=u.queryParams)}E.isRelative(r)&&(r=E.resolve(r,t.url)),c.load(r,n,a)}function I(e){var t=g.getLocation(e),r=y.getSynthesizedLocationElements(t);return t.concat(r)}function N(e){if(e){if(g.getIsPatch(e)){var n=e;e=h.getValue();var l=g.isPatchValid(e,n),c=l;if(l){var f=g.getPublishTime(e);c=g.applyPatchToManifest(e,n);var d=g.getPublishTime(e);c=f.getTime()!=d.getTime()}if(!c)return t.debug("Patch provided is invalid, performing full manifest refresh"),void A(!0);e.loadedTime=new Date}}else(e=h.getValue()).loadedTime=new Date;if(h.getValue()&&h.getValue().type===a.Z.DYNAMIC&&e.type===a.Z.STATIC)return b.trigger(u.Z.DYNAMIC_TO_STATIC),s=!1,void(o=!0);h.setValue(e);var p=new Date,m=(p.getTime()-e.loadedTime.getTime())/1e3;1e3*(r=g.getManifestUpdatePeriod(e,m))>2147483647&&(r=2147483.647),b.trigger(u.Z.MANIFEST_UPDATED,{manifest:e}),t.info("Manifest has been refreshed at "+p+"["+p.getTime()/1e3+"] "),i||T()}function C(){i||(s?T(v.get().streaming.manifestUpdateRetryInterval):A())}function O(e){e.error?e.error.code===R.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&m.error(e.error):N(e.manifest)}function P(){i=!1,T()}function x(){(i=!v.get().streaming.scheduling.scheduleWhilePaused)&&S()}function D(){s=!1}return e={initialize:function(){w(),b.on(u.Z.STREAMS_COMPOSED,D,this),b.on(d.Z.PLAYBACK_STARTED,P,this),b.on(d.Z.PLAYBACK_PAUSED,x,this),b.on(u.Z.INTERNAL_MANIFEST_LOADED,O,this)},setManifest:function(e){N(e)},refreshManifest:A,getIsUpdating:function(){return s},setConfig:function(e){e&&(e.manifestModel&&(h=e.manifestModel),e.adapter&&(g=e.adapter),e.manifestLoader&&(c=e.manifestLoader),e.errHandler&&(m=e.errHandler),e.locationSelector&&(p=e.locationSelector),e.settings&&(v=e.settings),e.contentSteeringController&&(y=e.contentSteeringController))},reset:function(){b.off(d.Z.PLAYBACK_STARTED,P,this),b.off(d.Z.PLAYBACK_PAUSED,x,this),b.off(u.Z.STREAMS_COMPOSED,D,this),b.off(u.Z.INTERNAL_MANIFEST_LOADED,O,this),w()}},t=(0,f.Z)(_).getInstance().getLogger(e),p=Kt(_).create(),e}Qt.__dashjs_factory_name="ManifestUpdater";var Xt=c.Z.getClassFactory(Qt);function $t(){var e,t,r,n,i,o,a,s,c,d,h,p,g,m,y,v,_=this.context,b=(0,l.Z)(_).getInstance(),E=(0,X.Z)(_).getInstance();function S(){s=[],c=[],d=null,h=null,g=null,p=NaN,r=!1,n=!1,m=i.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function T(){i.get().streaming.utcSynchronization.enabled&&!r&&!n&&g&&g.value&&g.schemeIdUri&&!isNaN(p)&&!isNaN(i.get().streaming.utcSynchronization.backgroundAttempts)&&(h&&(Date.now()-h)/1e3<30||(s=[],n=!0,A(isNaN(i.get().streaming.utcSynchronization.backgroundAttempts)?2:i.get().streaming.utcSynchronization.backgroundAttempts)))}function A(e){try{if(e<=0)return void j();var t=Date.now();o[g.schemeIdUri](g.value,function(r){var n=Date.now(),i=N(t,n,r);s.push(i),A(e-1)},function(){j()})}catch(e){j()}}function I(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||0;if(!c||0===c.length||e>=c.length)O();else{var t=c[e];if(t)if(o.hasOwnProperty(t.schemeIdUri)){var r=(new Date).getTime();o[t.schemeIdUri](t.value,function(e){var n=(new Date).getTime(),i=N(r,n,e);g=t,O(i)},function(){I(e+1)})}else I(e+1);else O()}}function N(e,t,r){return r-(t-(t-e)/2)}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,t=isNaN(e);t&&i.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?U():B(t,e)}function P(e){var t=Date.parse(e);return isNaN(t)&&(t=function(e){var t,r,n=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e);return t=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&(parseInt(n[6],10)||0),n[7]&&1e3*parseFloat(n[7])||0),n[9]&&n[10]&&(r=60*parseInt(n[9],10)+parseInt(n[10],10),t+=("+"===n[8]?-1:1)*r*60*1e3),new Date(t).getTime()}(e)),t}function x(e){return Date.parse(e)}function D(e){return Date.parse(e)}function k(e,t,r){r()}function M(e,t,r){var n=P(e);isNaN(n)?r():t(n)}function L(e,t,r,n,i){var o,a,s=!1,l=new XMLHttpRequest,u=i?C.w.HEAD:C.w.GET,c=t.match(/\S+/g);if(t=c.shift(),o=function(){s||(s=!0,c.length?L(e,c.join(" "),r,n,i):n())},a=function(){var t,n;200===l.status&&(t=i?l.getResponseHeader("Date"):l.response,n=e(t),isNaN(n)||(r(n),s=!0))},E.isRelative(t)){var f=v.resolve();f&&(t=E.resolve(t,f.url))}l.open(u,t),l.timeout=5e3,l.onload=a,l.onloadend=o,l.send()}function F(e,t,r){L(D,e,t,r,!0)}function U(){var e=a.getLatestMPDRequestHeaderValueByID("Date"),t=null!==e?new Date(e).getTime():Number.NaN;isNaN(t)?B(!0):B(!1,t-Date.now())}function B(e,n){if(isNaN(p)||isNaN(n)||e||function(e){try{var r,n=Z(e),o=isNaN(m)?30:m,a=isNaN(i.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:i.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,s=isNaN(i.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:i.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,l=isNaN(i.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:i.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;n?(r=Math.min(o*a,s),t.debug("Increasing timeBetweenSyncAttempts to ".concat(r))):(r=Math.max(o/a,l),t.debug("Decreasing timeBetweenSyncAttempts to ".concat(r))),m=r}catch(e){}}(n),!e&&!isNaN(n)){d=Date.now(),r=!1;var o=isNaN(p);p=n,o&&T(),t.debug("Completed UTC sync. Setting client - server offset to ".concat(n))}e&&(g=null,r=!1,y.error(new w.Z(R.TIME_SYNC_FAILED_ERROR_CODE,R.TIME_SYNC_FAILED_ERROR_MESSAGE))),b.trigger(u.Z.UPDATE_TIME_SYNC_OFFSET,{offset:n}),b.trigger(u.Z.TIME_SYNCHRONIZATION_COMPLETED)}function j(){if(s&&0!==s.length){var e=s.reduce(function(e,t){return e+t},0)/s.length;Z(e)?t.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(t.debug("Completed background UTC sync. Setting client - server offset to ".concat(e)),p=e,b.trigger(u.Z.UPDATE_TIME_SYNC_OFFSET,{offset:p})),n=!1,h=Date.now()}}function Z(e){try{if(isNaN(p))return!0;var t=i.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(i.get().streaming.utcSynchronization.maximumAllowedDrift)?i.get().streaming.utcSynchronization.maximumAllowedDrift:100;return e>=p-t&&e<=p+t}catch(e){return!0}}return e={initialize:function(){S(),o={"urn:mpeg:dash:utc:http-head:2014":F,"urn:mpeg:dash:utc:http-xsdate:2014":L.bind(null,P),"urn:mpeg:dash:utc:http-iso:2014":L.bind(null,x),"urn:mpeg:dash:utc:direct:2014":M,"urn:mpeg:dash:utc:http-head:2012":F,"urn:mpeg:dash:utc:http-xsdate:2012":L.bind(null,P),"urn:mpeg:dash:utc:http-iso:2012":L.bind(null,x),"urn:mpeg:dash:utc:direct:2012":M,"urn:mpeg:dash:utc:http-ntp:2014":k,"urn:mpeg:dash:utc:ntp:2014":k,"urn:mpeg:dash:utc:sntp:2014":k}},attemptSync:function(e,t){c=e,r||(function(e){try{if(!e||!i.get().streaming.utcSynchronization.enabled)return!1;var t=isNaN(m)?30:m;return!(d&&t&&!isNaN(t))||(Date.now()-d)/1e3>=t}catch(e){return!0}}(t)?(r=!0,I()):b.trigger(u.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(e){e&&(e.dashMetrics&&(a=e.dashMetrics),e.baseURLController&&(v=e.baseURLController),e.errHandler&&(y=e.errHandler),e.settings&&(i=e.settings))},reset:function(){S(),b.off(u.Z.ATTEMPT_BACKGROUND_SYNC,T,e)}},t=(0,f.Z)(_).getInstance().getLogger(e),b.on(u.Z.ATTEMPT_BACKGROUND_SYNC,T,e),e}$t.__dashjs_factory_name="TimeSyncController";var Jt=c.Z.getSingletonFactory($t);Jt.HTTP_TIMEOUT_MS=5e3,c.Z.updateSingletonFactory($t.__dashjs_factory_name,Jt);var er=Jt;function tr(){var e,t,r,n,i,o=this.context,a=(0,l.Z)(o).getInstance();return e={attachMediaSource:function(e){var r=window.URL.createObjectURL(t);return e.setSource(r),"managedMediaSource"===n&&(e.setDisableRemotePlayback(!0),t.addEventListener("startstreaming",function(){a.trigger(d.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),t.addEventListener("endstreaming",function(){a.trigger(d.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),r},createMediaSource:function(){var e="WebKitMediaSource"in window,r="MediaSource"in window;return"ManagedMediaSource"in window?(t=new ManagedMediaSource,n="managedMediaSource",i.info("Created ManagedMediaSource")):r?(t=new MediaSource,n="mediaSource",i.info("Created MediaSource")):e&&(t=new WebKitMediaSource,i.info("Created WebkitMediaSource")),t},detachMediaSource:function(e){e.setSource(null)},setConfig:function(e){e&&e.settings&&(r=e.settings)},setDuration:function e(n){t&&"open"===t.readyState&&(null===n&&isNaN(n)||t.duration!==n&&(n!==1/0||r.get().streaming.buffer.mediaSourceDurationInfinity||(n=Math.pow(2,32)),function(e){for(var t=e.sourceBuffers,r=0;r<t.length;r++)if(t[r].updating)return!0;return!1}(t)?setTimeout(e.bind(null,n),50):(i.info("Set MediaSource duration:"+n),t.duration=n)))},setSeekable:function(e,r){t&&"function"==typeof t.setLiveSeekableRange&&"function"==typeof t.clearLiveSeekableRange&&"open"===t.readyState&&e>=0&&e<r&&(t.clearLiveSeekableRange(),t.setLiveSeekableRange(e,r))},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var t=e.sourceBuffers,r=0;r<t.length;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}i.info("call to mediaSource endOfStream"),e.endOfStream()}}},i=(0,f.Z)(o).getInstance().getLogger(e),e}tr.__dashjs_factory_name="MediaSourceController";var rr=c.Z.getSingletonFactory(tr);function nr(){var e,t,r,n,i,o,a,s,u,c,h,p="urn:mpeg:dash:event:2012",g="discarded",m="updated",y="added",v=this.context,_=(0,l.Z)(v).getInstance();function b(){if(!a||!s)throw new Error("setConfig function has to be called previously")}function E(){h=!1,r={},n={},i=null,c=!1,o=Date.now()/1e3}function w(){try{if(!c){c=!0;var e=s.getTime(),i=e-o;i=o>0?Math.max(0,i):0,S(n,i,e),S(r,i,e),T(n),T(r),o=e,c=!1}}catch(e){c=!1,t.error(e)}}function S(e,r,n){try{N(e,function(i){if(void 0!==i){var o=isNaN(i.duration)?0:i.duration;i.calculatedPresentationTime<=n&&i.calculatedPresentationTime+r+o>=n?O(i,d.Z.EVENT_MODE_ON_START):(C(n,o+r,i.calculatedPresentationTime)||function(e){try{var r=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime>r}catch(e){return t.error(e),!1}}(i))&&(t.debug("Removing event ".concat(i.id," from period ").concat(i.eventStream.period.id," as it is expired or invalid")),function(e,r){try{var n=r.eventStream.schemeIdUri,i=r.eventStream.period.id,o=r.eventStream.value,a=r.id;e[i][n]=e[i][n].filter(function(e){return o&&e.eventStream.value&&e.eventStream.value!==o||e.id!==a}),0===e[i][n].length&&delete e[i][n]}catch(e){t.error(e)}}(e,i))}})}catch(e){t.error(e)}}function T(e){try{for(var r in e)e.hasOwnProperty(r)&&0===Object.keys(e[r]).length&&delete e[r]}catch(e){t.error(e)}}function A(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.eventStream.schemeIdUri,i=e.eventStream.value,o=e.id,a=g;t[n]||(t[n]=[]);var s=t[n].findIndex(function(e){return(!i||e.eventStream.value&&e.eventStream.value===i)&&e.id===o});if(-1===s)t[n].push(e),e.triggeredReceivedEvent=!1,e.triggeredStartEvent=!1,a=y;else if(r){var l=t[n][s];e.triggeredReceivedEvent=l.triggeredReceivedEvent,e.triggeredStartEvent=l.triggeredStartEvent,t[n][s]=e,a=m}return a}function I(e){try{if(1==e.eventStream.value){var r,n=e.calculatedPresentationTime;r=4294967295==e.calculatedPresentationTime?NaN:e.calculatedPresentationTime+e.duration,_.trigger(d.Z.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:n,newDuration:r,newManifestValidAfter:NaN},{mode:d.Z.EVENT_MODE_ON_START})}}catch(e){t.error(e)}}function R(e){try{var r=s.getTime();N(e,function(e){var t=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.duration)?e.eventStream.period.duration:NaN,n=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.start)?e.eventStream.period.start:NaN;if(!isNaN(t)&&!isNaN(n)){var i=e.calculatedPresentationTime;Math.abs(i-r)<300&&O(e,d.Z.EVENT_MODE_ON_START)}})}catch(e){t.error(e)}}function N(e,r){try{if(e)for(var n=Object.keys(e),i=0;i<n.length;i++)for(var o=e[n[i]],a=Object.keys(o),s=0;s<a.length;s++)o[a[s]].forEach(function(e){void 0!==e&&r(e)})}catch(e){t.error(e)}}function C(e,r,n){try{return e-r>n}catch(e){return t.error(e),!1}}function O(e,r){try{var n=s.getTime(),i=e.id;if(r===d.Z.EVENT_MODE_ON_RECEIVE&&!e.triggeredReceivedEvent)return t.debug("Received event ".concat(i)),e.triggeredReceivedEvent=!0,void _.trigger(e.eventStream.schemeIdUri,{event:e},{mode:r});e.triggeredStartEvent||(e.eventStream.schemeIdUri===p&&1==e.eventStream.value?0===e.duration&&0===e.presentationTimeDelta||(t.debug("Starting manifest refresh event ".concat(i," at ").concat(n)),function(){try{b(),a.refreshManifest()}catch(e){t.error(e)}}()):"urn:mpeg:dash:event:callback:2015"===e.eventStream.schemeIdUri&&1==e.eventStream.value?(t.debug("Starting callback event ".concat(i," at ").concat(n)),function(e){try{(0,se.Z)(v).create({}).load({method:"get",url:e,request:{responseType:"arraybuffer"}})}catch(e){t.error(e)}}(e.messageData)):(t.debug("Starting event ".concat(i," from period ").concat(e.eventStream.period.id," at ").concat(n)),_.trigger(e.eventStream.schemeIdUri,{event:e},{mode:r})),e.triggeredStartEvent=!0)}catch(e){t.error(e)}}return e={addInlineEvents:function(e,n){try{if(b(),r[n]||(r[n]={}),e)for(var i=0;i<e.length;i++){var o=e[i];if(!C(s.getTime(),isNaN(o.duration)?0:o.duration,o.calculatedPresentationTime)){var a=A(o,r[n],!0);a===y?(t.debug("Added inline event with id ".concat(o.id," from period ").concat(n)),O(o,d.Z.EVENT_MODE_ON_RECEIVE)):a===m&&t.debug("Updated inline event with id ".concat(o.id," from period ").concat(n))}}}catch(e){throw e}},addInbandEvents:function(e,r){try{b(),n[r]||(n[r]={});for(var i=0;i<e.length;i++){var o=e[i];C(s.getTime(),isNaN(o.duration)?0:o.duration,o.calculatedPresentationTime)||(A(o,n[r],!1)===y?(o.eventStream.schemeIdUri===p&&I(o),t.debug("Added inband event with id ".concat(o.id," from period ").concat(r)),O(o,d.Z.EVENT_MODE_ON_RECEIVE)):t.debug("Inband event with scheme_id_uri ".concat(o.eventStream.schemeIdUri,", value ").concat(o.eventStream.value,", period id ").concat(r," and event id ").concat(o.id," was ignored because it has been added before.")))}w()}catch(e){throw e}},getInbandEvents:function(){return n},getInlineEvents:function(){return r},start:function(){try{b(),t.debug("Start Event Controller");var e=u.get().streaming.eventControllerRefreshDelay;h||isNaN(e)||(h=!0,i=setInterval(w,e))}catch(e){throw e}},setConfig:function(e){try{if(!e)return;e.manifestUpdater&&(a=e.manifestUpdater),e.playbackController&&(s=e.playbackController),e.settings&&(u=e.settings)}catch(e){throw e}},reset:function(){(function(){try{null!==i&&h&&(clearInterval(i),i=null,h=!1,function(){try{R(n),R(r)}catch(e){t.error(e)}}())}catch(e){throw e}})(),E()}},t=(0,f.Z)(v).getInstance().getLogger(e),E(),e}nr.__dashjs_factory_name="EventController";var ir=c.Z.getSingletonFactory(nr),or={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sr(){var e,t,r,n,i,a,c,h,p,g,m,y,v,_,b,E,S,T,A,I,N,C,O,P,x,D,k,L,F,U,B,j,Z,q,G,z,H,V,W,Y,K,Q,X,$,te,re,ne,ie,oe=this.context,ae=(0,l.Z)(oe).getInstance();function se(){if(!(a&&a.hasOwnProperty("load")&&N&&N.hasOwnProperty("initialize")&&N.hasOwnProperty("reset")&&N.hasOwnProperty("getClientTimeOffset")&&c&&I&&p&&Z))throw new Error(o.Z.MISSING_CONFIG_ERROR)}function le(){if(!i||!i.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function ue(){!function(){try{var e=h.getStreamsInfo();if(!O&&0===e.length)throw new Error("There are no periods in the MPD");O&&e.length>0&&p.updateManifestUpdateInfo({currentTime:Z.getTime(),buffered:j.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:N.getClientTimeOffset()}),C.length>0&&function(e){0!==e.length?C=C.filter(function(r){var n=e.filter(function(e){return e.id===r.getId()}).length>0||r.getId()===O.getId();return n||(t.debug("Removing stream ".concat(r.getId())),r.reset(!0)),n}):t.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(e);for(var r=[],n=0,i=e.length;n<i;n++){var o=e[n];r.push(fe(o)),p.addManifestUpdateStreamInfo(o)}Promise.all(r).then(function(){return new Promise(function(t,r){O?t():de(e,t,r)})}).then(function(){ae.trigger(u.Z.STREAMS_COMPOSED),xe()}).catch(function(e){throw e})}catch(e){I.error(new w.Z(R.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+" nostreamscomposed",c.getValue())),U=!0,Xe()}}()}function ce(){te=!0}function fe(e){var t=Ye(e.id);return t?t.updateData(e):(t=Gt(oe).create({manifestModel:c,mediaPlayerModel:G,dashMetrics:p,manifestUpdater:i,adapter:h,timelineConverter:N,capabilities:r,capabilitiesFilter:n,errHandler:I,baseURLController:v,segmentBaseController:_,textController:x,abrController:E,playbackController:Z,eventController:T,mediaController:S,protectionController:P,videoModel:j,streamInfo:e,settings:$}),C.push(t),t.initialize(),Promise.resolve())}function de(e,r,n){try{Te();var i=p.getCurrentDVRInfo().range;if(i.end<i.start){re&&clearTimeout(re);var o=Math.min(1e3*(-1*(i.end-i.start)+2),2147483647);return t.debug("Waiting for ".concat(o," ms before playback can start")),ae.trigger(u.Z.AST_IN_FUTURE,{delay:o}),void(re=setTimeout(function(){de(e,r,n)},o))}$.get().streaming.applyProducerReferenceTime&&q.calculateProducerReferenceTimeOffsets(e);var a=e[0].manifestInfo;if($.get().streaming.applyServiceDescription&&q.applyServiceDescription(a),h.getIsDynamic()){var s=je(e,a);Z.computeAndSetLiveDelay(s,a)}($.get().streaming.applyContentSteering&&y.shouldQueryBeforeStart()?y.loadSteeringData():Promise.resolve()).then(function(){var e=c.getValue();e&&v.update(e),he(),r()}).catch(function(e){t.error(e),he(),r()})}catch(e){n(e)}}function he(){var e=function(){var e;if(h.getIsDynamic()){var r=p.getCurrentDVRInfo();e=(r&&r.range?r.range.end:0)-Z.getOriginalLiveDelay();var n=r?r.range:null;if(n){if(isNaN(ne)&&-1===ne.toString().indexOf("posix:")){var i=Fe(!0);isNaN(i)||(t.info("Start time from URI parameters: ".concat(i)),e=Math.min(e,i))}else{t.info("Start time provided by the app: ".concat(ne));var o=Ue(!0,ne);isNaN(o)||(e=Math.min(e,o))}var a=$.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;e=Math.max(e,n.start+a)}}else if(e=Je()[0].getStreamInfo().start,isNaN(ne)){var s=Fe(!1);isNaN(s)||(t.info("Start time from URI parameters: ".concat(s)),e=Math.max(e,s))}else{t.info("Start time provided by the app: ".concat(ne));var l=Ue(!1,ne);isNaN(l)||(e=Math.max(e,l))}return e}(),r=Se(e),n=null!==r?r:C[0];ae.trigger(u.Z.INITIAL_STREAM_SWITCH,{startTime:e}),pe(n,null,e),Y||(Y=setInterval(function(){!L&&Z.getTimeToStreamEnd()<=0&&!Z.isSeeking()&&ae.trigger(u.Z.PLAYBACK_ENDED,{isLast:We().isLast})},200))}function pe(e,r,n){try{if(L||!e||r===e&&e.getIsActive())return;L=!0,ae.trigger(u.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:r?r.getStreamInfo():null,toStreamInfo:e.getStreamInfo()});var i=!1;O=e,r&&(i=Ee(e,r),r.deactivate(i)),n=isNaN(n)?!i&&r?e.getStreamInfo().start:NaN:n,t.info("Switch to stream ".concat(e.getId(),". Seektime is ").concat(n,", current playback time is ").concat(Z.getTime(),". Seamless period switch is set to ").concat(i)),Q=Q.filter(function(e){return e.getId()!==O.getId()}),Z.initialize(We(),!!r),j.getElement()?ge(n,i,!1):me(n,i)}catch(e){L=!1}}function ge(e,r){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];function o(){if(B&&"open"===B.readyState){t.debug("MediaSource is open!"),window.URL.revokeObjectURL(n),B.removeEventListener("sourceopen",o),B.removeEventListener("webkitsourceopen",o),Le();var a=p.getCurrentDVRInfo();g.setSeekable(a.range.start,a.range.end),i?(isNaN(e)||Z.seek(e,!0,!0),O.setMediaSource(B).then(function(){O.initializeForTextWithMediaSource(B)})):me(e,r)}}function a(){B.addEventListener("sourceopen",o,!1),B.addEventListener("webkitsourceopen",o,!1),n=g.attachMediaSource(j),t.debug("MediaSource attached to element.  Waiting on open...")}B?r?me(e,r):(g.detachMediaSource(j),a()):(B=g.createMediaSource(),a())}function me(e,t){O.activate(B,t?K:void 0,e).then(function(t){if(t){var r=Object.keys(t);r.length>0&&t[r[0]].getBuffer().changeType&&(X=!0),K=t}isNaN(e)||(ae.trigger(u.Z.SEEK_TARGET,{time:e},{streamId:O.getId()}),Z.seek(e,!1,!0),O.startScheduleControllers()),L=!1,ae.trigger(u.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:We()})})}function ye(e){var t=Se(e.seekTime);t&&t!==O?t&&t!==O&&(ve(),function(e,t){var r=e&&!isNaN(e.seekTime)?e.seekTime:NaN,n=O.getProcessors().map(function(t){return t.prepareOuterPeriodPlaybackSeeking(e)});Promise.all(n).then(function(){pe(t,O,r)}).catch(function(e){I.error(e)})}(e,t)):(ve(),function(e){O.getProcessors().forEach(function(t){return t.prepareInnerPeriodPlaybackSeeking(e)}),ze(ee.USER_REQUEST_STOP_REASON)}(e)),He(J.SEEK_START_REASON)}function ve(){_e()}function _e(){Q&&Q.length>0&&(Q.forEach(function(e){e.deactivate(!0)}),Q=[])}function be(e){if(e.newMediaInfo.streamInfo.id===O.getId()){if(_e(),$.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&e.oldMediaInfo&&e.oldMediaInfo.codec!==e.newMediaInfo.codec){var t=Z.getTime();return O.deactivate(!1),void ge(t,!1,!1)}O.prepareTrackChange(e)}}function Ee(e,t){try{return $.get().streaming.buffer.reuseExistingSourceBuffers&&(t.isProtectionCompatible(e)||te)&&(X&&$.get().streaming.buffer.useChangeTypeForTrackSwitch||t.isMediaCodecCompatible(e,t))}catch(e){return!1}}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;B&&!e.getPreloaded()&&Ee(e,t)&&e.startPreloading(B,K).then(function(){Q.push(e)})}function Se(e){if(isNaN(e))return null;for(var t=C.length,r=0;r<t;r++){var n=C[r];if(e<parseFloat((n.getStartTime()+n.getDuration()).toFixed(5)))return n}return null}function Te(){try{var e=h.getIsDynamic(),t=h.getStreamsInfo()[0].manifestInfo,r=Z.getTime(),n=N.calcTimeShiftBufferWindow(C,e),i=ke();if(void 0===n.start||void 0===n.end)return;i&&0!==i.length?i.forEach(function(e){p.addDVRInfo(e.getType(),r,t,n)}):p.addDVRInfo(o.Z.VIDEO,r,t,n)}catch(e){}}function Ae(e){if(V&&k){var t=G.getInitialBufferLevel(),r=[o.Z.TEXT];(isNaN(t)||t<=Z.getBufferLevel(r)||h.getIsDynamic()&&t>Z.getLiveDelay())&&(V=!1,He(J.INITIAL_PLAYOUT_START_REASON),Z.play())}e&&e.mediaType&&p.addBufferLevel(e.mediaType,new Date,1e3*e.bufferLevel)}function Ie(e){e.streamInfo.id===O.getId()&&e.reason&&e.reason.forceReplace&&_e(),Ye(e.streamInfo.id).prepareQualityChange(e)}function Re(){if(h.getIsDynamic()&&0!==Z.getOriginalLiveDelay()&&O){var e=h.getStreamsInfo();if(e.length>0){var t=e[0].manifestInfo,r=je(e,t);Z.computeAndSetLiveDelay(r,t)}}}function Ne(){if(qe()){var e=j.getPlaybackQuality();e&&p.addDroppedFrames(e)}}function Ce(){t.debug("[onPlaybackStarted]"),!V&&H&&He(J.RESUME_FROM_PAUSE_START_REASON),V&&(V=!1),W&&(W=!1,$.get().streaming.applyContentSteering&&!y.shouldQueryBeforeStart()&&y.loadSteeringData()),H=!1}function Oe(e){t.debug("[onPlaybackPaused]"),e.ended||(H=!0,ze(ee.USER_REQUEST_STOP_REASON))}function Pe(e){t.debug("Stream with id ".concat(e.streamInfo.id," finished buffering"));var r=e.streamInfo.isLast;B&&r?(t.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),g.signalEndOfStream(B)):xe()}function xe(){if(O&&O.getHasFinishedBuffering())for(var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var t=e||O||null;if(t){var r=t.getStreamInfo();return C.filter(function(e){var t=e.getStreamInfo();return t.start>r.start&&r.id!==t.id})}}catch(e){return[]}}(O),t=0;t<e.length;){var r=e[t],n=0===t?O:e[t-1];!r.getPreloaded()&&n.getHasFinishedBuffering()&&B&&we(r,n),t+=1}}function De(){Y&&(clearInterval(Y),Y=null)}function ke(){return O?O.getProcessors():[]}function Me(e){if(O&&!O.getIsEndedEventSignaled()){O.setIsEndedEventSignaled(!0);var r=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||O||null;if(!e)return null;for(var t=e.getStreamInfo(),r=t.start,n=0,i=-1,o=NaN;n<C.length;){var a=C[n].getStreamInfo(),s=a.start-r;s>0&&(isNaN(o)||s<o)&&t.id!==a.id&&(o=s,i=n),n+=1}return i>=0?C[i]:null}();r?(t.debug("StreamController onEnded, found next stream with id ".concat(r.getStreamInfo().id,". Switching from ").concat(O.getStreamInfo().id," to ").concat(r.getStreamInfo().id)),pe(r,O,NaN)):(t.debug("StreamController no next stream found"),O.setIsEndedEventSignaled(!1)),ze(r?ee.END_OF_PERIOD_STOP_REASON:ee.END_OF_CONTENT_STOP_REASON)}e&&e.isLast&&(De(),y.stopSteeringRequestTimer())}function Le(e){var t=e||We().manifestInfo.duration;g.setDuration(t)}function Fe(e){var t=b.getURIFragmentData();if(!t||!t.t)return NaN;var r=Je()[0].getStreamInfo().start;return t.t=t.t.split(",")[0],Be(e,t.t,r)}function Ue(e,t){var r=0;return e||(r=Je()[0].getStreamInfo().start),Be(e,t,r)}function Be(e,t,r){var n=h.getRegularPeriods()[0],i=t.toString(),o=-1!==i.indexOf("posix:")?"now"===i.substring(6)?Date.now()/1e3:parseFloat(i.substring(6)):NaN;return e&&!isNaN(o)?N.calcPresentationTimeFromWallTime(new Date(1e3*o),n):parseFloat(i)+r}function je(e,t){try{var r=NaN;if(t&&!isNaN(t.maxFragmentDuration)&&isFinite(t.maxFragmentDuration))return t.maxFragmentDuration;if(e&&1===e.length){var n=e[0],i=[o.Z.VIDEO,o.Z.AUDIO,o.Z.TEXT].reduce(function(e,t){var r=h.getMediaInfoForType(n,t);return r&&!1!==r.isFragmented&&e.push(r),e},[]).reduce(function(e,t){var r=h.getVoRepresentations(t);return r&&r.length>0&&r.forEach(function(t){t&&e.push(t)}),e},[]).reduce(function(e,t){var r=h.convertRepresentationToRepresentationInfo(t);return r&&r.fragmentDuration&&!isNaN(r.fragmentDuration)&&e.push(r.fragmentDuration),e},[]);r=Math.max.apply(Math,function(e){if(Array.isArray(e))return ar(e)}(a=i)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return ar(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ar(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(r)?r:NaN}catch(e){return NaN}var a}function Ze(e){if(e.error)U=!0,Xe();else{t.info("Manifest updated... updating data system wide.");var r=e.manifest;h.updatePeriods(r);var i=h.getUTCTimingSources();!h.getIsDynamic()||i&&0!==i.length||ae.trigger(d.Z.CONFORMANCE_VIOLATION,{level:or.LEVELS.WARNING,event:or.EVENTS.NO_UTC_TIMING_ELEMENT});var o=h.getIsDynamic()?i.concat(z.getUTCTimingSources()):i;n.filterUnsupportedFeatures(r).then(function(){v.initialize(r),m.attemptSync(o,h.getIsDynamic())})}}function qe(){return!!O&&O.getHasVideoTrack()}function Ge(){return!!O&&O.getHasAudioTrack()}function ze(e,t){t=t||new Date,ke().forEach(function(r){r.finalisePlayList(t,e)}),p.addPlayList()}function He(e){p.createPlaylistMetrics(1e3*Z.getTime(),e)}function Ve(e){if(e.error){var r="";switch(e.error.code){case 1:r="MEDIA_ERR_ABORTED";break;case 2:r="MEDIA_ERR_NETWORK";break;case 3:r="MEDIA_ERR_DECODE",ie.counts.mediaErrorDecode+=1;break;case 4:r="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:r="MEDIA_ERR_ENCRYPTED";break;default:r="UNKNOWN"}"MEDIA_ERR_DECODE"===r&&$.get().errors.recoverAttempts.mediaErrorDecode>=ie.counts.mediaErrorDecode?function(){t.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var e=Z.getTime();O.deactivate(!1),t.warn("MediaSource has been resetted. Resuming playback from time ".concat(e)),ge(e,!1,!1)}():(F=!0,e.error.message&&(r+=" ("+e.error.message+")"),e.error.msExtendedCode&&(r+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),t.fatal("Video Element Error: "+r),e.error&&t.fatal(e.error),I.error(new w.Z(e.error.code,r)),Xe())}}function We(){return O?O.getStreamInfo():null}function Ye(e){for(var t=0,r=C.length;t<r;t++)if(C[t].getId()===e)return C[t];return null}function Ke(e){isNaN(e.newDuration)||Le(e.newDuration)}function Qe(){C=[],ne=NaN,P=null,L=!1,O=null,F=!1,U=!1,V=!0,W=!0,H=!1,k=!0,Y=null,te=!1,X=!1,Q=[],re=null,ie={counts:{mediaErrorDecode:0}}}function Xe(){se(),m.reset(),ze(F||U?ee.FAILURE_STOP_REASON:ee.USER_REQUEST_STOP_REASON);for(var t=0,r=C?C.length:0;t<r;t++)C[t].reset(F);ae.off(d.Z.PLAYBACK_TIME_UPDATED,Ne,e),ae.off(d.Z.PLAYBACK_SEEKING,ye,e),ae.off(d.Z.PLAYBACK_ERROR,Ve,e),ae.off(d.Z.PLAYBACK_STARTED,Ce,e),ae.off(d.Z.PLAYBACK_PAUSED,Oe,e),ae.off(d.Z.PLAYBACK_ENDED,Me,e),ae.off(d.Z.METRIC_ADDED,$e,e),ae.off(d.Z.MANIFEST_VALIDITY_CHANGED,Ke,e),ae.off(d.Z.BUFFER_LEVEL_UPDATED,Ae,e),ae.off(d.Z.QUALITY_CHANGE_REQUESTED,Ie,e),u.Z.KEY_SESSION_UPDATED&&ae.off(u.Z.KEY_SESSION_UPDATED,ce,e),ae.off(u.Z.MANIFEST_UPDATED,Ze,e),ae.off(u.Z.STREAM_BUFFERING_COMPLETED,Pe,e),ae.off(u.Z.TIME_SYNCHRONIZATION_COMPLETED,ue,e),ae.off(u.Z.CURRENT_TRACK_CHANGED,be,e),ae.off(u.Z.SETTING_UPDATED_LIVE_DELAY,Re,e),ae.off(u.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Re,e),v.reset(),i.reset(),T.reset(),p.clearAllCurrentMetrics(),c.setValue(null),a.reset(),N.reset(),A.reset(),B&&(g.detachMediaSource(j),B=null),j=null,P&&(P=null,D=null,c.getValue()&&ae.trigger(u.Z.PROTECTION_DESTROYED,{data:c.getValue().url})),De(),ae.trigger(u.Z.STREAM_TEARDOWN_COMPLETE),Qe()}function $e(e){if(e.metric===s.Z.DVR_INFO){var t=Ge()?o.Z.AUDIO:o.Z.VIDEO;e.mediaType===t&&g.setSeekable(e.value.range.start,e.value.range.end)}}function Je(){return C}return e={initialize:function(t,r){se(),k=t,D=r,N.initialize(),(i=Xt(oe).create()).setConfig({manifestModel:c,adapter:h,manifestLoader:a,errHandler:I,settings:$,contentSteeringController:y}),i.initialize(),(T=ir(oe).getInstance()).setConfig({manifestUpdater:i,playbackController:Z,settings:$}),T.start(),m.setConfig({dashMetrics:p,baseURLController:v,errHandler:I,settings:$}),m.initialize(),g.setConfig({settings:$}),P&&(ae.trigger(u.Z.PROTECTION_CREATED,{controller:P}),P.setMediaElement(j.getElement()),D&&P.setProtectionData(D)),ae.on(d.Z.PLAYBACK_TIME_UPDATED,Ne,e),ae.on(d.Z.PLAYBACK_SEEKING,ye,e),ae.on(d.Z.PLAYBACK_ERROR,Ve,e),ae.on(d.Z.PLAYBACK_STARTED,Ce,e),ae.on(d.Z.PLAYBACK_PAUSED,Oe,e),ae.on(d.Z.PLAYBACK_ENDED,Me,e),ae.on(d.Z.METRIC_ADDED,$e,e),ae.on(d.Z.MANIFEST_VALIDITY_CHANGED,Ke,e),ae.on(d.Z.BUFFER_LEVEL_UPDATED,Ae,e),ae.on(d.Z.QUALITY_CHANGE_REQUESTED,Ie,e),u.Z.KEY_SESSION_UPDATED&&ae.on(u.Z.KEY_SESSION_UPDATED,ce,e),ae.on(u.Z.MANIFEST_UPDATED,Ze,e),ae.on(u.Z.STREAM_BUFFERING_COMPLETED,Pe,e),ae.on(u.Z.TIME_SYNCHRONIZATION_COMPLETED,ue,e),ae.on(u.Z.CURRENT_TRACK_CHANGED,be,e),ae.on(u.Z.SETTING_UPDATED_LIVE_DELAY,Re,e),ae.on(u.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Re,e)},getActiveStreamInfo:We,addDVRMetric:Te,hasVideoTrack:qe,hasAudioTrack:Ge,getStreamById:Ye,getStreamForTime:Se,getTimeRelativeToStreamId:function(e,t){for(var r=null,n=0,i=0,o=null,a=0;a<C.length;a++){if(i=(r=C[a]).getStartTime(),o=r.getDuration(),Number.isFinite(i)&&(n=i),r.getId()===t)return e-n;Number.isFinite(o)&&(n+=o)}return null},load:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;se(),ne=t,a.load(e)},loadWithManifest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;le(),ne=t,i.setManifest(e)},getActiveStreamProcessors:ke,setConfig:function(e){e&&(e.capabilities&&(r=e.capabilities),e.capabilitiesFilter&&(n=e.capabilitiesFilter),e.manifestLoader&&(a=e.manifestLoader),e.manifestModel&&(c=e.manifestModel),e.mediaPlayerModel&&(G=e.mediaPlayerModel),e.customParametersModel&&(z=e.customParametersModel),e.protectionController&&(P=e.protectionController),e.adapter&&(h=e.adapter),e.dashMetrics&&(p=e.dashMetrics),e.errHandler&&(I=e.errHandler),e.timelineConverter&&(N=e.timelineConverter),e.videoModel&&(j=e.videoModel),e.playbackController&&(Z=e.playbackController),e.serviceDescriptionController&&(q=e.serviceDescriptionController),e.contentSteeringController&&(y=e.contentSteeringController),e.textController&&(x=e.textController),e.abrController&&(E=e.abrController),e.mediaController&&(S=e.mediaController),e.settings&&($=e.settings),e.baseURLController&&(v=e.baseURLController),e.uriFragmentModel&&(b=e.uriFragmentModel),e.segmentBaseController&&(_=e.segmentBaseController),e.manifestUpdater&&(i=e.manifestUpdater))},setProtectionData:function(e){D=e,P&&P.setProtectionData(D)},getIsStreamSwitchInProgress:function(){return L},switchToVideoElement:function(e){O&&(Z.initialize(We()),ge(e,!1,!0))},getHasMediaOrInitialisationError:function(){return F||U},getStreams:Je,getActiveStream:function(){return O},getInitialPlayback:function(){return V},getAutoPlay:function(){return k},refreshManifest:function(){i.getIsUpdating()||i.refreshManifest()},reset:Xe},t=(0,f.Z)(oe).getInstance().getLogger(e),m=er(oe).getInstance(),g=rr(oe).getInstance(),A=M(oe).getInstance(),Qe(),e}sr.__dashjs_factory_name="StreamController";var lr=c.Z.getSingletonFactory(sr);function ur(){var e,t,r,n,i,a,s,c,d,h,p,g,m=this.context,y=(0,l.Z)(m).getInstance();function v(){g.debug("Stopping the gap controller"),i&&(clearInterval(i),i=null),function(){y.off(u.Z.WALLCLOCK_TIME_UPDATED,S,this),y.off(u.Z.INITIAL_STREAM_SWITCH,w,this),y.off(u.Z.PLAYBACK_SEEKING,_,this),y.off(u.Z.BUFFER_REPLACEMENT_STARTED,b,e),y.off(u.Z.TRACK_CHANGE_RENDERED,E,e)}(),i=null,a=NaN,n=0,h=null,p={}}function _(){h&&(clearTimeout(h),h=null)}function b(e){try{if(e.streamId!==c.getActiveStreamInfo().id||e.mediaType!==o.Z.VIDEO&&e.mediaType!==o.Z.AUDIO)return;e.streamId===c.getActiveStreamInfo().id&&(p[e.mediaType]=!0)}catch(e){g.error(e)}}function E(e){e&&e.mediaType&&(p[e.mediaType]=!1)}function w(){i||function(){try{i||(g.debug("Starting the gap controller"),i=setInterval(function(){T()&&N(s.getTime())},100))}catch(e){}}()}function S(){if(T(r.get().streaming.gaps.enableSeekFix)&&++n>=10){var e=s.getTime();t===e?N(e,!0):(t=e,a=NaN),n=0}}function T(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!c.getActiveStream())return!1;var t=Object.keys(p).some(function(e){return p[e]}),n=!!e&&A();return!t&&r.get().streaming.gaps.jumpGaps&&c.getActiveStreamProcessors().length>0&&(!s.isSeeking()||n)&&!s.isPaused()&&!c.getIsStreamSwitchInProgress()&&!c.getHasMediaOrInitialisationError()}function A(){var e=c.getActiveStream(),t=parseFloat((e.getStartTime()+e.getDuration()).toFixed(5));return s.getTime()+r.get().streaming.gaps.threshold>=t}function I(e,t){try{if(!e||e.length<=1&&t>0)return NaN;for(var n=NaN,i=0;isNaN(n)&&i<e.length;){var o=i>0?e.end(i-1):0;t<e.start(i)&&o-t<r.get().streaming.gaps.threshold&&(n=i),i+=1}return n}catch(e){return null}}function R(e,t){for(var r=0,n=e.length;r<n;r++)if(t>=e.start(r)&&t<=e.end(r))return!0;return!1}function N(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=r.get().streaming.gaps.enableStallFix,o=r.get().streaming.gaps.stallSeek,l=r.get().streaming.gaps.smallGapLimit,u=r.get().streaming.gaps.jumpLargeGaps,f=d.getBufferRange(),p=NaN,m=!1;if(t=I(f,e),!isNaN(t)){var y=f.start(t),v=y-e;v>0&&(v<=l||u)&&(p=y)}var _=s.getTimeToStreamEnd();if(isNaN(p)&&n&&isFinite(_)&&!isNaN(_)&&_<l&&(p=parseFloat(s.getStreamEndTime().toFixed(5)),m=!0),i&&isNaN(p)&&n&&isNaN(t)&&R(f,e)&&(0===o?(g.warn("Toggle play pause to break stall"),d.pause(),d.play()):(g.warn("Jumping ".concat(o,"s to break stall")),p=e+o)),p>0&&a!==p&&p>e&&!h){var b=p-e;if(m){var E=c.getStreamForTime(p),w=E&&!!E.getPreloaded();g.warn("Jumping to end of stream because of gap from ".concat(e," to ").concat(p,". Gap duration: ").concat(b)),s.seek(p,!0,w)}else{var S=s.getIsDynamic(),T=t>0?f.end(t-1):e,A=S?1e3*Math.max(0,b-.1):0;h=window.setTimeout(function(){s.seek(p,!0,!0),g.warn("Jumping gap occuring in period ".concat(c.getActiveStream().getStreamId()," starting at ").concat(T," and ending at ").concat(p,". Jumping by: ").concat(p-T)),h=null},A)}a=p}}return e={reset:v,setConfig:function(e){e&&(e.settings&&(r=e.settings),e.playbackController&&(s=e.playbackController),e.streamController&&(c=e.streamController),e.videoModel&&(d=e.videoModel))},initialize:function(){!function(){y.on(u.Z.WALLCLOCK_TIME_UPDATED,S,this),y.on(u.Z.INITIAL_STREAM_SWITCH,w,this),y.on(u.Z.PLAYBACK_SEEKING,_,this),y.on(u.Z.BUFFER_REPLACEMENT_STARTED,b,e),y.on(u.Z.TRACK_CHANGE_RENDERED,E,e)}()}},g=(0,f.Z)(m).getInstance().getLogger(e),v(),e}ur.__dashjs_factory_name="GapController";var cr=c.Z.getSingletonFactory(ur);function fr(){var e,t,r,n,i,a,c,h,p,g,m=this.context,y=(0,l.Z)(m).getInstance();function v(){t=!1;var e=Ge.Z.parseUserAgent();r=e&&e.browser&&e.browser.name&&"safari"===e.browser.name.toLowerCase()}function _(){t=!1}function b(e){if(e.streamId===a.getActiveStreamInfo().id&&p){var t=c.getLiveDelay();c.getBufferLevel()>t/2&&(p=!1)}}function E(e){e.streamId===a.getActiveStreamInfo().id&&(p=e.state===s.Z.BUFFER_EMPTY)}function w(){h.getCatchupModeEnabled()||n.setPlaybackRate(1)}function S(){c.getIsDynamic()&&h.getCatchupModeEnabled()&&(h.getCatchupPlaybackRates().max>0||h.getCatchupPlaybackRates().min<0)&&!c.isPaused()&&!c.isSeeking()&&function(){try{return!(!c.getTime()>0||t)&&(A()===o.Z.LIVE_CATCHUP_MODE_LOLP?function(e,t){try{return Math.abs(T())>0||e<t}catch(e){return!1}}(c.getBufferLevel(),i.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(T())>0}catch(e){return!1}}())}catch(e){return!1}}()&&function(){if(!t&&n){var e,a=n.getPlaybackRate(),s=h.getCatchupPlaybackRates(),l=c.getBufferLevel(),u=T(),f=h.getCatchupMaxDrift();if(!isNaN(f)&&f>0&&u>f)g.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),t=!0,c.seekToCurrentLive(!0,!1);else{var d=c.getCurrentLiveLatency(),m=c.getLiveDelay();e=A()===o.Z.LIVE_CATCHUP_MODE_LOLP?function(e,t,r,n,i){var o;if(i<n){var a=Math.abs(e.min),s=5*(i-n);o=1-a+2*a/(1+Math.pow(Math.E,-s)),g.debug("[LoL+ playback control_buffer-based] bufferLevel: "+i+", newRate: "+o)}else{if(Math.abs(t-r)<=.02*r)o=1;else{var l=t-r,u=l<0?Math.abs(e.min):e.max,c=5*l;o=1-u+2*u/(1+Math.pow(Math.E,-c))}g.debug("[LoL+ playback control_latency-based] latency: "+t+", newRate: "+o)}return o}(s,d,m,i.get().streaming.liveCatchup.playbackBufferMin,l):function(e,t,r,n){if(p)return 1;var i=t-r,o=i<0?Math.abs(e.min):e.max,a=5*i,s=1-o+2*o/(1+Math.pow(Math.E,-a));return c.getPlaybackStalled()&&n<=r/2&&i>0&&(s=1),s}(s,d,m,l);var y=r?.25:.02/(.5/s.max);e&&Math.abs(a-e)>=y&&(g.debug("[CatchupController]: Setting playback rate to ".concat(e)),n.setPlaybackRate(e))}}}()}function T(){return c.getCurrentLiveLatency()-c.getLiveDelay()}function A(){var e=i.get().streaming.liveCatchup.playbackBufferMin;return i.get().streaming.liveCatchup.mode!==o.Z.LIVE_CATCHUP_MODE_LOLP||null===e||isNaN(e)?o.Z.LIVE_CATCHUP_MODE_DEFAULT:o.Z.LIVE_CATCHUP_MODE_LOLP}function I(){h.getCatchupPlaybackRates(!0)}return e={reset:function(){y.off(d.Z.BUFFER_LEVEL_UPDATED,b,e),y.off(d.Z.BUFFER_LEVEL_STATE_CHANGED,E,e),y.off(d.Z.PLAYBACK_PROGRESS,S,e),y.off(d.Z.PLAYBACK_TIME_UPDATED,S,e),y.off(d.Z.PLAYBACK_SEEKED,_,e),y.off(u.Z.SETTING_UPDATED_CATCHUP_ENABLED,w,e),y.off(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,I,e),y.off(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,I,e),y.off(d.Z.STREAM_INITIALIZED,I,e),v(),n.setPlaybackRate(1,!0)},setConfig:function(e){e&&(e.settings&&(i=e.settings),e.videoModel&&(n=e.videoModel),e.streamController&&(a=e.streamController),e.playbackController&&(c=e.playbackController),e.mediaPlayerModel&&(h=e.mediaPlayerModel))},initialize:function(){y.on(d.Z.BUFFER_LEVEL_UPDATED,b,e),y.on(d.Z.BUFFER_LEVEL_STATE_CHANGED,E,e),y.on(d.Z.PLAYBACK_PROGRESS,S,e),y.on(d.Z.PLAYBACK_TIME_UPDATED,S,e),y.on(d.Z.PLAYBACK_SEEKED,_,e),y.on(u.Z.SETTING_UPDATED_CATCHUP_ENABLED,w,e),y.on(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,I,e),y.on(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,I,e),y.on(d.Z.STREAM_INITIALIZED,I,e),I()}},g=(0,f.Z)(m).getInstance().getLogger(e),v(),e}fr.__dashjs_factory_name="CatchupController";var dr=c.Z.getSingletonFactory(fr),hr=[o.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],pr="video",gr="audio";function mr(){var e,t,r,n,i,s=this.context;function l(){t={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},r=[]}function u(e,r,i){try{t[e][r]=i/1e3}catch(e){n.error(e)}}return e={getServiceDescriptionSettings:function(){return t},getProducerReferenceTimeOffsets:function(){return r},calculateProducerReferenceTimeOffsets:function(e){try{var t=[];if(e&&e.length>0){var s=[o.Z.VIDEO,o.Z.AUDIO,o.Z.TEXT],l=i.getAvailabilityStartTime()/1e3;e.forEach(function(e){var r=s.reduce(function(t,r){return t.concat(i.getAllMediaInfoForType(e,r))},[]).reduce(function(t,r){return i.getProducerReferenceTimes(e,r).forEach(function(n){var o=i.getVoRepresentations(r);if(o&&o.length>0&&o[0].adaptation&&o[0].segmentInfoType===a.Z.SEGMENT_TEMPLATE){var s=o[0],u=new Date(n[a.Z.WALL_CLOCK_TIME]).getTime()/1e3-(n[a.Z.PRESENTATION_TIME]/s[a.Z.TIMESCALE]-s[a.Z.PRESENTATION_TIME_OFFSET]+e.start),c=l-u;t.push({id:n[a.Z.ID],to:c})}}),t},[]);t=t.concat(r)})}r=t}catch(e){n.error(e),r=[]}},applyServiceDescription:function(e){if(e&&e.serviceDescriptions){var i=e.serviceDescriptions.filter(function(e){return hr.includes(e.schemeIdUri)}),a=e.serviceDescriptions.filter(function(e){return null==e.schemeIdUri}),s=i.length>0?i[i.length-1]:a[a.length-1];s&&(s.latency&&s.latency.target>0&&function(e){var i;if(e.schemeIdUri,o.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,i=function(e){return{liveDelay:e.latency.target/1e3,maxDrift:!isNaN(e.latency.max)&&e.latency.max>e.latency.target?(e.latency.max-e.latency.target+500)/1e3:NaN,referenceId:e.latency.referenceId||NaN}}(e),r.length>0){var a=function(e){var t,n=0,i=r.filter(function(t){return t.id===e.referenceId});return 0===i.length?(n=r.length>0?r[0].to:0,t=r[0].id||NaN):(n=i[0].to||0,t=i[0].id||NaN),{to:n,id:t}}(i),s=a.to,l=a.id;t.liveDelay=i.liveDelay-s,t.liveCatchup.maxDrift=i.maxDrift,n.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(s," from ProducerReferenceTime element with id ").concat(l,".\n                Live Delay: ").concat(i.liveDelay-s,", Live catchup max drift: ").concat(i.maxDrift,"\n            "))}else t.liveDelay=i.liveDelay,t.liveCatchup.maxDrift=i.maxDrift,n.debug("Found latency properties coming from service description: Live Delay: ".concat(i.liveDelay,", Live catchup max drift: ").concat(i.maxDrift))}(s),s.playbackRate&&function(e){var r=e.playbackRate.min?Math.round(1e3*(e.playbackRate.min-1))/1e3:NaN,i=e.playbackRate.max?Math.round(1e3*(e.playbackRate.max-1))/1e3:NaN;t.liveCatchup.playbackRate.min=r,t.liveCatchup.playbackRate.max=i,n.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(r)),n.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(i))}(s),s.operatingQuality,s.operatingBandwidth&&function(e){if(e&&e.operatingBandwidth&&e.operatingBandwidth.mediaType&&"all"!==e.operatingBandwidth.mediaType){var t={};t.minBandwidth=e.operatingBandwidth.min,t.maxBandwidth=e.operatingBandwidth.max,t.targetBandwidth=e.operatingBandwidth.target;var r=[];e.operatingBandwidth.mediaType===pr||e.operatingBandwidth.mediaType===gr?r.push(e.operatingBandwidth.mediaType):"any"===e.operatingBandwidth.mediaType&&(r.push(gr),r.push(pr)),r.forEach(function(e){isNaN(t.minBandwidth)||u("minBitrate",e,t.minBandwidth),isNaN(t.maxBandwidth)||u("maxBitrate",e,t.maxBandwidth),isNaN(t.targetBandwidth)||u("initialBitrate",e,t.targetBandwidth)})}}(s),s.contentSteering&&function(e){t.contentSteering=e.contentSteering}(s))}},reset:function(){l()},setConfig:function(e){e&&e.adapter&&(i=e.adapter)}},n=(0,f.Z)(s).getInstance().getLogger(e),l(),e}mr.__dashjs_factory_name="ServiceDescriptionController";var yr=c.Z.getSingletonFactory(mr),vr=r(3973),_r=r.n(vr),br=r(3039);function Er(){var e,t,r,n,i,a,s,c,d=this.context,h=(0,l.Z)(d).getInstance();function p(e,t){return e&&r[t]&&r[t][e]?r[t][e].list:[]}function g(e,t){return e&&r[t]&&r[t][e]?r[t][e].current:null}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.streamInfo){var i=e.type,s=e.streamInfo.id,l=g(i,s);if(r[s]&&r[s][i]&&(r[s][i].current=e,r[s][i].current&&(i!==o.Z.TEXT&&!_(e,l)||i===o.Z.TEXT&&e.isFragmented)&&h.trigger(u.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:l,newMediaInfo:e,switchMode:n.get().streaming.trackSwitchMode[i]},{streamId:s}),!t)){var f=E(e);if(!f||!r[s][i].storeLastSettings)return;f.roles&&(f.role=f.roles[0],delete f.roles),f.accessibility&&(f.accessibility=f.accessibility[0]),f.audioChannelConfiguration&&(f.audioChannelConfiguration=f.audioChannelConfiguration[0]),a[i]=f,c.setSavedMediaSettings(i,f)}}}function y(e,t){e&&t&&(i[e]=t)}function v(e){return e?i[e]:null}function _(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var r=e.id===t.id,n=e.viewpoint===t.viewpoint,i=JSON.stringify(e.viewpointsWithSchemeIdUri)===JSON.stringify(t.viewpointsWithSchemeIdUri),o=e.lang===t.lang,a=e.codec===t.codec,s=e.roles.toString()===t.roles.toString(),l=JSON.stringify(e.rolesWithSchemeIdUri)===JSON.stringify(t.rolesWithSchemeIdUri),u=e.accessibility.toString()===t.accessibility.toString(),c=JSON.stringify(e.accessibilitiesWithSchemeIdUri)===JSON.stringify(t.accessibilitiesWithSchemeIdUri),f=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString(),d=JSON.stringify(e.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(t.audioChannelConfigurationsWithSchemeIdUri);return r&&a&&n&&i&&o&&s&&l&&u&&c&&f&&d}function b(){r={},a={},i={audio:null,video:null,text:null}}function E(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration,codec:e.codec};return t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0?t:null}function w(e,t,r){var n=[];return e.forEach(function(e){t(r,e)&&n.push(e)}),0!==n.length?n:e}function S(e,t){try{return!e.lang||e.lang instanceof RegExp?t.lang.match(e.lang):""!==t.lang&&(0,br.extendedFilter)(t.lang,_r()(e.lang)).length>0}catch(e){return!1}}function T(e,t){return void 0===e.index||null===e.index||t.index===e.index}function A(e,t){return!e.viewpoint||e.viewpoint===t.viewpoint}function I(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!e.role||!!t.roles.filter(function(t){return t===e.role})[0]||t.type===o.Z.AUDIO&&r}function R(e,t){return e.accessibility?!!t.accessibility.filter(function(t){return t===e.accessibility})[0]:!t.accessibility.length}function N(e,t){return!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0]}function C(e,t){return!e.codec||e.codec===t.codec}function O(e){var t,r=0,n=[];return e.forEach(function(e){(t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})))>r?(r=t,n=[e]):t===r&&n.push(e)}),n}function P(e){var t,r=1/0,n=[];return e.forEach(function(e){var i=e.bitrateList.reduce(function(e,t){var r=Math.max(1,t.width*t.height);return e+t.bandwidth/r},0);(t=i/e.bitrateList.length)<r?(r=t,n=[e]):t===r&&n.push(e)}),n}function x(e){var t,r=0,n=[];return e.forEach(function(e){(t=e.representationCount)>r?(r=t,n=[e]):t===r&&n.push(e)}),n}function D(e,r){if(e===o.Z.TEXT)return r[0];var i,a=n.get().streaming.selectionModeForInitialTrack,l=s.getCustomInitialTrackSelectionFunction();if(l&&"function"==typeof l)i=l(r);else switch(a){case o.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:i=function(e){var t,r,n=(t=0,r=[],e.forEach(function(e){isNaN(e.selectionPriority)||(e.selectionPriority>t?(t=e.selectionPriority,r=[e]):e.selectionPriority===t&&r.push(e))}),r);return n.length>1&&(n=O(n)),n.length>1&&(n=x(n)),n}(r);break;case o.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:i=function(e){var t=O(e);return t.length>1&&(t=x(t)),t}(r);break;case o.Z.TRACK_SELECTION_MODE_FIRST_TRACK:i=k(r);break;case o.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:i=function(e){var t=P(e);return t.length>1&&(t=O(t)),t}(r);break;case o.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:i=function(e){var t=x(e);return t.length>1&&(t=O(e)),t}(r);break;default:t.warn("Track selection mode ".concat(a," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),i=k(r)}return i.length>0?i[0]:r[0]}function k(e){return e[0]}return e={setInitialMediaSettingsForType:function(e,t){var r=a[e]||v(e),n=p(e,t.id),i=[];r||((r=c.getSavedMediaSettings(e))&&delete r.codec,y(e,r)),n&&0!==n.length&&(r&&(i=w(i=Array.from(n),S,r),i=w(i,T,r),i=w(i,A,r),e===o.Z.AUDIO&&a[e]||(i=w(i,I,r)),i=w(i,R,r),i=w(i,N,r),i=w(i,C,r)),0===i.length?m(D(e,n),!0):i.length>1?m(D(e,i)):m(i[0]))},addTrack:function(e){if(e){var t=e.type;if((i=t)===o.Z.AUDIO||i===o.Z.VIDEO||i===o.Z.TEXT||i===o.Z.IMAGE){var i,a,s=e.streamInfo.id;r[s]||(r[s]={audio:{list:[],storeLastSettings:a=n.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:a,current:null},text:{list:[],storeLastSettings:a,current:null},image:{list:[],storeLastSettings:a,current:null}});for(var l=r[s][t].list,u=0,c=l.length;u<c;++u)if(_(l[u],e))return;l.push(e)}}},getTracksFor:p,getCurrentTrackFor:g,isCurrentTrack:function(e){if(!e)return!1;var t=e.type,n=e.streamInfo.id;return r[n]&&r[n][t]&&_(r[n][t].current,e)},setTrack:m,selectInitialTrack:D,setInitialSettings:y,getInitialSettings:v,getTracksWithHighestBitrate:O,getTracksWithHighestEfficiency:P,getTracksWithWidestRange:x,isTracksEqual:_,matchSettings:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var n=!1;if(e.lang){if(e.lang instanceof RegExp)n=t.lang.match(e.lang);else if(""!==t.lang){var i=_r()(e.lang);i&&(n=(0,br.extendedFilter)(t.lang,i).length>0)}}else n=!0;var a=void 0===e.index||null===e.index||t.index===e.index,s=!e.viewpoint||e.viewpoint===t.viewpoint,l=!e.role||!!t.roles.filter(function(t){return t===e.role})[0],u=!e.accessibility||!!t.accessibility.filter(function(t){return t===e.accessibility})[0],c=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0];return n&&a&&s&&(l||t.type===o.Z.AUDIO&&r)&&u&&c}catch(e){return!1}},matchSettingsLang:S,matchSettingsIndex:T,matchSettingsViewPoint:A,matchSettingsRole:I,matchSettingsAccessibility:R,matchSettingsAudioChannelConfig:N,saveTextSettingsDisabled:function(){c.setSavedMediaSettings(o.Z.TEXT,null)},setConfig:function(e){e&&(e.domStorage&&(c=e.domStorage),e.settings&&(n=e.settings),e.customParametersModel&&(s=e.customParametersModel))},reset:b},t=(0,f.Z)(d).getInstance().getLogger(e),b(),e}Er.__dashjs_factory_name="MediaController";var wr=c.Z.getSingletonFactory(Er);c.Z.updateSingletonFactory(Er.__dashjs_factory_name,wr);var Sr=wr,Tr=NaN,Ar=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={baseUrls:t||null,selectedIdx:r||Tr},this.children=[]};function Ir(){var e,t,r,n,i=this.context,o=Pe(i).getInstance();function a(e,t,r){var n=s(r);e[t]?o.areEqual(n,e[t].data.baseUrls)||(e[t].data.baseUrls=n,e[t].data.selectedIdx=Tr):e[t]=new Ar(n)}function s(e){var t=r.getBaseURLsFromElement(e),i=n.getSynthesizedBaseUrlElements(t);return i&&i.length>0&&(t=t.concat(i)),t}function l(e,r){var n=r||t;e(n.data),n.children&&n.children.forEach(function(t){return l(e,t)})}function u(){t=new Ar}return e={reset:u,update:function(e){!function(e){!function(){if(!r||!r.hasOwnProperty("getBaseURLsFromElement")||!r.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var n=s(e);o.areEqual(n,t.data.baseUrls)||(t.data.baseUrls=n,t.data.selectedIdx=Tr),e&&e.Period_asArray&&e.Period_asArray.forEach(function(e,n){a(t.children,n,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,i){a(t.children[n].children,i,e),e.Representation_asArray&&e.Representation_asArray.sort(r.getRepresentationSortFunction()).forEach(function(e,r){a(t.children[n].children[i].children,r,e)})})})}(e)},getForPath:function(e){var r=t,n=[r.data];return e&&e.forEach(function(e){(r=r.children[e])&&n.push(r.data)}),n.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(e){l(function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=Tr)})},setConfig:function(e){e.adapter&&(r=e.adapter),e.contentSteeringController&&(n=e.contentSteeringController)},getBaseUrls:function(e){return s(e)}},u(),e}Ir.__dashjs_factory_name="BaseURLTreeModel";var Rr=c.Z.getClassFactory(Ir);function Nr(e){var t=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var t,r,n=0,i=[],o=0;if((r=e.sort(function(e,t){var r=e.dvbPriority-t.dvbPriority;return isNaN(r)?0:r}).filter(function(e,t,r){return!t||r[0].dvbPriority&&e.dvbPriority&&r[0].dvbPriority===e.dvbPriority})).length)return r.length>1&&(r.forEach(function(e){n+=e.dvbWeight,i.push(n)}),t=Math.floor(Math.random()*(n-1)),i.every(function(e,r){return o=r,!(t<e)})),r[o]}((r=[],e.filter(function(e){return!t.contains(e.serviceLocation)||(e.dvbPriority&&r.push(e.dvbPriority),!1)}).filter(function(e){return!r.length||!e.dvbPriority||-1===r.indexOf(e.dvbPriority)})));var r}}}Nr.__dashjs_factory_name="DVBSelector";var Cr=c.Z.getClassFactory(Nr);function Or(e){var t=(e=e||{}).blacklistController;return{select:function(e){var r,n=0;return e&&e.some(function(e,r){return n=r,!t.contains(e.serviceLocation)})&&(r=e[n]),r}}}Or.__dashjs_factory_name="BasicSelector";var Pr=c.Z.getClassFactory(Or);function xr(){var e,t,r,n=this.context;function i(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0,i=NaN,o=function(){var o=e[n],a=t.findIndex(function(e){return e.serviceLocation&&e.serviceLocation===o});if(-1!==a&&!r.contains(t[a].serviceLocation))return i=a,"break";n+=1};n<e.length&&"break"!==o(););return i}return e={selectBaseUrlIndex:function(e){var r=NaN;if(isNaN(e.selectedIdx)){var n=t.getSteeringDataFromManifest();n&&n.defaultServiceLocationArray.length>0&&(r=i(n.defaultServiceLocationArray,e.baseUrls))}var o=t.getCurrentSteeringResponseData();return e.baseUrls&&e.baseUrls.length&&o&&o.pathwayPriority&&o.pathwayPriority.length&&(r=i(o.pathwayPriority,e.baseUrls)),r},setConfig:function(e){e.blacklistController&&(r=e.blacklistController),e.contentSteeringController&&(t=e.contentSteeringController)}},t=Wt(n).getInstance(),e}xr.__dashjs_factory_name="ContentSteeringSelector";var Dr=c.Z.getClassFactory(xr);function kr(){var e,t,r,n,i,o,a=this.context,s=(0,l.Z)(a).getInstance(),c=(0,N.Z)(a).getInstance();function f(){t.reset()}return e={chooseSelector:function(e){(0,Y.PS)(e,"boolean"),o=e?n:r},select:function(e){if(e){if(c.get().streaming.applyContentSteering){var t=i.selectBaseUrlIndex(e);isNaN(t)||-1===t||(e.selectedIdx=t)}if(!isNaN(e.selectedIdx))return e.baseUrls[e.selectedIdx];var n=o.select(e.baseUrls);return n?(e.selectedIdx=e.baseUrls.indexOf(n),n):(s.trigger(u.Z.URL_RESOLUTION_FAILED,{error:new w.Z(R.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,R.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(o===r&&f()))}},reset:f,setConfig:function(e){e.selector&&(o=e.selector),e.contentSteeringSelector&&(i=e.contentSteeringSelector)}},t=jt(a).create({updateEventName:u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),r=Pr(a).create({blacklistController:t}),n=Cr(a).create({blacklistController:t}),(i=Dr(a).create()).setConfig({blacklistController:t}),o=r,e}kr.__dashjs_factory_name="BaseURLSelector";var Mr=c.Z.getClassFactory(kr);function Lr(){var e,t,r,n,i,o=this.context,a=(0,l.Z)(o).getInstance(),s=(0,X.Z)(o).getInstance();function c(e){r.update(e),n.chooseSelector(t.getIsDVB(e)),a.trigger(d.Z.BASE_URLS_UPDATED,{baseUrls:f(e)})}function f(e){return r.getBaseUrls(e)}return e={reset:function(){r.reset(),n.reset()},initialize:function(e){r.setConfig({adapter:t,contentSteeringController:i}),c(e)},resolve:function(e){var t=r.getForPath(e).reduce(function(e,t){var r=n.select(t);return r?(s.isRelative(r.url)?e.url=s.resolve(r.url,e.url):(e.url=r.url,e.serviceLocation=r.serviceLocation),e.availabilityTimeOffset=r.availabilityTimeOffset,e.availabilityTimeComplete=r.availabilityTimeComplete,e.queryParams=r.queryParams,e):new we},new we);if(!s.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(r=e.baseURLTreeModel),e.baseURLSelector&&(n=e.baseURLSelector),e.adapter&&(t=e.adapter),e.contentSteeringController&&(i=e.contentSteeringController)},getBaseUrls:f,update:c},r=Rr(o).create(),n=Mr(o).create(),a.on(u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(e){r.invalidateSelectedIndexes(e.entry)},e),e}Lr.__dashjs_factory_name="BaseURLController";var Fr=c.Z.getClassFactory(Lr);function Ur(e){return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ur(e)}function Br(e,t){return Br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Br(e,t)}function jr(e,t){return!t||"object"!==Ur(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zr(e){return Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Zr(e)}var qr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Br(e,t)}(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=Zr(t);if(r){var i=Zr(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return jr(this,e)});function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=n.call(this)).url=e||null,r.type=t||null,r.mediaType=o.Z.STREAM,r.responseType="",r}return i}(g.Z);function Gr(e){e=e||{};var t=this.context,r=(0,l.Z)(t).getInstance(),n=wt(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,errors:R});return{load:function(e,t,i){var o=function(n,o){t.resolved=!0,t.resolvedContent=n||null,r.trigger(u.Z.XLINK_ELEMENT_LOADED,{element:t,resolveObject:i,error:n||o?null:new w.Z(R.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,R.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+e)})};if("urn:mpeg:dash:resolve-to-zero:2013"===e)o(null,!0);else{var a=new qr(e,C.w.XLINK_EXPANSION_TYPE);n.load({request:a,success:function(e){o(e)},error:function(){o(null)}})}},reset:function(){n&&(n.abort(),n=null)}}}Gr.__dashjs_factory_name="XlinkLoader";var zr=c.Z.getClassFactory(Gr),Hr=function(e){function t(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function r(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function n(e,t,r,n){for(var i=0;i<e.length;i++){var o=e[i];if("string"==typeof o){if(o==n)break}else if(o instanceof RegExp){if(o.test(n))break}else if("function"==typeof o&&o(t,r,n))break}return i!=e.length}function i(t,r,i){"property"===e.arrayAccessForm&&(t[r]instanceof Array?t[r+"_asArray"]=t[r]:t[r+"_asArray"]=[t[r]]),!(t[r]instanceof Array)&&e.arrayAccessFormPaths.length>0&&n(e.arrayAccessFormPaths,t,r,i)&&(t[r]=[t[r]])}function o(e){var t=e.split(/[-T:+Z]/g),r=new Date(t[0],t[1]-1,t[2]),n=t[5].split(".");if(r.setHours(t[3],t[4],n[0]),n.length>1&&r.setMilliseconds(n[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),r.setMinutes(r.getMinutes()-i-r.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(r=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())));return r}function a(t,r,i,o){return!(1==r&&e.xmlElementsFilter.length>0)||n(e.xmlElementsFilter,t,i,o)}function s(r,l){if(9==r.nodeType){for(var u=new Object,c=r.childNodes,f=0;f<c.length;f++)1==(h=c[f]).nodeType&&(e.ignoreRoot?u=s(h):(u={})[p=t(h)]=s(h));return u}if(1==r.nodeType){(u=new Object).__cnt=0;var d=[];for(c=r.childNodes,f=0;f<c.length;f++){var h,p=t(h=c[f]);if(8!=h.nodeType){var g=l+"."+p;if(a(u,h.nodeType,p,g))if(u.__cnt++,null==u[p]){var m=s(h,g);("#text"!=p||/[^\s]/.test(m))&&((y={})[p]=m,d.push(y)),u[p]=m,i(u,p,g)}else{var y;null!=u[p]&&(u[p]instanceof Array||(u[p]=[u[p]],i(u,p,g))),m=s(h,g),("#text"!=p||/[^\s]/.test(m))&&((y={})[p]=m,d.push(y)),u[p][u[p].length]=m}}}u.__children=d;for(var v=t(r),_=0;_<r.attributes.length;_++){var b=r.attributes[_];u.__cnt++;for(var E=b.value,w=0,S=e.matchers.length;w<S;w++){var T=e.matchers[w];T.test(b,v)&&(E=T.converter(b.value))}u[e.attributePrefix+b.name]=E}var A=function(e){return e.prefix}(r);return null!=A&&""!=A&&(u.__cnt++,u.__prefix=A),null!=u["#text"]&&(u.__text=u["#text"],u.__text instanceof Array&&(u.__text=u.__text.join("\n")),e.stripWhitespaces&&(u.__text=u.__text.trim()),delete u["#text"],"property"==e.arrayAccessForm&&delete u["#text_asArray"],u.__text=function(t,r,i){if(e.datetimeAccessFormPaths.length>0){var a=i.split(".#")[0];return n(e.datetimeAccessFormPaths,t,r,a)?o(t):t}return t}(u.__text,p,l+"."+p)),null!=u["#cdata-section"]&&(u.__cdata=u["#cdata-section"],delete u["#cdata-section"],"property"==e.arrayAccessForm&&delete u["#cdata-section_asArray"]),0==u.__cnt&&"text"==e.emptyNodeForm?u="":1==u.__cnt&&null!=u.__text?u=u.__text:1!=u.__cnt||null==u.__cdata||e.keepCData?u.__cnt>1&&null!=u.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==u.__text||""==u.__text.trim())&&delete u.__text:u=u.__cdata,delete u.__cnt,!e.enableToStringFunc||null==u.__text&&null==u.__cdata||(u.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),u}if(3==r.nodeType||4==r.nodeType)return r.nodeValue}function l(t,n,i,o){var a="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=i)for(var s=0;s<i.length;s++){var l=i[s],u=t[l];e.escapeMode&&(u=r(u)),a+=" "+l.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?a+='"'+u+'"':a+="'"+u+"'"}return a+(o?"/>":">")}function u(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(t,r){return"property"==e.arrayAccessForm&&(i="_asArray",-1!==(n=r.toString()).indexOf(i,n.length-i.length))||0==r.toString().indexOf(e.attributePrefix)||0==r.toString().indexOf("__")||t[r]instanceof Function;var n,i}function f(e){var t=0;if(e instanceof Object)for(var r in e)c(e,r)||t++;return t}function d(t,r,i){return 0==e.jsonPropertiesFilter.length||""==i||n(e.jsonPropertiesFilter,t,r,i)}function h(t){var r=[];if(t instanceof Object)for(var n in t)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(e.attributePrefix)&&r.push(n);return r}function p(t){var n="";return t instanceof Object?n+=function(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?n+=r(t.__text):n+=t.__text),n}(t):null!=t&&(e.escapeMode?n+=r(t):n+=t),n}function g(e,t){return""===e?t:e+"."+t}function m(e,t,r,n){var i="";if(0==e.length)i+=l(e,t,r,!0);else for(var o=0;o<e.length;o++)i+=l(e[o],t,h(e[o]),!1),i+=y(e[o],g(n,t)),i+=u(e[o],t);return i}function y(e,t){var r="";if(f(e)>0)for(var n in e)if(!c(e,n)&&(""==t||d(e,n,g(t,n)))){var i=e[n],o=h(i);null==i||null==i?r+=l(i,n,o,!0):i instanceof Object?i instanceof Array?r+=m(i,n,o,t):i instanceof Date?(r+=l(i,n,o,!1),r+=i.toISOString(),r+=u(i,n)):f(i)>0||null!=i.__text||null!=i.__cdata?(r+=l(i,n,o,!1),r+=y(i,g(t,n)),r+=u(i,n)):r+=l(i,n,o,!0):(r+=l(i,n,o,!1),r+=p(i),r+=u(i,n))}return r+p(e)}void 0===(e=e||{}).escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1),this.parseXmlString=function(e){var t;if(window.ActiveXObject||window,void 0===e)return null;if(window.DOMParser){var r=new window.DOMParser;try{(t=r.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?o(e):e},this.xml2json=function(e){return s(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return y(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}},Vr="onLoad";function Wr(e){e=e||{};var t,r,n,i,o,s,c=this.context,f=(0,l.Z)(c).getInstance(),d=(0,X.Z)(c).getInstance();function h(e,t,r){var n,i,o={};o.elements=e,o.type=t,o.resolveType=r,0===o.elements.length&&g(o);for(var a=0;a<o.elements.length;a++)n=o.elements[a],i=d.isHTTPURL(n.url)?n.url:n.originalContent.BaseURL+n.url,s.load(i,n,o)}function p(e){var t,r,n="";if(t=e.element,r=e.resolveObject,t.resolvedContent){var i=0;0===t.resolvedContent.indexOf("<?xml")&&(i=t.resolvedContent.indexOf("?>")+2),n=t.resolvedContent.substr(0,i)+"<response>"+t.resolvedContent.substr(i)+"</response>",t.resolvedContent=o.xml_str2json(n)}(function(e){var t;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0})(r)&&g(r)}function g(e){var t,r,o=[];if(function(e){var t,r,o,a,s,l,u=[];for(a=e.elements.length-1;a>=0;a--){if(r=(t=e.elements[a]).type+"_asArray",t.resolvedContent){if(t.resolvedContent)for(s=0;s<t.resolvedContent[r].length;s++)o=t.resolvedContent[r][s],u.push(o)}else delete t.originalContent["xlink:actuate"],delete t.originalContent["xlink:href"],u.push(t.originalContent);for(t.parentElement[r].splice(t.index,1),l=0;l<u.length;l++)t.parentElement[r].splice(t.index+l,0,u[l]);u=[]}e.elements.length>0&&n.run(i)}(e),"onActuate"===e.resolveType&&f.trigger(u.Z.XLINK_READY,{manifest:i}),e.resolveType===Vr)switch(e.type){case a.Z.PERIOD:for(t=0;t<i[a.Z.PERIOD+"_asArray"].length;t++)(r=i[a.Z.PERIOD+"_asArray"][t]).hasOwnProperty(a.Z.ADAPTATION_SET+"_asArray")&&(o=o.concat(m(r[a.Z.ADAPTATION_SET+"_asArray"],r,a.Z.ADAPTATION_SET,Vr))),r.hasOwnProperty(a.Z.EVENT_STREAM+"_asArray")&&(o=o.concat(m(r[a.Z.EVENT_STREAM+"_asArray"],r,a.Z.EVENT_STREAM,Vr)));h(o,a.Z.ADAPTATION_SET,Vr);break;case a.Z.ADAPTATION_SET:f.trigger(u.Z.XLINK_READY,{manifest:i})}}function m(e,t,r,n){var i,o,a,s=[];for(o=e.length-1;o>=0;o--)(i=e[o]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===i["xlink:href"]&&e.splice(o,1);for(o=0;o<e.length;o++)(i=e[o]).hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===n&&(a=y(i["xlink:href"],t,r,o,n,i),s.push(a));return s}function y(e,t,r,n,i,o){return{url:e,parentElement:t,type:r,index:n,resolveType:i,originalContent:o,resolvedContent:null,resolved:!1}}return t={resolveManifestOnLoad:function(e){o=new Hr({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:r}),(i=e).Period_asArray?h(m(i.Period_asArray,i,a.Z.PERIOD,Vr),a.Z.PERIOD,Vr):f.trigger(u.Z.XLINK_READY,{manifest:i})},setMatchers:function(e){e&&(r=e)},setIron:function(e){e&&(n=e)},reset:function(){f.off(u.Z.XLINK_ELEMENT_LOADED,p,t),s&&(s.reset(),s=null)}},f.on(u.Z.XLINK_ELEMENT_LOADED,p,t),s=zr(c).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),t}Wr.__dashjs_factory_name="XlinkController";var Yr=c.Z.getClassFactory(Wr);function Kr(e){return Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kr(e)}function Qr(e){function t(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function r(e,r,n){for(var i=0,o=e.length;i<o;++i){var a=e[i];if(r[a.name])if(n[a.name]){if(a.merge){var s=r[a.name],l=n[a.name];"object"===Kr(s)&&"object"===Kr(l)?t(s,l):n[a.name]=s+l}}else n[a.name]=r[a.name]}}function n(e,t){for(var i=0,o=e.children.length;i<o;++i){var a=e.children[i],s=t[a.name+"_asArray"];if(s)for(var l=0,u=s.length;l<u;++l){var c=s[l];r(e.properties,t,c),n(a,c)}}}return{run:function(t){if(null===t||"object"!==Kr(t))return t;if(t.Period_asArray&&"period"in e)for(var r=e.period,i=t.Period_asArray,o=0,a=i.length;o<a;++o){var s=i[o];if(n(r,s),"adaptationset"in e){var l=s.AdaptationSet_asArray;if(l)for(var u=e.adaptationset,c=0,f=l.length;c<f;++c)n(u,l[c])}}return t}}}Qr.__dashjs_factory_name="ObjectIron";var Xr=c.Z.getClassFactory(Qr);function $r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Jr=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._test=t,this._converter=r}var t;return(t=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&$r(e.prototype,t),e}();function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rn(e,t){return rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rn(e,t)}function nn(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function on(e){return on=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},on(e)}var an=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=on(t);if(r){var i=on(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return nn(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.call(this,function(e,t){var r,n=(tn(r={},a.Z.MPD,[a.Z.ID,a.Z.PROFILES]),tn(r,a.Z.PERIOD,[a.Z.ID]),tn(r,a.Z.BASE_URL,[a.Z.SERVICE_LOCATION,a.Z.BYTE_RANGE]),tn(r,a.Z.SEGMENT_BASE,[a.Z.INDEX_RANGE]),tn(r,a.Z.INITIALIZATION,[a.Z.RANGE]),tn(r,a.Z.REPRESENTATION_INDEX,[a.Z.RANGE]),tn(r,a.Z.SEGMENT_LIST,[a.Z.INDEX_RANGE]),tn(r,a.Z.BITSTREAM_SWITCHING,[a.Z.RANGE]),tn(r,a.Z.SEGMENT_URL,[a.Z.MEDIA_RANGE,a.Z.INDEX_RANGE]),tn(r,a.Z.SEGMENT_TEMPLATE,[a.Z.INDEX_RANGE,a.Z.MEDIA,a.Z.INDEX,a.Z.INITIALIZATION_MINUS,a.Z.BITSTREAM_SWITCHING_MINUS]),tn(r,a.Z.ASSET_IDENTIFIER,[a.Z.VALUE,a.Z.ID]),tn(r,a.Z.EVENT_STREAM,[a.Z.VALUE]),tn(r,a.Z.ADAPTATION_SET,[a.Z.PROFILES,a.Z.MIME_TYPE,a.Z.SEGMENT_PROFILES,a.Z.CODECS,a.Z.CONTENT_TYPE]),tn(r,a.Z.FRAME_PACKING,[a.Z.VALUE,a.Z.ID]),tn(r,a.Z.AUDIO_CHANNEL_CONFIGURATION,[a.Z.VALUE,a.Z.ID]),tn(r,a.Z.CONTENT_PROTECTION,[a.Z.VALUE,a.Z.ID]),tn(r,a.Z.ESSENTIAL_PROPERTY,[a.Z.VALUE,a.Z.ID]),tn(r,a.Z.SUPPLEMENTAL_PROPERTY,[a.Z.VALUE,a.Z.ID]),tn(r,a.Z.INBAND_EVENT_STREAM,[a.Z.VALUE,a.Z.ID]),tn(r,a.Z.ACCESSIBILITY,[a.Z.VALUE,a.Z.ID]),tn(r,a.Z.ROLE,[a.Z.VALUE,a.Z.ID]),tn(r,a.Z.RATING,[a.Z.VALUE,a.Z.ID]),tn(r,a.Z.VIEWPOINT,[a.Z.VALUE,a.Z.ID]),tn(r,a.Z.CONTENT_COMPONENT,[a.Z.CONTENT_TYPE]),tn(r,a.Z.REPRESENTATION,[a.Z.ID,a.Z.DEPENDENCY_ID,a.Z.MEDIA_STREAM_STRUCTURE_ID]),tn(r,a.Z.SUBSET,[a.Z.ID]),tn(r,a.Z.METRICS,[a.Z.METRICS_MINUS]),tn(r,a.Z.REPORTING,[a.Z.VALUE,a.Z.ID]),r);if(n.hasOwnProperty(t)){var i=n[t];return void 0!==i&&i.indexOf(e.name)>=0}return!1},function(e){return String(e)})}return i}(Jr);function sn(e){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(e)}function ln(e,t){return ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ln(e,t)}function un(e,t){return!t||"object"!==sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cn(e){return cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cn(e)}var fn=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=cn(t);if(r){var i=cn(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return un(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.call(this,function(e){for(var t=[a.Z.MIN_BUFFER_TIME,a.Z.MEDIA_PRESENTATION_DURATION,a.Z.MINIMUM_UPDATE_PERIOD,a.Z.TIMESHIFT_BUFFER_DEPTH,a.Z.MAX_SEGMENT_DURATION,a.Z.MAX_SUBSEGMENT_DURATION,a.Z.SUGGESTED_PRESENTATION_DELAY,a.Z.START,o.Z.START_TIME,a.Z.DURATION],r=t.length,n=0;n<r;n++)if(e.nodeName===t[n])return fn.test(e.value);return!1},function(e){var t=fn.exec(e),r=31536e3*parseFloat(t[3]||0)+2592e3*parseFloat(t[5]||0)+86400*parseFloat(t[7]||0)+3600*parseFloat(t[9]||0)+60*parseFloat(t[11]||0)+parseFloat(t[13]||0);return void 0!==t[1]&&(r=-r),r})}return i}(Jr);function hn(e){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(e)}function pn(e,t){return pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pn(e,t)}function gn(e,t){return!t||"object"!==hn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mn(e){return mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mn(e)}var yn=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,vn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=mn(t);if(r){var i=mn(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return gn(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.call(this,function(e){return yn.test(e.value)},function(e){var t,r=yn.exec(e);if(t=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&parseInt(r[6],10)||0,r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]){var n=60*parseInt(r[9],10)+parseInt(r[10],10);t+=("+"===r[8]?-1:1)*n*60*1e3}return new Date(t)})}return i}(Jr);function _n(e){return _n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(e)}function bn(e,t){return bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bn(e,t)}function En(e,t){return!t||"object"!==_n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wn(e){return wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wn(e)}var Sn=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bn(e,t)}(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=wn(t);if(r){var i=wn(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return En(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.call(this,function(e){return Sn.test(e.value)},function(e){return parseFloat(e)})}return i}(Jr);function An(e){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},An(e)}function In(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rn(e,t){return Rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Rn(e,t)}function Nn(e,t){return!t||"object"!==An(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cn(e){return Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Cn(e)}var On=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rn(e,t)}(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=Cn(t);if(r){var i=Cn(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Nn(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.call(this,function(e,t){var r,n=(In(r={},a.Z.ADAPTATION_SET,[a.Z.LANG]),In(r,a.Z.REPRESENTATION,[a.Z.LANG]),In(r,a.Z.CONTENT_COMPONENT,[a.Z.LANG]),In(r,a.Z.LABEL,[a.Z.LANG]),In(r,a.Z.GROUP_LABEL,[a.Z.LANG]),r);if(n.hasOwnProperty(t)){var i=n[t];return void 0!==i&&i.indexOf(e.name)>=0}return!1},function(e){return _r()(e)||String(e)})}return i}(Jr);function Pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var xn=function(){function e(t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._merge=(r=t)&&r.length&&r.charAt(0)===r.charAt(0).toUpperCase()}var t;return(t=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&Pn(e.prototype,t),e}();function Dn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var kn=function(){function e(t,r,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t||"",this._properties=[],this._children=n||[],Array.isArray(r)&&r.forEach(function(e){i._properties.push(new xn(e))})}var t;return(t=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&Dn(e.prototype,t),e}();function Mn(e){return Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn(e)}function Ln(e,t){return Ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ln(e,t)}function Fn(e,t){return!t||"object"!==Mn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Un(e){return Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Un(e)}var Bn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ln(e,t)}(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=Un(t);if(r){var i=Un(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Fn(this,e)});function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var e=[a.Z.PROFILES,a.Z.WIDTH,a.Z.HEIGHT,a.Z.SAR,a.Z.FRAMERATE,a.Z.AUDIO_SAMPLING_RATE,a.Z.MIME_TYPE,a.Z.SEGMENT_PROFILES,a.Z.CODECS,a.Z.MAXIMUM_SAP_PERIOD,a.Z.START_WITH_SAP,a.Z.MAX_PLAYOUT_RATE,a.Z.CODING_DEPENDENCY,a.Z.SCAN_TYPE,a.Z.FRAME_PACKING,a.Z.AUDIO_CHANNEL_CONFIGURATION,a.Z.CONTENT_PROTECTION,a.Z.ESSENTIAL_PROPERTY,a.Z.ESSENTIAL_PROPERTY+"_asArray",a.Z.SUPPLEMENTAL_PROPERTY,a.Z.INBAND_EVENT_STREAM];return n.call(this,a.Z.ADAPTATION_SET,e,[new kn(a.Z.REPRESENTATION,e,[new kn(a.Z.SUB_REPRESENTATION,e)])])}return i}(kn);function jn(e){return jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jn(e)}function Zn(e,t){return Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Zn(e,t)}function qn(e,t){return!t||"object"!==jn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gn(e){return Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Gn(e)}var zn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=Gn(t);if(r){var i=Gn(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return qn(this,e)});function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var e=[a.Z.SEGMENT_BASE,a.Z.SEGMENT_TEMPLATE,a.Z.SEGMENT_LIST];return n.call(this,a.Z.PERIOD,e,[new kn(a.Z.ADAPTATION_SET,e,[new kn(a.Z.REPRESENTATION,e)])])}return i}(kn);function Hn(e){e=e||{};var t,r,n,i,o,a=this.context,s=e.debug;return t={parse:function(e){var t,n=window.performance.now();if(!(t=i.xml_str2json(e)))throw new Error("parsing the manifest failed");var a=window.performance.now();t.Patch?((t=t.Patch).add_asArray&&t.add_asArray.forEach(function(e){return o.run(e)}),t.replace_asArray&&t.replace_asArray.forEach(function(e){return o.run(e)})):(t=t.MPD,o.run(t));var s=window.performance.now();return r.info("Parsing complete: ( xml2json: "+(a-n).toPrecision(3)+"ms, objectiron: "+(s-a).toPrecision(3)+"ms, total: "+((s-n)/1e3).toPrecision(3)+"s)"),t.protocol="DASH",t},getMatchers:function(){return n},getIron:function(){return o}},r=s.getLogger(t),n=[new dn,new vn,new Tn,new On,new an],i=new Hr({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:n}),o=Xr(a).create({adaptationset:new Bn,period:new zn}),t}Hn.__dashjs_factory_name="DashParser";var Vn=c.Z.getClassFactory(Hn);function Wn(e){e=e||{};var t,r,n,i,s,c=this.context,f=e.debug,d=e.settings,h=(0,l.Z)(c).getInstance(),p=(0,X.Z)(c).getInstance(),g=e.mssHandler,m=e.errHandler;function y(e){h.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}function v(e){var t=null;return e.indexOf("SmoothStreamingMedia")>-1?(g&&(t=g.createMssParser(),g.createMssFragmentProcessor(),g.registerEvents()),t):e.indexOf("MPD")>-1||e.indexOf("Patch")>-1?Vn(c).create({debug:f}):t}return t={load:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=new Date,l=new qr(e,C.w.MPD_TYPE);t&&(l.serviceLocation=t),o&&(l.queryParams=o),l.requestStartDate||(l.requestStartDate=a),h.trigger(u.Z.MANIFEST_LOADING_STARTED,{request:l}),n.load({request:l,success:function(t,n,o){var a,l,c;if(i)if(o&&o!==e?(l=p.parseBaseUrl(o),a=o):(p.isRelative(e)&&(e=p.resolve(e,window.location.href)),l=p.parseBaseUrl(e)),"No Content"!=n)if(null===s&&(s=v(t)),null!==s){i.setMatchers(s.getMatchers()),i.setIron(s.getIron());try{c=s.parse(t)}catch(t){return void h.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new w.Z(R.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,R.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))})}if(c){if(c.url=a||e,c.originalUrl||(c.originalUrl=c.url),d&&d.get().streaming.enableManifestDurationMismatchFix&&c.mediaPresentationDuration&&c.Period_asArray.length>1){var f=c.Period_asArray.reduce(function(e,t){return e+t.duration},0);!isNaN(f)&&c.mediaPresentationDuration>f&&(r.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),c.mediaPresentationDuration=f)}c.baseUri=l,c.loadedTime=new Date,i.resolveManifestOnLoad(c),h.trigger(u.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:t})}else h.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new w.Z(R.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,R.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))})}else h.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new w.Z(R.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,R.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))});else h.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(t,r,n){h.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new w.Z(R.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,R.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(e,", ").concat(n))})}})},reset:function(){h.off(u.Z.XLINK_READY,y,t),g&&g.reset(),i&&(i.reset(),i=null),n&&(n.abort(),n=null)}},r=f.getLogger(t),h.on(u.Z.XLINK_READY,y,t),n=wt(c).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:p,constants:o.Z,dashConstants:a.Z,errors:R,requestTimeout:e.settings.get().streaming.manifestRequestTimeout}),i=Yr(c).create({errHandler:m,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),s=null,t}Wn.__dashjs_factory_name="ManifestLoader";var Yn=c.Z.getClassFactory(Wn);function Kn(){var e=this.context,t=(0,l.Z)(e).getInstance();return{error:function(e){t.trigger(u.Z.ERROR,{error:e})}}}Kn.__dashjs_factory_name="ErrorHandler";var Qn=c.Z.getSingletonFactory(Kn),Xn=r(1715);function $n(){var e,t,r,n,i,a,s=this.context,c=(0,l.Z)(s).getInstance();function d(e,n){if(!n||!n.Period_asArray||0===n.Period_asArray.length)return Promise.resolve();var i=[];return n.Period_asArray.forEach(function(n){i.push(function(e,n){return new Promise(function(i){if(e&&e.AdaptationSet_asArray&&0!==e.AdaptationSet_asArray.length){var s=[];e.AdaptationSet_asArray.forEach(function(e){t.getIsTypeOf(e,n)&&s.push(function(e,n){return new Promise(function(i){if(e.Representation_asArray&&0!==e.Representation_asArray.length){var s=[],l=[];e.Representation_asArray.forEach(function(i,a){var u=t.getCodec(e,a,!1),c=function(e,t,r){switch(e){case o.Z.VIDEO:return function(e,t){return{codec:t,width:e.width||null,height:e.height||null,framerate:e.frameRate||null,bitrate:e.bandwidth||null}}(t,r);case o.Z.AUDIO:return function(e,t){var r=e.audioSamplingRate||null;return{codec:t,bitrate:e.bandwidth||null,samplerate:r}}(t,r);default:return null}}(n,i,u);l.push(c),s.push(r.supportsCodec(c,n))}),Promise.all(s).then(function(t){e.Representation_asArray=e.Representation_asArray.filter(function(e,r){return t[r]||a.debug("[Stream] Codec ".concat(l[r].codec," not supported ")),t[r]}),i()}).catch(function(){i()})}else i()})}(e,n))}),Promise.all(s).then(function(){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter(function(e){var t=e.Representation_asArray&&e.Representation_asArray.length>0;return t||(c.trigger(u.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:e}),a.warn("AdaptationSet has been removed because of no supported Representation")),t}),i()}).catch(function(){i()})}else i()})}(n,e))}),Promise.all(i)}return e={setConfig:function(e){e&&(e.adapter&&(t=e.adapter),e.capabilities&&(r=e.capabilities),e.settings&&(n=e.settings),e.customParametersModel&&(i=e.customParametersModel))},filterUnsupportedFeatures:function(e){return new Promise(function(s){var l=[];l.push(d(o.Z.VIDEO,e)),l.push(d(o.Z.AUDIO,e)),Promise.all(l).then(function(){n.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(e){e&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter(function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter(function(e){var n=t.getEssentialPropertiesForRepresentation(e);if(n&&n.length>0)for(var i=0;i<n.length;){if(!r.supportsEssentialProperty(n[i]))return a.debug("[Stream] EssentialProperty not supported: "+n[i].schemeIdUri),!1;i+=1}return!0}),e.Representation_asArray&&e.Representation_asArray.length>0)})})}(e),function(e){var t=i.getCustomCapabilitiesFilters();t&&0!==t.length&&e&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter(function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter(function(e){return!t.some(function(t){return!t(e)})}),e.Representation_asArray&&e.Representation_asArray.length>0)})})}(e),s()}).catch(function(){s()})})}},a=(0,f.Z)(s).getInstance().getLogger(e),e}$n.__dashjs_factory_name="CapabilitiesFilter";var Jn=c.Z.getSingletonFactory($n),ei=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function ti(){var e;return{initialize:function(t){if(e=new ei,!t)return null;var r=t.indexOf("#");if(-1!==r)for(var n=t.substr(r+1).split("&"),i=0,o=n.length;i<o;++i){var a=n[i],s=a.indexOf("=");if(-1!==s){var l=a.substring(0,s);e.hasOwnProperty(l)&&(e[l]=a.substr(s+1))}}},getURIFragmentData:function(){return e}}}ti.__dashjs_factory_name="URIFragmentModel";var ri=c.Z.getSingletonFactory(ti);function ni(){var e,t=this.context,r=(0,l.Z)(t).getInstance();return{getValue:function(){return e},setValue:function(t){e=t,t&&r.trigger(u.Z.MANIFEST_LOADED,{data:t})}}}ni.__dashjs_factory_name="ManifestModel";var ii=c.Z.getSingletonFactory(ni),oi=-.5;function ai(){var e,t,r,n,i=this.context,o=(0,N.Z)(i).getInstance();function a(e,r){return isNaN(e)?0:e>0?(r&&t.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):e<oi?(r&&t.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(oi,": ").concat(-50,"% playback speed.")),oi):e}function s(e,r){return isNaN(e)?0:e<0?(r&&t.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):e>1?(r&&t.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):e}function l(){var e=o.get().streaming.buffer.stableBufferTime>0?o.get().streaming.buffer.stableBufferTime:o.get().streaming.buffer.fastSwitchEnabled?20:12,t=r.getLiveDelay();return!isNaN(t)&&t>0?Math.min(e,t):e}return e={getCatchupMaxDrift:function(){if(!isNaN(o.get().streaming.liveCatchup.maxDrift)&&o.get().streaming.liveCatchup.maxDrift>0)return o.get().streaming.liveCatchup.maxDrift;var e=n.getServiceDescriptionSettings();return e&&e.liveCatchup&&!isNaN(e.liveCatchup.maxDrift)&&e.liveCatchup.maxDrift>0?e.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return null!==o.get().streaming.liveCatchup.enabled?o.get().streaming.liveCatchup.enabled:r.getInitialCatchupModeActivated()},getStableBufferTime:l,getInitialBufferLevel:function(){var e=o.get().streaming.buffer.initialBufferLevel;return isNaN(e)||e<0?0:Math.min(l(),e)},getRetryAttemptsForType:function(e){var t=isNaN(o.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:o.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return r.getLowLatencyModeEnabled()?o.get().streaming.retryAttempts[e]*t:o.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){var t=isNaN(o.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:o.get().streaming.retryIntervals.lowLatencyReductionFactor;return r.getLowLatencyModeEnabled()?o.get().streaming.retryIntervals[e]/t:o.get().streaming.retryIntervals[e]},getCatchupPlaybackRates:function(e){var t=o.get().streaming.liveCatchup.playbackRate;if(!isNaN(t.min)||!isNaN(t.max))return{min:a(t.min,e),max:s(t.max,e)};var r=n.getServiceDescriptionSettings();if(r&&r.liveCatchup&&(!isNaN(r.liveCatchup.playbackRate.min)||!isNaN(r.liveCatchup.playbackRate.max))){var i=r.liveCatchup.playbackRate;return{min:a(i.min,e),max:s(i.max,e)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(e,t){try{var r=o.get().streaming.abr[e][t];if(!isNaN(r)&&-1!==r)return r;var i=n.getServiceDescriptionSettings();return i&&i[e]&&!isNaN(i[e][t])?i[e][t]:-1}catch(e){return-1}},setConfig:function(e){e.playbackController&&(r=e.playbackController),e.serviceDescriptionController&&(n=e.serviceDescriptionController)},reset:function(){}},t=(0,f.Z)(i).getInstance().getLogger(e),e}ai.__dashjs_factory_name="MediaPlayerModel";var si=c.Z.getSingletonFactory(ai),li=r(1767);function ui(e){var t=(e=e||{}).abrController,r=e.switchHistory,n=e.droppedFramesHistory,i=e.currentRequest,o=e.useBufferOccupancyABR,a=e.useL2AABR,s=e.useLoLPABR,l=e.streamProcessor?e.streamProcessor.getScheduleController():null,u=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null,c=e.videoModel?e.videoModel:null;function f(){return u?u.mediaInfo:null}return{getMediaType:function(){var e=f();return e?e.type:null},getMediaInfo:f,getDroppedFramesHistory:function(){return n},getCurrentRequest:function(){return i},getSwitchHistory:function(){return r},getStreamInfo:function(){var e=f();return e?e.streamInfo:null},getScheduleController:function(){return l},getAbrController:function(){return t},getRepresentationInfo:function(){return u},useBufferOccupancyABR:function(){return o},useL2AABR:function(){return a},useLoLPABR:function(){return s},getVideoModel:function(){return c}}}ui.__dashjs_factory_name="RulesContext";var ci=c.Z.getClassFactory(ui),fi=r(2068);function di(){var e=[],t=[];return{push:function(r){r.newValue===fi.Z.NO_CHANGE&&(r.newValue=r.oldValue),e[r.oldValue]||(e[r.oldValue]={noDrops:0,drops:0,dropSize:0});var n=r.newValue-r.oldValue,i=n<0?1:0,o=i?-n:0,a=i?0:1;if(e[r.oldValue].drops+=i,e[r.oldValue].dropSize+=o,e[r.oldValue].noDrops+=a,t.push({idx:r.oldValue,noDrop:a,drop:i,dropSize:o}),t.length>8){var s=t.shift();e[s.idx].drops-=s.drop,e[s.idx].dropSize-=s.dropSize,e[s.idx].noDrops-=s.noDrop}},getSwitchRequests:function(){return e},reset:function(){e=[],t=[]}}}di.__dashjs_factory_name="SwitchRequestHistory";var hi=c.Z.getClassFactory(di);function pi(){var e={},t={},r={};return{push:function(n,i,o){if(i){e[n]||(e[n]=[],t[n]=0,r[n]=0);var a=o&&o.droppedVideoFrames?o.droppedVideoFrames:0,s=o&&o.totalVideoFrames?o.totalVideoFrames:0,l=a-t[n];t[n]=a;var u=s-r[n];r[n]=s;var c=e[n];isNaN(i)||(c[i]?(c[i].droppedVideoFrames+=l,c[i].totalVideoFrames+=u):c[i]={droppedVideoFrames:l,totalVideoFrames:u})}},getFrameHistory:function(t){return e[t]},clearForStream:function(n){try{delete e[n],delete t[n],delete r[n]}catch(e){}},reset:function(){e={},t={},r={}}}}pi.__dashjs_factory_name="DroppedFramesHistory";var gi=c.Z.getClassFactory(pi);function mi(e){var t,r,n,i,a,s=this.context,u=(e=e||{}).settings,c=(0,l.Z)(s).getInstance();function f(e,t,r,n){var i=Math.pow(.5,r/n.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;var o=Math.pow(.5,r/n.slow);e.slowEstimate=(1-o)*t+o*e.slowEstimate,e.totalWeight+=r}function h(e,s,l){return u.get().streaming.abr.movingAverageMethod!==o.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var r=e?a.throughputHalfLife:a.latencyHalfLife,o=e?n[t]:i[t];if(!o||o.totalWeight<=0)return NaN;var s=o.fastEstimate/(1-Math.pow(.5,o.totalWeight/r.fast)),l=o.slowEstimate/(1-Math.pow(.5,o.totalWeight/r.slow));return e?Math.min(s,l):Math.max(s,l)}(e,s):function(e,n,i){var o=function(e,n,i){var o,a;if(e?(o=t[n],a=i?3:4):(o=r[n],a=4),o){if(a>=o.length)a=o.length;else if(e)for(var s=1;s<a;++s){var l=o[o.length-s]/o[o.length-s-1];if((l>=1.3||l<=1/1.3)&&(a+=1)===o.length)break}}else a=0;return a}(e,n,i),a=(e?t:r)[n];return 0!==o&&a&&0!==a.length?(a=a.slice(-o)).reduce(function(e,t){return e+t})/a.length:NaN}(e,s,l)}function p(e,t){return h(!0,e,t)}function g(e){t[e]=t[e]||[],r[e]=r[e]||[],n[e]=n[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},i[e]=i[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function m(){t={},r={},n={},i={}}var y={push:function(e,s,l){if(s.trace&&s.trace.length){var h,p=s.tresponse.getTime()-s.trequest.getTime()||1,m=s._tfinish.getTime()-s.tresponse.getTime()||1,y=s.trace.reduce(function(e,t){return e+t.b[0]},0),v=0;if(0!==(h=s._fileLoaderType&&s._fileLoaderType===o.Z.FILE_LOADER_TYPES.FETCH?s.trace.reduce(function(e,t){return e+t.d},0):l?m:p+m)&&(v=Math.round(8*y/h)),s.cmsd){var _=s.cmsd.dynamic&&s.cmsd.dynamic.etp?s.cmsd.dynamic.etp:null;if(_){var b=u.get().streaming.cmsd.abr.etpWeightRatio;b>0&&b<=1&&(v=v*(1-b)+_*b)}}if(g(e),function(e,t,r){return e===o.Z.VIDEO?r<u.get().streaming.cacheLoadThresholds[o.Z.VIDEO]:e===o.Z.AUDIO?r<u.get().streaming.cacheLoadThresholds[o.Z.AUDIO]:void 0}(e,0,m)){if(t[e].length>0&&!t[e].hasCachedEntries)return;t[e].hasCachedEntries=!0}else t[e]&&t[e].hasCachedEntries&&function(e){delete t[e],delete r[e],delete n[e],delete i[e],g(e)}(e);t[e].push(v),c.trigger(d.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:v,mediaType:e,httpRequest:s}),t[e].length>20&&t[e].shift(),r[e].push(p),r[e].length>20&&r[e].shift(),f(n[e],v,.001*m,a.throughputHalfLife),f(i[e],p,1,a.latencyHalfLife)}},getAverageThroughput:p,getSafeAverageThroughput:function(e,t){var r=p(e,t);return isNaN(r)||(r*=u.get().streaming.abr.bandwidthSafetyFactor),r},getAverageLatency:function(e){return h(!1,e)},reset:m};return a={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},m(),y}mi.__dashjs_factory_name="ThroughputHistory";var yi=c.Z.getClassFactory(mi);function vi(){var e,t,r,n,i,a,c,h,p,g,m,y,v,_,b,w,S,T,A,I,R,N,O,P,x,D,k,M=this.context,L=(0,f.Z)(M).getInstance(),F=(0,l.Z)(M).getInstance();function U(){i={},a={},h={},c={},I={},O={},P={},x={},void 0===g&&(g=!1),R&&R.reset(),A=void 0,R=void 0,N=void 0,clearTimeout(p),p=null}function B(t){var i=t.request.mediaType,o=t.streamId;if(i&&o&&c[o]&&k.get().streaming.abr.autoSwitchBitrate[i]){var a=c[o][i];if(a){var l=ci(M).create({abrController:e,streamProcessor:a,currentRequest:t.request,useBufferOccupancyABR:O[i],useL2AABR:P[i],useLoLPABR:x[i],videoModel:_}),u=r.shouldAbandonFragment(l,o);u.quality>fi.Z.NO_CHANGE&&a.getFragmentModel().getRequests({state:E.FRAGMENT_MODEL_LOADING,index:t.request.index})[0]&&(h[o][i].state=s.Z.ABANDON_LOAD,I[o][i].reset(),I[o][i].push({oldValue:z(i,o),newValue:u.quality,confidence:1,reason:u.reason}),H(i,n.getActiveStreamInfo(),u.quality,u.reason),clearTimeout(p),p=setTimeout(function(){h[o][i].state=s.Z.ALLOW_LOAD,p=null},k.get().streaming.abandonLoadTimeout))}}}function j(e){e.mediaType===o.Z.VIDEO&&(void 0!==A&&R.push(e.streamId,A,_.getPlaybackQuality()),A=e.newQuality)}function Z(e){var r,n;e.metric!==s.Z.HTTP_REQUEST||!e.value||e.value.type!==C.w.MEDIA_SEGMENT_TYPE||e.mediaType!==o.Z.AUDIO&&e.mediaType!==o.Z.VIDEO||N.push(e.mediaType,e.value,k.get().streaming.abr.useDeadTimeLatency),e.metric!==s.Z.BUFFER_LEVEL||e.mediaType!==o.Z.AUDIO&&e.mediaType!==o.Z.VIDEO||(r=e.mediaType,n=.001*e.value.level,k.get().streaming.abr.ABRStrategy===o.Z.ABR_STRATEGY_DYNAMIC&&function(e,r){try{var n=b.getStableBufferTime(),i=n,o=.5*n,a=O[e],s=r>(a?o:i);O[e]=s,s!==a&&(s?t.info("["+e+"] switching from throughput to buffer occupancy ABR rule (buffer: "+r.toFixed(3)+")."):t.info("["+e+"] switching from buffer occupancy to throughput ABR rule (buffer: "+r.toFixed(3)+")."))}catch(e){t.error(e)}}(r,n))}function q(e,r){try{var n;return i[r]=i[r]||{},i[r].hasOwnProperty(e)||(i[r][e]=0),n=function(e,t){var r=i[t][e],n=r;if(!c[t]||!c[t][e])return n;var o=G(e,t);void 0!==o&&(n=Math.max(r,o));var a=function(e,t){try{var r=b.getAbrBitrateParameter("maxBitrate",e);return r>-1?K(c[t][e].getMediaInfo(),r,t):void 0}catch(e){return}}(e,t);return void 0!==a&&(n=Math.min(n,a)),n}(e,r),n=function(e,t,r){var n=i[r][t],o=k.get().streaming.abr.maxRepresentationRatio[t];return isNaN(o)||o>=1||o<0?e:Math.min(e,Math.round(n*o))}(n,e,r),n=function(e,t,r){if(t!==o.Z.VIDEO||!k.get().streaming.abr.limitBitrateByPortal||!c[r]||!c[r][t])return e;g||X();var n=c[r][t].getStreamInfo(),i=v.getAdaptationForType(n.index,t,n).Representation_asArray,a=e;if(m>0&&y>0){for(;a>0&&i[a]&&m<i[a].width&&m-i[a-1].width<i[a].width-m;)a-=1;for(;a<i.length-1&&i[a].width===i[a+1].width;)a+=1}return a}(n,e,r),k.get().streaming.cmsd.enabled&&k.get().streaming.cmsd.abr.applyMb&&(n=function(e,r,n){if("video"!==r)return e;var i=S.getMaxBitrate(r);if(i<0)return e;var o=W(n,"audio",z("audio",n));i-=o?o.bitrate/1e3:0;var a=K(c[n][r].getMediaInfo(),i,n);return t.debug("Stream ID: "+n+" ["+r+"] Apply max bit rate from CMSD: "+i),Math.min(e,a)}(n,e,r)),n}catch(e){return}}function G(e,t){try{return function(e,t){try{var r=b.getAbrBitrateParameter("minBitrate",e);if(r>-1){var n=c[t][e].getMediaInfo(),i=Q(n),o=K(n,r,t);return i[o]&&o<i.length-1&&i[o].bitrate<1e3*r&&o++,o}return}catch(e){return}}(e,t)}catch(e){return}}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return t||(t=n.getActiveStreamInfo().id),e&&c[t]&&c[t][e]&&t?(a[t]=a[t]||{},a[t].hasOwnProperty(e)||(a[t][e]=0),a[t][e]):0}catch(e){return 0}}function H(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t&&t.id&&e){var i=t.id,o=z(e,i);(0,Y.SE)(r);var a=q(e,i);r!==o&&r>=0&&r<=a&&V(e,o,r,a,n,i)}}function V(e,r,n,i,o,s){if(e&&c[s]&&c[s][e]){var l=c[s][e].getStreamInfo(),f=l&&l.manifestInfo&&l.manifestInfo.isDynamic,d=D.getCurrentBufferLevel(e);t.info("Stream ID: "+s+" ["+e+"] switch from "+r+" to "+n+"/"+i+" (buffer: "+d+") "+(o?JSON.stringify(o):".")),a[s]=a[s]||{},a[s][e]=n;var h=W(s,e,n);F.trigger(u.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:r,newQuality:n,reason:o,streamInfo:l,bitrateInfo:h,maxIdx:i,mediaType:e},{streamId:l.id,mediaType:e});var p=N.getAverageThroughput(e,f);isNaN(p)||T.setSavedBitrateSettings(e,p)}}function W(e,t,r){if(t&&c&&c[e]&&c[e][t]){var n=Q(c[e][t].getMediaInfo());return n[r]?n[r]:null}return null}function K(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e&&e.type?c[r][e.type].getRepresentationInfo():null;if(k.get().streaming.abr.useDeadTimeLatency&&n&&i&&i.fragmentDuration){n/=1e3;var o=i.fragmentDuration;if(n>o)return 0;t*=1-n/o}for(var a=Q(e),s=a.length-1;s>=0;s--)if(1e3*t>=a[s].bitrate)return s;return 0}function Q(e){var t=[];if(!e||!e.bitrateList)return t;for(var r,n=e.bitrateList,i=e.type,o=0,a=n.length;o<a;o++)(r=new Mt).mediaType=i,r.qualityIndex=o,r.bitrate=n[o].bandwidth,r.width=n[o].width,r.height=n[o].height,r.scanType=n[o].scanType,t.push(r);return t}function X(){if(_){var e=k.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;m=_.getClientWidth()*e,y=_.getClientHeight()*e}}return e={initialize:function(){R=gi(M).create(),N=yi(M).create({settings:k}),(r=(0,li.Z)(M).create({dashMetrics:D,customParametersModel:w,mediaPlayerModel:b,settings:k})).initialize(),F.on(d.Z.QUALITY_CHANGE_RENDERED,j,e),F.on(d.Z.METRIC_ADDED,Z,e),F.on(u.Z.LOADING_PROGRESS,B,e)},isPlayingAtTopQuality:function(e){var t=e?e.id:null,r=z(o.Z.AUDIO,t),n=z(o.Z.VIDEO,t);return r===q(o.Z.AUDIO,t)&&n===q(o.Z.VIDEO,t)},updateTopQualityIndex:function(e){var t=e.type,r=e.streamInfo.id,n=e.representationCount-1;return i[r]=i[r]||{},i[r][t]=n,n},clearDataForStream:function(e){R&&R.clearForStream(e),c[e]&&delete c[e],I[e]&&delete I[e],h[e]&&delete h[e]},getThroughputHistory:function(){return N},getBitrateList:Q,getQualityForBitrate:K,getTopBitrateInfoFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t||(t=n.getActiveStreamInfo().id),e&&c&&c[t]&&c[t][e]){var r=q(e,t),i=Q(c[t][e].getMediaInfo());return i[r]?i[r]:null}return null},getMinAllowedIndexFor:G,getMaxAllowedIndexFor:q,getInitialBitrateFor:function(e,t){if(function(){if(!T||!T.hasOwnProperty("getSavedBitrateSettings"))throw new Error(o.Z.MISSING_CONFIG_ERROR)}(),e===o.Z.TEXT)return NaN;var r=T.getSavedBitrateSettings(e),n=b.getAbrBitrateParameter("initialBitrate",e),i=k.get().streaming.abr.initialRepresentationRatio[e];if(-1===n)if(i>-1){var a=c[t][e].getStreamInfo(),s=v.getAdaptationForType(a.index,e,a).Representation_asArray;n=Array.isArray(s)?s[Math.max(Math.round(s.length*i)-1,0)].bandwidth/1e3:0}else n=isNaN(r)?e===o.Z.VIDEO?1e3:100:r;return n},getQualityFor:z,getAbandonmentStateFor:function(e,t){return h[e]&&h[e][t]?h[e][t].state:null},setPlaybackQuality:H,checkPlaybackQuality:function(t,n){try{if(!(t&&c&&c[n]&&c[n][t]))return!1;if(R){var i=_.getPlaybackQuality();i&&R.push(n,A,i)}if(!k.get().streaming.abr.autoSwitchBitrate[t])return!1;var o=z(t,n),a=ci(M).create({abrController:e,switchHistory:I[n][t],droppedFramesHistory:R,streamProcessor:c[n][t],currentValue:o,useBufferOccupancyABR:O[t],useL2AABR:P[t],useLoLPABR:x[t],videoModel:_}),l=G(t,n),u=q(t,n),f=r.getMaxQuality(a),d=f.quality;return void 0!==l&&(d>fi.Z.NO_CHANGE?d:o)<l&&(d=l),d>u&&(d=u),I[n][t].push({oldValue:o,newValue:d}),d>fi.Z.NO_CHANGE&&d!==o&&(h[n][t].state===s.Z.ALLOW_LOAD||d<o)&&(V(t,o,d,u,f.reason,n),!0)}catch(e){return!1}},setElementSize:X,setWindowResizeEventCalled:function(e){g=e},registerStreamType:function(e,t){var r=t.getStreamInfo().id;c[r]||(c[r]={}),I[r]||(I[r]={}),h[r]||(h[r]={}),I[r][e]=hi(M).create(),c[r][e]=t,h[r][e]={},h[r][e].state=s.Z.ALLOW_LOAD,function(e){var t=k.get().streaming.abr.ABRStrategy;t===o.Z.ABR_STRATEGY_L2A?(O[e]=!1,x[e]=!1,P[e]=!0):t===o.Z.ABR_STRATEGY_LoLP?(O[e]=!1,x[e]=!0,P[e]=!1):t===o.Z.ABR_STRATEGY_BOLA?(O[e]=!0,x[e]=!1,P[e]=!1):t===o.Z.ABR_STRATEGY_THROUGHPUT?(O[e]=!1,x[e]=!1,P[e]=!1):t===o.Z.ABR_STRATEGY_DYNAMIC&&(O[e]=!(!O||!O[e])&&O[e],x[e]=!1,P[e]=!1)}(e),e===o.Z.VIDEO&&X()},unRegisterStreamType:function(e,t){try{c[e]&&c[e][t]&&delete c[e][t],I[e]&&I[e][t]&&delete I[e][t],h[e]&&h[e][t]&&delete h[e][t]}catch(e){}},setConfig:function(e){e&&(e.streamController&&(n=e.streamController),e.domStorage&&(T=e.domStorage),e.mediaPlayerModel&&(b=e.mediaPlayerModel),e.customParametersModel&&(w=e.customParametersModel),e.cmsdModel&&(S=e.cmsdModel),e.dashMetrics&&(D=e.dashMetrics),e.adapter&&(v=e.adapter),e.videoModel&&(_=e.videoModel),e.settings&&(k=e.settings))},reset:function(){U(),F.off(u.Z.LOADING_PROGRESS,B,e),F.off(d.Z.QUALITY_CHANGE_RENDERED,j,e),F.off(d.Z.METRIC_ADDED,Z,e),r&&r.reset()}},t=L.getLogger(e),U(),e}vi.__dashjs_factory_name="AbrController";var _i=c.Z.getSingletonFactory(vi);_i.QUALITY_DEFAULT=0,c.Z.updateSingletonFactory(vi.__dashjs_factory_name,_i);var bi=_i,Ei=new Map([[o.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[o.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[o.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[o.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function wi(){var e,t,r,n,i,a,s,c,d=this.context,h=(0,l.Z)(d).getInstance(),p=[];function g(){r&&(r.playbackRate=1,r.removeEventListener("canplay",g))}function m(){return p.length>0}function y(){if(r&&m()&&0===r.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),r.dispatchEvent(e)}}function v(e,t){r&&r.addEventListener(e,t)}function _(e,t){r&&r.removeEventListener(e,t)}function b(){return r?r.readyState:NaN}function E(){return r?r.buffered:null}function w(e,t,n,i,o){if(r)for(var a=0;a<r.textTracks.length;a++)if(r.textTracks[a].kind===e&&(!t||r.textTracks[a].label==t)&&r.textTracks[a].language===n&&r.textTracks[a].isTTML===i&&r.textTracks[a].isEmbedded===o)return r.textTracks[a];return null}function S(e,t){return e===o.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||b()>=e?(t(),null):function(e,t){var r=function r(){_(e,r),t(e)};return v(e,r),{func:r,event:e}}(Ei.get(e),t)}return e={addEventListener:v,addTextTrack:function(e,t,n,i,o){if(!r)return null;var a=w(e,t,n,i,o);return a||((a=r.addTextTrack(e,t,n)).isEmbedded=o,a.isTTML=i),a},appendChild:function(e){r&&(r.appendChild(e),void 0!==e.isTTML&&(r.textTracks[r.textTracks.length-1].isTTML=e.isTTML,r.textTracks[r.textTracks.length-1].isEmbedded=e.isEmbedded))},getBufferRange:E,getClientHeight:function(){return r?r.clientHeight:NaN},getClientWidth:function(){return r?r.clientWidth:NaN},getElement:function(){return r},getEnded:function(){return r?r.ended:null},getPlaybackQuality:function(){if(!r)return null;var e="webkitDroppedFrameCount"in r&&"webkitDecodedFrameCount"in r,t=null;return"getVideoPlaybackQuality"in r?t=r.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:r.webkitDroppedFrameCount,totalVideoFrames:r.webkitDroppedFrameCount+r.webkitDecodedFrameCount,creationTime:new Date}),t},getPlaybackRate:function(){return r?r.playbackRate:null},getPlayedRanges:function(){return r?r.played:null},getReadyState:b,getSource:function(){return r?r.src:null},getTTMLRenderingDiv:function(){return a},getTextTrack:w,getTextTracks:function(){return r?r.textTracks:[]},getTime:function(){return r?isNaN(n)?r.currentTime:n:null},getVideoHeight:function(){return r?r.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(r){var e=r.parentNode.host||r.parentNode;return e?r.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(r){var e=r.parentNode.host||r.parentNode;return e?r.getBoundingClientRect().top-e.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return r?r.videoWidth:NaN},getVttRenderingDiv:function(){return s},initialize:function(){h.on(u.Z.PLAYBACK_PLAYING,y,this)},isPaused:function(){return r?r.paused:null},isSeeking:function(){return r?r.seeking||!isNaN(n):null},isStalled:m,pause:function(){r&&(r.pause(),r.autoplay=!1)},play:function(){if(r){r.autoplay=!0;var e=r.play();e&&e.catch&&"undefined"!=typeof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&h.trigger(u.Z.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing (".concat(e,")"))})}},removeChild:function(e){r&&r.removeChild(e)},removeEventListener:_,reset:function(){clearTimeout(c),h.off(u.Z.PLAYBACK_PLAYING,y,this)},setCurrentTime:function(e,t){r&&(i&&i.func&&i.event&&_(i.event,i.func),n=e,i=S(o.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(r)if(r.currentTime!==n)try{n=t?function(e){var t=E(),r=e,n=9999999999;if(t)for(var i=0;i<t.length;i++){var o=t.start(i),a=t.end(i),s=Math.abs(o-e),l=Math.abs(a-e);if(e>=o&&e<=a)return e;s<n&&(n=s,r=o),l<n&&(n=l,r=a)}return r}(n):n,isNaN(n)||(r.currentTime=n),n=NaN}catch(e){0===r.readyState&&e.code===e.INVALID_STATE_ERR&&(c=setTimeout(function(){r.currentTime=n,n=NaN},400))}else n=NaN}))},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw"element is not video or audio DOM type!";(r=e)&&(r.preload="auto")},setPlaybackRate:function(e){r&&(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&r.readyState<=2&&e>0?r.addEventListener("canplay",g):r.playbackRate=e)},setSource:function(e){r&&(e?r.src=e:(r.removeAttribute("src"),r.load()))},setStallState:function(e,t){!function(e,t){t?function(e){null!==e&&r&&!r.seeking&&-1===p.indexOf(e)&&p.push(e)}(e):function(e){var t=p.indexOf(e);null!==e&&-1!==t&&p.splice(t,1)}(e)}(e,t)},setTTMLRenderingDiv:function(e){(a=e).style.position="absolute",a.style.display="flex",a.style.overflow="hidden",a.style.pointerEvents="none",a.style.top=0,a.style.left=0},setVttRenderingDiv:function(e){s=e},waitForReadyState:S,setDisableRemotePlayback:function(e){r&&(r.disableRemotePlayback=e)}},t=(0,f.Z)(d).getInstance().getLogger(e),n=NaN,e}wi.__dashjs_factory_name="VideoModel";var Si=c.Z.getSingletonFactory(wi),Ti=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],Ai="dashjs_?_bitrate",Ii="dashjs_?_settings",Ri="localStorage",Ni="lastBitrate",Ci="lastMediaSettings";function Oi(e){e=e||{};var t,r,n,i=this.context,a=e.settings;function s(e){if(void 0!==n)return n;var t;n=!1;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return r.warn("DOMStorage access denied: "+e.message),n}if(!t||e!==Ri&&"sessionStorage"!==e)return n;try{t.setItem("1","1"),t.removeItem("1"),n=!0}catch(e){r.warn("DOMStorage is supported, but cannot be used: "+e.message)}return n}function l(){var e=6e5;return Math.round((new Date).getTime()/e)*e}function u(e,t){return s(e)&&a.get().streaming[t+"CachingInfo"].enabled}function c(){if(!a)throw new Error(o.Z.MISSING_CONFIG_ERROR)}return t={getSavedBitrateSettings:function(e){if(c(),!a.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var t=NaN;if(u(Ri,Ni)){var n=Ai.replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(n))||{},o=(new Date).getTime()-parseInt(i.timestamp,10)>=a.get().streaming.lastBitrateCachingInfo.ttl||!1,s=parseFloat(i.bitrate);isNaN(s)||o?o&&localStorage.removeItem(n):(t=s,r.debug("Last saved bitrate for "+e+" was "+s))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(u(Ri,Ni)&&t){var n=Ai.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:l()}))}catch(e){r.error(e.message)}}},getSavedMediaSettings:function(e){if(c(),!a.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var t=null;if(u(Ri,Ci)){var r=Ii.replace(/\?/,e);try{var n=JSON.parse(localStorage.getItem(r))||{},i=(new Date).getTime()-parseInt(n.timestamp,10)>=a.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;t=n.settings,i&&(localStorage.removeItem(r),t=null)}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(u(Ri,Ci)){var n=Ii.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:l()}))}catch(e){r.error(e.message)}}}},r=(0,f.Z)(i).getInstance().getLogger(t),s(Ri)&&Ti.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){r.error(e.message)}}}),t}Oi.__dashjs_factory_name="DOMStorage";var Pi=c.Z.getSingletonFactory(Oi),xi=r(2032),Di=r(2011);function ki(){var e,t,r,n,i,o,a,s,l,u,c,f,d,h=this.context;function p(e,r,i,o){var a=null,l=e?d.resolve(e.path):null,u=o||{init:!0,url:l?l.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:r};t.debug("Start searching for initialization.");var c=v(u);s.load({request:c,success:function(t){if(u.bytesLoaded=u.range.end,!(a=n.findInitRange(t)))return u.range.end=u.bytesLoaded+u.bytesToLoad,p(e,r,i,u);e.range=a,i(e)},error:function(){i(e)}}),t.debug("Perform init search: "+u.url)}function m(e,r,i,o,a,l){if(i&&(void 0===i.start||void 0===i.end)){var u=i?i.toString().split("-"):null;i=u?{start:parseFloat(u[0]),end:parseFloat(u[1])}:null}a=a||y;var c=null,f=null,h=!!i,p=e?d.resolve(e.path):null,g={init:!1,url:p?p.url:void 0,range:h?i:{start:0,end:1500},searching:!h,bytesLoaded:l?l.bytesLoaded:0,bytesToLoad:1500,mediaType:r},_=v(g);s.load({request:_,success:function(i){var s=g.bytesToLoad,l=i.byteLength;if(g.bytesLoaded=g.range.end-g.range.start,c=n.parse(i),(f=c.getBox("sidx"))&&f.isComplete){var u,d,h=f.references;if(null!=h&&h.length>0&&(u=1===h[0].reference_type),u){var p,y,v,_;t.debug("Initiate multiple SIDX load."),g.range.end=g.range.start+f.size;var b=[],E=0,w=(f.offset||g.range.start)+f.size,S=function(t){t?(b=b.concat(t),++E>=y&&(b.sort(function(e,t){return e.startTime-t.startTime<0?-1:0}),a(b,e,o))):a(null,e,o)};for(p=0,y=h.length;p<y;p++)v=w,_=w+h[p].referenced_size-1,w+=h[p].referenced_size,m(e,r,{start:v,end:_},o,S,g)}else t.debug("Parsing segments from SIDX. representation "+r+" - id: "+e.id+" for range : "+g.range.start+" - "+g.range.end),d=function(e,t){for(var r,n,i,o,a=e.references,s=a.length,l=e.timescale,u=e.earliest_presentation_time,c=t.range.start+e.offset+e.first_offset+e.size,f=[],d=0;d<s;d++)i=a[d].subsegment_duration,o=a[d].referenced_size,(r=new Di.Z).duration=i,r.startTime=u,r.timescale=l,n=c+o-1,r.mediaRange=c+"-"+n,f.push(r),u+=i,c+=o;return f}(f,g),a(d,e,o)}else{if(f)g.range.start=f.offset||g.range.start,g.range.end=g.range.start+(f.size||s);else{if(l<g.bytesLoaded)return void a(null,e,o);var T=c.getLastBox();T&&T.size?(g.range.start=T.offset+T.size,g.range.end=g.range.start+s):g.range.end+=s}m(e,r,g.range,o,null,g)}},error:function(){a(null,e,o)}}),t.debug("Perform SIDX load for type ".concat(r," : ").concat(g.url," with range ").concat(g.range.start," - ").concat(g.range.end))}function y(e,t,r){r({segments:e,representation:t,error:e?void 0:new w.Z(l.SEGMENT_BASE_LOADER_ERROR_CODE,l.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function v(e){if(e.url){var t=new g.Z;return t.setInfo(e),t}}return e={setConfig:function(s){s.baseURLController&&(d=s.baseURLController),s.dashMetrics&&(o=s.dashMetrics),s.mediaPlayerModel&&(a=s.mediaPlayerModel),s.errHandler&&(r=s.errHandler),s.boxParser&&(n=s.boxParser),s.debug&&(t=s.debug.getLogger(e)),s.requestModifier&&(i=s.requestModifier),s.errors&&(l=s.errors),s.urlUtils&&(f=s.urlUtils),s.constants&&(u=s.constants),s.dashConstants&&(c=s.dashConstants)},initialize:function(){s=wt(h).create({errHandler:r,dashMetrics:o,mediaPlayerModel:a,requestModifier:i,boxParser:n,errors:l,urlUtils:f,constants:u,dashConstants:c})},loadInitialization:function(e,t){return new Promise(function(r){p(e,t,r)})},loadSegments:function(e,t,r){return new Promise(function(n){m(e,t,r,n)})},reset:function(){s&&(s.abort(),s=null)}}}ki.__dashjs_factory_name="SegmentBaseLoader";var Mi=c.Z.getSingletonFactory(ki);function Li(e){var t;e=e||{};var r=new DataView(e.data),n=0;function i(e,t){var i=!0,o=0;if(void 0===t&&(t=!1),e.tag>16777215?(r.getUint32(n)!==e.tag&&(i=!1),o=4):e.tag>65535?(256*r.getUint16(n)+r.getUint8(n+2)!==e.tag&&(i=!1),o=3):e.tag>255?(r.getUint16(n)!==e.tag&&(i=!1),o=2):(r.getUint8(n)!==e.tag&&(i=!1),o=1),!i&&e.required&&!t)throw new Error("required tag not found");return i&&(n+=o),i}function o(e){var t=1,i=128,o=-1,a=0,s=r.getUint8(n),l=0;for(l=0;l<8;l+=1){if((s&i)===i){a=void 0===e?s&~i:s,o=l;break}i>>=1}for(l=0;l<o;l+=1,t+=1)a=a<<8|255&r.getUint8(n+t);return n+=t,a}return t={getPos:function(){return n},setPos:function(e){n=e},consumeTag:i,consumeTagAndSize:function(e,t){var r=i(e,t);return r&&o(),r},parseTag:function(e){var r;return i(e),r=o(),t[e.parse](r)},skipOverElement:function(e,t){var r,a=i(e,t);return a&&(r=o(),n+=r),a},getMatroskaCodedNum:o,getMatroskaFloat:function(e){var t;switch(e){case 4:t=r.getFloat32(n),n+=4;break;case 8:t=r.getFloat64(n),n+=8}return t},getMatroskaUint:function(e){if(e>4)return function(e){for(var t=Math.floor(Number.MAX_SAFE_INTEGER/256),i=0,o=0;o<e;o+=1){if(i>t)throw new Error("Value exceeds safe integer limit");i*=256;var a=r.getUint8(n+o);if(i>Number.MAX_SAFE_INTEGER-a)throw new Error("Value exceeds safe integer limit");i+=a}return n+=e,i}(e);for(var t=0,i=0;i<e;i+=1)t<<=8,t|=255&r.getUint8(n+i);return n+=e,t>>>0},moreData:function(){return n<r.byteLength}}}Li.__dashjs_factory_name="EBMLParser";var Fi=c.Z.getClassFactory(Li);function Ui(){var e,t,r,n,i,a,s,l,u,c,f=this.context;function d(e){var t=new g.Z;return t.setInfo(e),t}return e={setConfig:function(r){if(!(r.baseURLController&&r.dashMetrics&&r.mediaPlayerModel&&r.errHandler))throw new Error(o.Z.MISSING_CONFIG_ERROR);c=r.baseURLController,a=r.dashMetrics,s=r.mediaPlayerModel,n=r.errHandler,u=r.errors,t=r.debug.getLogger(e),i=r.requestModifier},initialize:function(){l=wt(f).create({errHandler:n,dashMetrics:a,mediaPlayerModel:s,requestModifier:i,errors:u})},loadInitialization:function(e,r){return new Promise(function(n){var i=null,o=e?c.resolve(e.path):null,a=e?e.range.split("-"):null,s={range:{start:a?parseFloat(a[0]):null,end:a?parseFloat(a[1]):null},request:i,url:o?o.url:void 0,init:!0,mediaType:r};t.info("Start loading initialization."),i=d(s),l.load({request:i,success:function(){n(e)},error:function(){n(e)}}),t.debug("Perform init load: "+s.url)})},loadSegments:function(e,n,i){return new Promise(function(o){var a=null,s=e?c.resolve(e.path):null,h=s?s.url:void 0;a=d({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:a,url:h,init:!1,mediaType:n}),t.debug("Parsing ebml header"),l.load({request:a,success:function(n){!function(e,n,i,o){if(e&&0!==e.byteLength){var a,s,u,c,h=Fi(f).create({data:e}),p=i?i.split("-"):null,g=null,m={url:n,range:{start:p?parseFloat(p[0]):null,end:p?parseFloat(p[1]):null},request:g};for(t.debug("Parse EBML header: "+m.url),h.skipOverElement(r.EBML),h.consumeTag(r.Segment),u=h.getMatroskaCodedNum(),u+=h.getPos(),c=h.getPos();h.moreData()&&!h.consumeTagAndSize(r.Segment.Info,!0);)if(!(h.skipOverElement(r.Segment.SeekHead,!0)||h.skipOverElement(r.Segment.Tracks,!0)||h.skipOverElement(r.Segment.Cues,!0)||h.skipOverElement(r.Void,!0)))throw new Error("no valid top level element found");for(;void 0===a;){var y=h.getMatroskaCodedNum(!0),v=h.getMatroskaCodedNum();y===r.Segment.Info.Duration.tag?a=h[r.Segment.Info.Duration.parse](v):h.setPos(h.getPos()+v)}g=d(m),l.load({request:g,success:function(e){s=function(e,n,i,o){var a,s,l,u,c,d,h,p;for(l=[],c=0,d=(s=function(e){var t,n,i=[],o=Fi(f).create({data:e});for(o.consumeTagAndSize(r.Segment.Cues);o.moreData()&&o.consumeTagAndSize(r.Segment.Cues.CuePoint,!0);){for((t={}).CueTime=o.parseTag(r.Segment.Cues.CuePoint.CueTime),t.CueTracks=[];o.moreData()&&o.consumeTag(r.Segment.Cues.CuePoint.CueTrackPositions,!0);){var a=o.getMatroskaCodedNum(),s=o.getPos();if((n={}).Track=o.parseTag(r.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===n.Track)throw new Error("Cue track cannot be 0");n.ClusterPosition=o.parseTag(r.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),t.CueTracks.push(n),o.setPos(s+a)}if(0===t.CueTracks.length)throw new Error("Mandatory cuetrack not found");i.push(t)}if(0===i.length)throw new Error("mandatory cuepoint not found");return i}(e)).length;c<d;c+=1)u=new Di.Z,a=c<s.length-1?s[c+1].CueTime-s[c].CueTime:o-s[c].CueTime,u.duration=a,u.startTime=s[c].CueTime,u.timescale=1e3,h=s[c].CueTracks[0].ClusterPosition+n,p=c<s.length-1?s[c+1].CueTracks[0].ClusterPosition+n-1:i-1,u.mediaRange=h+"-"+p,l.push(u);return t.debug("Parsed cues: "+l.length+" cues."),l}(e,c,u,a),o(s)},error:function(){t.error("Download Error: Cues "+m.url),o(null)}}),t.debug("Perform cues load: "+m.url+" bytes="+m.range.start+"-"+m.range.end)}else o(null)}(n,h,i,function(t){o({segments:t,representation:e,error:t?void 0:new w.Z(u.SEGMENT_BASE_LOADER_ERROR_CODE,u.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){o({representation:e,error:new w.Z(u.SEGMENT_BASE_LOADER_ERROR_CODE,u.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){l&&(l.abort(),l=null)}},r={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},e}Ui.__dashjs_factory_name="WebmSegmentBaseLoader";var Bi=c.Z.getSingletonFactory(Ui);function ji(e){e=e||{};var t,r,n,i=this.context,o=e.eventBus,a=e.events,s=e.dashMetrics,l=e.mediaPlayerModel,u=e.errHandler,c=e.baseURLController,f=e.debug,d=e.boxParser,h=e.requestModifier,p=e.errors;function g(e){return"webm"===(e?e.split("/")[1]:"").toLowerCase()}return t={initialize:function(){r.initialize(),n.initialize()},getSegmentBaseInitSegment:function(e){return g(e.representation.mimeType)?n.loadInitialization(e.representation,e.mediaType):r.loadInitialization(e.representation,e.mediaType)},getSegmentList:function(e){return g(e.mimeType)?n.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null):r.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null)},reset:function(){r.reset(),n.reset()}},r=Mi(i).getInstance(),n=Bi(i).getInstance(),r.setConfig({baseURLController:c,dashMetrics:s,mediaPlayerModel:l,errHandler:u,eventBus:o,events:a,errors:p,debug:f,boxParser:d,requestModifier:h}),n.setConfig({baseURLController:c,dashMetrics:s,mediaPlayerModel:l,errHandler:u,eventBus:o,events:a,errors:p,debug:f,requestModifier:h}),t}ji.__dashjs_factory_name="SegmentBaseController";var Zi=c.Z.getSingletonFactory(ji),qi=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Gi=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},zi=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},Hi=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function Vi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Wi=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.valid="/"==t[0],this.path=t.split("/").filter(function(e){return 0!==e.length}).map(function(e){var t={name:e},n=e.indexOf("[");if(-1!=n){t.name=e.substring(0,n);var i=e.substring(n+1,e.length-1);r.valid=r.valid&&-1==i.indexOf("[");var o=i.indexOf("=");-1!=o?(t.attribute={name:i.substring(1,o),value:i.substring(o+1)},-1!=["'",'"'].indexOf(t.attribute.value[0])&&(t.attribute.value=t.attribute.value.substring(1,t.attribute.value.length-1))):t.position=parseInt(i,10)-1}return t})}var t;return(t=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return"text()"===this.path[this.path.length-1].name}},{key:"getMpdTarget",value:function(e,t){for(var r=null,n=e,i=1,o="MPD";i<this.path.length&&null!==n;){r=n;var a=this.path[i];if(o=a.name,i!==this.path.length-1||!o.startsWith("@")&&"text()"!==o){var s=r[o+"_asArray"]||[];0===s.length&&r[o]&&s.push(r[o]),a.position?n=s[a.position]||null:a.attribute?function(){var e=a.attribute;n=s.filter(function(t){return t[e.name]==e.value})[0]||null}():n=s[0]||null}i++}return null===n?null:o.startsWith("@")?{name:o.substring(1),leaf:n,target:n}:"text()"===o?{name:"__text",leaf:n,target:n}:{name:o,leaf:n,target:t?r:n}}}])&&Vi(e.prototype,t),e}();function Yi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ki=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.action=t,this.xpath=r,this.value=n,this.position=null}var t;return(t=[{key:"getMpdTarget",value:function(e){var t="remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position;return this.xpath.getMpdTarget(e,t)}}])&&Yi(e.prototype,t),e}();function Qi(){var e,t,r=this.context;return e={getIsPatch:function(e){return e&&e.hasOwnProperty(a.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(e){return e&&e.hasOwnProperty(a.Z.PUBLISH_TIME)?new Date(e[a.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(e){return e&&e.hasOwnProperty(a.Z.ORIGINAL_PUBLISH_TIME)?new Date(e[a.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(e){return e&&e[a.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(e){return e?(e.__children||[]).map(function(e){var r=Object.keys(e)[0];if("add"!==r&&"remove"!==r&&"replace"!==r)return t.warn("Ignoring node of invalid action: ".concat(r)),null;var n=e[r],i=n.sel;if("add"===r&&n.type){if(!n.type.startsWith("@"))return t.warn("Ignoring add action for prefixed namespace declaration: ".concat(n.type,"=").concat(n.__text)),null;i="".concat(i,"/").concat(n.type)}var o=new Wi(i);if(!o.isValid())return t.warn("Ignoring action with invalid selector: ".concat(r," - ").concat(i)),null;var a=null;o.findsAttribute()||o.findsTextReplace()?a=n.__text||"":"remove"!==r&&(a=n.__children.reduce(function(e,t){var r=Object.keys(t)[0];return"#text"!==r&&(e[r]=e[r]||[],e[r].push(t[r])),e},{}));var s=new Ki(r,o,a);return"add"===r&&(s.position=n.pos),s}).filter(function(e){return!!e}):[]}},t=(0,f.Z)(r).getInstance().getLogger(e),e}Qi.__dashjs_factory_name="PatchManifestModel";var Xi=c.Z.getSingletonFactory(Qi);function $i(){var e,t,r,n,i,o,s,l=this.context;function u(e,r,o){var s,l=t.getAdaptationsForType(n[0].mpd.manifest,e,r);if(!l||0===l.length)return null;if(l.length>1&&o){var u=d(o,r);if(i[o.id]&&i[o.id][r])for(var f=0,h=l.length;f<h;f++)if(c(i[o.id][r],u[f]))return l[f];for(var p=0,g=l.length;p<g;p++)if(s=l[p],t.getRolesForAdaptation(s).filter(function(e){return e.value===a.Z.MAIN})[0])return l[p]}return l[0]}function c(e,t){if(!e||!t)return!1;var r=e.id===t.id,n=e.codec===t.codec,i=e.viewpoint===t.viewpoint,o=JSON.stringify(e.viewpointsWithSchemeIdUri)===JSON.stringify(t.viewpointsWithSchemeIdUri),a=e.lang===t.lang,s=e.roles.toString()===t.roles.toString(),l=JSON.stringify(e.rolesWithSchemeIdUri)===JSON.stringify(t.rolesWithSchemeIdUri),u=e.accessibility.toString()===t.accessibility.toString(),c=JSON.stringify(e.accessibilitiesWithSchemeIdUri)===JSON.stringify(t.accessibilitiesWithSchemeIdUri),f=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString(),d=JSON.stringify(e.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(t.audioChannelConfigurationsWithSchemeIdUri);return r&&n&&i&&o&&a&&s&&l&&u&&c&&f&&d}function f(e,r,n,i,a,s){var l,u,c,f,d,h,p=[];if(!i||0===i.length)return[];var g=t.getAdaptationsForPeriod(r);for(f=0,h=i.length;f<h;f++)if(l=i[f],u=_(g[c=t.getIndexForAdaptation(l,e,n.index)]),s){var m=u.accessibility.length;for(d=0;d<m;d++)if(u){var y=u.accessibility[d];if(0===y.indexOf("cea-608:")){var v=y.substring(8).split(";");if("CC"===v[0].substring(0,2))for(d=0;d<v.length;d++)u||(u=_.call(this,g[c])),b(u,v[d].substring(0,3),v[d].substring(4)),p.push(u),u=null;else for(d=0;d<v.length;d++)u||(u=_.call(this,g[c])),b(u,"CC"+(d+1),v[d]),p.push(u),u=null}else 0===y.indexOf("cea-608")&&(b(u,o.CC1,"eng"),p.push(u),u=null)}}else a===o.IMAGE?(u.type=o.IMAGE,p.push(u),u=null):u&&p.push(u);return p}function d(e,r,i){var a=n,s=i,l=[];if(s)w(),a=h(s);else{if(!(n.length>0))return l;s=n[0].mpd.manifest}var u=v(e,a),c=t.getAdaptationsForType(s,e?e.index:null,r);return l=f(s,u,e,c,r),r===o.TEXT&&(c=t.getAdaptationsForType(s,e?e.index:null,o.VIDEO),l=l.concat(f(s,u,e,c,r,!0))),l}function h(e){var r=p(e);return t.getRegularPeriods(r)}function p(e){var r=m(e);return t.getMpd(r)}function g(){n=[],i={}}function m(e){return e||(n.length>0?n[0].mpd.manifest:null)}function y(e){try{var r=v(e.streamInfo,n),i=t.getAdaptationsForPeriod(r);return e&&e.streamInfo&&void 0!==e.streamInfo.id&&i?i[e.index]:null}catch(e){return null}}function v(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n];if(e&&e.id===i.id)return i}return null}function _(e){if(!e)return null;var r,n,i,o,a,l=new Gi,u=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];if(l.id=e.id,l.index=e.index,l.type=e.type,l.streamInfo=E(e.period),l.representationCount=t.getRepresentationCount(u),l.labels=t.getLabelsForAdaptation(u),l.lang=t.getLanguageForAdaptation(u),l.segmentAlignment=t.getSegmentAlignment(u),l.subSegmentAlignment=t.getSubSegmentAlignment(u),r=t.getViewpointForAdaptation(u),l.viewpoint=r.length?r[0].value:void 0,l.viewpointsWithSchemeIdUri=r,a=t.getAccessibilityForAdaptation(u),l.accessibility=a.map(function(e){var t=e.value,r=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&void 0!==s&&(r=t?"cea-608:"+t:"cea-608",l.embeddedCaptions=!0),r}),l.accessibilitiesWithSchemeIdUri=a,n=t.getAudioChannelConfigurationForAdaptation(u),l.audioChannelConfiguration=n.map(function(e){return e.value}),l.audioChannelConfigurationsWithSchemeIdUri=n,0===l.audioChannelConfiguration.length&&Array.isArray(u.Representation_asArray)&&u.Representation_asArray.length>0&&(i=t.getAudioChannelConfigurationForRepresentation(u.Representation_asArray[0]),l.audioChannelConfiguration=i.map(function(e){return e.value}),l.audioChannelConfigurationsWithSchemeIdUri=i),o=t.getRolesForAdaptation(u),l.roles=o.map(function(e){return e.value}),l.rolesWithSchemeIdUri=o,l.codec=t.getCodec(u),l.mimeType=t.getMimeType(u),l.contentProtection=t.getContentProtectionData(u),l.bitrateList=t.getBitrateListForAdaptation(u),l.selectionPriority=t.getSelectionPriority(u),l.contentProtection){var c=l.contentProtection.map(function(e){return t.getKID(e)}).filter(function(e){return null!==e});if(c.length){var f=c[0];l.contentProtection.forEach(function(e){e.keyId=f})}}if(l.isText=t.getIsText(u),l.supplementalProperties=t.getSupplementalPropertiesForAdaptation(u),(!l.supplementalProperties||0===Object.keys(l.supplementalProperties).length)&&Array.isArray(u.Representation_asArray)&&u.Representation_asArray.length>0){var d=u.Representation_asArray.map(function(e){return t.getSupplementalPropertiesForRepresentation(e)});d.every(function(e){return JSON.stringify(e)===JSON.stringify(d[0])})&&(l.supplementalProperties=d[0])}if(l.supplementalPropertiesAsArray=t.getSupplementalPropertiesAsArrayForAdaptation(u),(!l.supplementalPropertiesAsArray||0===l.supplementalPropertiesAsArray.length)&&Array.isArray(u.Representation_asArray)&&u.Representation_asArray.length>0){var h=u.Representation_asArray.map(function(e){return t.getSupplementalPropertiesAsArrayForRepresentation(e)});h.every(function(e){return JSON.stringify(e)===JSON.stringify(h[0])})&&(l.supplementalPropertiesAsArray=h[0])}return l.essentialProperties=t.getEssentialPropertiesForAdaptation(u),l.essentialPropertiesAsArray=t.getEssentialPropertiesAsArrayForAdaptation(u),l.isFragmented=t.getIsFragmented(u),l.isEmbedded=!1,l}function b(e,t,r){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=o.TEXT,e.codec="cea-608-in-SEI",e.isEmbedded=!0,e.isFragmented=!1;var n=_r()(r);e.lang=n||r,e.roles=["caption"],e.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function E(e){var r,n,i=new zi;return i.id=e.id,i.index=e.index,i.start=e.start,i.duration=e.duration,i.manifestInfo=(r=e.mpd,(n=new Hi).dvrWindowSize=r.timeShiftBufferDepth,n.loadedTime=r.manifest.loadedTime,n.availableFrom=r.availabilityStartTime,n.minBufferTime=r.manifest.minBufferTime,n.maxFragmentDuration=r.maxSegmentDuration,n.duration=t.getDuration(r.manifest),n.isDynamic=t.getIsDynamic(r.manifest),n.serviceDescriptions=t.getServiceDescriptions(r.manifest),n.protocol=r.manifest.protocol,n),i.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(i.start+i.duration-i.manifestInfo.duration)<1,i}function w(){if(!o)throw new Error("setConfig function has to be called previously")}function S(e){return n.length>0?n[0].mpd.manifest.Period_asArray[e]:null}function T(e,t,r){var n,i,o,a,s;if(e)for(n=e.AdaptationSet_asArray,a=0;a<n.length;a+=1)for(o=n[a].Representation_asArray,s=0;s<o.length;s+=1)if(t===(i=o[s]).id)return r?s:i;return null}return e={getBandwidthForRepresentation:function(e,t){var r;return(r=T(S(t),e))?r.bandwidth:null},getIndexForRepresentation:function(e,t){return function(e,t){var r=T(e,t,!0);return null!==r?r:-1}(S(t),e)},getMaxIndexForBufferType:function(e,r){return function(e,r){var n,i,o,a;if(!e||!r)return-1;for(i=e.AdaptationSet_asArray,a=0;a<i.length;a+=1)if(o=(n=i[a]).Representation_asArray,t.getIsTypeOf(n,r))return o.length;return-1}(S(r),e)},convertRepresentationToRepresentationInfo:function(e){if(e){var r=new qi,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],i=t.getRepresentationFor(e.index,n);return r.id=e.id,r.quality=e.index,r.bandwidth=t.getBandwidth(i),r.fragmentDuration=e.segmentDuration||(e.segments&&e.segments.length>0?e.segments[0].duration:NaN),r.MSETimeOffset=e.MSETimeOffset,r.mediaInfo=_(e.adaptation),r}return null},getStreamsInfo:function(e,t){var r=[],i=n;if(e&&(w(),i=h(e)),i.length>0){(!t||t>i.length)&&(t=i.length);for(var o=0;o<t;o++)r.push(E(i[o]))}return r},getMediaInfoForType:function(e,r){if(0===n.length||!e)return null;var i=v(e,n);if(!i)return null;var o=t.getAdaptationsForPeriod(i),a=u(e.index,r,e);return a?_(o[t.getIndexForAdaptation(a,n[0].mpd.manifest,e.index)]):null},getAllMediaInfoForType:d,getAdaptationForType:u,getRealAdaptation:function(e,r){var i,o,a=v(e,n);return i=r?r.id:null,n.length>0&&a&&(o=i?t.getAdaptationForId(i,n[0].mpd.manifest,a.index):t.getAdaptationForIndex(r?r.index:null,n[0].mpd.manifest,a.index)),o},getProducerReferenceTimes:function(e,r){var i,o,a=v(e,n);return i=r?r.id:null,n.length>0&&a&&(o=i?t.getAdaptationForId(i,n[0].mpd.manifest,a.index):t.getAdaptationForIndex(r?r.index:null,n[0].mpd.manifest,a.index)),o?t.getProducerReferenceTimesForAdaptation(o):[]},getRealPeriodByIndex:function(e){return t.getRealPeriodForIndex(e,n[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(e){try{return t.getEssentialPropertiesForRepresentation(e)}catch(e){return[]}},getVoRepresentations:function(e){var r=y(e);return t.getRepresentationsForAdaptation(r)},getEventsFor:function(e,r,i){var o=[];if(n.length>0){var a=n[0].mpd.manifest;if(e instanceof zi){var s=v(e,n);o=t.getEventsForPeriod(s)}else if(e instanceof Gi){var l=v(i,n);o=t.getEventStreamForAdaptationSet(a,y(e),l)}else if(e instanceof qi){var u=v(i,n);o=t.getEventStreamForRepresentation(a,r,u)}}return o},getEvent:function(e,t,r,n){try{if(!e||!t||isNaN(r)||!n)return null;var i=e.scheme_id_uri,o=e.value;if(!t[i+"/"+o])return null;var a,s=new be,l=e.timescale||1,u=n.adaptation.period.start,c=t[i+"/"+o],f=isNaN(n.presentationTimeOffset)?isNaN(c.presentationTimeOffset)?0:c.presentationTimeOffset:n.presentationTimeOffset,d=e.presentation_time_delta/l;a=0===e.version?u+r-f+d:u-f+d;var h=e.event_duration/l,p=e.id,g=e.message_data;return s.eventStream=c,s.eventStream.value=o,s.eventStream.timescale=l,s.duration=h,s.id=p,s.calculatedPresentationTime=a,s.messageData=g,s.presentationTimeDelta=d,s}catch(e){return null}},getMpd:p,setConfig:function(e){e&&(e.constants&&(o=e.constants),e.cea608parser&&(s=e.cea608parser),e.errHandler&&t.setConfig({errHandler:e.errHandler}),e.BASE64&&t.setConfig({BASE64:e.BASE64}))},updatePeriods:function(e){if(!e)return null;w(),n=h(e)},getIsTextTrack:function(e){return t.getIsText(e)},getUTCTimingSources:function(){var e=m();return t.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=n.length>0?n[0].mpd:null;return t.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){var r=p(e);return t.getAvailabilityStartTime(r)},getIsTypeOf:function(e,r){return t.getIsTypeOf(e,r)},getIsDynamic:function(e){var r=m(e);return t.getIsDynamic(r)},getDuration:function(e){var r=m(e);return t.getDuration(r)},getRegularPeriods:h,getContentSteering:function(e){return t.getContentSteering(e)},getLocation:function(e){return t.getLocation(e)},getPatchLocation:function(e){var r=t.getPatchLocation(e),n=t.getPublishTime(e);return r&&0!==r.length&&n?r.filter(function(e){return isNaN(e.ttl)||n.getTime()+e.ttl>(new Date).getTime()}):[]},getManifestUpdatePeriod:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.getManifestUpdatePeriod(e,r)},getPublishTime:function(e){return t.getPublishTime(e)},getIsDVB:function(e){return t.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(e){return r.getIsPatch(e)},getBaseURLsFromElement:function(e){return t.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return t.getRepresentationSortFunction()},getCodec:function(e,r,n){return t.getCodec(e,r,n)},getPeriodById:function(e){if(!e||0===n.length)return null;var t=n.filter(function(t){return t.id===e});return t&&t.length>0?t[0]:null},setCurrentMediaInfo:function(e,t,r){i[e]=i[e]||{},i[e][t]=i[e][t]||{},i[e][t]=r},isPatchValid:function(e,n){var i=t.getId(e),o=r.getMpdId(n),a=t.getPublishTime(e),s=r.getPublishTime(n),l=r.getOriginalPublishTime(n);return!!(i&&o&&i==o&&a&&l&&a.getTime()==l.getTime()&&s&&a.getTime()<s.getTime())},applyPatchToManifest:function(e,t){r.getPatchOperations(t).forEach(function(t){var r=t.getMpdTarget(e);if(null!==r){var n=r.name,i=r.target,o=r.leaf;if(t.xpath.findsAttribute()||"__text"===n)switch(t.action){case"add":case"replace":i[n]=t.value;break;case"remove":delete i[n]}else{var a=(i[n+"_asArray"]||[]).indexOf(o),s="prepend"===t.position||"before"===t.position;if(("remove"===t.action||"replace"===t.action)&&(delete i[n],-1!=a)){var l=i[n+"_asArray"];l.splice(a,1),l.length>1?i[n]=l:1==l.length?i[n]=l[0]:delete i[n+"_asArray"]}"add"!==t.action&&"replace"!==t.action||Object.keys(t.value).forEach(function(e){var r=t.value[e],o=i[e+"_asArray"]||[];if(0===o.length&&i[e]&&o.push(i[e]),0===o.length)o=r;else{var l=o.length;l=e==n&&-1!=a?a+(s?0:1)+("replace"==t.action?-1:0):s?0:o.length,o.splice.apply(o,[l,0].concat(r))}i[e+"_asArray"]=o,i[e]=1==o.length?o[0]:o})}}})},areMediaInfosEqual:c,reset:g},t=qe(l).getInstance(),r=Xi(l).getInstance(),g(),e}$i.__dashjs_factory_name="DashAdapter";var Ji=c.Z.getSingletonFactory($i);function eo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var to=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t;return t=[{key:"round10",value:function(e,t){return function(e,t,r){return void 0===r||0==+r?Math[e](t):(r=+r,null===(t=+t)||isNaN(t)||"number"!=typeof r||r%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-r:-r)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+r:r))))}("round",e,t)}}],t&&eo(e,t),e}(),ro=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},no=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null},io=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.level=null},oo=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.state=s.Z.BUFFER_EMPTY},ao=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.range=null,this.manifestInfo=null},so=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.droppedFrames=null};function lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var uo=function e(){lo(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},co=function e(){lo(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},fo=function e(){lo(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},ho=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},po=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadingRequests=[],this.executedRequests=[]};function go(e){var t,r,n=(e=e||{}).settings,i=this.context,a=(0,l.Z)(i).getInstance();function c(){a.trigger(u.Z.METRICS_CHANGED)}function f(e){a.trigger(u.Z.METRIC_CHANGED,{mediaType:e}),c()}function d(e,t,r){a.trigger(u.Z.METRIC_UPDATED,{mediaType:e,metric:t,value:r}),f(e)}function h(e,t,r){a.trigger(u.Z.METRIC_ADDED,{mediaType:e,metric:t,value:r}),f(e)}function p(e,t){var n=null;return e?(r.hasOwnProperty(e)?n=r[e]:t||(n=new ro,r[e]=n),n):n}function g(e,t,r){var i=p(e);null!==i&&(i[t].push(r),i[t].length>n.get().streaming.metrics.maxListDepth&&i[t].shift())}function m(e,t,r){g(e,t,r),h(e,t,r)}return t={clearCurrentMetricsForType:function(e){delete r[e],f(e)},clearAllCurrentMetrics:function(){r={},c()},getMetricsFor:p,addHttpRequest:function e(t,r,n,i,o,a,l,u,c,f,d,h,p,g,y,v,_){var b=new C.w;null!=a&&a!==i&&(e(t,null,n,i,o,null,null,u,c,null,null,null,p,null,null,v,_),b.actualurl=a),b.tcpid=r,b.type=n,b.url=i,b.range=u,b.trequest=c,b.tresponse=f,b.responsecode=h,b.cmsd=_,b._tfinish=d,b._stream=t,b._mediaduration=p,b._quality=o,b._responseHeaders=g,b._serviceLocation=l,b._fileLoaderType=v,y?y.forEach(function(e){!function(e,t,r,n){var i=new C.O;i.s=t,i.d=r,i.b=n,e.trace.push(i),e.interval||(e.interval=0),e.interval+=r}(b,e.s,e.d,e.b)}):(delete b.interval,delete b.trace),m(t,s.Z.HTTP_REQUEST,b)},addRepresentationSwitch:function(e,t,r,n,i){var o=new no;o.t=t,o.mt=r,o.to=n,i?o.lto=i:delete o.lto,m(e,s.Z.TRACK_SWITCH,o)},addBufferLevel:function(e,t,r){var n=new io;n.t=t,n.level=r,m(e,s.Z.BUFFER_LEVEL,n)},addBufferState:function(e,t,r){var n=new oo;n.target=r,n.state=t,m(e,s.Z.BUFFER_STATE,n)},addDVRInfo:function(e,t,r,n){var i=new ao;i.time=t,i.range=n,i.manifestInfo=r,m(e,s.Z.DVR_INFO,i)},addDroppedFrames:function(e,t){var r=new so,n=p(e).DroppedFrames;t&&(r.time=t.creationTime,r.droppedFrames=t.droppedVideoFrames,n.length>0&&n[n.length-1]==r||m(e,s.Z.DROPPED_FRAMES,r))},addSchedulingInfo:function(e,t,r,n,i,o,a,l,u){var c=new ho;c.mediaType=e,c.t=t,c.type=r,c.startTime=n,c.availabilityStartTime=i,c.duration=o,c.quality=a,c.range=l,c.state=u,m(e,s.Z.SCHEDULING_INFO,c)},addRequestsQueue:function(e,t,r){var n=new po;n.loadingRequests=t,n.executedRequests=r,p(e).RequestsQueue=n,h(e,s.Z.REQUESTS_QUEUE,n)},addManifestUpdate:function(e,t,r,n,i,a,l,u,c,f){var d=new uo;d.mediaType=e,d.type=t,d.requestTime=r,d.fetchTime=n,d.availabilityStartTime=i,d.presentationStartTime=a,d.clientTimeOffset=l,d.currentTime=u,d.buffered=c,d.latency=f,g(o.Z.STREAM,s.Z.MANIFEST_UPDATE,d),h(e,s.Z.MANIFEST_UPDATE,d)},updateManifestUpdateInfo:function(e,t){if(e){for(var r in t)e[r]=t[r];d(e.mediaType,s.Z.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,r,n,i){if(e){var o=new co;o.id=t,o.index=r,o.start=n,o.duration=i,e.streamInfo.push(o),d(e.mediaType,s.Z.MANIFEST_UPDATE_STREAM_INFO,e)}},addManifestUpdateRepresentationInfo:function(e,t,r,n,i,o,a,l){if(e&&e.representationInfo){var u=new fo;u.id=t,u.index=r,u.streamIndex=n,u.mediaType=i,u.startNumber=a,u.fragmentInfoType=l,u.presentationTimeOffset=o,e.representationInfo.push(u),d(e.mediaType,s.Z.MANIFEST_UPDATE_TRACK_INFO,e)}},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,m(o.Z.STREAM,s.Z.PLAY_LIST,e)},addDVBErrors:function(e){m(o.Z.STREAM,s.Z.DVB_ERRORS,e)}},r={},t}go.__dashjs_factory_name="MetricsModel";var mo=c.Z.getSingletonFactory(go);function yo(e){e=e||{};var t,r,n,i,a=this.context,l=e.metricsModel;function u(e){var t=l.getMetricsFor(e,!0);if(!t)return null;var r,n=t.HttpList,i=null;if(!n||n.length<=0)return null;for(r=n.length-1;r>=0;){if(n[r].responsecode){i=n[r];break}r--}return i}function c(e){var t=l.getMetricsFor(e,!0);return t&&t.HttpList?t.HttpList:[]}function f(e,t){if(!e)return null;var r=e[t];return r&&0!==r.length?r[r.length-1]:null}return t={getCurrentRepresentationSwitch:function(e){return f(l.getMetricsFor(e,!0),s.Z.TRACK_SWITCH)},getCurrentBufferState:function(e){return f(l.getMetricsFor(e,!0),s.Z.BUFFER_STATE)},getCurrentBufferLevel:function(e){var t=f(l.getMetricsFor(e,!0),s.Z.BUFFER_LEVEL);return t?to.round10(t.level/1e3,-3):0},getCurrentHttpRequest:u,getHttpRequests:c,getCurrentDroppedFrames:function(){return f(l.getMetricsFor(o.Z.VIDEO,!0),s.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return f(l.getMetricsFor(e,!0),s.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return f(e?l.getMetricsFor(e,!0):l.getMetricsFor(o.Z.VIDEO,!0)||l.getMetricsFor(o.Z.AUDIO,!0),s.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return f(l.getMetricsFor(o.Z.STREAM),s.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){if(!t)return null;var r={},n=u(e);n&&(r=Ge.Z.parseHttpHeaders(n._responseHeaders));var i=r[t.toLowerCase()];return void 0===i?null:i},getLatestMPDRequestHeaderValueByID:function(e){if(!e)return null;var t,r,n,i={};for(n=(t=c(o.Z.STREAM)).length-1;n>=0;n--)if((r=t[n]).type===C.w.MPD_TYPE){i=Ge.Z.parseHttpHeaders(r._responseHeaders);break}var a=i[e.toLowerCase()];return void 0===a?null:a},addRepresentationSwitch:function(e,t,r,n,i){l.addRepresentationSwitch(e,t,r,n,i)},addDVRInfo:function(e,t,r,n){l.addDVRInfo(e,t,r,n)},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();l.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){if(e){var t=this.getCurrentManifestUpdate();l.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration)}},addManifestUpdateRepresentationInfo:function(e,t){if(e){var r=this.getCurrentManifestUpdate();l.addManifestUpdateRepresentationInfo(r,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType)}},addManifestUpdate:function(e){l.addManifestUpdate(o.Z.STREAM,e.type,e.requestStartDate,e.requestEndDate)},addHttpRequest:function(e,t,r,n,i,o){l.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,r,e.duration,n,i,e.fileLoaderType,o)},addSchedulingInfo:function(e,t){l.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t)},addRequestsQueue:function(e,t,r){l.addRequestsQueue(e,t,r)},addBufferLevel:function(e,t,r){l.addBufferLevel(e,t,r)},addBufferState:function(e,t,r){l.addBufferState(e,t,r)},addDroppedFrames:function(e){l.addDroppedFrames(o.Z.VIDEO,e)},addPlayList:function(){i&&(l.addPlayList(i),i=null)},addDVBErrors:function(e){l.addDVBErrors(e)},createPlaylistMetrics:function(e,t){(i=new J).start=new Date,i.mstart=e,i.starttype=t},createPlaylistTraceMetrics:function(e,t,i){!0===r&&(r=!1,(n=new ee).representationid=e,n.start=new Date,n.mstart=t,n.playbackspeed=null!==i?i.toString():null)},updatePlayListTraceMetrics:function(e){if(n)for(var t in n)n[t]=e[t]},pushPlayListTraceMetrics:function(e,t){if(!1===r&&i&&n&&n.start){var o=n.start,a=e.getTime()-o.getTime();n.duration=a,n.stopreason=t,i.trace.push(n),r=!0}},clearAllCurrentMetrics:function(){l.clearAllCurrentMetrics()}},l=l||mo(a).getInstance({settings:e.settings}),r=!0,n=null,i=null,t}yo.__dashjs_factory_name="DashMetrics";var vo=c.Z.getSingletonFactory(yo);function _o(){var e,t,r,n,i=this.context,s=(0,l.Z)(i).getInstance(),c=(0,N.Z)(i).getInstance();function f(e){n=e}function h(e,t,r,n){var i,o=t.adaptation.period.mpd,a=o.availabilityStartTime;if(n)i=r&&o.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(a.getTime()+1e3*(e+o.timeShiftBufferDepth)):o.availabilityEndTime;else if(r){var s=t.availabilityTimeOffset;i=new Date(a.getTime()+1e3*(e-s))}else i=a;return i}function p(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*n)/1e3}function g(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function m(e){var r={start:NaN,end:NaN},n=e[0].getAdapter().getRegularPeriods()[0],i=p(new Date,n);if(!e||0===e.length)return{range:r,now:i};e.forEach(function(e){var n=e.getAdapter(),s=n.getMediaInfoForType(e.getStreamInfo(),o.Z.VIDEO)||n.getMediaInfoForType(e.getStreamInfo(),o.Z.AUDIO),l=n.getVoRepresentations(s)[0],u={start:NaN,end:NaN};if(l)if(l.segmentInfoType===a.Z.SEGMENT_TIMELINE)u=function(e){var r,n,i,o,a=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],s=t.getRepresentationFor(e.index,a),l=s.SegmentTemplate||s.SegmentList,u=l.SegmentTimeline,c=l.timescale,f=u.S_asArray,d={start:0,end:0},h=f[0].t,p=!isNaN(h),m=p?h:0,y=0;for(p&&(d.start=g(m/c,e)),i=0,o=f.length;i<o;i++)n=0,(r=f[i]).hasOwnProperty("r")&&(n=r.r),y+=r.d*(1+n);return d.end=g((m+y)/c,e),d}(l);else{var c=l.adaptation.period;u.start=c.start,u.end=Math.max(i,c.start+c.duration)}!isNaN(u.start)&&(isNaN(r.start)||r.start>u.start)&&(r.start=u.start),!isNaN(u.end)&&(isNaN(r.end)||r.end<u.end)&&(r.end=u.end)}),r.end=Math.min(i,r.end);var s=v(e,r.end,!0);return r.end=isNaN(s)?r.end:s,r.start=n&&n.mpd&&n.mpd.timeShiftBufferDepth&&!isNaN(n.mpd.timeShiftBufferDepth)&&!isNaN(r.end)?Math.max(r.end-n.mpd.timeShiftBufferDepth,r.start):r.start,r.start=v(e,r.start),{range:r,now:i}}function y(e,t){r=e-t.end}function v(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var n=0,i=!1,o=NaN;!i&&n<e.length;){var a=e[n].getStreamInfo();a.start<=t&&(!isFinite(a.duration)||a.start+a.duration>=t)?(o=t,i=!0):!r&&a.start>t&&(isNaN(o)||a.start<o)?o=a.start:r&&a.start+a.duration<t&&(isNaN(o)||a.start+a.duration>o)&&(o=a.start+a.duration),n+=1}return o}catch(e){return t}}function _(e){void 0===e.offset||isNaN(e.offset)||f(e.offset/1e3)}function b(){n=0,r=0}function E(){s.off(u.Z.UPDATE_TIME_SYNC_OFFSET,_,this),b()}return e={initialize:function(){b(),s.on(u.Z.UPDATE_TIME_SYNC_OFFSET,_,this)},getClientTimeOffset:function(){return n},setClientTimeOffset:f,getClientReferenceTime:function(){return Date.now()-1e3*r+1e3*n},calcAvailabilityStartTimeFromPresentationTime:function(e,t,r){return h(e,t,r)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,r){return h(e,t,r,!0)},calcPresentationTimeFromWallTime:p,calcPresentationTimeFromMediaTime:g,calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcWallTimeForSegment:function(e,t){var r,n,i;return t&&(r=e.representation.adaptation.period.mpd.suggestedPresentationDelay,n=e.presentationStartTime+r,i=new Date(e.availabilityStartTime.getTime()+1e3*n)),i},calcTimeShiftBufferWindow:function(e,t){if(!t)return function(e){var t={start:NaN,end:NaN},r=0,n=NaN;return e.forEach(function(e){var t=e.getStreamInfo();r+=t.duration,(isNaN(n)||t.start<n)&&(n=t.start)}),t.start=n,t.end=n+r,t}(e);if(c.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var r=m(e);return y(r.now,r.range),r.range}return function(e){var t={start:NaN,end:NaN};if(!e||0===e.length)return t;var r=e[0].getAdapter().getRegularPeriods()[0],n=p(new Date,r),i=r.mpd.timeShiftBufferDepth,o=isNaN(i)?0:n-i;if(t.start=v(e,o),t.end=!isNaN(t.start)&&n<t.start?n:v(e,n,!0),!isNaN(i)&&t.end<n-i&&(t.end=NaN),c.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var a=m(e);if(a.range.end<t.start)return s.trigger(d.Z.CONFORMANCE_VIOLATION,{level:or.LEVELS.WARNING,event:or.EVENTS.INVALID_DVR_WINDOW}),y(a.now,a.range),a.range}return t}(e)},reset:E},t=qe(i).getInstance(),E(),e}_o.__dashjs_factory_name="TimelineConverter";var bo=c.Z.getSingletonFactory(_o),Eo=r(4593),wo=r(6934);function So(e){return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},So(e)}function To(e,t){return To=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},To(e,t)}function Ao(e,t){return!t||"object"!==So(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Io(e){return Io=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Io(e)}var Ro=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&To(e,t)}(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=Io(t);if(r){var i=Io(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Ao(this,e)});function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=n.call(this)).captionData=null,e.label=null,e.defaultTrack=!1,e.kind=null,e.isFragmented=!1,e.isEmbedded=!1,e.isTTML=null,e}return i}(Gi),No=r(2295);function Co(){var e=0;function t(e){for(var t="",r=0;r<e.length;++r)t+=e[r].uchar;return t.length-t.replace(/^\s+/,"").length}function r(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function n(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function i(e,t){var r=e.videoHeight/15;return t?"font-size: "+r+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?n(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?n(t.background):"transparent")+";":"font-size: "+r+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function o(e){return e.replace(/^\s+/g,"")}function a(e){return e.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(n,s,l,u){var c,f,d=null,h=!1,p=-1,g={start:s,end:l,spans:[]},m="style_cea608_white_black",y={},v={},_=[];for(c=0;c<15;++c){var b=u.rows[c],E="",w=null;if(!1===b.isEmpty()){var S=t(b.chars);null===d&&(d={x:S,y1:c,y2:c+1,p:[]}),S!==p&&h&&(d.p.push(g),g={start:s,end:l,spans:[]},d.y2=c,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===y.hasOwnProperty(d.name)?(_.push(d),y[d.name]=d):y[d.name].p.contat(d.p),d={x:S,y1:c,y2:c+1,p:[]});for(var T=0;T<b.chars.length;++T){var A=b.chars[T],I=A.penState;if(null===w||!I.equals(w)){E.trim().length>0&&(g.spans.push({name:m,line:E,row:c}),E="");var R="style_cea608_"+I.foreground+"_"+I.background;I.underline&&(R+="_underline"),I.italics&&(R+="_italics"),v.hasOwnProperty(R)||(v[R]=JSON.parse(JSON.stringify(I))),w=I,m=R}E+=A.uchar}E.trim().length>0&&g.spans.push({name:m,line:E,row:c}),h=!0,p=S}else h=!1,p=-1,d&&(d.p.push(g),g={start:s,end:l,spans:[]},d.y2=c,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===y.hasOwnProperty(d.name)?(_.push(d),y[d.name]=d):y[d.name].p.contat(d.p),d=null)}d&&(d.p.push(g),d.y2=c+1,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===y.hasOwnProperty(d.name)?(_.push(d),y[d.name]=d):y[d.name].p.contat(d.p),d=null);var N=[];for(c=0;c<_.length;++c){var C=_[c],O="sub_cea608_"+e++,P=document.createElement("div");P.id=O;var x=r(C);P.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+x;var D=document.createElement("div");D.className="paragraph bodyStyle",D.style.cssText=i(n);var k=document.createElement("div");k.className="cueUniWrapper",k.style.cssText="unicode-bidi: normal; direction: ltr;";for(var M=0;M<C.p.length;++M){var L=C.p[M],F=0;for(f=0;f<L.spans.length;++f){var U=L.spans[f];if(U.line.length>0){if(0!==f&&F!=U.row){var B=document.createElement("br");B.className="lineBreak",k.appendChild(B)}var j=!1;F===U.row&&(j=!0),F=U.row;var Z=v[U.name],q=document.createElement("span");q.className="spanPadding "+U.name+" customSpanColor",q.style.cssText=i(n,Z),0!==f&&j?f===L.spans.length-1?q.textContent=a(U.line):q.textContent=U.line:L.spans.length>1&&f<L.spans.length-1&&U.row===L.spans[f+1].row?q.textContent=o(U.line):q.textContent=U.line.trim(),k.appendChild(q)}}}D.appendChild(k),P.appendChild(D);var G={bodyStyle:["%",90]};for(var z in v)v.hasOwnProperty(z)&&(G[z]=["%",90]);N.push({type:"html",start:s,end:l,cueHTMLElement:P,cueID:O,cellResolution:[32,15],isFromCEA608:!0,fontSize:G,lineHeight:{},linePadding:{}})}return N}}}Co.__dashjs_factory_name="EmbeddedTextHtmlRender";var Oo=c.Z.getSingletonFactory(Co);function Po(e){var t,r,n,a,s,c,d,h,p,g,m,y,v,_,b,E,S,T=e.errHandler,A=e.manifestModel,I=e.mediaController,N=e.videoModel,O=e.textTracks,P=e.vttParser,x=e.vttCustomRenderingParser,D=e.ttmlParser,k=e.streamInfo,M=e.settings,L=this.context,F=(0,l.Z)(L).getInstance(),U=!1;function B(){c=null,h=NaN,p=[],g=null,d=!1,s=[],a=null}function j(e){var t=new Ro;for(var r in e)t[r]=e[r];t.labels=e.labels,t.defaultTrack=function(e){var t=!1;return y.length>1&&e.isEmbedded?t=e.id&&e.id===o.Z.CC1:1===y.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===y.length&&(t=e.index===s[0].index),t}(e),t.isFragmented=e.isFragmented,t.isEmbedded=!!e.isEmbedded,t.isTTML=function(e){return e.codec&&e.codec.search(o.Z.STPP)>=0||e.mimeType&&e.mimeType.search(o.Z.TTML)>=0}(e),t.kind=function(e,t){var r=e.roles&&e.roles.length>0?t[e.roles[0]]:t.caption;return r===t.caption||r===t.subtitle?r:t.caption}(e,{subtitle:"subtitles",caption:"captions"}),O.addTextTrack(t)}function Z(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&G(t.bytes,t)}function q(e){m=e}function G(e,s){var l=s.mediaInfo,u=l.type,f=l.mimeType,p=l.codec||f;p?-1!==l.codec.indexOf("application/mp4")?function(e,i,s){var l;if("InitializationSegment"===i.segmentType)d=!0,h=n.getMediaTimescaleFromMoov(e);else{if(!d)return;(l=n.getSamplesInfo(e).sampleList).length>0&&(g=l[0].cts-i.start*h),s.search(o.Z.STPP)>=0?function(e,n,i){var s,l;for(a=null!==a?a:V(i),s=0;s<n.length;s++){var u=n[s],f=u.cts,d=H(),p=d+f/h,g=p+u.duration/h;t.buffered.add(p,g);var y=new DataView(e,u.offset,u.subSizes[0]),v=wo.Utils.dataViewToString(y,o.Z.UTF8),_=[],b=u.offset+u.subSizes[0];for(l=1;l<u.subSizes.length;l++){var E=new Uint8Array(e,b,u.subSizes[l]),w=String.fromCharCode.apply(null,E);_.push(w),b+=u.subSizes[l]}try{var S=A.getValue().ttmlTimeIsRelative?f/h:0,T=a.parse(v,S,f/h,(f+u.duration)/h,_);O.addCaptions(m,d,T)}catch(e){c.removeExecutedRequestsBeforeTime(),this.remove(),r.error("TTML parser error: "+e.message)}}}(e,l,s):function(e,n){var i,o,a,s=[];for(i=0;i<n.length;i++){var l=n[i];l.cts-=g;var u=H()+l.cts/h,c=u+l.duration/h;t.buffered.add(u,c);var f=e.slice(l.offset,l.offset+l.size),d=wo.parseBuffer(f);for(o=0;o<d.boxes.length;o++){var p=d.boxes[o];if(r.debug("VTT box1: "+p.type),"vtte"!==p.type&&"vttc"===p.type){r.debug("VTT vttc boxes.length = "+p.boxes.length);var y={styles:{}};for(a=0;a<p.boxes.length;a++){var v=p.boxes[a];if(r.debug("VTT box2: "+v.type),"payl"===v.type)y.start=l.cts/h,y.end=(l.cts+l.duration)/h,y.data=v.cue_text;else if("sttg"===v.type&&v.settings&&""!==v.settings)try{var _=v.settings.split(" ");y.styles=P.getCaptionStyles(_)}catch(e){}}y&&y.data&&(s.push(y),r.debug("VTT  ".concat(y.start," - ").concat(y.end," :  ").concat(y.data)))}}}s.length>0&&O.addCaptions(m,0,s)}(e,l)}}(e,s,p):u===o.Z.VIDEO?function(e,t){var o,a;if(t.segmentType===C.w.INIT_SEGMENT_TYPE)0===v&&(v=n.getMediaTimescaleFromMoov(e));else if(t.segmentType===C.w.MEDIA_SEGMENT_TYPE){if(0===v)return void r.warn("CEA-608: No timescale for embeddedTextTrack yet");var s=(a=n.getSamplesInfo(e)).lastSequenceNumber,l=Math.trunc(t.start),u=Math.trunc(t.end);if(E[0]||E[1]||function(){for(var e,t=0;t<y.length;t++){if(-1===(e=O.getTrackIdxForId(y[t].id)))return void r.warn("CEA-608: data before track is ready.");var n=z(e);E[t]=new(i().Cea608Parser)(t+1,{newCue:n},null)}}(),v){if(function(e,t,r,n,i){return null!==e&&null!==t&&null!==n&&null!==i&&(t===e?n!==i:t!==e+r)}(_,s,a.numSequences,b,l))for(o=0;o<E.length;o++)E[o]&&E[o].reset();for(var c=function(e,t){if(0===t.length)return null;for(var r={splits:[],fields:[[],[]]},n=new DataView(e),o=0;o<t.length;o++)for(var a=t[o],s=i().findCea608Nalus(n,a.offset,a.size),l=null,u=0,c=0;c<s.length;c++)for(var f=i().extractCea608DataFromRange(n,s[c]),d=0;d<2;d++)if(f[d].length>0){a.cts!==l?u=0:u+=1;var h=H();r.fields[d].push([a.cts+h*v,f[d],u]),l=a.cts}return r.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),r}(e,a.sampleList),f=0;f<E.length;f++){var d=c.fields[f],h=E[f];if(h)for(o=0;o<d.length;o++)h.addData(d[o][0]/v,d[o][1])}_=s,b=u}}}(e,s):function(e,r,n){var i,a,s=new DataView(e,0,e.byteLength);a=wo.Utils.dataViewToString(s,o.Z.UTF8);try{i=V(n).parse(a,0),O.addCaptions(O.getCurrentTrackIdx(),0,i),t.buffered&&t.buffered.add(r.start,r.end)}catch(e){T.error(new w.Z(R.TIMED_TEXT_ERROR_ID_PARSE_CODE,R.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,a))}}(e,s,p):r.error("No text type defined")}function z(e){return function(t,r,n){var i;(i=N.getTTMLRenderingDiv()?S.createHTMLCaptionsFromScreen(N.getElement(),t,r,n):[{start:t,end:r,data:n.getDisplayText(),styles:{}}])&&O.addCaptions(e,0,i)}}function H(){return isNaN(t.timestampOffset)?0:t.timestampOffset}function V(e){var t;return e.search(o.Z.VTT)>=0?t=M.get().streaming.text.webvtt.customRenderingEnabled&&x?x:P:(e.search(o.Z.TTML)>=0||e.search(o.Z.STPP)>=0)&&(t=D),t}function W(e){y.forEach(function(t){var r=O.getTrackIdxForId(t.id);r>=0&&O.deleteCuesFromTrackIdx(r,e.from,e.to)})}return t={initialize:function(){U||(y=[],m=null,v=0,E=[],_=null,b=null,U=!0,S=Oo(L).getInstance(),F.on(u.Z.VIDEO_CHUNK_RECEIVED,Z,t),F.on(u.Z.BUFFER_CLEARED,W,t))},addMediaInfos:function(e,r,n){if(s=s.concat(r),e===o.Z.TEXT&&r[0].isFragmented&&!r[0].isEmbedded){c=n,t.buffered=(0,No.Z)(L).create(),p=I.getTracksFor(o.Z.TEXT,k.id).filter(function(e){return e.isFragmented});for(var i=I.getCurrentTrackFor(o.Z.TEXT,k.id),a=0;a<p.length;a++)if(p[a]===i){q(a);break}}for(var l=0;l<r.length;l++)j(r[l])},resetMediaInfos:function(){s=[]},getStreamId:function(){return k.id},append:G,abort:function(){},addEmbeddedTrack:function(e){if(U&&e)if(e.id===o.Z.CC1||e.id===o.Z.CC3){for(var t=0;t<y.length;t++)if(y[t].id===e.id)return;y.push(e)}else r.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){F.off(u.Z.VIDEO_CHUNK_RECEIVED,Z,t),F.off(u.Z.BUFFER_CLEARED,W,t),O&&O.deleteAllTextTracks(),U=!1,y=[],E=[null,null],_=null,b=null},getConfig:function(){return{fragmentModel:c,fragmentedTracks:p,videoModel:N}},setCurrentFragmentedTrackIdx:q,remove:function(e,r){void 0===e&&e===r&&(e=t.buffered.start(0),r=t.buffered.end(t.buffered.length-1)),t.buffered.remove(e,r),O.deleteCuesFromTrackIdx(m,e,r)},reset:function(){B(),s=[],n=null}},r=(0,f.Z)(L).getInstance().getLogger(t),n=(0,Ut.Z)(L).getInstance(),B(),t}Po.__dashjs_factory_name="TextSourceBuffer";var xo=c.Z.getClassFactory(Po),Do=r(4403);function ko(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Mo=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function Lo(e){var t,r,n,i,a,s,c,h,p,g,m,y,v,_,b,E,w,S,T,A,I=this.context,R=(0,l.Z)(I).getInstance(),N=e.videoModel,C=e.streamInfo,O=e.settings;function P(e,t,r,n,i,o){var a=0,s=0;e/t>r/n?a=(s=t)/n*r:s=(a=e)/r*n;var l,u,c=0,f=0;return a/s>i?(f=s,c=s*i):(c=a,f=a/i),l=(e-c)/2,u=(t-f)/2,o?{x:l+.1*c,y:u+.1*f,w:.8*c,h:.8*f}:{x:l,y:u,w:c,h:f}}function x(e,t){var r=N.getClientWidth(),n=N.getClientHeight(),i=N.getVideoWidth(),o=N.getVideoHeight(),a=N.getVideoRelativeOffsetTop(),s=N.getVideoRelativeOffsetLeft();if(0!==i&&0!==o){var l=i/o,u=!1;e.isFromCEA608&&(l=3.5/3,u=!0);var f=P.call(this,r,n,i,o,l,u),y=f.w,v=f.h,E=f.x,S=f.y;if(y!=p||v!=g||E!=c||S!=h||t){if(c=E+s,h=S+a,p=y,g=v,m){var T=m.style;T&&(T.left=c+"px",T.top=h+"px",T.width=p+"px",T.height=g+"px",T.zIndex=_&&document[_]||b?w:null,R.trigger(d.Z.CAPTION_CONTAINER_RESIZE))}var A=e.activeCues;if(A)for(var I=A.length,C=0;C<I;++C){var O=A[C];O.scaleCue(O)}}}}function D(e){var t,r,n,i,o,a=p,s=g;if(e.cellResolution){var l=[a/e.cellResolution[0],s/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t)){r=(e.linePadding[t]*l[0]).toString();for(var u=document.getElementsByClassName("spanPadding"),c=0;c<u.length;c++)u[c].style.cssText=u[c].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r),u[c].style.cssText=u[c].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}if(e.fontSize){for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?n=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(n=e.fontSize[t][1]),r=(n*l[1]).toString(),o="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph");for(var f=0;f<o.length;f++)o[f].style.cssText=o[f].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?i=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(i=e.lineHeight[t][1]),r=(i*l[1]).toString(),o=document.getElementsByClassName(t);for(var d=0;d<o.length;d++)o[d].style.cssText=o[d].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}}}if(e.isd){var h=document.getElementById(e.cueID);h&&m.removeChild(h),M(e)}}function k(e,t){var r=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,n=/^#(.*)$/;if(r.test(t)){var i=r.exec(t),o=parseInt(i[4],10)-1;return"data:image/png;base64,"+btoa(e.images[o])}if(n.test(t)){var a=n.exec(t)[1];return"data:image/png;base64,"+e.embeddedImages[a]}return t}function M(e){if(m){ie.call(this);var t=document.createElement("div");m.appendChild(t),E=(0,Do.renderHTML)(e.isd,t,function(t){return k(e,t)},m.clientHeight,m.clientWidth,O.get().streaming.text.imsc.displayForcedOnlyMode,function(e){r.info("renderCaption :",e)},E,O.get().streaming.text.imsc.enableRollUp),t.id=e.cueID,R.trigger(d.Z.CAPTION_RENDERED,{captionDiv:t,currentTrackIdx:s})}}function L(e,t){return!!t&&t.endTime>=e.startTime}function F(e,t){return!!O.get().streaming.text.extendSegmentedCues&&!!function(e,t,r){for(var n=0;n<r.length;n++){var i=r[n];if(JSON.stringify(e[i])!==JSON.stringify(t[i]))return!1}return!0}(t,e,Mo)&&(t.endTime=Math.max(t.endTime,e.endTime),!0)}function U(e,t){t&&t.forEach(function(t){t.kind&&"image"===t.kind&&(t.src=k(e,t.src)),U(e,t.contents)})}function B(e,t,n){var i=K(e),a=O.get().streaming.text.dispatchForManualRendering;if(i&&Array.isArray(n)&&0!==n.length)for(var s=0;s<n.length;s++){var l=null,u=n[s];i.cellResolution=u.cellResolution,i.isFromCEA608=u.isFromCEA608,isNaN(u.start)||isNaN(u.end)||(a?l=j(u,t):H(u)&&m?l=G(u,t,i):u.data&&(l=z(u,t,i)));try{if(l){if(!$(i,l))if(O.get().streaming.text.webvtt.customRenderingEnabled)i.manualCueList||(i.manualCueList=[]),i.manualCueList.push(l);else{var c=void 0;i.cues&&0!==i.cues.length&&(c=i.cues[i.cues.length-1]),L(l,c)?F(l,c)||(c.isd&&(c.onexit=function(){}),i.mode!==o.Z.TEXT_DISABLED&&i.addCue(l)):i.mode!==o.Z.TEXT_DISABLED&&i.addCue(l)}var f=O.get().streaming.buffer.bufferToKeep;ee(i,0,N.getTime()-f)}else r.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(e){throw te(i),i.addCue(l),e}}}function j(e,t){var r=V(e,t);return r.onenter=function(){H(e)&&A&&A.cueID!==r.cueID&&q(A),delete r.type,A=r,Z(r)},r.onexit=function(){q(r),A=null},r}function Z(e){R.trigger(d.Z.CUE_ENTER,e)}function q(e){R.trigger(d.Z.CUE_EXIT,{cueID:e.cueID})}function G(e,t,n){var i=this,a=V(e,t);return m.style.left=c+"px",m.style.top=h+"px",m.style.width=p+"px",m.style.height=g+"px",a.onenter=function(){var e=this;n.mode===o.Z.TEXT_SHOWING&&(this.isd?(T?requestAnimationFrame(function(){return M(e)}):M(this),r.debug("Cue enter id:"+this.cueID)):(m.appendChild(this.cueHTMLElement),D.call(i,this),R.trigger(d.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:s})))},a.onexit=function(){if(m)for(var e=m.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(r.debug("Cue exit id:"+e[t].id),m.removeChild(e[t]),--t)},a}function z(e,t,n){var i=V(e,t);if(i.isActive=!1,e.styles)try{void 0!==e.styles.align&&"align"in i&&(i.align=e.styles.align),void 0!==e.styles.line&&"line"in i&&(i.line=e.styles.line),void 0!==e.styles.snapToLines&&"snapToLines"in i&&(i.snapToLines=e.styles.snapToLines),void 0!==e.styles.position&&"position"in i&&(i.position=e.styles.position),void 0!==e.styles.size&&"size"in i&&(i.size=e.styles.size)}catch(e){r.error(e)}return i.onenter=function(){n.mode===o.Z.TEXT_SHOWING&&R.trigger(d.Z.CAPTION_RENDERED,{currentTrackIdx:s})},i}function H(e){return"html"===e.type}function V(e,t){return H(e)?function(e,t){var r=new n(e.start+t,e.end+t,"");return r.cueHTMLElement=e.cueHTMLElement,r.isd=e.isd,r.images=e.images,r.embeddedImages=e.embeddedImages,r.cueID=e.cueID,r.scaleCue=D.bind(self),r.cellResolution=e.cellResolution,r.lineHeight=e.lineHeight,r.linePadding=e.linePadding,r.fontSize=e.fontSize,r.isd&&U(r,r.isd.contents),r}(e,t):function(e,t){var r=new n(e.start-t,e.end-t,e.data);return r.cueID="".concat(r.startTime,"_").concat(r.endTime),r}(e,t)}function W(e){if(y)for(var t=y.childNodes,r=0;r<t.length;++r)t[r].id===e.cueID&&(y.removeChild(t[r]),--r)}function Y(){var e,t=[],r=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ko(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ko(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(N.getTextTracks());try{for(r.s();!(e=r.n()).done;){var n=e.value;n.manualMode===o.Z.TEXT_SHOWING&&t.push(n)}}catch(e){r.e(e)}finally{r.f()}return t}function K(e){return e>=0&&i[e]?N.getTextTrack(i[e].kind,i[e].id,i[e].lang,i[e].isTTML,i[e].isEmbedded):null}function Q(e){var t=this;if(e!==s){var r=K(s=e);X.call(this,r),v&&(clearInterval(v),v=null),r&&"html"===r.renderingType&&(x.call(this,r,!0),window.ResizeObserver?(S=new window.ResizeObserver(function(){x.call(t,r,!0)})).observe(N.getElement()):v=setInterval(x.bind(this,r),500))}}function X(e){ie.call(this),e&&"html"===e.renderingType?re.call(this):ne.call(this)}function $(e,t){if(!e.cues)return!1;for(var r=0;r<e.cues.length;r++)if(e.cues[r].startTime===t.startTime&&e.cues[r].endTime===t.endTime)return!0;return!1}function J(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return!!e&&(isNaN(t)||(n?e.startTime:e.endTime)>=t)&&(isNaN(r)||(n?e.endTime:e.startTime)<=r)}function ee(e,t,r){var n,i;if(!(r<t)&&e&&(e.cues||e.manualCueList)){var o=e.cues&&e.cues.length>0?"native":"custom",a="native"===o?e.cues:e.manualCueList;if(!a||0===a.length)return;for(var s=a.length-1;s>=0;s--)!J(a[s],t,r,!0)||(n=a[s],i=N.getTime(),n.startTime>=i&&n.endTime<=i)||("native"===o?e.removeCue(a[s]):(W(a[s]),delete e.manualCueList[s]))}}function te(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e&&(e.cues||e.manualCueList)){var i=e.cues&&e.cues.length>0?"native":"custom",o="native"===i?e.cues:e.manualCueList;if(!o||0===o.length)return;for(var a=o.length-1;a>=0;a--)J(o[a],t,r,n)&&("native"===i?(o[a].onexit&&o[a].onexit(),e.removeCue(o[a])):(W(o[a]),delete e.manualCueList[a]))}}function re(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=N.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){r.info(""+e.message)}}}function ne(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function ie(){if(m)for(;m.firstChild;)m.removeChild(m.firstChild)}return t={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(n=window.VTTCue||window.TextTrackCue,i=[],a=[],s=-1,c=0,h=0,p=0,g=0,m=null,y=null,v=null,b=!1,w=2147483647,E=null,T="requestAnimationFrame"in window,void 0!==document.fullscreenElement?_="fullscreenElement":void 0!==document.webkitIsFullScreen?_="webkitIsFullScreen":document.msFullscreenElement?_="msFullscreenElement":document.mozFullScreen&&(_="mozFullScreen"))},getStreamId:function(){return C.id},addTextTrack:function(e){i.push(e)},addCaptions:B,createTracks:function(){var e=O.get().streaming.text.dispatchForManualRendering;i.sort(function(e,t){return e.index-t.index}),m=N.getTTMLRenderingDiv(),y=N.getVttRenderingDiv();for(var t,r,n,l,c,f,h=-1,p=0;p<i.length;p++){var g=(r=(t=i[p]).kind,n=void 0!==t.id?t.id:t.lang,l=t.lang,c=t.isTTML,f=t.isEmbedded,N.addTextTrack(r,n,l,c,f));a.push(g),i[p].defaultTrack&&(g.default=!0,h=p);var v=K(p);v&&(v.mode=o.Z.TEXT_SHOWING,m&&(i[p].isTTML||i[p].isEmbedded)?v.renderingType="html":v.renderingType="default"),B(p,0,i[p].captionData),R.trigger(d.Z.TEXT_TRACK_ADDED)}if(Q.call(this,h),h>=0){R.on(d.Z.PLAYBACK_METADATA_LOADED,function e(){var t=K(h);t&&"html"===t.renderingType&&x.call(this,t,!0),R.off(d.Z.PLAYBACK_METADATA_LOADED,e,this)},this);for(var _=0;_<i.length;_++){var b=K(_);b&&(b.mode=_!==h||e?o.Z.TEXT_HIDDEN:o.Z.TEXT_SHOWING,b.manualMode=_===h?o.Z.TEXT_SHOWING:o.Z.TEXT_HIDDEN)}}R.trigger(u.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:s,tracks:i,streamId:C.id})},getCurrentTrackIdx:function(){return s},setCurrentTrackIdx:Q,getTrackIdxForId:function(e){for(var t=-1,r=0;r<i.length;r++)if(i[r].id===e){t=r;break}return t},getCurrentTrackInfo:function(){return i[s]},setModeForTrackIdx:function(e,t){var r=K(e);r&&r.mode!==t&&(r.mode=t),r&&r.manualMode!==t&&(r.manualMode=t)},deleteCuesFromTrackIdx:function(e,t,r){var n=K(e);n&&te(n,t,r)},deleteAllTextTracks:function(){for(var e=a?a.length:0,t=0;t<e;t++){var r=K(t);r&&te.call(this,r,C.start,C.start+C.duration,!1)}a=[],i=[],v&&(clearInterval(v),v=null),S&&N&&(S.unobserve(N.getElement()),S=null),s=-1,ie.call(this)},manualCueProcessing:function(e){var t=Y();if(t&&t.length>0){var r=t[0].manualCueList;r&&r.length>0&&r.forEach(function(t){t.startTime<=e&&t.endTime>=e&&!t.isActive?(t.isActive=!0,O.get().streaming.text.dispatchForManualRendering?Z(t):WebVTT.processCues(window,[t],y,t.cueID)):t.isActive&&(t.startTime>e||t.endTime<e)&&(t.isActive=!1,O.get().streaming.text.dispatchForManualRendering?q(t):W(t))})}},disableManualTracks:function(){var e=Y();if(e&&e.length>0){var t=e[0].manualCueList;t&&t.length>0&&t.forEach(function(e){if(e.isActive)if(e.isActive=!1,O.get().streaming.text.dispatchForManualRendering)q(e);else if(y)for(var t=y.childNodes,r=0;r<t.length;++r)t[r].id===e.cueID&&(y.removeChild(t[r]),--r)})}}},r=(0,f.Z)(I).getInstance().getLogger(t),t}Lo.__dashjs_factory_name="TextTracks";var Fo=c.Z.getClassFactory(Lo);function Uo(){var e,t,r,n,i,o,a=this.context;function s(e){var t=e.split(":"),r=t.length-1;return e=60*parseInt(t[r-1],10)+parseFloat(t[r]),2===r&&(e+=3600*parseInt(t[0],10)),e}function l(e){var t=e.split(n),r=t[1].split(o);return r.shift(),t[1]=r[0],r.shift(),{cuePoints:t,styles:u(r)}}function u(e){var t={};return e.forEach(function(e){if(e.split(/:/).length>1){var r=e.split(/:/)[1],n=!1;r&&-1!=r.search(/%/)&&(n=!0,r=parseInt(r.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=r),(e.match(/line/)||e.match(/L/))&&(t.line="auto"===r?r:parseInt(r,10),n&&(t.snapToLines=!1)),(e.match(/position/)||e.match(/P/))&&(t.position=r),(e.match(/size/)||e.match(/S/))&&(t.size=r)}}),t}function c(e,t){for(var r,i=t,o="",a="";""!==e[i]&&i<e.length;)i++;if((r=i-t)>1)for(var s=0;s<r;s++){if((a=e[t+s]).match(n)){o="";break}o+=a,s!==r-1&&(o+="\n")}else(a=e[t]).match(n)||(o=a);return o}return e={parse:function(e){var o,a,u=[];if(!e)return u;o=(e=e.split(r)).length,a=-1;for(var f=0;f<o;f++){var d=e[f];if(d.length>0&&"WEBVTT"!==d&&d.match(n)){var h=l(d),p=h.cuePoints,g=h.styles,m=c(e,f+1),y=s(p[0].replace(i,"")),v=s(p[1].replace(i,""));!isNaN(y)&&!isNaN(v)&&y>=a&&v>y?""!==m?(a=y,u.push({start:y,end:v,data:m,styles:g})):t.error("Skipping cue due to empty/malformed cue text"):t.error("Skipping cue due to incorrect cue timing")}}return u},getCaptionStyles:u},t=(0,f.Z)(a).getInstance().getLogger(e),r=/(?:\r\n|\r|\n)/gm,n=/-->/,i=/(^[\s]+|[\s]+$)/g,o=/\s\b/g,e}Uo.__dashjs_factory_name="VTTParser";var Bo=c.Z.getSingletonFactory(Uo);function jo(){var e,t;return e={parse:function(e){var r=[];return t.oncue=function(e){e.start=e.startTime,e.end=e.endTime,e.data=e.text,e.styles={align:e.align,line:e.line,position:e.position,size:e.size},r.push(e)},t.parse(e),r}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(t=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(e){}}(),e}jo.__dashjs_factory_name="VttCustomRenderingParser";var Zo=c.Z.getSingletonFactory(jo);function qo(){var e,t,r=this.context,n=(0,l.Z)(r).getInstance(),i=0;return e={parse:function(e,r,o,a,s){var l,c,f,h="",p=[],g={},m={},y="",v="",_={onOpenTag:function(e,r,i){if(i[" imagetype"]&&!i[" imageType"]&&(n.trigger(d.Z.CONFORMANCE_VIOLATION,{level:or.LEVELS.ERROR,event:or.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),i[" imageType"]=i[" imagetype"]),"image"===r&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===e)){if(!i[" imageType"]||"PNG"!==i[" imageType"].value)return void t.warn("smpte-tt imageType != PNG. Discarded");y=i["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){y&&(m[y]=v.trim()),v="",y=""},onText:function(e){y&&(v+=e)}};if(!e)throw h="no ttml data to parse",new Error(h);g.data=e,n.trigger(u.Z.TTML_TO_PARSE,g);var b=(0,Do.fromXML)(g.data,function(e){h=e},_);n.trigger(u.Z.TTML_PARSED,{ttmlString:g.data,ttmlDoc:b});var E,w=b.getMediaTimeEvents();for(f=0;f<w.length;f++){var S=(0,Do.generateISD)(b,w[f],function(e){h=e});S.contents.some(function(e){return e.contents.length})&&(l=w[f]+r)<(c=w[f+1]+r)&&p.push({start:l,end:c,type:"html",cueID:(E="cue_TTML_"+i,i++,E),isd:S,images:s,embeddedImages:m})}if(""!==h)throw t.error(h),new Error(h);return p}},t=(0,f.Z)(r).getInstance().getLogger(e),e}qo.__dashjs_factory_name="TTMLParser";var Go=c.Z.getSingletonFactory(qo);function zo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ho(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(r),!0).forEach(function(t){Vo(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zo(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Vo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yo(e){var t,r,n,i=this.context,a=(0,l.Z)(i).getInstance(),s=(0,X.Z)(i).getInstance(),u=e.adapter,c=e.baseURLController;function h(e,t){var r,i,a=!1;if(c.resolve()){var l=u.getVoRepresentations(e);l&&l.length>0&&(r=c.resolve(l[0].path).url)}var f=e.essentialPropertiesAsArray.filter(function(e){return e.schemeIdUri&&e.schemeIdUri===o.Z.FONT_DOWNLOAD_DVB_SCHEME}),d=e.supplementalPropertiesAsArray.filter(function(e){return e.schemeIdUri&&e.schemeIdUri===o.Z.FONT_DOWNLOAD_DVB_SCHEME});f.length>0?(a=!0,i=f):i=d,i.forEach(function(i){if(function(e){return!(!(e.value&&"1"===e.value&&e.dvbUrl&&e.dvbUrl.length>0&&e.dvbFontFamily&&e.dvbFontFamily.length>0&&e.dvbMimeType)||e.dvbMimeType!==o.Z.OFF_MIMETYPE&&e.dvbMimeType!==o.Z.WOFF_MIMETYPE)}(i)){var l=(u=i.dvbUrl,c=r,s.isPathAbsolute(u)?u:s.isRelative(u)?c?s.resolve(u,c):s.resolve(u):u);n.push({fontFamily:i.dvbFontFamily,url:l,mimeType:i.dvbMimeType,trackId:e.id,streamId:t,isEssential:a,status:"unloaded",fontFace:new FontFace(i.dvbFontFamily,"url(".concat(l,")"),{display:"swap"})})}var u,c})}function p(e,t){var r=n[e];n[e]=Ho(Ho({},r),{},{status:t})}function g(){n=[]}return t={addFontsFromTracks:function(e,t){if(e&&Array.isArray(e)&&t)for(var r=0;r<e.length;r++)h(e[r],t)},downloadFonts:function(){for(var e=function(e){var t=n[e];document.fonts.add(t.fontFace),a.trigger(d.Z.DVB_FONT_DOWNLOAD_ADDED,t),t.fontFace.load().then(function(){p(e,"loaded"),a.trigger(d.Z.DVB_FONT_DOWNLOAD_COMPLETE,t)},function(n){p(e,"error"),r.debug("Font download error: ",n),a.trigger(d.Z.DVB_FONT_DOWNLOAD_FAILED,t)})},t=0;t<n.length;t++)e(t)},getFonts:function(){return n},getFontsForTrackId:function(e){return n.filter(function(t){return t.trackId&&t.trackId===e})},reset:function(){!function(){var e,t=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Wo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wo(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(n);try{for(t.s();!(e=t.n()).done;){var i=e.value,o=document.fonts.delete(i.fontFace);r.debug("Removal of fontFamily: ".concat(i.fontFamily," was ").concat(o?"successful":"unsuccessful"))}}catch(e){t.e(e)}finally{t.f()}}(),g()}},r=(0,f.Z)(i).getInstance().getLogger(t),g(),t}Yo.__dashjs_factory_name="DVBFonts";var Ko=c.Z.getClassFactory(Yo);function Qo(e){var t,r,n,i,a,s,c,h,p,g,m,y,v,_,b=this.context,E=e.adapter,w=e.errHandler,S=e.manifestModel,T=e.mediaController,A=e.baseURLController,I=e.videoModel,R=e.settings;function N(e){if(_.error("Could not download ".concat(e.isEssential?"an essential":"a"," font - fontFamily: ").concat(e.fontFamily,", url: ").concat(e.url)),e.isEssential){var t=i[e.streamId].getTrackIdxForId(e.trackId);i[e.streamId].setModeForTrackIdx(t,o.Z.TEXT_DISABLED)}}function C(e){if(_.debug("Successfully downloaded ".concat(e.isEssential?"an essential":"a"," font - fontFamily: ").concat(e.fontFamily,", url: ").concat(e.url)),e.isEssential){var t=i[e.streamId].getTrackIdxForId(e.trackId);t===i[e.streamId].getCurrentTrackIdx()?i[e.streamId].setModeForTrackIdx(t,o.Z.TEXT_SHOWING):i[e.streamId].setModeForTrackIdx(t,o.Z.TEXT_HIDDEN)}}function O(e){var t=e.tracks,n=e.index,a=e.streamId;if(!1===R.get().streaming.text.defaultEnabled&&!D()||y)k(a,-1);else{var s=T.getCurrentTrackFor(o.Z.TEXT,a);if(s){var l={lang:s.lang,role:s.roles[0],index:s.index,codec:s.codec,accessibility:s.accessibility[0]};t.some(function(e,t){if(T.matchSettings(l,e))return k(a,t),n=t,!0})}p=!1}r[a].lastEnabledIndex=n,h.trigger(d.Z.TEXT_TRACKS_ADDED,{enabled:D(),index:n,tracks:t,streamId:a}),m=!0,v.addFontsFromTracks(t,a),v.getFonts().forEach(function(e){if(e.isEssential){var t=i[e.streamId].getTrackIdxForId(e.trackId);i[e.streamId].setModeForTrackIdx(t,o.Z.TEXT_DISABLED)}}),v.downloadFonts()}function P(e){try{var t=e.streamId;if(!i[t]||isNaN(e.time))return;i[t].manualCueProcessing(e.time)}catch(e){}}function x(e){try{var t=e.streamId;if(!i[t])return;i[t].disableManualTracks()}catch(e){}}function D(){var e=!0;return p&&!g&&(e=!1),e}function k(e,t){(p=-1===t)&&T&&T.saveTextSettingsDisabled();var r=M(e);if(r!==t&&i[e]){i[e].disableManualTracks();var a=i[e].getCurrentTrackInfo(),s=a?I.getTextTrack(a.kind,a.id,a.lang,a.isTTML,a.isEmbedded):null;s&&s.mode!==o.Z.TEXT_DISABLED&&i[e].setModeForTrackIdx(r,o.Z.TEXT_HIDDEN),i[e].setCurrentTrackIdx(t),a=i[e].getCurrentTrackInfo();var l=R.get().streaming.text.dispatchForManualRendering;a&&!l&&a.mode!==o.Z.TEXT_DISABLED&&i[e].setModeForTrackIdx(t,o.Z.TEXT_SHOWING),a&&a.isFragmented&&!a.isEmbedded?function(e,t,r){if(n[e])for(var a=n[e].getConfig().fragmentedTracks,s=0;s<a.length;s++){var l=a[s];if(t.lang===l.lang&&(l.id?t.id===l.id:t.index===l.index)){var c=T.getCurrentTrackFor(o.Z.TEXT,e);(l.id?c.id!==l.id:c.index!==l.index)?(i[e].deleteCuesFromTrackIdx(r),n[e].setCurrentFragmentedTrackIdx(s)):-1===r&&h.trigger(u.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:e,mediaType:o.Z.TEXT})}}}(e,a,r):a&&!a.isFragmented&&function(e,t){h.trigger(u.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:t},{streamId:e,mediaType:o.Z.TEXT})}(e,a),T.setTrack(a)}}function M(e){return i[e].getCurrentTrackIdx()}function L(){n={},i={},r={},p=!0,m=!1,y=!1}return t={deactivateStream:function(e){if(e){var t=e.id;n[t]&&n[t].resetMediaInfos(),i[t]&&i[t].deleteAllTextTracks()}},initialize:function(){v=Ko(b).create({adapter:E,baseURLController:A}),h.on(u.Z.TEXT_TRACKS_QUEUE_INITIALIZED,O,t),h.on(u.Z.DVB_FONT_DOWNLOAD_FAILED,N,t),h.on(u.Z.DVB_FONT_DOWNLOAD_COMPLETE,C,t),R.get().streaming.text.webvtt.customRenderingEnabled&&(h.on(u.Z.PLAYBACK_TIME_UPDATED,P,t),h.on(u.Z.PLAYBACK_SEEKING,x,t))},initializeForStream:function(e){var t=e.id,o=Fo(b).create({videoModel:I,settings:R,streamInfo:e});o.initialize(),i[t]=o;var l=xo(b).create({errHandler:w,adapter:E,dvbFonts:v,manifestModel:S,mediaController:T,videoModel:I,textTracks:o,vttParser:a,vttCustomRenderingParser:s,ttmlParser:c,streamInfo:e,settings:R});l.initialize(),n[t]=l,r[t]={},r[t].lastEnabledIndex=-1},createTracks:function(e){var t=e.id;i[t]&&i[t].createTracks()},getTextSourceBuffer:function(e){var t=e.id;if(n&&n[t])return n[t]},getAllTracksAreDisabled:function(){return p},addEmbeddedTrack:function(e,t){var r=e.id;n[r]&&n[r].addEmbeddedTrack(t)},enableText:function(e,t){return(0,Y.PS)(t,"boolean"),D()!==t&&(t&&k(e,r[e].lastEnabledIndex),t||(r[e].lastEnabledIndex=M(e),m?k(e,-1):y=!0)),!0},isTextEnabled:D,setTextTrack:k,getCurrentTrackIdx:M,enableForcedTextStreaming:function(e){return(0,Y.PS)(e,"boolean"),g=e,!0},addMediaInfosToBuffer:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.id;n[o]&&n[o].addMediaInfos(t,r,i)},reset:function(){v.reset(),L(),h.off(u.Z.TEXT_TRACKS_QUEUE_INITIALIZED,O,t),h.off(u.Z.DVB_FONT_DOWNLOAD_FAILED,N,t),h.off(u.Z.DVB_FONT_DOWNLOAD_COMPLETE,C,t),R.get().streaming.text.webvtt.customRenderingEnabled&&(h.off(u.Z.PLAYBACK_TIME_UPDATED,P,t),h.off(u.Z.PLAYBACK_SEEKING,x,t)),Object.keys(n).forEach(function(e){n[e].resetEmbedded(),n[e].reset()})}},g=!1,m=!1,y=!1,a=Bo(b).getInstance(),s=Zo(b).getInstance(),c=Go(b).getInstance(),h=(0,l.Z)(b).getInstance(),_=(0,f.Z)(b).getInstance().getLogger(t),L(),t}Qo.__dashjs_factory_name="TextController";var Xo=c.Z.getClassFactory(Qo);function $o(){var e,t,r,n,h,g,m,y,v,_,b,E,S,T,A,I,O,P,x,D,k,M,L,F,U,B,j,Z,q,G,z,H,V,W,K,$,J,ee,te,re="You must first call initialize() and set a source before calling this method",ne="You must first call initialize() and set a valid source and view before calling this method",ie="You must first call attachView() to set the video element before calling this method",oe="You must first call attachSource() with a valid source before calling this method",ae="MediaPlayer not initialized!",se=this.context,le=(0,l.Z)(se).getInstance(),ue=(0,N.Z)(se).getInstance(),ce=(0,f.Z)(se).getInstance({settings:ue});function fe(){Ae(null),Se(null),n=null,T&&(T.reset(),T=null),A&&(A.reset(),A=null),D&&D.reset(),ue.reset(),O&&(O.reset(),O=null)}function de(){return!!r&&!!$.getElement()}function he(){return(0,xi.e)()}function pe(){if(!m)throw ne;return Z.isPaused()}function ge(){if(!m)throw ne;return Z.getIsDynamic()}function me(e){var t=U&&U.hasVideoTrack()?o.Z.VIDEO:o.Z.AUDIO,r=H.getCurrentDVRInfo(t);if(!r)return 0;var n=Z.getOriginalLiveDelay(),i=r.range.start+e;return i>r.range.end-n&&(i=r.range.end-n),i}function ye(e){if(!m)throw ne;var t=we().currentTime;if(void 0!==e)t=U.getTimeRelativeToStreamId(t,e);else if(Z.getIsDynamic()){var r=U&&U.hasVideoTrack()?o.Z.VIDEO:o.Z.AUDIO,n=H.getCurrentDVRInfo(r);t=null===n||0===t?0:Math.max(0,t-n.range.start)}return t}function ve(){if(!m)throw ne;var e=we().duration;if(Z.getIsDynamic()){var t=U&&U.hasVideoTrack()?o.Z.VIDEO:o.Z.AUDIO,r=H.getCurrentDVRInfo(t);e=r?r.range.end-r.range.start:0}return e}function _e(e){(0,Y.PS)(e,"boolean"),y=e}function be(){D.restoreDefaultUTCTimingSources()}function Ee(){return H}function we(){if(!$.getElement())throw ie;return $.getElement()}function Se(e){if(!h)throw ae;$.setElement(e),e&&(Oe(),function(){if(!A){var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(se).create();A=t.createMetricsReporting({debug:ce,eventBus:le,mediaElement:we(),adapter:P,dashMetrics:H,mediaPlayerModel:x,events:u.Z,constants:o.Z,metricsConstants:s.Z})}}}(),function(){if(!I){var e=dashjs.MssHandler;"function"==typeof e&&(R.extend(e.errors),I=e(se).create({eventBus:le,mediaPlayerModel:x,dashMetrics:H,manifestModel:V,playbackController:Z,streamController:U,protectionController:T,baseURLController:M,errHandler:k,events:u.Z,constants:o.Z,debug:ce,initSegmentType:C.w.INIT_SEGMENT_TYPE,BASE64:Eo,ISOBoxer:wo,settings:ue}))}}(),U&&U.switchToVideoElement(v)),m&&Re(),De(v)}function Te(e){if(!g)throw re;var t=U.getActiveStreamInfo();return t?S.getTracksFor(e,t.id):[]}function Ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(!h)throw ae;"string"==typeof e&&J.initialize(e),null==t&&(t=NaN),isNaN(t)||(t=Math.max(0,t)),v=t,r=e,(g||m)&&Re(),de()&&De(v)}function Ie(){if(!g)throw re;var e=U.getActiveStreamInfo();return e?U.getStreamById(e.id):null}function Re(){m=!1,g=!1,P.reset(),U.reset(),j.reset(),z.reset(),Z.reset(),q.reset(),G.reset(),_.reset(),S.reset(),te.reset(),T&&(ue.get().streaming.protection.keepProtectionMediaKeys?T.stop():(T.reset(),T=null,Oe())),B.reset(),W.reset(),K.reset()}function Ne(){var e=Ce();U||(U=lr(se).getInstance()),B||(B=Xo(se).create({errHandler:k,manifestModel:V,adapter:P,mediaController:S,baseURLController:M,videoModel:$,settings:ue})),F.setConfig({capabilities:L,customParametersModel:D,adapter:P,settings:ue,manifestModel:V,errHandler:k}),U.setConfig({capabilities:L,capabilitiesFilter:F,manifestLoader:e,manifestModel:V,mediaPlayerModel:x,customParametersModel:D,protectionController:T,textController:B,adapter:P,dashMetrics:H,errHandler:k,timelineConverter:E,videoModel:$,playbackController:Z,serviceDescriptionController:q,contentSteeringController:G,abrController:_,mediaController:S,settings:ue,baseURLController:M,uriFragmentModel:J,segmentBaseController:te}),j.setConfig({settings:ue,playbackController:Z,streamController:U,videoModel:$,timelineConverter:E,adapter:P}),Z.setConfig({streamController:U,serviceDescriptionController:q,dashMetrics:H,adapter:P,videoModel:$,timelineConverter:E,settings:ue}),z.setConfig({streamController:U,playbackController:Z,mediaPlayerModel:x,videoModel:$,settings:ue}),_.setConfig({streamController:U,domStorage:ee,mediaPlayerModel:x,customParametersModel:D,cmsdModel:K,dashMetrics:H,adapter:P,videoModel:$,settings:ue}),W.setConfig({abrController:_,dashMetrics:H,playbackController:Z}),K.setConfig({}),_.initialize(),U.initialize(y,n),B.initialize(),j.initialize(),z.initialize(),W.initialize(),K.initialize(),G.initialize(),te.initialize()}function Ce(){return Yn(se).create({debug:ce,errHandler:k,dashMetrics:H,mediaPlayerModel:x,requestModifier:(0,Q.Z)(se).getInstance(),mssHandler:I,settings:ue})}function Oe(){if(T)return T;var e=dashjs.Protection;if("function"==typeof e){var t=e(se).create();return u.Z.extend(e.events),d.Z.extend(e.events,{publicOnly:!0}),R.extend(e.errors),L||(L=(0,Xn.Z)(se).getInstance()),T=t.createProtectionSystem({debug:ce,errHandler:k,videoModel:$,customParametersModel:D,capabilities:L,eventBus:le,events:u.Z,BASE64:Eo,constants:o.Z,cmcdModel:W,settings:ue})}return null}function Pe(){if(!h)throw ae;if(O)return O;var e=dashjs.OfflineController;if("function"==typeof e){u.Z.extend(e.events),d.Z.extend(e.events,{publicOnly:!0}),R.extend(e.errors);var t=Ce(),r=Xt(se).create();return r.setConfig({manifestModel:V,adapter:P,manifestLoader:t,errHandler:k,contentSteeringController:G}),O=e(se).create({debug:ce,manifestUpdater:r,baseURLController:M,manifestLoader:t,manifestModel:V,mediaPlayerModel:x,abrController:_,playbackController:Z,adapter:P,errHandler:k,dashMetrics:H,timelineConverter:E,segmentBaseController:te,schemeLoaderFactory:b,eventBus:le,events:u.Z,errors:R,constants:o.Z,settings:ue,dashConstants:a.Z,urlUtils:(0,X.Z)(se).getInstance()})}return null}function xe(e){var t=U&&U.hasVideoTrack()?o.Z.VIDEO:o.Z.AUDIO,r=H.getCurrentDVRInfo(t);return r?e+(r.manifestInfo.availableFrom.getTime()/1e3+r.range.start):0}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN;O&&O.resetRecords(),!g&&r&&(g=!0,t.info("Streaming Initialized"),Ne(),"string"==typeof r?U.load(r,e):U.loadWithManifest(r,e)),!m&&de()&&(m=!0,t.info("Playback Initialized"))}return e={initialize:function(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;L||(L=(0,Xn.Z)(se).getInstance()).setConfig({settings:ue}),k||(k=Qn(se).getInstance()),L.supportsMediaSource()?(h||(h=!0,E=bo(se).getInstance(),_||(_=bi(se).getInstance()).setConfig({settings:ue}),b||(b=bt(se).getInstance()),Z||(Z=p(se).getInstance()),S||(S=Sr(se).getInstance()),U||(U=lr(se).getInstance()),j||(j=cr(se).getInstance()),z||(z=dr(se).getInstance()),q||(q=yr(se).getInstance()),G||(G=Wt(se).getInstance()),F||(F=Jn(se).getInstance()),P=Ji(se).getInstance(),V=ii(se).getInstance(),W=We(se).getInstance(),K=dt(se).getInstance(),H=vo(se).getInstance({settings:ue}),ee=Pi(se).getInstance({settings:ue}),P.setConfig({constants:o.Z,cea608parser:i(),errHandler:k,BASE64:Eo}),M||(M=Fr(se).create()),M.setConfig({adapter:P,contentSteeringController:G}),q.setConfig({adapter:P}),te||(te=Zi(se).getInstance({dashMetrics:H,mediaPlayerModel:x,errHandler:k,baseURLController:M,events:u.Z,eventBus:le,debug:ce,boxParser:(0,Ut.Z)(se).getInstance(),requestModifier:(0,Q.Z)(se).getInstance(),errors:R})),S.setConfig({domStorage:ee,settings:ue,customParametersModel:D}),x.setConfig({playbackController:Z,serviceDescriptionController:q}),G.setConfig({adapter:P,errHandler:k,dashMetrics:H,mediaPlayerModel:x,manifestModel:V,serviceDescriptionController:q,eventBus:le,requestModifier:(0,Q.Z)(se).getInstance()}),be(),_e(void 0===n||n),Pe()),e&&Se(e),r&&Ae(r,a),t.info("[dash.js "+he()+"] MediaPlayer has been initialized")):k.error(new w.Z(R.CAPABILITY_MEDIASOURCE_ERROR_CODE,R.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(e){e&&(e.capabilities&&(L=e.capabilities),e.capabilitiesFilter&&(F=e.capabilitiesFilter),e.streamController&&(U=e.streamController),e.textController&&(B=e.textController),e.gapController&&(j=e.gapController),e.playbackController&&(Z=e.playbackController),e.serviceDescriptionController&&(q=e.serviceDescriptionController),e.contentSteeringController&&(G=e.contentSteeringController),e.catchupController&&(z=e.catchupController),e.mediaPlayerModel&&(x=e.mediaPlayerModel),e.customParametersModel&&(D=e.customParametersModel),e.abrController&&(_=e.abrController),e.schemeLoaderFactory&&(b=e.schemeLoaderFactory),e.mediaController&&(S=e.mediaController),e.settings&&(ue=e.settings))},on:function(e,t,r,n){le.on(e,t,r,n)},off:function(e,t,r){le.off(e,t,r)},extend:function(e,t,r){c.Z.extend(e,t,r,se)},attachView:Se,attachSource:Ae,refreshManifest:function(e){if(!h)throw ae;if(!de())return e(null,oe);var t=this;"function"==typeof e&&le.on(u.Z.INTERNAL_MANIFEST_LOADED,function r(n){le.off(u.Z.INTERNAL_MANIFEST_LOADED,r,t),n.error?e(null,n.error):e(n.manifest)},t),U.refreshManifest()},isReady:de,preload:function(){if(!$.getElement()&&!g){if(!r)throw oe;De(v)}},play:function(){if(!m)throw ne;(!y||pe()&&m)&&Z.play(!0)},isPaused:pe,pause:function(){if(!m)throw ne;Z.pause()},isSeeking:function(){if(!m)throw ne;return Z.isSeeking()},isDynamic:ge,getLowLatencyModeEnabled:function(){if(!m)throw ne;return Z.getLowLatencyModeEnabled()},seek:function(e){if(!m)throw ne;if((0,Y.PS)(e,"number"),isNaN(e))throw o.Z.BAD_ARGUMENT_ERROR;e<0&&(e=0);var t=Z.getIsDynamic()?me(e):e,r=we();!Z.getIsDynamic()&&r.duration&&(t=Math.min(r.duration,t)),Z.seek(t,!1,!1,!0)},seekToOriginalLive:function(){m&&ge()&&Z.seekToOriginalLive()},setPlaybackRate:function(e){we().playbackRate=e},getPlaybackRate:function(){return we().playbackRate},setMute:function(e){(0,Y.PS)(e,"boolean"),we().muted=e},isMuted:function(){return we().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw o.Z.BAD_ARGUMENT_ERROR;we().volume=e},getVolume:function(){return we().volume},time:ye,duration:ve,timeAsUTC:function(){if(!m)throw ne;return ye()<0?NaN:xe(ye())},durationAsUTC:function(){if(!m)throw ne;return xe(ve())},getActiveStream:Ie,getDVRWindowSize:function(){var e=U&&U.hasVideoTrack()?o.Z.VIDEO:o.Z.AUDIO,t=H.getCurrentDVRInfo(e);return t?t.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:me,getAvailableBaseUrls:function(){var e=V.getValue();return e?M.getBaseUrls(e):[]},getAvailableLocations:function(){var e=V.getValue();if(!e)return[];var t=P.getLocation(e),r=G.getSynthesizedLocationElements(t);return t.concat(r)},getTargetLiveDelay:function(){if(!m)throw ne;return Z.getOriginalLiveDelay()},convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(r<10?"0"+r.toString():r.toString())+":"+(n<10?"0"+n.toString():n.toString())},formatUTC:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new Date(1e3*e),o=i.toLocaleDateString(t),a=i.toLocaleTimeString(t,{hour12:r});return n?a+" "+o:a},getVersion:he,getDebug:function(){return ce},getBufferLength:function(e){var r=[o.Z.VIDEO,o.Z.AUDIO,o.Z.TEXT];if(e)return-1!==r.indexOf(e)?Ee().getCurrentBufferLevel(e)||NaN:(t.warn("getBufferLength requested for invalid type"),NaN);var n=r.map(function(e){return Te(e).length>0?Ee().getCurrentBufferLevel(e):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)});return n===Number.MAX_VALUE?NaN:n},getTTMLRenderingDiv:function(){return $?$.getTTMLRenderingDiv():null},getVideoElement:we,getSource:function(){if(!r)throw oe;return r},updateSource:function(e){r=e,U.load(r)},getCurrentLiveLatency:function(){if(!h)throw ae;return m?Z.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(e){if(!g)throw re;return _.getTopBitrateInfoFor(e)},setAutoPlay:_e,getAutoPlay:function(){return y},getDashMetrics:Ee,getQualityFor:function(e){if(!g)throw re;if(e===o.Z.IMAGE){var t=Ie();if(!t)return-1;var r=t.getThumbnailController();return r?r.getCurrentTrackIndex():-1}return _.getQualityFor(e)},setQualityFor:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!g)throw re;if(e===o.Z.IMAGE){var n=Ie();if(!n)return;var i=n.getThumbnailController();i&&i.setTrackByIndex(t)}_.setPlaybackQuality(e,U.getActiveStreamInfo(),t,{forceReplace:r})},updatePortalSize:function(){_.setElementSize(),_.setWindowResizeEventCalled(!0)},enableText:function(e){var t=U.getActiveStreamInfo();return!(!t||!B)&&B.enableText(t.id,e)},enableForcedTextStreaming:function(e){return!(!U.getActiveStreamInfo()||!B)&&B.enableForcedTextStreaming(e)},isTextEnabled:function(){var e=U.getActiveStreamInfo();return!(!e||!B)&&B.isTextEnabled(e)},setTextTrack:function(e){if(!m)throw ne;var t=U.getActiveStreamInfo();t&&B&&B.setTextTrack(t.id,e)},getBitrateInfoListFor:function(e){if(!g)throw re;var t=Ie();return t?t.getBitrateListFor(e):[]},getStreamsFromManifest:function(e){if(!g)throw re;return P.getStreamsInfo(e)},getTracksFor:Te,getTracksForTypeFromManifest:function(e,t,r){if(!g)throw re;return(r=r||P.getStreamsInfo(t,1)[0])?P.getAllMediaInfoForType(r,e,t):[]},getCurrentTrackFor:function(e){if(!g)throw re;var t=U.getActiveStreamInfo();return S.getCurrentTrackFor(e,t.id)},setInitialMediaSettingsFor:function(e,t){if(!h)throw ae;S.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(!h)throw ae;return S.getInitialSettings(e)},setCurrentTrack:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!g)throw re;S.setTrack(e,t)},addABRCustomRule:function(e,t,r){D.addAbrCustomRule(e,t,r)},removeABRCustomRule:function(e){D.removeAbrCustomRule(e)},removeAllABRCustomRule:function(){D.removeAllAbrCustomRule()},getABRCustomRules:function(){return D.getAbrCustomRules()},getAverageThroughput:function(e){var t=_.getThroughputHistory(),r=Z.getIsDynamic();return t?t.getAverageThroughput(e,r):0},retrieveManifest:function(e,t){var r=Ce(),n=this;le.on(u.Z.INTERNAL_MANIFEST_LOADED,function e(i){i.error?t(null,i.error):t(i.manifest),le.off(u.Z.INTERNAL_MANIFEST_LOADED,e,n),r.reset()},n),J.initialize(e),r.load(e)},addUTCTimingSource:function(e,t){D.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){D.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){D.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:be,setXHRWithCredentialsForType:function(e,t){D.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return D.getXHRWithCredentialsForType(e)},getProtectionController:function(){return Oe()},attachProtectionController:function(e){T=e},setProtectionData:function(e){n=e,U&&U.setProtectionData(n)},registerLicenseRequestFilter:function(e){D.registerLicenseRequestFilter(e)},registerLicenseResponseFilter:function(e){D.registerLicenseResponseFilter(e)},unregisterLicenseRequestFilter:function(e){D.unregisterLicenseRequestFilter(e)},unregisterLicenseResponseFilter:function(e){D.unregisterLicenseResponseFilter(e)},registerCustomCapabilitiesFilter:function(e){D.registerCustomCapabilitiesFilter(e)},unregisterCustomCapabilitiesFilter:function(e){D.unregisterCustomCapabilitiesFilter(e)},setCustomInitialTrackSelectionFunction:function(e){D.setCustomInitialTrackSelectionFunction(e)},resetCustomInitialTrackSelectionFunction:function(){D.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(e){if(!$.getElement())throw ie;$.setTTMLRenderingDiv(e)},attachVttRenderingDiv:function(e){if(!$.getElement())throw ie;$.setVttRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=U.getActiveStreamInfo();if(e&&B)return B.getCurrentTrackIdx(e.id)},provideThumbnail:function(e,t){if("function"==typeof t)if(e<0)t(null);else{var r=Z.getIsDynamic()?me(e):e,n=U.getStreamForTime(r);if(null!==n){var i=n.getThumbnailController();if(i)return i.provide(r,t);t(null)}else t(null)}},getDashAdapter:function(){return P},getOfflineController:function(){return Pe()},triggerSteeringRequest:function(){if(G)return G.loadSteeringData()},getCurrentSteeringResponseData:function(){if(G)return G.getCurrentSteeringResponseData()},getSettings:function(){return ue.get()},updateSettings:function(e){ue.update(e)},resetSettings:function(){ue.reset()},reset:fe,destroy:function(){fe(),c.Z.deleteSingletonInstances(se)}},t=ce.getLogger(e),h=!1,m=!1,g=!1,y=!0,v=NaN,T=null,O=null,n=null,P=null,te=null,u.Z.extend(d.Z),x=si(se).getInstance(),D=(0,gt.Z)(se).getInstance(),$=Si(se).getInstance(),J=ri(se).getInstance(),e}$o.__dashjs_factory_name="MediaPlayer";var Jo=c.Z.getClassFactory($o);Jo.events=d.Z,Jo.errors=R,c.Z.updateClassFactory($o.__dashjs_factory_name,Jo);var ea=Jo},8825:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var s=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(s,e);var t,r,n=(t=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=a(t);if(r){var i=a(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return o(this,e)});function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=n.call(this)).AST_IN_FUTURE="astInFuture",e.BASE_URLS_UPDATED="baseUrlsUpdated",e.BUFFER_EMPTY="bufferStalled",e.BUFFER_LOADED="bufferLoaded",e.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",e.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",e.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",e.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",e.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",e.DYNAMIC_TO_STATIC="dynamicToStatic",e.ERROR="error",e.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",e.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",e.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",e.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",e.LOG="log",e.MANIFEST_LOADING_STARTED="manifestLoadingStarted",e.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",e.MANIFEST_LOADED="manifestLoaded",e.METRICS_CHANGED="metricsChanged",e.METRIC_CHANGED="metricChanged",e.METRIC_ADDED="metricAdded",e.METRIC_UPDATED="metricUpdated",e.PERIOD_SWITCH_STARTED="periodSwitchStarted",e.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",e.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",e.QUALITY_CHANGE_RENDERED="qualityChangeRendered",e.TRACK_CHANGE_RENDERED="trackChangeRendered",e.STREAM_INITIALIZING="streamInitializing",e.STREAM_UPDATED="streamUpdated",e.STREAM_ACTIVATED="streamActivated",e.STREAM_DEACTIVATED="streamDeactivated",e.STREAM_INITIALIZED="streamInitialized",e.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",e.TEXT_TRACKS_ADDED="allTextTracksAdded",e.TEXT_TRACK_ADDED="textTrackAdded",e.CUE_ENTER="cueEnter",e.CUE_EXIT="cueExit",e.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",e.TTML_PARSED="ttmlParsed",e.TTML_TO_PARSE="ttmlToParse",e.CAPTION_RENDERED="captionRendered",e.CAPTION_CONTAINER_RESIZE="captionContainerResize",e.CAN_PLAY="canPlay",e.CAN_PLAY_THROUGH="canPlayThrough",e.PLAYBACK_ENDED="playbackEnded",e.PLAYBACK_ERROR="playbackError",e.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",e.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",e.PLAYBACK_LOADED_DATA="playbackLoadedData",e.PLAYBACK_PAUSED="playbackPaused",e.PLAYBACK_PLAYING="playbackPlaying",e.PLAYBACK_PROGRESS="playbackProgress",e.PLAYBACK_RATE_CHANGED="playbackRateChanged",e.PLAYBACK_SEEKED="playbackSeeked",e.PLAYBACK_SEEKING="playbackSeeking",e.PLAYBACK_STALLED="playbackStalled",e.PLAYBACK_STARTED="playbackStarted",e.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",e.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",e.PLAYBACK_WAITING="playbackWaiting",e.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",e.EVENT_MODE_ON_START="eventModeOnStart",e.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",e.CONFORMANCE_VIOLATION="conformanceViolation",e.REPRESENTATION_SWITCH="representationSwitch",e.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",e.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",e.INBAND_PRFT="inbandPrft",e.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",e.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",e}return s}(r(8342).Z));t.Z=s},3393:function(e,t){"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t;return(t=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&r(e.prototype,t),e}());t.Z=n},3860:function(e,t){"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t;return(t=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&r(e.prototype,t),e}());t.Z=n},8080:function(e,t,r){"use strict";r.d(t,{default:function(){return V}});var n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};n.SSL_CONNECTION_FAILED_PREFIX="SSL",n.DNS_RESOLUTION_FAILED="C00",n.HOST_UNREACHABLE="C01",n.CONNECTION_REFUSED="C02",n.CONNECTION_ERROR="C03",n.CORRUPT_MEDIA_ISOBMFF="M00",n.CORRUPT_MEDIA_OTHER="M01",n.BASE_URL_CHANGED="F00",n.BECAME_REPORTER="S00";var i=n,o=r(1180);function a(e){var t,r,n=(e=e||{}).eventBus,a=e.dashMetrics,s=e.metricsConstants,l=e.events;function u(e){var t=new i;if(r){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=r.originalUrl||r.url),t.terror||(t.terror=new Date),a.addDVBErrors(t)}}function c(e){e.error||(r=e.manifest)}function f(e){u({errorcode:i.BASE_URL_CHANGED,servicelocation:e.entry})}function d(){u({errorcode:i.BECAME_REPORTER})}function h(e){var t;e.metric===s.HTTP_REQUEST&&(0===(t=e.value).responsecode||null==t.responsecode||t.responsecode>=400||t.responsecode<100||t.responsecode>=600)&&u({errorcode:t.responsecode||i.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation})}function p(e){var t;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=i.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=i.CORRUPT_MEDIA_OTHER;break;default:return}u({errorcode:t})}return t={initialize:function(){n.on(l.MANIFEST_UPDATED,c,t),n.on(l.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,f,t),n.on(l.METRIC_ADDED,h,t),n.on(l.METRIC_UPDATED,h,t),n.on(l.PLAYBACK_ERROR,p,t),n.on(o.Z.BECAME_REPORTING_PLAYER,d,t)},reset:function(){n.off(l.MANIFEST_UPDATED,c,t),n.off(l.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,f,t),n.off(l.METRIC_ADDED,h,t),n.off(l.METRIC_UPDATED,h,t),n.off(l.PLAYBACK_ERROR,p,t),n.off(o.Z.BECAME_REPORTING_PLAYER,d,t)}}}a.__dashjs_factory_name="DVBErrorsTranslator";var s=dashjs.FactoryMaker.getSingletonFactory(a),l=r(2295);function u(e){e=e||{};var t,r,n=!1,i=this.context,o=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;r.add(t,n)}),n=!!e[0]._useWallClockTime)},reset:function(){r.clear()},isEnabled:function(){var e,t=r.length;if(!t)return!0;e=n?(new Date).getTime()/1e3:o.currentTime;for(var i=0;i<t;i+=1){var a=r.start(i),s=r.end(i);if(a<=e&&e<s)return!0}return!1}},r=(0,l.Z)(i).create(),t}u.__dashjs_factory_name="RangeController";var c=dashjs.FactoryMaker.getClassFactory(u);function f(){return{serialise:function e(t){var r,n,i=[],o=[];for(r in t)if(t.hasOwnProperty(r)&&0!==r.indexOf("_")){if(null==(n=t[r])&&(n=""),Array.isArray(n)){if(!n.length)continue;o=[],n.forEach(function(t){var r="Object"!==Object.prototype.toString.call(t).slice(8,-1);o.push(r?t:e(t))}),n=o.map(encodeURIComponent).join(",")}else"string"==typeof n?n=encodeURIComponent(n):n instanceof Date?n=n.toISOString():"number"==typeof n&&(n=Math.round(n));i.push(r+"="+n)}return i.join("&")}}}f.__dashjs_factory_name="MetricSerialiser";var d=dashjs.FactoryMaker.getSingletonFactory(f);function h(){var e,t,r,n=window.crypto||window.msCrypto,i=Uint32Array,o=Math.pow(2,8*i.BYTES_PER_ELEMENT)-1;function a(){n&&(e||(e=new i(10)),n.getRandomValues(e),t=0)}return r={random:function(r,i){var s;return r||(r=0),i||(i=1),n?(t===e.length&&a(),s=e[t]/o,t+=1):s=Math.random(),s*(i-r)+r}},a(),r}h.__dashjs_factory_name="RNG";var p=dashjs.FactoryMaker.getSingletonFactory(h),g=r(5717);function m(e){var t;e=e||{};var r,n,i,o,a,s,l,u=this.context,c=[],f=e.metricsConstants;function h(){o=!1,a=!1,s=null,l=null}return t={report:function(e,t){Array.isArray(t)||(t=[t]),a&&l.isEnabled()&&t.forEach(function(t){var i=r.serialise(t);e!==f.DVB_ERRORS&&(i="metricname=".concat(e,"&").concat(i)),function(e,t,r){var i=new XMLHttpRequest;i.withCredentials=n.getXHRWithCredentialsForType(f.HTTP_REQUEST_DVB_REPORTING_TYPE);var o=function(){var e=c.indexOf(i);-1!==e&&(c.splice(e,1),!(i.status>=200&&i.status<300)&&r&&r())};c.push(i);try{i.open("GET",e),i.onloadend=o,i.onerror=o,i.send()}catch(e){i.onerror()}}(i="".concat(s,"?").concat(i),0,function(){a=!1})})},initialize:function(e,t){var r;if(l=t,!(s=e.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");o||((r=e.dvbProbability)&&(1e3===r||r/1e3>=i.random())&&(a=!0),o=!0)},reset:function(){h()}},r=d(u).getInstance(),i=p(u).getInstance(),n=(0,g.Z)(u).getInstance(),h(),t}m.__dashjs_factory_name="DVBReporting";var y=dashjs.FactoryMaker.getClassFactory(m);function v(e){e=e||{};var t,r={"urn:dvb:dash:reporting:2014":y},n=this.context,i=e.debug?e.debug.getLogger(t):{},o=e.metricsConstants,a=e.mediaPlayerModel||{};return{create:function(e,t){var s;try{(s=r[e.schemeIdUri](n).create({metricsConstants:o,mediaPlayerModel:a})).initialize(e,t)}catch(t){s=null,i.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(e.schemeIdUri," (").concat(t.message,")"))}return s},register:function(e,t){r[e]=t},unregister:function(e){delete r[e]}}}v.__dashjs_factory_name="ReportingFactory";var _=dashjs.FactoryMaker.getSingletonFactory(v);function b(e){var t=[],r=_(this.context).getInstance(e);return{initialize:function(e,n){e.some(function(e){var i=r.create(e,n);if(i)return t.push(i),!0})},reset:function(){t.forEach(function(e){return e.reset()}),t=[]},report:function(e,r){t.forEach(function(t){return t.report(e,r)})}}}b.__dashjs_factory_name="ReportingController";var E=dashjs.FactoryMaker.getClassFactory(b);function w(){return{reconstructFullMetricName:function(e,t,r){var n=e;return t&&(n+="("+t,r&&r.length&&(n+=","+r),n+=")"),n},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}w.__dashjs_factory_name="HandlerHelpers";var S=dashjs.FactoryMaker.getSingletonFactory(w);function T(e){var t,r,n,i,o;e=e||{};var a=this.context,s=S(a).getInstance(),l=[],u=e.metricsConstants;function c(){var e=function(){try{return Object.keys(l).map(function(e){return l[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}();e&&o!==e.t&&(o=e.t,t.report(n,e))}return{initialize:function(e,o,a){o&&(r=s.validateN(a),t=o,n=s.reconstructFullMetricName(e,a),i=setInterval(c,r))},reset:function(){clearInterval(i),i=null,r=0,t=null,o=null},handleNewMetric:function(e,t,r){e===u.BUFFER_LEVEL&&(l[r]=t)}}}T.__dashjs_factory_name="BufferLevelHandler";var A=dashjs.FactoryMaker.getClassFactory(T),I=dashjs.FactoryMaker.getClassFactory(function(e){var t,r=(e=e||{}).eventBus,n=e.metricsConstants;function i(){r.off(o.Z.METRICS_INITIALISATION_COMPLETE,i,this),r.trigger(o.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(e,n){n&&(t=n,r.on(o.Z.METRICS_INITIALISATION_COMPLETE,i,this))},reset:function(){t=null},handleNewMetric:function(e,r){e===n.DVB_ERRORS&&t&&t.report(e,r)}}});function R(e){var t,r,n,i,o;e=e||{};var a=[],s=S(this.context).getInstance(),l=e.metricsConstants;function u(){var e=a;e.length&&t&&t.report(i,e),a=[]}return{initialize:function(e,a,l,c){a&&(r=s.validateN(l),t=a,c&&c.length&&(n=c),i=s.reconstructFullMetricName(e,l,c),o=setInterval(u,r))},reset:function(){clearInterval(o),o=null,r=null,n=null,a=[],t=null},handleNewMetric:function(e,t){e===l.HTTP_REQUEST&&(n&&n!==t.type||a.push(t))}}}R.__dashjs_factory_name="HttpListHandler";var N=dashjs.FactoryMaker.getClassFactory(R);function C(){var e,t;return{initialize:function(r,n){e=r,t=n},reset:function(){t=null,e=void 0},handleNewMetric:function(r,n){r===e&&t&&t.report(e,n)}}}C.__dashjs_factory_name="GenericMetricHandler";var O=dashjs.FactoryMaker.getClassFactory(C);function P(e){var t,r=(e=e||{}).debug?e.debug.getLogger(t):{},n=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,i=this.context,o={BufferLevel:A,DVBErrors:I,HttpList:N,PlayList:O,RepSwitchList:O,TcpList:O};return{create:function(t,a){var s,l=t.match(n);if(l){try{(s=o[l[1]](i).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants})).initialize(l[1],a,l[3],l[5])}catch(e){s=null,r.error("MetricsHandlerFactory: Could not create handler for type ".concat(l[1]," with args ").concat(l[3],", ").concat(l[5]," (").concat(e.message,")"))}return s}},register:function(e,t){o[e]=t},unregister:function(e){delete o[e]}}}P.__dashjs_factory_name="MetricsHandlerFactory";var x=dashjs.FactoryMaker.getSingletonFactory(P);function D(e){e=e||{};var t,r=[],n=this.context,i=e.eventBus,o=e.events,a=x(n).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function s(e){r.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}return t={initialize:function(e,n){e.split(",").forEach(function(e,t,i){var o;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var s=i[t+1];s&&-1===s.indexOf("(")&&-1!==s.indexOf(")")&&(e+=","+s,delete i[t+1])}(o=a.create(e,n))&&r.push(o)}),i.on(o.METRIC_ADDED,s,t),i.on(o.METRIC_UPDATED,s,t)},reset:function(){i.off(o.METRIC_ADDED,s,t),i.off(o.METRIC_UPDATED,s,t),r.forEach(function(e){return e.reset()}),r=[]}}}D.__dashjs_factory_name="MetricsHandlersController";var k=dashjs.FactoryMaker.getClassFactory(D);function M(e){var t,r,n;e=e||{};var i=this.context;function o(){t&&t.reset(),r&&r.reset(),n&&n.reset()}return{initialize:function(a){try{(n=c(i).create({mediaElement:e.mediaElement})).initialize(a.Range),(r=E(i).create({debug:e.debug,metricsConstants:e.metricsConstants,mediaPlayerModel:e.mediaPlayerModel})).initialize(a.Reporting,n),(t=k(i).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events})).initialize(a.metrics,r)}catch(e){throw o(),e}},reset:o}}M.__dashjs_factory_name="MetricsController";var L=dashjs.FactoryMaker.getClassFactory(M),F=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics="",this.Range=[],this.Reporting=[]},U=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},B=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function j(e){var t=(e=e||{}).adapter,r=e.constants;return{getMetrics:function(e){var n=[];return e&&e.Metrics_asArray&&e.Metrics_asArray.forEach(function(i){var o=new F,a=t.getIsDynamic(e);i.hasOwnProperty("metrics")&&(o.metrics=i.metrics,i.Range_asArray&&i.Range_asArray.forEach(function(n){var i=new U;i.starttime=function(e,n,i){var o,a,s=0;return n?s=t.getAvailabilityStartTime(e)/1e3:(o=t.getRegularPeriods(e)).length&&(s=o[0].start),a=s,i&&i.hasOwnProperty(r.START_TIME)&&(a+=i.starttime),a}(e,a,n),n.hasOwnProperty("duration")?i.duration=n.duration:i.duration=t.getDuration(e),i._useWallClockTime=a,o.Range.push(i)}),i.Reporting_asArray&&(i.Reporting_asArray.forEach(function(e){var t=new B;e.hasOwnProperty(r.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value),e.hasOwnProperty(r.DVB_REPORTING_URL)&&(t.dvbReportingUrl=e[r.DVB_REPORTING_URL]),e.hasOwnProperty(r.DVB_PROBABILITY)&&(t.dvbProbability=e[r.DVB_PROBABILITY]),o.Reporting.push(t))}),n.push(o)))}),n}}}j.__dashjs_factory_name="ManifestParsing";var Z=dashjs.FactoryMaker.getSingletonFactory(j);function q(e){var t;e=e||{};var r={},n=this.context,i=e.eventBus,a=e.events;function s(t){if(!t.error){var a=Object.keys(r);Z(n).getInstance({adapter:e.adapter,constants:e.constants}).getMetrics(t.manifest).forEach(function(t){var i=JSON.stringify(t);if(r.hasOwnProperty(i))a.splice(i,1);else try{var o=L(n).create(e);o.initialize(t),r[i]=o}catch(e){}}),a.forEach(function(e){r[e].reset(),delete r[e]}),i.trigger(o.Z.METRICS_INITIALISATION_COMPLETE)}}function l(){Object.keys(r).forEach(function(e){r[e].reset()}),r={}}return t={reset:function(){i.off(a.MANIFEST_UPDATED,s,t),i.off(a.STREAM_TEARDOWN_COMPLETE,l,t)}},i.on(a.MANIFEST_UPDATED,s,t),i.on(a.STREAM_TEARDOWN_COMPLETE,l,t),t}q.__dashjs_factory_name="MetricsCollectionController";var G=dashjs.FactoryMaker.getClassFactory(q);function z(){var e=this.context;return{createMetricsReporting:function(t){return s(e).getInstance({eventBus:t.eventBus,dashMetrics:t.dashMetrics,metricsConstants:t.metricsConstants,events:t.events}).initialize(),G(e).create(t)},getReportingFactory:function(){return _(e).getInstance()},getMetricsHandlerFactory:function(){return x(e).getInstance()}}}z.__dashjs_factory_name="MetricsReporting";var H=dashjs.FactoryMaker.getClassFactory(z);H.events=o.Z,dashjs.FactoryMaker.updateClassFactory(z.__dashjs_factory_name,H);var V=H},1180:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var s=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(s,e);var t,r,n=(t=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=a(t);if(r){var i=a(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return o(this,e)});function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=n.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",e.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",e.CMCD_DATA_GENERATED="cmcdDataGenerated",e}return s}(r(8342).Z));t.Z=s},5717:function(e,t,r){"use strict";var n=r(2610),i=r(5448),o=r(1264),a=r(3106),s=r(1767),l=r(3393);function u(){var e,t,r,i,u,c,f,d,h=this.context,p=(0,o.Z)(h).getInstance();function g(){i=[],u=[],c=[],d=[],f=null,t=[]}function m(e,t){var r=-1;e.some(function(e,n){if(e===t)return r=n,!0}),r<0||e.splice(r,1)}function y(e){var t;for(t=0;t<d.length;t++)if(d[t].rulename===e)return t;return-1}function v(e,r){_(e,r);var i=new n.Z;i.schemeIdUri=e,i.value=r,t.push(i)}function _(e,r){(0,a.PS)(e,"string"),(0,a.PS)(r,"string"),t.forEach(function(n,i){n.schemeIdUri===e&&n.value===r&&t.splice(i,1)})}return e={getCustomInitialTrackSelectionFunction:function(){return f},setCustomInitialTrackSelectionFunction:function(e){f=e},resetCustomInitialTrackSelectionFunction:function(){f=null},getLicenseResponseFilters:function(){return u},getLicenseRequestFilters:function(){return i},getCustomCapabilitiesFilters:function(){return c},registerCustomCapabilitiesFilter:function(e){c.push(e)},registerLicenseResponseFilter:function(e){u.push(e)},registerLicenseRequestFilter:function(e){i.push(e)},unregisterCustomCapabilitiesFilter:function(e){m(c,e)},unregisterLicenseResponseFilter:function(e){m(u,e)},unregisterLicenseRequestFilter:function(e){m(i,e)},addAbrCustomRule:function(e,t,r){if("string"!=typeof e||e!==s.Z.ABANDON_FRAGMENT_RULES&&e!==s.Z.QUALITY_SWITCH_RULES||"string"!=typeof t)throw l.Z.BAD_ARGUMENT_ERROR;var n=y(t);-1===n?d.push({type:e,rulename:t,rule:r}):(d[n].type=e,d[n].rule=r)},removeAllAbrCustomRule:function(){d=[]},removeAbrCustomRule:function(e){if(e){var t=y(e);-1!==t&&d.splice(t,1)}else d=[]},getAbrCustomRules:function(){return d},addUTCTimingSource:v,removeUTCTimingSource:_,getUTCTimingSources:function(){return t},clearDefaultUTCTimingSources:function(){t=[]},restoreDefaultUTCTimingSources:function(){var e=p.get().streaming.utcSynchronization.defaultTimingSource;v(e.scheme,e.value)},setXHRWithCredentialsForType:function e(t,n){t?r[t]=!!n:Object.keys(r).forEach(function(t){e(t,n)})},getXHRWithCredentialsForType:function(e){var t=r[e];return void 0===t?r.default:t},setConfig:function(){},reset:function(){g()}},r={default:!1},g(),e}u.__dashjs_factory_name="CustomParametersModel",t.Z=i.Z.getSingletonFactory(u)},9032:function(e,t,r){"use strict";var n=r(5448),i=r(7473);function o(e){var t=(e=e||{}).requestModifier;function r(e){var r=new Date,n=e.request,i=new XMLHttpRequest;if(i.open(e.method,e.url,!0),n.responseType&&(i.responseType=n.responseType),n.range&&i.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=r),t&&t.modifyRequestHeader&&(i=t.modifyRequestHeader(i,{url:e.url})),e.headers)for(var o in e.headers){var a=e.headers[o];a&&i.setRequestHeader(o,a)}i.withCredentials=e.withCredentials,i.onload=e.onload,i.onloadend=e.onend,i.onerror=e.onerror,i.onprogress=e.progress,i.onabort=e.onabort,i.ontimeout=e.ontimeout,i.timeout=e.timeout,i.send(),e.response=i}return{load:function(e){t&&t.modifyRequest?(0,i.k)(e,t).then(function(){return r(e)}):r(e)},abort:function(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort()}}}o.__dashjs_factory_name="XHRLoader";var a=n.Z.getClassFactory(o);t.Z=a},1737:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{default:function(){return Se}});var i={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t;return t=[{key:"findCencContentProtection",value:function(e){for(var t=null,r=0;r<e.length;++r){var n=e[r];"urn:mpeg:dash:mp4protection:2011"!==n.schemeIdUri.toLowerCase()||"cenc"!==n.value.toLowerCase()&&"cbcs"!==n.value.toLowerCase()||(t=n)}return t}},{key:"getPSSHData",value:function(e){var t=8,r=new DataView(e),n=r.getUint8(t);return t+=20,n>0&&(t+=4+16*r.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(t,r){var n=e.parsePSSHList(r);return t&&n.hasOwnProperty(t.uuid.toLowerCase())?n[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),r={},n=0;;){var i,o,a=void 0,s=n;if(n>=t.buffer.byteLength)break;if(i=n+t.getUint32(n),n+=4,1886614376===t.getUint32(n))if(n+=4,0===(o=t.getUint8(n))||1===o){n++,n+=3,a="";var l=void 0,u=void 0;for(l=0;l<4;l++)a+=1===(u=t.getUint8(n+l).toString(16)).length?"0"+u:u;for(n+=4,a+="-",l=0;l<2;l++)a+=1===(u=t.getUint8(n+l).toString(16)).length?"0"+u:u;for(n+=2,a+="-",l=0;l<2;l++)a+=1===(u=t.getUint8(n+l).toString(16)).length?"0"+u:u;for(n+=2,a+="-",l=0;l<2;l++)a+=1===(u=t.getUint8(n+l).toString(16)).length?"0"+u:u;for(n+=2,a+="-",l=0;l<6;l++)a+=1===(u=t.getUint8(n+l).toString(16)).length?"0"+u:u;n+=6,n+=4,r[a=a.toLowerCase()]=t.buffer.slice(s,i),n=i}else n=i;else n=i}return r}},{key:"getLicenseServerUrlFromMediaInfo",value:function(e,t){try{if(!e||0===e.length)return null;for(var r=0,n=null;r<e.length&&!n;){var o=e[r];if(o&&o.contentProtection&&o.contentProtection.length>0){var a=o.contentProtection.filter(function(e){return e.schemeIdUri&&e.schemeIdUri===t});if(a&&a.length>0)for(var s=0;s<a.length&&!n;){for(var l=a[s],u=0;u<i.attributes.length&&!n;){for(var c=0,f=i.attributes[u];c<i.prefixes.length&&!n;){var d=i.prefixes[c];l[f]&&l[f].__prefix&&l[f].__prefix===d&&l[f].__text&&(n=l[f].__text),c+=1}u+=1}s+=1}}r+=1}return n}catch(e){return null}}}],t&&n(e,t),e}(),a=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentType=t,this.robustness=r},s=function e(t,r,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),r&&r.length&&(this.videoCapabilities=r),this.distinctiveIdentifier=n,this.persistentState=i,this.sessionTypes=o};function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var d=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=f(t);if(r){var i=f(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return c(this,e)});function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=n.call(this)).MEDIA_KEYERR_CODE=100,e.MEDIA_KEYERR_UNKNOWN_CODE=101,e.MEDIA_KEYERR_CLIENT_CODE=102,e.MEDIA_KEYERR_SERVICE_CODE=103,e.MEDIA_KEYERR_OUTPUT_CODE=104,e.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,e.MEDIA_KEYERR_DOMAIN_CODE=106,e.MEDIA_KEY_MESSAGE_ERROR_CODE=107,e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,e.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,e.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,e.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,e.KEY_SESSION_CREATED_ERROR_CODE=113,e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,e.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",e.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",e.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",e.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",e.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",e.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",e.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",e.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",e.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",e.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",e.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",e}return i}(r(2230).Z)),h=r(5459),p=function e(t,r,n,i,o,a,s,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.method=r,this.responseType=n,this.headers=i,this.withCredentials=o,this.messageType=a,this.sessionId=s,this.data=l},g=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.headers=r,this.data=n},m=r(7855),y=r(703),v=r(3393),_=r(5448);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function E(e){var t,r,n,i,l,u,c,f,_,E,w,S=(e=e||{}).protectionKeyController,T=e.protectionModel,A=e.eventBus,I=e.events,R=e.debug,N=e.BASE64,C=e.constants,O=[],P=e.cmcdModel,x=e.settings,D=e.customParametersModel;function k(){if(!(A&&A.hasOwnProperty("on")&&S&&S.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function M(e,t){f||_?f&&L():function(e,t){if(!_){_=!0;var n,i=[];e=e.sort(function(t,r){return(l&&l[t.ks.systemString]&&l[t.ks.systemString].priority>=0?l[t.ks.systemString].priority:e.length)-(l&&l[r.ks.systemString]&&l[r.ks.systemString].priority>=0?l[r.ks.systemString].priority:e.length)});for(var o=0;o<e.length;o++){var a=G(e[o]);i.push({ks:e[o].ks,configs:[a],protData:e[o].protData})}T.requestKeySystemAccess(i).then(function(e){var t=(n=e.data).mksa&&n.mksa.selectedSystemString?n.mksa.selectedSystemString:n.keySystem.systemString;return r.info("DRM: KeySystem Access Granted for system string ("+t+")!  Selecting key system..."),T.selectKeySystem(n)}).then(function(e){if(f=e,_=!1,T){A.trigger(I.KEY_SYSTEM_SELECTED,{data:n});var t=j(f);t&&t.serverCertificate&&t.serverCertificate.length>0&&T.setServerCertificate(N.decodeArray(t.serverCertificate).buffer),L()}}).catch(function(e){f=null,_=!1,t||A.trigger(I.KEY_SYSTEM_SELECTED,{data:null,error:new h.Z(d.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,d.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+e.error)})})}}(e,t)}function L(){for(var e,t=0;t<n.length;t++)for(e=0;e<n[t].length;e++)if(f===n[t][e].ks){F(n[t][e]);break}n=[]}function F(e){if(S.isClearKey(f)&&e.protData&&e.protData.hasOwnProperty("clearkeys")&&0!==Object.keys(e.protData.clearkeys).length){var t={kids:Object.keys(e.protData.clearkeys)};e.initData=(new TextEncoder).encode(JSON.stringify(t))}e.sessionId?U(e):null!==e.initData&&B(e)}function U(e){k(),T.loadKeySession(e)}function B(e){var t=o.getPSSHForKeySystem(f,e?e.initData:null);if(t){if(function(e){if(!e)return!1;try{for(var t=T.getSessions(),r=0;r<t.length;r++)if(t[r].getKeyId()===e)return!0;return!1}catch(e){return!1}}(e.keyId))return;if(Z(t))return;try{e.initData=t,T.createKeySession(e)}catch(e){A.trigger(I.KEY_SESSION_CREATED,{data:null,error:new h.Z(d.KEY_SESSION_CREATED_ERROR_CODE,d.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e&&e.initData?T.createKeySession(e):A.trigger(I.KEY_SESSION_CREATED,{data:null,error:new h.Z(d.KEY_SESSION_CREATED_ERROR_CODE,d.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(f?f.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function j(e){if(e){var t=e.systemString;if(l)return t in l?l[t]:null}return null}function Z(e){if(!e)return!1;try{for(var t=T.getAllInitData(),n=0;n<t.length;n++)if(S.initDataEquals(e,t[n]))return r.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(e){return!1}}function q(e){k(),e?(T.setMediaElement(e),A.on(I.NEED_KEY,$,t)):null===e&&(T.setMediaElement(e),A.off(I.NEED_KEY,$,t))}function G(e){var t=e.protData,r=[],n=[],o=t&&t.audioRobustness&&t.audioRobustness.length>0?t.audioRobustness:c,l=t&&t.videoRobustness&&t.videoRobustness.length>0?t.videoRobustness:c,u=e.sessionType,f=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",d=t&&t.persistentState?t.persistentState:"temporary"===u?"optional":"required";return i.forEach(function(e){e.type===C.AUDIO?r.push(new a(e.codec,o)):e.type===C.VIDEO&&n.push(new a(e.codec,l))}),new s(r,n,f,d,[u])}function z(e){e.error?A.trigger(I.KEY_STATUSES_CHANGED,{data:null,error:e.error}):r.debug("DRM: key status = "+e.status)}function H(e){r.debug("DRM: onKeyMessage");var t=e.data;A.trigger(I.KEY_MESSAGE,{data:t});var n=t.messageType?t.messageType:"license-request",a=t.message,s=t.sessionToken,l=j(f),u=S.getLicenseServerModelInstance(f,l,n),c={sessionToken:s,messageType:n};if(a&&0!==a.byteLength){if(!u)return r.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+s.getSessionId()),void V(c);if(S.isClearKey(f)){var v=S.processClearKeyLicenseRequest(f,l,a);if(v&&v.keyPairs&&v.keyPairs.length>0)return r.debug("DRM: ClearKey license request handled by application!"),V(c),void T.updateKeySession(s,v)}!function(e,t,r){var n=e.sessionToken,a=e.messageType?e.messageType:"license-request",s={sessionToken:n,messageType:a},l=f?f.systemString:null,u=function(e,t,r,n,a){var s=null,l=n.message;if(e&&e.serverURL){var u=e.serverURL;"string"==typeof u&&""!==u?s=u:"object"===b(u)&&u.hasOwnProperty(t)&&(s=u[t])}else if(e&&e.laURL&&""!==e.laURL)s=e.laURL;else if(!(s=o.getLicenseServerUrlFromMediaInfo(i,f.schemeIdURI))&&!S.isClearKey(f)){var c=o.getPSSHData(r.initData);(s=f.getLicenseServerURLFromInitData(c))||(s=n.laURL)}return a.getServerURLFromMessage(s,l,t)}(r,a,n,e,t);if(u){var c={},v=!1;r&&K(c,r.httpRequestHeaders);var _=e.message;K(c,f.getRequestHeadersFromMessage(_)),Object.keys(c).forEach(function(e){"authorization"===e.toLowerCase()&&(v=!0)}),r&&"boolean"==typeof r.withCredentials&&(v=r.withCredentials);var E=function(e){if(T)if(e.status>=200&&e.status<=299){var r=y.Z.parseHttpHeaders(e.getAllResponseHeaders?e.getAllResponseHeaders():null),i=new g(e.responseURL,r,e.response);X(D.getLicenseResponseFilters(),i).then(function(){var r=t.getLicenseMessage(i.data,l,a);null!==r?(V(s),T.updateKeySession(n,r)):Q(e,s,l,a,t)})}else Q(e,s,l,a,t)},w=function(e){V(s,new h.Z(d.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,d.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+l+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},A=function(e){V(s,new h.Z(d.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,d.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+l+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},I=f.getLicenseRequestFromMessage(_),R=t.getHTTPMethod(a),N=t.getResponseType(l,a),C=r&&!isNaN(r.httpTimeout)?r.httpTimeout:8e3,O=n.getSessionId()||null,P=new p(u,R,N,c,v,a,O,I),k=isNaN(x.get().streaming.retryAttempts[m.w.LICENSE])?3:x.get().streaming.retryAttempts[m.w.LICENSE];X(D.getLicenseRequestFilters(),P).then(function(){W(P,k,C,E,w,A)})}else V(s,new h.Z(d.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,d.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}(t,u,l)}else V(c,new h.Z(d.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,d.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function V(e,t){A.trigger(I.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function W(e,t,n,i,o,a){var s=new XMLHttpRequest;if(x.get().streaming.cmcd&&x.get().streaming.cmcd.enabled&&x.get().streaming.cmcd.mode===v.Z.CMCD_MODE_QUERY){var l=P.getQueryParameter({url:e.url,type:m.w.LICENSE});l&&(e.url=y.Z.addAditionalQueryParameterToUrl(e.url,[l]))}for(var u in s.open(e.method,e.url,!0),s.responseType=e.responseType,s.withCredentials=e.withCredentials,n>0&&(s.timeout=n),e.headers)s.setRequestHeader(u,e.headers[u]);if(x.get().streaming.cmcd&&x.get().streaming.cmcd.enabled&&x.get().streaming.cmcd.mode===v.Z.CMCD_MODE_HEADER){var c=P.getHeaderParameters({url:e.url,type:m.w.LICENSE});if(c)for(var f in c){var d=c[f];d&&s.setRequestHeader(f,d)}}var h=function(){t--;var r=isNaN(x.get().streaming.retryIntervals[m.w.LICENSE])?1e3:x.get().streaming.retryIntervals[m.w.LICENSE];w=setTimeout(function(){W(e,t,n,i,o,a)},r)};s.onload=function(){E=null,this.status>=200&&this.status<=299||t<=0?i(this):(r.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+t),h())},s.ontimeout=s.onerror=function(){E=null,t<=0?a(this):(r.warn("License request network request failed . Retrying it... Pending retries: "+t),h())},s.onabort=function(){o(this)},A.trigger(I.LICENSE_REQUEST_SENDING,{url:e.url,headers:e.headers,payload:e.data,sessionId:e.sessionId}),E=s,s.send(e.data)}function Y(){E&&(E.onloadend=E.onerror=E.onprogress=void 0,E.abort(),E=null),w&&(clearTimeout(w),w=null)}function K(e,t){if(t)for(var r in t)e[r]=t[r]}function Q(e,t,r,n,i){var o="NONE",a=null;e.response&&(o=i.getErrorResponse(e.response,r,n),a={serverResponse:e.response||null,responseCode:e.status||null,responseText:e.statusText||null}),V(t,new h.Z(d.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,d.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+r+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+o,a))}function X(e,t){return e?e.reduce(function(e,r){return e.then(function(){return r(t)})},Promise.resolve()):Promise.resolve()}function $(e,t){if(!x.get().streaming.protection.ignoreEmeEncryptedEvent){if(r.debug("DRM: onNeedKey"),"cenc"!==e.key.initDataType)return void r.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);if(0===i.length&&(r.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))return void O.push(setTimeout(function(){$(e,t)},500));var a=e.key.initData;if(ArrayBuffer.isView(a)&&(a=a.buffer),f){var s=o.getPSSHForKeySystem(f,a);if(s&&Z(s))return}r.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(a)));var c=S.getSupportedKeySystemsFromSegmentPssh(a,l,u);if(0===c.length)return void r.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");!function(e){n.push(e),M(e,!1)}(c)}}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");k(),i.push(e)},clearMediaInfoArray:function(){i=[]},handleKeySystemFromManifest:function(){if(i&&0!==i.length){var e=[];i.forEach(function(t){var r=S.getSupportedKeySystemsFromContentProtection(t.contentProtection,l,u);r.length>0&&(0===e.length&&(e=r),n.push(r))}),e&&e.length>0&&M(e,!0)}},createKeySession:B,loadKeySession:U,removeKeySession:function(e){k(),T.removeKeySession(e)},closeKeySession:function(e){k(),T.closeKeySession(e)},setServerCertificate:function(e){k(),T.setServerCertificate(e)},setMediaElement:q,setSessionType:function(e){u=e},setRobustnessLevel:function(e){c=e},setProtectionData:function(e){l=e,S.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return k(),S.getSupportedKeySystemsFromContentProtection(e,l,u)},getKeySystems:function(){return S?S.getKeySystems():[]},setKeySystems:function(e){S&&S.setKeySystems(e)},stop:function(){Y(),T&&T.stop()},reset:function(){A.off(I.INTERNAL_KEY_MESSAGE,H,t),A.off(I.INTERNAL_KEY_STATUS_CHANGED,z,t),k(),Y(),q(null),f=null,_=!1,T&&(T.reset(),T=null),O.forEach(function(e){return clearTimeout(e)}),O=[],i=[],n=[]}},r=R.getLogger(t),n=[],i=[],u="temporary",c="",E=null,w=null,A.on(I.INTERNAL_KEY_MESSAGE,H,t),A.on(I.INTERNAL_KEY_STATUS_CHANGED,z,t),t}E.__dashjs_factory_name="ProtectionController";var w=_.Z.getClassFactory(E),S=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyID=t,this.key=r};function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var A=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r&&"persistent"!==r&&"temporary"!==r)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=r}var t;return(t=[{key:"toJWK",value:function(){var e,t=this.keyPairs.length,r={keys:[]};for(e=0;e<t;e++){var n={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};r.keys.push(n)}this.type&&(r.type=this.type);var i=JSON.stringify(r),o=i.length,a=new ArrayBuffer(o),s=new Uint8Array(a);for(e=0;e<o;e++)s[e]=i.charCodeAt(e);return a}}])&&T(e.prototype,t),e}();function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var R=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t;return(t=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&I(e.prototype,t),e}()),N="e2719d58-a985-b3c9-781a-b030af78d30e",C=R.CLEARKEY_KEYSTEM_STRING,O="urn:uuid:"+N;function P(e){var t=(e=e||{}).BASE64;return{uuid:N,schemeIdURI:O,systemString:C,getInitData:function(e,r){try{var n=o.parseInitDataFromContentProtection(e,t);if(!n&&r){var i={kids:[function(e){try{var t=e.replace(/-/g,"");return(t=btoa(t.match(/\w{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(e){return null}}(r["cenc:default_KID"])]};n=(new TextEncoder).encode(JSON.stringify(i))}return n}catch(e){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(e){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var r=null;if(e){for(var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],o=0;o<n.kids.length;o++){var a=n.kids[o],s=e.clearkeys&&e.clearkeys.hasOwnProperty(a)?e.clearkeys[a]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+a+") is not known!");i.push(new S(a,s))}r=new A(i)}return r}}}P.__dashjs_factory_name="KeySystemClearKey";var x=dashjs.FactoryMaker.getSingletonFactory(P),D="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",k=R.CLEARKEY_KEYSTEM_STRING,M="urn:uuid:"+D;function L(e){var t,r=e.BASE64,n=e.debug.getLogger(t);return{uuid:D,schemeIdURI:M,systemString:k,getInitData:function(e){return o.parseInitDataFromContentProtection(e,r)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var r=null;if(e){for(var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),o=[],a=0;a<i.kids.length;a++){var s=i.kids[a],l=e.clearkeys&&e.clearkeys.hasOwnProperty(s)?e.clearkeys[s]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+s+") is not known!");o.push(new S(s,l))}r=new A(o),n.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return r}}}L.__dashjs_factory_name="KeySystemW3CClearKey";var F=dashjs.FactoryMaker.getSingletonFactory(L),U="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",B=R.WIDEVINE_KEYSTEM_STRING,j="urn:uuid:"+U;function Z(e){var t=(e=e||{}).BASE64;return{uuid:U,schemeIdURI:j,systemString:B,getInitData:function(e){return o.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Z.__dashjs_factory_name="KeySystemWidevine";var q=dashjs.FactoryMaker.getSingletonFactory(Z),G="9a04f079-9840-4286-ab92-e65be0885f95",z=R.PLAYREADY_KEYSTEM_STRING,H="urn:uuid:"+G;function V(e){var t="utf-16",r=(e=e||{}).BASE64,n=e.settings;function i(){if(!r||!r.hasOwnProperty("decodeArray")||!r.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:G,schemeIdURI:H,systemString:z,getInitData:function(e){var t,n,a,s,l,u=new Uint8Array([112,115,115,104,0,0,0,0]),c=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),f=0,d=null;if(i(),!e)return null;if("pssh"in e)return o.parseInitDataFromContentProtection(e,r);if("pro"in e)d=r.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;d=r.decodeArray(e.prheader.__text)}return t=d.length,n=4+u.length+c.length+4+t,a=new ArrayBuffer(n),s=new Uint8Array(a),(l=new DataView(a)).setUint32(f,n),f+=4,s.set(u,f),f+=u.length,s.set(c,f),f+=c.length,l.setUint32(f,t),f+=4,s.set(d,f),f+=t,s.buffer},getRequestHeadersFromMessage:function(e){var r,i,o={},a=new DOMParser;if(n&&n.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===t&&e&&e.byteLength%2==1)return o["Content-Type"]="text/xml; charset=utf-8",o;var s="utf-16"===t?new Uint16Array(e):new Uint8Array(e);r=String.fromCharCode.apply(null,s);for(var l=(i=a.parseFromString(r,"application/xml")).getElementsByTagName("name"),u=i.getElementsByTagName("value"),c=0;c<l.length;c++)o[l[c].childNodes[0].nodeValue]=u[c].childNodes[0].nodeValue;return o.hasOwnProperty("Content")&&(o["Content-Type"]=o.Content,delete o.Content),o.hasOwnProperty("Content-Type")||(o["Content-Type"]="text/xml; charset=utf-8"),o},getLicenseRequestFromMessage:function(e){var o=null,a=new DOMParser;if(n&&n.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===t&&e&&e.byteLength%2==1)return e;var s="utf-16"===t?new Uint16Array(e):new Uint8Array(e);i();var l=String.fromCharCode.apply(null,s),u=a.parseFromString(l,"application/xml");if(!u.getElementsByTagName("PlayReadyKeyMessage")[0])return e;var c=u.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return c&&(o=r.decode(c)),o},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),r=t.getUint16(4,!0),n=6,i=new DOMParser,o=0;o<r;o++){var a=t.getUint16(n,!0);n+=2;var s=t.getUint16(n,!0);if(n+=2,1===a){var l=e.slice(n,n+s),u=String.fromCharCode.apply(null,new Uint16Array(l)),c=i.parseFromString(u,"application/xml");if(c.getElementsByTagName("LA_URL")[0]){var f=c.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(f)return f}if(c.getElementsByTagName("LUI_URL")[0]){var d=c.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(d)return d}}else n+=s}return null},getCDMData:function(e){var t,n,o,a;if(i(),!e)return null;for(t=[],a=0;a<e.length;++a)t.push(e.charCodeAt(a)),t.push(0);for(t=String.fromCharCode.apply(null,t),t=r.encode(t),n='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",t),o=[],a=0;a<n.length;++a)o.push(n.charCodeAt(a)),o.push(0);return new Uint8Array(o).buffer},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');t=e}}}V.__dashjs_factory_name="KeySystemPlayReady";var W=dashjs.FactoryMaker.getSingletonFactory(V);function Y(e){var t=(e=e||{}).BASE64,r={};return r[R.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return t.decodeArray(e.license)},getErrorResponse:function(e){return e}},r[R.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return r[e].responseType},getLicenseMessage:function(e,n){return function(){if(!t||!t.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),r[n].getLicenseMessage(e)},getErrorResponse:function(e,t){return r[t].getErrorResponse(e)}}}Y.__dashjs_factory_name="DRMToday";var K=dashjs.FactoryMaker.getSingletonFactory(Y);function Q(){var e="http://schemas.xmlsoap.org/soap/envelope/";function t(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}function r(r){if(window.DOMParser){var n=t(r),i=(new window.DOMParser).parseFromString(n,"text/xml"),o=i?i.getElementsByTagNameNS(e,"Envelope")[0]:null,a=o?o.getElementsByTagNameNS(e,"Body")[0]:null;if(a&&a.getElementsByTagNameNS(e,"Fault")[0])return null}return r}function n(r){var n="",i="",o="",a=-1,s=-1;if(window.DOMParser){var l=t(r),u=(new window.DOMParser).parseFromString(l,"text/xml"),c=u?u.getElementsByTagNameNS(e,"Envelope")[0]:null,f=c?c.getElementsByTagNameNS(e,"Body")[0]:null,d=f?f.getElementsByTagNameNS(e,"Fault")[0]:null,h=d?d.getElementsByTagName("detail")[0]:null,p=h?h.getElementsByTagName("Exception")[0]:null,g=null;if(null===d)return l;n=(g=d.getElementsByTagName("faultstring")[0].firstChild)?g.nodeValue:null,null!==p&&(i=(g=p.getElementsByTagName("StatusCode")[0])?g.firstChild.nodeValue:null,a=(o=(g=p.getElementsByTagName("Message")[0])?g.firstChild.nodeValue:null)?o.lastIndexOf("[")+1:-1,s=o?o.indexOf("]"):-1,o=o?o.substring(a,s):"")}var m="code: ".concat(i,", name: ").concat(n);return o&&(m+=", message: ".concat(o)),m}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return r.call(this,e)},getErrorResponse:function(e){return n.call(this,e)}}}Q.__dashjs_factory_name="PlayReady";var X=_.Z.getSingletonFactory(Q);function $(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}$.__dashjs_factory_name="Widevine";var J=dashjs.FactoryMaker.getSingletonFactory($);function ee(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],r=0;r<e.keys.length;r++){var n=e.keys[r],i=n.kid.replace(/=/g,""),o=n.k.replace(/=/g,"");t.push(new S(i,o))}return new A(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}ee.__dashjs_factory_name="ClearKey";var te=dashjs.FactoryMaker.getSingletonFactory(ee);function re(){var e,t,r,n,i,a,s,l,u=this.context;function c(e,t){return t&&e in t?t[e]:null}function f(e,t){return e&&e.sessionId?e.sessionId:t&&t.sessionId?t.sessionId:null}function d(e,t){return e&&e.sessionType?e.sessionType:t}return e={initialize:function(){var e;n=[],e=W(u).getInstance({BASE64:i,settings:a}),n.push(e),e=q(u).getInstance({BASE64:i}),n.push(e),e=x(u).getInstance({BASE64:i}),n.push(e),s=e,e=F(u).getInstance({BASE64:i,debug:t}),n.push(e),l=e},setProtectionData:function(e){for(var t,r,i=0;i<n.length;i++){var o=n[i];o.hasOwnProperty("init")&&o.init((t=o.systemString,r=void 0,r=null,e&&(r=t in e?e[t]:null),r))}},isClearKey:function(e){return e===s||e===l},initDataEquals:function(e,t){if(e.byteLength===t.byteLength){for(var r=new Uint8Array(e),n=new Uint8Array(t),i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}return!1},getKeySystems:function(){return n},setKeySystems:function(e){n=e},getKeySystemBySystemString:function(e){for(var t=0;t<n.length;t++)if(n[t].systemString===e)return n[t];return null},getSupportedKeySystemsFromContentProtection:function(e,t,r){var i,a,s,l,u=[];if(e){var h=o.findCencContentProtection(e);for(s=0;s<n.length;++s){var p=c((a=n[s]).systemString,t);for(l=0;l<e.length;++l)if((i=e[l]).schemeIdUri.toLowerCase()===a.schemeIdURI){var g=a.getInitData(i,h);u.push({ks:n[s],keyId:i.keyId,initData:g,protData:p,cdmData:a.getCDMData(p?p.cdmData:null),sessionId:f(p,i),sessionType:d(p,r)})}}}return u},getSupportedKeySystemsFromSegmentPssh:function(e,t,r){for(var i,a=[],s=o.parsePSSHList(e),l=0;l<n.length;++l){var u=c((i=n[l]).systemString,t);i.uuid in s&&a.push({ks:i,initData:s[i.uuid],protData:u,cdmData:i.getCDMData(u?u.cdmData:null),sessionId:f(u),sessionType:d(u,r)})}return a},getLicenseServerModelInstance:function(e,t,r){if("license-release"===r||"individualization-request"===r)return null;var n=null;return t&&t.hasOwnProperty("drmtoday")?n=K(u).getInstance({BASE64:i}):e.systemString===R.WIDEVINE_KEYSTEM_STRING?n=J(u).getInstance():e.systemString===R.PLAYREADY_KEYSTEM_STRING?n=X(u).getInstance():e.systemString===R.CLEARKEY_KEYSTEM_STRING&&(n=te(u).getInstance()),n},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return r.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(n){n&&(n.debug&&(t=n.debug,r=t.getLogger(e)),n.BASE64&&(i=n.BASE64),n.settings&&(a=n.settings))}},e}re.__dashjs_factory_name="ProtectionKeyController";var ne=dashjs.FactoryMaker.getSingletonFactory(re);function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function oe(e,t){return oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},oe(e,t)}function ae(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}var le=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=se(t);if(r){var i=se(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return ae(this,e)});function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=n.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",e.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",e.KEY_ADDED="public_keyAdded",e.KEY_ERROR="public_keyError",e.KEY_MESSAGE="public_keyMessage",e.KEY_SESSION_CLOSED="public_keySessionClosed",e.KEY_SESSION_CREATED="public_keySessionCreated",e.KEY_SESSION_REMOVED="public_keySessionRemoved",e.KEY_STATUSES_CHANGED="public_keyStatusesChanged",e.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",e.KEY_SYSTEM_SELECTED="public_keySystemSelected",e.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",e.LICENSE_REQUEST_SENDING="public_licenseRequestSending",e.NEED_KEY="needkey",e.PROTECTION_CREATED="public_protectioncreated",e.PROTECTION_DESTROYED="public_protectiondestroyed",e.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",e.TEARDOWN_COMPLETE="protectionTeardownComplete",e.VIDEO_ELEMENT_SELECTED="videoElementSelected",e.KEY_SESSION_UPDATED="public_keySessionUpdated",e}return i}(r(8342).Z)),ue=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData=t,this.initDataType=r},ce=function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionToken=t,this.message=r,this.defaultURL=n,this.messageType=i||"license-request"},fe=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keySystem=t,this.ksConfiguration=r},de={};function he(e){e=e||{};var t,r,n,i,o,a,s,l,u=this.context,c=e.eventBus,f=e.events,p=e.debug;function g(e,t,r,n){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){var i="Insecure origins are not allowed";return c.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{error:i}),void n({error:i})}var o=e[t].protData&&e[t].protData.systemStringPriority?e[t].protData.systemStringPriority:null,a=e[t].configs,s=e[t].ks,l=s.systemString;(function(e,t){return new Promise(function(r,n){m(e,t,0,r,n)})})(o||(de[l]?de[l]:[l]),a).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,n=new fe(s,t);n.mksa=e,c.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{data:n}),r({data:n})}).catch(function(i){if(t+1<e.length)g(e,t+1,r,n);else{var o="Key system access denied! ";c.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{error:o+i.message}),n({error:o+i.message})}})}function m(e,t,n,i,o){var a=e[n];r.debug("Requesting key system access for system string ".concat(a)),navigator.requestMediaKeySystemAccess(a,t).then(function(e){e.selectedSystemString=a,i(e)}).catch(function(r){n+1<e.length?m(e,t,n+1,i,o):o(r)})}function y(e){if(!e||!e.session)return Promise.resolve;var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function v(e){for(var t=0;t<a.length;t++)if(a[t]===e){a.splice(t,1);break}}function _(e){var t,r;return e&&e.length>0&&(e[0]&&("string"==typeof e[0]?t=e[0]:r=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:r=e[1])),{status:t,keyId:r}}function b(e,t){var n={session:e,keyId:t.keyId,initData:t.initData,sessionId:t.sessionId,sessionType:t.sessionType,handleEvent:function(e){switch(e.type){case"keystatuseschange":c.trigger(f.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=_(arguments);"expired"===e.status?c.trigger(f.INTERNAL_KEY_STATUS_CHANGED,{error:new h.Z(d.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,d.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):c.trigger(f.INTERNAL_KEY_STATUS_CHANGED,e)});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;c.trigger(f.INTERNAL_KEY_MESSAGE,{data:new ce(this,t,void 0,e.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return e.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){var t=!1;return e.keyStatuses.forEach(function(){"usable"===_(arguments).status&&(t=!0)}),t}};return e.addEventListener("keystatuseschange",n),e.addEventListener("message",n),e.closed.then(function(){v(n),r.debug("DRM: Session closed.  SessionID = "+n.getSessionId()),c.trigger(f.KEY_SESSION_CLOSED,{data:n.getSessionId()})}),a.push(n),n}return t={getAllInitData:function(){for(var e=[],t=0;t<a.length;t++)a[t].initData&&e.push(a[t].initData);return e},getSessions:function(){return a},requestKeySystemAccess:function(e){return new Promise(function(t,r){g(e,0,t,r)})},selectKeySystem:function(e){return new Promise(function(t,r){e.mksa.createMediaKeys().then(function(t){return n=e.keySystem,o=t,i?i.setMediaKeys(o):Promise.resolve()}).then(function(){t(n)}).catch(function(){r({error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(e){i!==e&&(i&&(i.removeEventListener("encrypted",s),i.setMediaKeys&&i.setMediaKeys(null)),(i=e)&&(i.addEventListener("encrypted",s),i.setMediaKeys&&o&&i.setMediaKeys(o)))},setServerCertificate:function(e){if(!n||!o)throw new Error("Can not set server certificate until you have selected a key system");o.setServerCertificate(e).then(function(){r.info("DRM: License server certificate successfully updated."),c.trigger(f.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){c.trigger(f.SERVER_CERTIFICATE_UPDATED,{error:new h.Z(d.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,d.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})})},createKeySession:function(e){if(!n||!o)throw new Error("Can not create sessions until you have selected a key system");var t=o.createSession(e.sessionType),i=b(t,e),a=n.systemString===R.CLEARKEY_KEYSTEM_STRING&&(e.initData||e.protData&&e.protData.clearkeys)?R.INITIALIZATION_DATA_TYPE_KEYIDS:R.INITIALIZATION_DATA_TYPE_CENC;t.generateRequest(a,e.initData).then(function(){r.debug("DRM: Session created.  SessionID = "+i.getSessionId()),c.trigger(f.KEY_SESSION_CREATED,{data:i})}).catch(function(e){v(i),c.trigger(f.KEY_SESSION_CREATED,{data:null,error:new h.Z(d.KEY_SESSION_CREATED_ERROR_CODE,d.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})})},updateKeySession:function(e,t){var r=e.session;l.isClearKey(n)&&(t=t.toJWK()),r.update(t).then(function(){c.trigger(f.KEY_SESSION_UPDATED)}).catch(function(t){c.trigger(f.KEY_ERROR,{error:new h.Z(d.MEDIA_KEYERR_CODE,"Error sending update() message! "+t.name,e)})})},loadKeySession:function(e){if(!n||!o)throw new Error("Can not load sessions until you have selected a key system");for(var t=e.sessionId,i=0;i<a.length;i++)if(t===a[i].sessionId)return void r.warn("DRM: Ignoring session ID because we have already seen it!");var s=o.createSession(e.sessionType),l=b(s,e);s.load(t).then(function(e){e?(r.debug("DRM: Session loaded.  SessionID = "+l.getSessionId()),c.trigger(f.KEY_SESSION_CREATED,{data:l})):(v(l),c.trigger(f.KEY_SESSION_CREATED,{data:null,error:new h.Z(d.KEY_SESSION_CREATED_ERROR_CODE,d.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}))}).catch(function(e){v(l),c.trigger(f.KEY_SESSION_CREATED,{data:null,error:new h.Z(d.KEY_SESSION_CREATED_ERROR_CODE,d.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)})})},removeKeySession:function(e){e.session.remove().then(function(){r.debug("DRM: Session removed.  SessionID = "+e.getSessionId()),c.trigger(f.KEY_SESSION_REMOVED,{data:e.getSessionId()})},function(t){c.trigger(f.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionId()+"). "+t.name})})},closeKeySession:function(e){y(e).catch(function(t){v(e),c.trigger(f.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionId()+") "+t.name})})},stop:function(){for(var e,t=0;t<a.length;t++)(e=a[t]).getUsable()||(y(e),v(e))},reset:function(){var e,t=a.length;0!==t?function(){for(var r=function(e){v(e),0===a.length&&(i?(i.removeEventListener("encrypted",s),i.setMediaKeys(null).then(function(){c.trigger(f.TEARDOWN_COMPLETE)})):c.trigger(f.TEARDOWN_COMPLETE))},n=0;n<t;n++)!function(t){y(e),r(t)}(e=a[n])}():c.trigger(f.TEARDOWN_COMPLETE)}},r=p.getLogger(t),n=null,i=null,o=null,a=[],l=ne(u).getInstance(),s={handleEvent:function(e){if("encrypted"===e.type&&e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;c.trigger(f.NEED_KEY,{key:new ue(t,e.initDataType)})}}},t}de[R.PLAYREADY_KEYSTEM_STRING]=[R.PLAYREADY_KEYSTEM_STRING,R.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],de[R.WIDEVINE_KEYSTEM_STRING]=[R.WIDEVINE_KEYSTEM_STRING],de[R.CLEARKEY_KEYSTEM_STRING]=[R.CLEARKEY_KEYSTEM_STRING],he.__dashjs_factory_name="ProtectionModel_21Jan2015";var pe=dashjs.FactoryMaker.getClassFactory(he);function ge(e){e=e||{};var t,r,n,i,o,a,l,u,c,f=this.context,p=e.eventBus,g=e.events,m=e.debug,y=e.api;function v(){try{for(var e=0;e<l.length;e++)_(l[e]);n&&n.removeEventListener(y.needkey,u),p.trigger(g.TEARDOWN_COMPLETE)}catch(e){p.trigger(g.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function _(e){var t=e.session;t.removeEventListener(y.error,e),t.removeEventListener(y.message,e),t.removeEventListener(y.ready,e),t.removeEventListener(y.close,e);for(var r=0;r<l.length;r++)if(l[r]===e){l.splice(r,1);break}t[y.release]()}function b(){var e=null,t=function(){n.removeEventListener("loadedmetadata",e),n[y.setMediaKeys](o),p.trigger(g.VIDEO_ELEMENT_SELECTED)};n.readyState>=1?t():(e=t.bind(this),n.addEventListener("loadedmetadata",e))}return t={getAllInitData:function(){for(var e=[],t=0;t<l.length;t++)e.push(l[t].initData);return e},getSessions:function(){return l},requestKeySystemAccess:function(e){return new Promise(function(t,r){for(var n=!1,i=0;i<e.length;i++)for(var o=e[i].ks.systemString,a=e[i].configs,l=null,u=null,f=0;f<a.length;f++){var d=a[f].audioCapabilities,h=a[f].videoCapabilities;if(d&&0!==d.length){l=[];for(var m=0;m<d.length;m++)window[y.MediaKeys].isTypeSupported(o,d[m].contentType)&&l.push(d[m])}if(h&&0!==h.length){u=[];for(var v=0;v<h.length;v++)window[y.MediaKeys].isTypeSupported(o,h[v].contentType)&&u.push(h[v])}if(!(!l&&!u||l&&0===l.length||u&&0===u.length)){n=!0;var _=new s(l,u),b=c.getKeySystemBySystemString(o),E=new fe(b,_);p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{data:E}),t({data:E});break}}if(!n){var w="Key system access denied! -- No valid audio/video content configurations detected!";p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{error:w}),r({error:w})}})},selectKeySystem:function(e){return new Promise(function(t,r){try{o=e.mediaKeys=new window[y.MediaKeys](e.keySystem.systemString),i=e.keySystem,a=e,n&&b(),t(i)}catch(e){r({error:"Error selecting keys system ("+i.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(e){n!==e&&(n&&n.removeEventListener(y.needkey,u),(n=e)&&(n.addEventListener(y.needkey,u),o&&b()))},createKeySession:function(e){if(!i||!o||!a)throw new Error("Can not create sessions until you have selected a key system");var t=null;if(a.ksConfiguration.videoCapabilities&&a.ksConfiguration.videoCapabilities.length>0&&(t=a.ksConfiguration.videoCapabilities[0]),null===t&&a.ksConfiguration.audioCapabilities&&a.ksConfiguration.audioCapabilities.length>0&&(t=a.ksConfiguration.audioCapabilities[0]),null===t)throw new Error("Can not create sessions for unknown content types.");var n=t.contentType,s=o.createSession(n,new Uint8Array(e.initData),e.cdmData?new Uint8Array(e.cdmData):null),u=function(e,t){return{session:e,keyId:t.keyId,initData:t.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case y.error:p.trigger(g.KEY_ERROR,{error:new h.Z(d.MEDIA_KEYERR_CODE,"KeyError",this)});break;case y.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;p.trigger(g.INTERNAL_KEY_MESSAGE,{data:new ce(this,t,e.destinationURL)});break;case y.ready:r.debug("DRM: Key added."),p.trigger(g.KEY_ADDED);break;case y.close:r.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),p.trigger(g.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(s,e);s.addEventListener(y.error,u),s.addEventListener(y.message,u),s.addEventListener(y.ready,u),s.addEventListener(y.close,u),l.push(u),r.debug("DRM: Session created.  SessionID = "+u.getSessionId()),p.trigger(g.KEY_SESSION_CREATED,{data:u})},updateKeySession:function(e,t){var r=e.session;c.isClearKey(i)?r.update(new Uint8Array(t.toJWK())):r.update(new Uint8Array(t)),p.trigger(g.KEY_SESSION_UPDATED)},closeKeySession:_,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:v,reset:v},r=m.getLogger(t),n=null,i=null,o=null,a=null,l=[],c=ne(f).getInstance(),u={handleEvent:function(e){if(e.type===y.needkey&&e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;p.trigger(g.NEED_KEY,{key:new ue(t,"cenc")})}}},t}ge.__dashjs_factory_name="ProtectionModel_3Feb2014";var me=dashjs.FactoryMaker.getClassFactory(ge);function ye(e){e=e||{};var t,r,n,i,o,a,l,u,c,f=this.context,p=e.eventBus,g=e.events,m=e.debug,y=e.api,v=e.errHandler;function _(){n&&w();for(var e=0;e<l.length;e++)b(l[e]);p.trigger(g.TEARDOWN_COMPLETE)}function b(e){try{n[y.cancelKeyRequest](i.systemString,e.sessionId)}catch(t){p.trigger(g.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionId+") "+t.message})}}function E(e,t){if(t&&e){for(var r=e.length,n=0;n<r;n++)if(e[n].sessionId==t)return e[n];return null}return null}function w(){n.removeEventListener(y.keyerror,c),n.removeEventListener(y.needkey,c),n.removeEventListener(y.keymessage,c),n.removeEventListener(y.keyadded,c)}return t={getAllInitData:function(){for(var e=[],t=0;t<a.length;t++)e.push(a[t].initData);for(var r=0;r<l.length;r++)e.push(l[r].initData);return e},getSessions:function(){return l.concat(a)},requestKeySystemAccess:function(e){return new Promise(function(t,r){var i=n;i||(i=document.createElement("video"));for(var a=!1,l=0;l<e.length;l++)for(var u=e[l].ks.systemString,c=e[l].configs,f=null,d=0;d<c.length;d++){var h=c[d].videoCapabilities;if(h&&0!==h.length){f=[];for(var m=0;m<h.length;m++)""!==i.canPlayType(h[m].contentType,u)&&f.push(h[m])}if(f&&(!f||0!==f.length)){a=!0;var y=new s(null,f),v=o.getKeySystemBySystemString(u),_=new fe(v,y);p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{data:_}),t({data:_});break}}if(!a){var b="Key system access denied! -- No valid audio/video content configurations detected!";p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{error:b}),r({error:b})}})},selectKeySystem:function(e){return i=e.keySystem,Promise.resolve(i)},setMediaElement:function(e){if(n!==e){if(n){w();for(var t=0;t<l.length;t++)b(l[t]);l=[]}(n=e)&&(n.addEventListener(y.keyerror,c),n.addEventListener(y.needkey,c),n.addEventListener(y.keymessage,c),n.addEventListener(y.keyadded,c),p.trigger(g.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!i)throw new Error("Can not create sessions until you have selected a key system");if(u||0===l.length){var t={sessionId:null,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return a.push(t),n[y.generateKeyRequest](i.systemString,new Uint8Array(e.initData)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var r=e.sessionId;if(o.isClearKey(i))for(var a=0;a<t.keyPairs.length;a++)n[y.addKey](i.systemString,t.keyPairs[a].key,t.keyPairs[a].keyID,r);else n[y.addKey](i.systemString,new Uint8Array(t),new Uint8Array(e.initData),r);p.trigger(g.KEY_SESSION_UPDATED)},closeKeySession:b,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:_,reset:_},r=m.getLogger(t),n=null,i=null,a=[],l=[],o=ne(f).getInstance(),c={handleEvent:function(e){var t=null;switch(e.type){case y.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;p.trigger(g.NEED_KEY,{key:new ue(n,"cenc")});break;case y.keyerror:if((t=E(l,e.sessionId))||(t=E(a,e.sessionId)),t){var i=d.MEDIA_KEYERR_CODE,o="";switch(e.errorCode.code){case 1:i=d.MEDIA_KEYERR_UNKNOWN_CODE,o+="MEDIA_KEYERR_UNKNOWN - "+d.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:i=d.MEDIA_KEYERR_CLIENT_CODE,o+="MEDIA_KEYERR_CLIENT - "+d.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:i=d.MEDIA_KEYERR_SERVICE_CODE,o+="MEDIA_KEYERR_SERVICE - "+d.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:i=d.MEDIA_KEYERR_OUTPUT_CODE,o+="MEDIA_KEYERR_OUTPUT - "+d.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:i=d.MEDIA_KEYERR_HARDWARECHANGE_CODE,o+="MEDIA_KEYERR_HARDWARECHANGE - "+d.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:i=d.MEDIA_KEYERR_DOMAIN_CODE,o+="MEDIA_KEYERR_DOMAIN - "+d.MEDIA_KEYERR_DOMAIN_MESSAGE}o+="  System Code = "+e.systemCode,p.trigger(g.KEY_ERROR,{error:new h.Z(i,o,t)})}else r.error("No session token found for key error");break;case y.keyadded:(t=E(l,e.sessionId))||(t=E(a,e.sessionId)),t?(r.debug("DRM: Key added."),p.trigger(g.KEY_ADDED,{data:t})):r.debug("No session token found for key added");break;case y.keymessage:if((u=null!==e.sessionId&&void 0!==e.sessionId)?!(t=E(l,e.sessionId))&&a.length>0&&(t=a.shift(),l.push(t),t.sessionId=e.sessionId,p.trigger(g.KEY_SESSION_CREATED,{data:t})):a.length>0&&(t=a.shift(),l.push(t),0!==a.length&&v.error(new h.Z(d.MEDIA_KEY_MESSAGE_ERROR_CODE,d.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),t){var s=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=s,p.trigger(g.INTERNAL_KEY_MESSAGE,{data:new ce(t,s,e.defaultURL)})}else r.warn("No session token found for key message")}}},t}ye.__dashjs_factory_name="ProtectionModel_01b";var ve=dashjs.FactoryMaker.getClassFactory(ye),_e=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],be=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Ee(){var e,t=this.context;function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];if("function"==typeof e[n[Object.keys(n)[0]]])return n}return null}return e={createProtectionSystem:function(n){var i=null,o=ne(t).getInstance();o.setConfig({debug:n.debug,BASE64:n.BASE64,settings:n.settings}),o.initialize();var a=function(n){var i=n.debug,o=i.getLogger(e),a=n.eventBus,s=n.errHandler,l=n.videoModel?n.videoModel.getElement():null;return l&&void 0===l.onencrypted||l&&void 0===l.mediaKeys?r(l,be)?(o.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),me(t).create({debug:i,eventBus:a,events:n.events,api:r(l,be)})):r(l,_e)?(o.info("EME detected on this user agent! (ProtectionModel_01b)"),ve(t).create({debug:i,eventBus:a,errHandler:s,events:n.events,api:r(l,_e)})):(o.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(o.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),pe(t).create({debug:i,eventBus:a,events:n.events}))}(n);return!i&&a&&(i=w(t).create({protectionModel:a,protectionKeyController:o,eventBus:n.eventBus,debug:n.debug,events:n.events,BASE64:n.BASE64,constants:n.constants,cmcdModel:n.cmcdModel,customParametersModel:n.customParametersModel,settings:n.settings}),n.capabilities.setEncryptedMediaSupported(!0)),i}}}Ee.__dashjs_factory_name="Protection";var we=dashjs.FactoryMaker.getClassFactory(Ee);we.events=le,we.errors=d,dashjs.FactoryMaker.updateClassFactory(Ee.__dashjs_factory_name,we);var Se=we},2068:function(e,t,r){"use strict";var n=r(5448),i={DEFAULT:.5,STRONG:1,WEAK:0};function o(e,t,r){var n,o;return n=void 0===e?-1:e,o=function(e){var t=i.DEFAULT;return e!==i.DEFAULT&&e!==i.STRONG&&e!==i.WEAK||(t=e),t}(r),{quality:n,reason:void 0===t?null:t,priority:o}}o.__dashjs_factory_name="SwitchRequest";var a=n.Z.getClassFactory(o);a.NO_CHANGE=-1,a.PRIORITY=i,n.Z.updateClassFactory(o.__dashjs_factory_name,a),t.Z=a},1767:function(e,t,r){"use strict";var n=r(5628),i=r(6535),o=r(7423),a=r(895),s=r(6070),l=r(3112),u=r(1914),c=r(5435),f=r(5448),d=r(2068),h=r(3393),p="qualitySwitchRules",g="abandonFragmentRules";function m(e){e=e||{};var t,r,f=this.context,m=e.mediaPlayerModel,y=e.customParametersModel,v=e.dashMetrics,_=e.settings;function b(e){return e.filter(function(e){return e.quality>d.Z.NO_CHANGE})}function E(e){var t,r,n,i,o,a={},s=null;if(0!==e.length){for(a[d.Z.PRIORITY.STRONG]={quality:d.Z.NO_CHANGE,reason:null},a[d.Z.PRIORITY.WEAK]={quality:d.Z.NO_CHANGE,reason:null},a[d.Z.PRIORITY.DEFAULT]={quality:d.Z.NO_CHANGE,reason:null},t=0,r=e.length;t<r;t+=1)(n=e[t]).quality!==d.Z.NO_CHANGE&&(a[n.priority].quality===d.Z.NO_CHANGE||a[n.priority].quality>n.quality)&&(a[n.priority].quality=n.quality,a[n.priority].reason=n.reason||null);return a[d.Z.PRIORITY.WEAK].quality!==d.Z.NO_CHANGE&&(s=a[d.Z.PRIORITY.WEAK]),a[d.Z.PRIORITY.DEFAULT].quality!==d.Z.NO_CHANGE&&(s=a[d.Z.PRIORITY.DEFAULT]),a[d.Z.PRIORITY.STRONG].quality!==d.Z.NO_CHANGE&&(s=a[d.Z.PRIORITY.STRONG]),s&&(i=s.quality,o=s.reason),(0,d.Z)(f).create(i,o)}}return{initialize:function(){t=[],r=[],_.get().streaming.abr.useDefaultABRRules&&(_.get().streaming.abr.ABRStrategy===h.Z.ABR_STRATEGY_L2A?t.push((0,u.Z)(f).create({dashMetrics:v,settings:_})):_.get().streaming.abr.ABRStrategy===h.Z.ABR_STRATEGY_LoLP?t.push((0,c.Z)(f).create({dashMetrics:v})):(t.push((0,l.Z)(f).create({dashMetrics:v,mediaPlayerModel:m,settings:_})),t.push((0,n.Z)(f).create({dashMetrics:v})),_.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&t.push((0,i.Z)(f).create({dashMetrics:v,settings:_})),_.get().streaming.abr.additionalAbrRules.switchHistoryRule&&t.push((0,s.Z)(f).create()),_.get().streaming.abr.additionalAbrRules.droppedFramesRule&&t.push((0,a.Z)(f).create()),_.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&r.push((0,o.Z)(f).create({dashMetrics:v,mediaPlayerModel:m,settings:_})))),y.getAbrCustomRules().forEach(function(e){e.type===p&&t.push(e.rule(f).create()),e.type===g&&r.push(e.rule(f).create())})},reset:function(){[t,r].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),t=[],r=[]},getMaxQuality:function(e){return E(b(t.map(function(t){return t.getMaxIndex(e)})))||(0,d.Z)(f).create()},getMinSwitchRequest:E,shouldAbandonFragment:function(e,t){var n=E(b(r.map(function(r){return r.shouldAbandon(e,t)})));return n&&(n.reason.forceAbandon=!0),n||(0,d.Z)(f).create()},getQualitySwitchRules:function(){return t}}}m.__dashjs_factory_name="ABRRulesCollection";var y=f.Z.getClassFactory(m);y.QUALITY_SWITCH_RULES=p,y.ABANDON_FRAGMENT_RULES=g,f.Z.updateSingletonFactory(m.__dashjs_factory_name,y),t.Z=y},7423:function(e,t,r){"use strict";var n=r(2068),i=r(5448),o=r(6398);function a(e){e=e||{};var t,r,i,s,l,u=this.context,c=e.mediaPlayerModel,f=e.dashMetrics,d=e.settings;function h(){i={},s={},l=[]}return t={shouldAbandon:function(e){var t=(0,n.Z)(u).create(n.Z.NO_CHANGE,{name:a.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var o,h,p=e.getMediaInfo(),g=e.getMediaType(),m=e.getStreamInfo(),y=m?m.id:null,v=e.getCurrentRequest();if(!isNaN(v.index)){o=g,h=v.index,i[o]=i[o]||{},i[o][h]=i[o][h]||{};var _=c.getStableBufferTime();if(f.getCurrentBufferLevel(g)>_)return t;var b=i[g][v.index];if(null===b||null===v.firstByteDate||s.hasOwnProperty(b.id))return t;if(void 0===b.firstByteTime&&(l[g]=[],b.firstByteTime=v.firstByteDate.getTime(),b.segmentDuration=v.duration,b.bytesTotal=v.bytesTotal,b.id=v.index),b.bytesLoaded=v.bytesLoaded,b.elapsedTime=(new Date).getTime()-b.firstByteTime,b.bytesLoaded>0&&b.elapsedTime>0&&function(e,t){l[e]=l[e]||[],l[e].push(t)}(g,Math.round(8*b.bytesLoaded/b.elapsedTime)),l[g].length>=d.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&b.elapsedTime>d.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&b.bytesLoaded<b.bytesTotal){var E=l[g].reduce(function(e,t){return e+t},0);if(b.measuredBandwidthInKbps=Math.round(E/l[g].length),b.estimatedTimeOfDownload=+(8*b.bytesTotal/b.measuredBandwidthInKbps/1e3).toFixed(2),b.estimatedTimeOfDownload<b.segmentDuration*d.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||0===e.getRepresentationInfo().quality)return t;if(!s.hasOwnProperty(b.id)){var w=e.getAbrController(),S=b.bytesTotal-b.bytesLoaded,T=w.getBitrateList(p),A=w.getQualityForBitrate(p,b.measuredBandwidthInKbps*d.get().streaming.abr.bandwidthSafetyFactor,y),I=w.getMinAllowedIndexFor(g,y),R=void 0!==I?Math.max(I,A):A;S>b.bytesTotal*T[R].bitrate/T[w.getQualityFor(g,y)].bitrate&&(t.quality=R,t.reason.throughput=b.measuredBandwidthInKbps,t.reason.fragmentID=b.id,t.reason.rule=this.getClassName(),s[b.id]=b,r.debug("["+g+"] frag id",b.id," is asking to abandon and switch to quality to ",R," measured bandwidth was",b.measuredBandwidthInKbps),delete i[g][b.id])}}else b.bytesLoaded===b.bytesTotal&&delete i[g][b.id]}return t},reset:h},r=(0,o.Z)(u).getInstance().getLogger(t),h(),t}a.__dashjs_factory_name="AbandonRequestsRule",t.Z=i.Z.getClassFactory(a)},3112:function(e,t,r){"use strict";var n=r(3860),i=r(2068),o=r(5448),a=r(7855),s=r(5595),l=r(8512),u=r(6398),c=r(8825),f=r(3393),d=10;function h(e){e=e||{};var t,r,o,h=this.context,p=e.dashMetrics,g=e.mediaPlayerModel,m=(0,s.Z)(h).getInstance();function y(e,t,r){var n=r.reduce(function(e,t,n){return t>r[e]?n:e},0);if(0===n)return null;var i=Math.max(e,d+2*t.length),o=(r[n]-1)/(i/d-1);return{gp:o,Vp:d/o}}function v(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function _(e,t){var r=g.getStableBufferTime();if(e.stableBufferTime!==r){var n=y(r,e.bitrates,e.utilities);if(n.Vp!==e.Vp||n.gp!==e.gp){var i=p.getCurrentBufferLevel(t),o=i+e.placeholderBuffer;o-=d,o*=n.Vp/e.Vp,o+=d,e.stableBufferTime=r,e.Vp=n.Vp,e.gp=n.gp,e.placeholderBuffer=Math.max(0,o-i)}}}function b(e,t){return e.Vp*(e.utilities[t]+e.gp)}function E(e,t){for(var r=e.bitrates[t],n=e.utilities[t],i=0,o=t-1;o>=0;--o)if(e.utilities[o]<e.utilities[t]){var a=e.bitrates[o],s=e.utilities[o],l=e.Vp*(e.gp+(r*s-a*n)/(r-a));i=Math.max(i,l)}return i}function w(e){var t=e.mediaType===f.Z.AUDIO?[f.Z.AUDIO]:o;for(var r in t)o.hasOwnProperty(r)&&2===o[r].state&&(o[r].placeholderBuffer=0)}function S(){for(var e in o)if(o.hasOwnProperty(e)){var t=o[e];0!==t.state&&(t.state=1,v(t))}}function T(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=o[e.chunk.mediaInfo.type];if(t&&0!==t.state){var r=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||r>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=r,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=r,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,I(t,e.chunk.mediaInfo.type)}}}function A(e){if(e&&e.metric===n.Z.HTTP_REQUEST&&e.value&&e.value.type===a.w.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=o[e.mediaType];t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),I(t,e.mediaType))}}function I(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=.99,!isNaN(e.lastSegmentFinishTimeMs)){var r=p.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),n=b(e,e.lastQuality),i=Math.max(0,n-r);e.placeholderBuffer=Math.min(i,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function R(e){if(e){var t=o[e.mediaType];t&&0!==t.state&&(t.abrQuality=e.newQuality)}}function N(e){if(e){var t=o[e.mediaType];if(t&&0!==t.state){var r,n=p.getCurrentBufferLevel(e.mediaType);r=t.abrQuality>0?E(t,t.abrQuality):d;var i=Math.max(0,r-n);t.placeholderBuffer=Math.min(t.placeholderBuffer,i)}}}function C(){o={}}return t={getMaxIndex:function(e){var t=(0,i.Z)(h).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")))return t;var n=e.getMediaInfo(),a=e.getMediaType(),s=e.getScheduleController(),l=e.getStreamInfo(),u=e.getAbrController(),c=u.getThroughputHistory(),f=l?l.id:null,d=l&&l.manifestInfo&&l.manifestInfo.isDynamic,m=e.useBufferOccupancyABR();if(t.reason=t.reason||{},!m)return t;s.setTimeToLoadDelay(0);var w=function(e){var t=e.getMediaType(),r=o[t];return r?0!==r.state&&_(r,t):(r=function(e){var t={},r=e.getMediaInfo().bitrateList.map(function(e){return e.bandwidth}),n=function(e){return e.map(function(e){return Math.log(e)})}(r);n=n.map(function(e){return e-n[0]+1});var i=g.getStableBufferTime(),o=y(i,r,n);return o?(t.state=1,t.bitrates=r,t.utilities=n,t.stableBufferTime=i,t.Vp=o.Vp,t.gp=o.gp,t.lastQuality=0,v(t)):t.state=0,t}(e),o[t]=r),r}(e);if(0===w.state)return t;var S,T=p.getCurrentBufferLevel(a),A=c.getAverageThroughput(a,d),I=c.getSafeAverageThroughput(a,d),R=c.getAverageLatency(a);if(t.reason.state=w.state,t.reason.throughput=A,t.reason.latency=R,isNaN(A))return t;switch(w.state){case 1:S=u.getQualityForBitrate(n,I,f,R),t.quality=S,t.reason.throughput=I,w.placeholderBuffer=Math.max(0,E(w,S)-T),w.lastQuality=S,!isNaN(w.lastSegmentDurationS)&&T>=w.lastSegmentDurationS&&(w.state=2);break;case 2:!function(e,t){var r=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){var n=.001*(r-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,n)}}else{var i=.001*(r-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,i)}e.lastCallTimeMs=r,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,_(e,t)}(w,a),S=function(e,t){for(var r=e.bitrates.length,n=NaN,i=NaN,o=0;o<r;++o){var a=(e.Vp*(e.utilities[o]+e.gp)-t)/e.bitrates[o];(isNaN(i)||a>=i)&&(i=a,n=o)}return n}(w,T+w.placeholderBuffer);var N=u.getQualityForBitrate(n,I,f,R);S>w.lastQuality&&S>N&&(S=Math.max(N,w.lastQuality));var C=Math.max(0,T+w.placeholderBuffer-b(w,S));C<=w.placeholderBuffer?(w.placeholderBuffer-=C,C=0):(C-=w.placeholderBuffer,w.placeholderBuffer=0,S<u.getMaxAllowedIndexFor(a,f)?s.setTimeToLoadDelay(1e3*C):C=0),t.quality=S,t.reason.throughput=A,t.reason.latency=R,t.reason.bufferLevel=T,t.reason.placeholderBuffer=w.placeholderBuffer,t.reason.delay=C,w.lastQuality=S;break;default:r.debug("BOLA ABR rule invoked in bad state."),t.quality=u.getQualityForBitrate(n,I,f,R),t.reason.state=w.state,t.reason.throughput=I,t.reason.latency=R,w.state=1,v(w)}return t},reset:function(){C(),m.off(c.Z.BUFFER_EMPTY,w,t),m.off(c.Z.PLAYBACK_SEEKING,S,t),m.off(c.Z.METRIC_ADDED,A,t),m.off(c.Z.QUALITY_CHANGE_REQUESTED,R,t),m.off(c.Z.FRAGMENT_LOADING_ABANDONED,N,t),m.off(l.Z.MEDIA_FRAGMENT_LOADED,T,t)}},r=(0,u.Z)(h).getInstance().getLogger(t),C(),m.on(c.Z.BUFFER_EMPTY,w,t),m.on(c.Z.PLAYBACK_SEEKING,S,t),m.on(c.Z.METRIC_ADDED,A,t),m.on(c.Z.QUALITY_CHANGE_REQUESTED,R,t),m.on(c.Z.FRAGMENT_LOADING_ABANDONED,N,t),m.on(l.Z.MEDIA_FRAGMENT_LOADED,T,t),t}h.__dashjs_factory_name="BolaRule",t.Z=o.Z.getClassFactory(h)},895:function(e,t,r){"use strict";var n=r(5448),i=r(2068),o=r(6398);function a(){var e,t,r=this.context;return e={getMaxIndex:function(e){var n=(0,i.Z)(r).create();if(!e||!e.hasOwnProperty("getDroppedFramesHistory"))return n;var o=e.getDroppedFramesHistory(),a=e.getStreamInfo().id;if(o){var s=o.getFrameHistory(a);if(!s||0===s.length)return n;for(var l=0,u=0,c=i.Z.NO_CHANGE,f=1;f<s.length;f++)if(s[f]&&(l=s[f].droppedVideoFrames,(u=s[f].totalVideoFrames)>375&&l/u>.15)){c=f-1,t.debug("index: "+c+" Dropped Frames: "+l+" Total Frames: "+u);break}return(0,i.Z)(r).create(c,{droppedFrames:l})}return n}},t=(0,o.Z)(r).getInstance().getLogger(e),e}a.__dashjs_factory_name="DroppedFramesRule",t.Z=n.Z.getClassFactory(a)},6535:function(e,t,r){"use strict";var n=r(5595),i=r(8512),o=r(5448),a=r(6398),s=r(2068),l=r(3393),u=r(3860),c=r(8825);function f(e){e=e||{};var t,r,o,f=this.context,d=(0,n.Z)(f).getInstance(),h=e.dashMetrics;function p(){(o={})[l.Z.VIDEO]={ignoreCount:2},o[l.Z.AUDIO]={ignoreCount:2}}function g(){p()}function m(e){isNaN(e.startTime)||e.mediaType!==l.Z.AUDIO&&e.mediaType!==l.Z.VIDEO||o[e.mediaType].ignoreCount>0&&o[e.mediaType].ignoreCount--}return t={getMaxIndex:function(e){var t=(0,s.Z)(f).create();if(!e||!e.hasOwnProperty("getMediaType"))return t;!function(){if(!h||!h.hasOwnProperty("getCurrentBufferLevel")||!h.hasOwnProperty("getCurrentBufferState"))throw new Error(l.Z.MISSING_CONFIG_ERROR)}();var n=e.getMediaType(),i=h.getCurrentBufferState(n),a=e.getRepresentationInfo().fragmentDuration,c=e.getStreamInfo(),d=c?c.id:null,p=e.getScheduleController(),g=c&&c.manifestInfo&&c.manifestInfo.isDynamic;if(function(e,t){return!e&&o[t].ignoreCount>0}(p.getPlaybackController().getLowLatencyModeEnabled(),n)||!a)return t;if(i&&i.state===u.Z.BUFFER_EMPTY)r.debug("["+n+"] Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty";else{var m=e.getMediaInfo(),y=e.getAbrController(),v=y.getThroughputHistory(),_=h.getCurrentBufferLevel(n),b=v.getAverageThroughput(n,g),E=v.getAverageLatency(n),w=b*(_/a)*.5;t.quality=y.getQualityForBitrate(m,w,d,E),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return t},reset:function(){p(),d.off(c.Z.PLAYBACK_SEEKING,g,t),d.off(i.Z.BYTES_APPENDED_END_FRAGMENT,m,t)}},r=(0,a.Z)(f).getInstance().getLogger(t),p(),d.on(c.Z.PLAYBACK_SEEKING,g,t),d.on(i.Z.BYTES_APPENDED_END_FRAGMENT,m,t),t}f.__dashjs_factory_name="InsufficientBufferRule",t.Z=o.Z.getClassFactory(f)},1914:function(e,t,r){"use strict";var n=r(3860),i=r(2068),o=r(5448),a=r(7855),s=r(5595),l=r(8512),u=r(6398),c=r(3393);function f(e){e=e||{};var t,r,o,f,d=this.context,h=e.dashMetrics,p=(0,s.Z)(d).getInstance();function g(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,e.lastSegmentUrl=""}function m(){for(var e in r)if(r.hasOwnProperty(e)){var t=r[e];0!==t.state&&(t.state=1,g(t))}}function y(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=r[e.chunk.mediaInfo.type],n=o[e.chunk.mediaInfo.type];if(t&&0!==t.state){var i=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||i>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=i,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=i,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,_(t,n)}}}function v(e){if(e&&e.metric===n.Z.HTTP_REQUEST&&e.value&&e.value.type===a.w.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=r[e.mediaType],i=o[e.mediaType];t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),_(t,i))}}function _(e,t){isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||(t.segment_request_start_s=.001*e.lastSegmentRequestTimeMs,t.segment_download_finish_s=.001*e.lastSegmentFinishTimeMs,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function b(e){if(e&&e.mediaType){var t=r[e.mediaType];t&&0!==t.state&&(t.abrQuality=e.newQuality)}}function E(e,t){if(e.length!==t.length)return-1;for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r}function w(){r={},o={}}return t={getMaxIndex:function(e){var t,n=(0,i.Z)(d).create(),s=Math.pow(4,.99),l=Math.max(Math.pow(4,1),s*Math.sqrt(4)),u=e.getMediaInfo(),p=e.getMediaType(),m=u.bitrateList.map(function(e){return e.bandwidth}),y=m.length,v=e.getScheduleController(),_=e.getStreamInfo(),b=e.getAbrController(),w=b.getThroughputHistory(),S=_&&_.manifestInfo&&_.manifestInfo.isDynamic,T=e.useL2AABR(),A=h.getCurrentBufferLevel(p,!0),I=w.getSafeAverageThroughput(p,S),R=w.getAverageThroughput(p,S),N=w.getAverageLatency(p),C=e.getVideoModel().getPlaybackRate();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useL2AABR")))return n;if(n.reason=n.reason||{},!T||p===c.Z.AUDIO)return n;v.setTimeToLoadDelay(0);var O=function(e){var t=e.getMediaType(),n=r[t];return n||(n=function(e){var t={},r=e.getMediaInfo(),n=r.bitrateList.map(function(e){return e.bandwidth/1e3});return t.state=1,t.bitrates=n,t.lastQuality=0,function(e){e&&e.type&&(o[e.type]={},o[e.type].w=[],o[e.type].prev_w=[],o[e.type].Q=0,o[e.type].segment_request_start_s=0,o[e.type].segment_download_finish_s=0,o[e.type].B_target=1.5)}(r),g(t),t}(e),r[t]=n),n}(e);if(0===O.state)return n;var P=o[p];if(!P)return n;if(n.reason.state=O.state,n.reason.throughput=R,n.reason.latency=N,isNaN(R))return n;switch(O.state){case 1:if(t=b.getQualityForBitrate(u,I,_.id,N),n.quality=t,n.reason.throughput=I,O.lastQuality=t,!isNaN(O.lastSegmentDurationS)&&A>=P.B_target){O.state=2,P.Q=s;for(var x=0;x<y;++x)x===O.lastQuality?P.prev_w[x]=1:P.prev_w[x]=0}break;case 2:var D=[],k=h.getCurrentHttpRequest(p).trace.reduce(function(e,t){return e+t.d},0),M=h.getCurrentHttpRequest(p).trace.reduce(function(e,t){return e+t.b[0]},0),L=Math.round(8*M/k),F=h.getCurrentHttpRequest(p);if(L<1&&(L=1),F.url===O.lastSegmentUrl||F.type===a.w.INIT_SEGMENT_TYPE)t=O.lastQuality;else{for(var U=O.lastSegmentDurationS,B=1,j=0;j<y;++j)m[j]=m[j]/1e3,C*m[j]>L&&(B=-1),P.w[j]=P.prev_w[j]+B*(U/(2*l))*((P.Q+s)*(C*m[j]/L));P.w=function(e){for(var t=e.length,r=!1,n=[],i=0;i<t;++i)n[i]=e[i];for(var o=e.sort(function(e,t){return t-e}),a=0,s=0,l=[],u=0;u<t-1;++u)if((s=((a+=o[u])-1)/(u+1))>=o[u+1]){r=!0;break}r||(s=(a+o[t-1]-1)/t);for(var c=0;c<t;++c)l[c]=Math.max(n[c]-s,0);return l}(P.w);for(var Z=0;Z<y;++Z)D[Z]=P.w[Z]-P.prev_w[Z],P.prev_w[Z]=P.w[Z];P.Q=Math.max(0,P.Q-U+U*C*((E(m,P.prev_w)+E(m,D))/L));for(var q=[],G=0;G<y;++G)q[G]=Math.abs(m[G]-E(P.w,m));(t=q.indexOf(Math.min.apply(Math,q)))>O.lastQuality&&m[O.lastQuality+1]<=L&&(t=O.lastQuality+1),m[t]>=L&&(P.Q=2*Math.max(s,P.Q)),O.lastSegmentUrl=F.url}n.quality=t,n.reason.throughput=R,n.reason.latency=N,n.reason.bufferLevel=A,O.lastQuality=n.quality;break;default:f.debug("L2A ABR rule invoked in bad state."),n.quality=b.getQualityForBitrate(u,I,_.id,N),n.reason.state=O.state,n.reason.throughput=I,n.reason.latency=N,O.state=1,g(O)}return n},reset:function(){w(),p.off(l.Z.PLAYBACK_SEEKING,m,t),p.off(l.Z.MEDIA_FRAGMENT_LOADED,y,t),p.off(l.Z.METRIC_ADDED,v,t),p.off(l.Z.QUALITY_CHANGE_REQUESTED,b,t)}},f=(0,u.Z)(d).getInstance().getLogger(t),w(),p.on(l.Z.PLAYBACK_SEEKING,m,t),p.on(l.Z.MEDIA_FRAGMENT_LOADED,y,t),p.on(l.Z.METRIC_ADDED,v,t),p.on(l.Z.QUALITY_CHANGE_REQUESTED,b,t),t}f.__dashjs_factory_name="L2ARule",t.Z=o.Z.getClassFactory(f)},6070:function(e,t,r){"use strict";var n=r(5448),i=r(6398),o=r(2068);function a(){var e,t,r=this.context;return e={getMaxIndex:function(e){for(var n=e?e.getSwitchHistory():null,i=n?n.getSwitchRequests():[],a=0,s=0,l=0,u=(0,o.Z)(r).create(),c=0;c<i.length;c++)if(void 0!==i[c]&&(a+=i[c].drops,s+=i[c].noDrops,l+=i[c].dropSize,a+s>=6&&a/s>.075)){u.quality=c>0&&i[c].drops>0?c-1:c,u.reason={index:u.quality,drops:a,noDrops:s,dropSize:l},t.debug("Switch history rule index: "+u.quality+" samples: "+(a+s)+" drops: "+a);break}return u}},t=(0,i.Z)(r).getInstance().getLogger(e),e}a.__dashjs_factory_name="SwitchHistoryRule",t.Z=n.Z.getClassFactory(a)},5628:function(e,t,r){"use strict";var n=r(5448),i=r(2068),o=r(3393),a=r(3860);function s(e){e=e||{};var t=this.context,r=e.dashMetrics;return{getMaxIndex:function(e){var n=(0,i.Z)(t).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return n;!function(){if(!r||!r.hasOwnProperty("getCurrentBufferState"))throw new Error(o.Z.MISSING_CONFIG_ERROR)}();var s=e.getMediaInfo(),l=e.getMediaType(),u=r.getCurrentBufferState(l),c=e.getScheduleController(),f=e.getAbrController(),d=e.getStreamInfo(),h=d?d.id:null,p=d&&d.manifestInfo?d.manifestInfo.isDynamic:null,g=f.getThroughputHistory(),m=g.getSafeAverageThroughput(l,p),y=g.getAverageLatency(l),v=e.useBufferOccupancyABR();return isNaN(m)||!u||v||f.getAbandonmentStateFor(h,l)!==a.Z.ABANDON_LOAD&&(u.state===a.Z.BUFFER_LOADED||p)&&(n.quality=f.getQualityForBitrate(s,m,h,y),c.setTimeToLoadDelay(0),n.reason={throughput:m,latency:y}),n},reset:function(){}}}s.__dashjs_factory_name="ThroughputRule",t.Z=n.Z.getClassFactory(s)},4722:function(e,t,r){"use strict";var n=r(5448),i=r(6398);function o(){var e,t,r,n,o,a,s,l,u,c=this.context;function f(){r=null,n=1,o=100,a=0,s=null,l=null,u="dynamic_weight_selection"}function d(){var e=0;if(r)for(var t=0;t<r.length;t++){var n=r[t];n.state.throughput>e&&(e=n.state.throughput)}return e}function h(e,t,r){var n=e.map(function(e,n){return r[n]*Math.pow(e-t[n],2)}).reduce(function(e,t){return e+t});return(n<0?-1:1)*Math.sqrt(Math.abs(n))}function p(e,t){return h([e.state.throughput,e.state.latency,e.state.rebuffer,e.state.switch],[t.state.throughput,t.state.latency,t.state.rebuffer,t.state.switch],[1,1,1,1])}function g(e,t,r){for(var n=0;n<t.length;n++){var i=t[n],o=p(i,e);m(i,r,Math.exp(-1*Math.pow(o,2)/(2*Math.pow(.1,2))))}}function m(e,t,r){var n=e.state,i=[.01,.01,.01,.01];n.throughput=n.throughput+(t[0]-n.throughput)*i[0]*r,n.latency=n.latency+(t[1]-n.latency)*i[1]*r,n.rebuffer=n.rebuffer+(t[2]-n.rebuffer)*i[2]*r,n.switch=n.switch+(t[3]-n.switch)*i[3]*r}return e={getNextQuality:function(e,i,c,f,p,m,y){var v=c,_=f,b=i,E=function(e){if(!r){r=[];var t=e.bitrateList,i=[];a=t[0].bandwidth,t.forEach(function(e){i.push(e.bandwidth),e.bandwidth<a&&(a=e.bandwidth)}),u=i.map(function(e){return Math.pow(e,2)}).reduce(function(e,t){return e+t}),n=Math.sqrt(u);for(var o=0;o<t.length;o++){var s={qualityIndex:o,bitrate:t[o].bandwidth,state:{throughput:t[o].bandwidth/n,latency:0,rebuffer:0,switch:0}};r.push(s)}l=function(e){var t=[],r=function(e){for(var t=[],r=0;r<e;r++){var n=[Math.random()*d(),Math.random(),Math.random(),Math.random()];t.push(n)}return t}(Math.pow(e.length,2));t.push(r[0]);for(var n=[1,1,1,1],i=1;i<e.length;i++){for(var o=null,a=null,s=0;s<r.length;s++){for(var l=r[s],u=null,c=0;c<t.length;c++){var f=h(l,t[c],n);(null===u||f<u)&&(u=f)}(null===a||u>a)&&(o=l,a=u)}t.push(o)}for(var p=null,g=null,m=0;m<t.length;m++){for(var y=0,v=0;v<t.length;v++)m!==v&&(y+=h(t[m],t[v],n));(null===p||y>p)&&(p=y,g=m)}var _=[];for(_.push(t[g]),t.splice(g,1);t.length>0;){for(var b=null,E=null,w=0;w<t.length;w++){var S=h(_[0],t[w],n);(null===b||S<b)&&(b=S,E=w)}_.push(t[E]),t.splice(E,1)}return _}(r)}var u;return r}(e),w=i/n;w>1&&(w=d()),c/=o,t.debug("getNextQuality called throughput:".concat(w," latency:").concat(c," bufferSize:").concat(f," currentQualityIndex:").concat(m," playbackRate:").concat(p));var S=E[m],T=S.bitrate*y.getSegmentDuration()/b,A=Math.max(0,T-_);if(_-T<y.getMinBuffer())return t.debug("Buffer is low for bitrate= ".concat(S.bitrate," downloadTime=").concat(T," currentBuffer=").concat(_," rebuffer=").concat(A)),function(e,t){var n=0,i=e;if(r)for(var o=0;o<r.length;o++){var a=r[o];a.bitrate<e.bitrate&&a.bitrate>n&&t>a.bitrate&&(n=a.bitrate,i=a)}return i}(S,b).qualityIndex;switch(u){case"manual_weight_selection":s=[.4,.4,.4,.4];break;case"random_weight_selection":!function(e){s=function(e){for(var t=[],r=Math.sqrt(2/e),n=0;n<4;n++)t.push(Math.random()*r);return s=t}(e.length)}(E);break;default:!function(e,t,r,n,i,o,a){s||(s=l[l.length-1]);var u=e.findWeightVector(t,r,n,i,o,a);null!==u&&-1!==u&&(s=u)}(y,E,v,_,A,b,p)}for(var I=null,R=null,N=null,C=0;C<E.length;C++){var O=E[C],P=O.state,x=[P.throughput,P.latency,P.rebuffer,P.switch],D=s.slice(),k=y.getNextBufferWithBitrate(O.bitrate,_,b),M=k<y.getMinBuffer();M&&t.debug("Buffer is low for bitrate=".concat(O.bitrate," downloadTime=").concat(T," currentBuffer=").concat(_," nextBuffer=").concat(k)),(O.bitrate>i-1e4||M)&&O.bitrate!==a&&(D[0]=100);var L=h(x,[w,0,0,0],D);(null===I||L<I)&&(I=L,R=O.qualityIndex,N=O)}var F=Math.abs(S.bitrate-N.bitrate)/n;return g(S,E,[w,c,A,F]),g(N,E,[w,0,0,F]),R},reset:function(){f()}},t=(0,i.Z)(c).getInstance().getLogger(e),f(),e}o.__dashjs_factory_name="LearningAbrController",t.Z=n.Z.getClassFactory(o)},5317:function(e,t,r){"use strict";var n=r(5448),i=r(2298);function o(){var e,t,r,n,o;function a(){t=null,r=null,n=null,o=null}function s(e,t,r,n){var o=new i.Z;return o.type=e,o.weights.bitrateReward=t||1,o.weights.bitrateSwitchPenalty=1,o.weights.rebufferPenalty=r||1e3,o.weights.latencyPenalty=[],o.weights.latencyPenalty.push({threshold:1.1,penalty:.05*n}),o.weights.latencyPenalty.push({threshold:1e8,penalty:.1*r}),o.weights.playbackSpeedPenalty=n||200,o}function l(e,t,r,n,i){i.bitrateWSum+=i.weights.bitrateReward*e,i.lastBitrate&&(i.bitrateSwitchWSum+=i.weights.bitrateSwitchPenalty*Math.abs(e-i.lastBitrate)),i.lastBitrate=e,i.rebufferWSum+=i.weights.rebufferPenalty*t;for(var o=0;o<i.weights.latencyPenalty.length;o++){var a=i.weights.latencyPenalty[o];if(r<=a.threshold){i.latencyWSum+=a.penalty*r;break}}i.playbackSpeedWSum+=i.weights.playbackSpeedPenalty*Math.abs(1-n),i.totalQoe=i.bitrateWSum-i.bitrateSwitchWSum-i.rebufferWSum-i.latencyWSum-i.playbackSpeedWSum}return e={setupPerSegmentQoe:function(e,i,a){t=s("segment",e,i,a),r=e,n=i,o=a},logSegmentMetrics:function(e,r,n,i){t&&l(e,r,n,i,t)},getPerSegmentQoe:function(){return t},calculateSingleUseQoe:function(e,t,i,a){var u=null;return r&&n&&o&&(u=s("segment",r,n,o)),u?(l(e,t,i,a,u),u.totalQoe):0},reset:function(){a()}},a(),e}o.__dashjs_factory_name="LoLpQoeEvaluator",t.Z=n.Z.getClassFactory(o)},5435:function(e,t,r){"use strict";var n=r(6398),i=r(5448),o=r(4722),a=r(5317),s=r(2068),l=r(3860),u=r(6523),c=r(3393);function f(e){var t,r,i,f,d=(e=e||{}).dashMetrics,h=this.context;return r={getMaxIndex:function(e){try{var r=(0,s.Z)(h).create(),n=e.getMediaInfo().type,o=e.getAbrController(),a=e.getStreamInfo(),p=o.getQualityFor(n,a.id),g=e.getMediaInfo(),m=d.getCurrentBufferState(n),y=e.getScheduleController(),v=d.getCurrentBufferLevel(n,!0),_=a&&a.manifestInfo?a.manifestInfo.isDynamic:null,b=y.getPlaybackController(),E=b.getCurrentLiveLatency();if(!e.useLoLPABR()||n===c.Z.AUDIO)return r;E||(E=0);var w=b.getPlaybackRate(),S=o.getThroughputHistory().getSafeAverageThroughput(n,_);if(t.debug("Throughput ".concat(Math.round(S)," kbps")),isNaN(S)||!m)return r;if(o.getAbandonmentStateFor(a.id,n)===l.Z.ABANDON_LOAD)return r;for(var T=g.bitrateList,A=e.getRepresentationInfo().fragmentDuration,I=T[0].bandwidth/1e3,R=T[T.length-1].bandwidth/1e3,N=0;N<T.length;N++){var C=T[N].bandwidth/1e3;C>R?R=C:C<I&&(I=C)}var O=T[p].bandwidth/1e3,P=d.getCurrentHttpRequest(n,!0),x=(P.tresponse.getTime()-P.trequest.getTime())/1e3,D=x>A?x-A:0;f.setupPerSegmentQoe(A,R,I),f.logSegmentMetrics(O,D,E,w);var k=(0,u.Z)(h).create({targetLatency:1.5,bufferMin:.3,segmentDuration:A,qoeEvaluator:f});return r.quality=i.getNextQuality(g,1e3*S,E,v,w,p,k),r.reason={throughput:S,latency:E},r.priority=s.Z.PRIORITY.STRONG,y.setTimeToLoadDelay(0),r.quality!==p&&t.debug("[TgcLearningRule]["+n+"] requesting switch to index: ",r.quality,"Average throughput",Math.round(S),"kbps"),r}catch(e){throw e}},reset:function(){i.reset(),f.reset()}},t=(0,n.Z)(h).getInstance().getLogger(r),i=(0,o.Z)(h).create(),f=(0,a.Z)(h).create(),r}f.__dashjs_factory_name="LoLPRule",t.Z=i.Z.getClassFactory(f)},6523:function(e,t,r){"use strict";var n=r(5448);function i(e){var t,r,n,i,o=e.targetLatency,a=e.bufferMin,s=e.segmentDuration,l=e.qoeEvaluator;function u(){return s}function c(e,t){var r=u();return t>r?e-r:e+r-t}return t={getMinBuffer:function(){return a},getSegmentDuration:u,getNextBufferWithBitrate:function(e,t,r){return c(t,e*s/r)},getNextBuffer:c,findWeightVector:function(e,t,i,u,f,d){var h=null,p=null,g=null,m=Math.abs(t-n);return e.forEach(function(e){r.forEach(function(r){r[0];var n=r[1],u=r[2],y=(r[3],e.bitrate*s/f),v=c(i,y),_=(0===u?10:1/u)*Math.max(1e-5,y-v),b=(0===n?10:1/n)*e.state.latency,E=l.calculateSingleUseQoe(e.bitrate,_,b,d);(null===h||E>h)&&function(e,t,r){return!(e>o+r)&&t>=a}(t,v,m)&&(h=E,p=r,g=e.bitrate)})}),null===p&&null===g&&(p=-1),n=t,p}},r=function e(t,r,n){if(n===r)return t;for(var o=t.length,a=0;a<o;a++)for(var s=t.shift(),l=0;l<i.length;l++)t.push(s.concat(i[l]));return e(t,r,n+1)}((i=[.2,.4,.6,.8,1]).map(function(e){return[e]}),4,1),n=0,t}i.__dashjs_factory_name="LoLpWeightSelector",t.Z=n.Z.getClassFactory(i)},2298:function(e,t){"use strict";t.Z=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(e,t,r){"use strict";r.d(t,{Y:function(){return h}});var n=r(3393),i=r(1553),o=r(5448),a=r(2128),s=r(2594),l=r(7387),u=r(7417),c=r(9032),f=r(9326),d=r(7802),h=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function p(e){var t,r,o,p,g,m,y,v,_=this.context,b=e.adapter,E=e.baseURLController,w=e.streamInfo,S=e.timelineConverter,T=e.debug,A=e.eventBus,I=e.events,R=e.dashConstants,N=(0,s.Z)(_).getInstance();function C(e,t){var n=new a.Z;n.id=e.id,n.bitrate=e.bandwidth,n.width=e.width,n.height=e.height,n.tilesHor=1,n.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach(function(e){if(h.indexOf(e.schemeIdUri)>=0&&e.value){var t=e.value.split("x");2!==t.length||isNaN(t[0])||isNaN(t[1])||(n.tilesHor=parseInt(t[0],10),n.tilesVert=parseInt(t[1],10))}}),t?m.updateSegmentData(e).then(function(t){!function(e,t,r){var n=[],i=function(e,t){var r,n,i,o,a=[],s=0;for(r=0,n=e.segments.length;r<n;r++)i=e.segments[r],(o=(0,l.TJ)(S,b.getIsDynamic(),t,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,s))&&(a.push(o),o=null,s++);return a}(r,t);t.segments=i,e.segmentDuration=t.segments[0].duration,e.readThumbnail=function(e,r){var i=null;n.some(function(t){if(t.start<=e&&t.end>e)return i=t.url,!0}),i?r(i):t.segments.some(function(i){if(i.mediaStartTime<=e&&i.mediaStartTime+i.duration>e){var o=E.resolve(t.path);return y.load({method:"get",url:o.url,request:{range:i.mediaRange,responseType:"arraybuffer"},onload:function(e){var t=v.getSamplesInfo(e.target.response),o=new Blob([e.target.response.slice(t.sampleList[0].offset,t.sampleList[0].offset+t.sampleList[0].size)],{type:"image/jpeg"}),a=window.URL.createObjectURL(o);n.push({start:i.mediaStartTime,end:i.mediaStartTime+i.duration,url:a}),r&&r(a)}}),!0}})}}(n,e,t)}):(n.startNumber=e.startNumber,n.segmentDuration=e.segmentDuration,n.timescale=e.timescale,n.templateUrl=function(e){var t=N.isRelative(e.media)?N.resolve(e.media,E.resolve(e.path).url):e.media;return t?(0,l.Aj)(t,e.id):""}(e)),n.tilesHor>0&&n.tilesVert>0&&(n.widthPerTile=n.width/n.tilesHor,n.heightPerTile=n.height/n.tilesVert,r.push(n))}function O(){r=[],p=-1,g=null}return t={getTracks:function(){return r},addTracks:function(){if(w&&b&&(g=b.getMediaInfoForType(w,n.Z.IMAGE))){var e=b.getVoRepresentations(g);e&&e.length>0&&e.forEach(function(e){(e.segmentInfoType===i.Z.SEGMENT_TEMPLATE&&e.segmentDuration>0&&e.media||e.segmentInfoType===i.Z.SEGMENT_TIMELINE)&&C(e),e.segmentInfoType===i.Z.SEGMENT_BASE&&C(e,!0)}),r.length>0&&r.sort(function(e,t){return e.bitrate-t.bitrate})}},reset:O,setTrackByIndex:function(e){r&&0!==r.length&&(e>=r.length&&(e=r.length-1),p=e)},getCurrentTrack:function(){return p<0?null:r[p]},getCurrentTrackIndex:function(){return p},getThumbnailRequestForTime:function(e){for(var t,n=b.getVoRepresentations(g),i=0;i<n.length;i++)if(r[p].id===n[i].id){t=n[i];break}return o.getSegmentRequestForTime(g,t,e)}},O(),y=(0,c.Z)(_).create({}),v=(0,u.Z)(_).getInstance(),m=(0,d.Z)(_).create({events:I,eventBus:A,streamInfo:w,timelineConverter:S,dashConstants:R,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController,type:n.Z.IMAGE}),(o=(0,f.Z)(_).create({streamInfo:w,type:n.Z.IMAGE,timelineConverter:S,segmentsController:m,baseURLController:E,debug:T,eventBus:A,events:I,dashConstants:R,urlUtils:N})).initialize(!!b&&b.getIsDynamic()),t}p.__dashjs_factory_name="ThumbnailTracks",t.Z=o.Z.getClassFactory(p)},7417:function(e,t,r){"use strict";var n=r(6398),i=r(8260),o=r(5448),a=r(6934),s=r(9597);function l(){var e,t,r=this.context;function o(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=a.parseBuffer(e),n=(0,i.Z)(r).create();return n.setData(t),n}function l(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function u(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return t={parse:o,findLastTopIsoBoxCompleted:function(e,t,r){if(void 0===r&&(r=0),!t||r+8>=t.byteLength)return new s.Z(0,!1);for(var n,i=t instanceof ArrayBuffer?new Uint8Array(t):t,o=0;r<i.byteLength;){var a=l(i,r),c=u(i,r+4);if(0===a)break;r+a<=i.byteLength&&(e.indexOf(c)>=0?n=new s.Z(r,!0,a):o=r+a),r+=a}return n||new s.Z(o,!1)},getMediaTimescaleFromMoov:function(e){var t=o(e),r=t?t.getBox("mdhd"):void 0;return r?r.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t,r,n,i,a,s,l,u,c,f,d,h,p,g,m,y,v=o(e),_=v.getBoxes("moof"),b=v.getBoxes("mfhd");m=v.getBoxes("moof").length,g=b[b.length-1].sequence_number,r=0,a=[];var E=-1,w=-1;for(f=0;f<_.length;f++){var S=_[f],T=S.getChildBoxes("traf");for(u=0;u<T.length;u++){var A=T[u],I=A.getChildBox("tfhd"),R=A.getChildBox("tfdt");i=R.baseMediaDecodeTime;var N=A.getChildBoxes("trun"),C=A.getChildBoxes("subs");for(c=0;c<N.length;c++){var O=N[c];for(r=O.sample_count,p=(I.base_data_offset||0)+(O.data_offset||0),l=0;l<r;l++){t=void 0!==(s=O.samples[l]).sample_duration?s.sample_duration:I.default_sample_duration,n=void 0!==s.sample_size?s.sample_size:I.default_sample_size;var P={dts:i,cts:i+(void 0!==s.sample_composition_time_offset?s.sample_composition_time_offset:0),duration:t,offset:S.offset+p,size:n,subSizes:[n]};if(C)for(d=0;d<C.length;d++){var x=C[d];if(E<x.entry_count-1&&l>w&&(E++,w+=x.entries[E].sample_delta),l==w){P.subSizes=[];var D=x.entries[E];for(h=0;h<D.subsample_count;h++)P.subSizes.push(D.subsamples[h].subsample_size)}}a.push(P),p+=n,i+=t}}y=i-R.baseMediaDecodeTime}}return{sampleList:a,lastSequenceNumber:g,totalDuration:y,numSequences:m}},findInitRange:function(t){var r=null,n=o(t);if(!n)return r;var i=n.getBox("ftyp"),a=n.getBox("moov");return e.debug("Searching for initialization."),a&&a.isComplete&&(r=(i?i.offset:a.offset)+"-"+(a.offset+a.size-1),e.debug("Found the initialization.  Range: "+r)),r},parsePayload:function(e,t,r){if(void 0===r&&(r=0),!t||r+8>=t.byteLength)return new s.Z(0,!1);for(var n,i=t instanceof ArrayBuffer?new Uint8Array(t):t,o=0;r<i.byteLength;){var a=l(i,r),c=u(i,r+4);if(0===a)break;r+a<=i.byteLength&&(e.indexOf(c)>=0?n=new s.Z(r,!0,a,c):o=r+a),r+=a}return n||new s.Z(o,!1)}},e=(0,n.Z)(r).getInstance().getLogger(t),t}l.__dashjs_factory_name="BoxParser",t.Z=o.Z.getSingletonFactory(l)},1715:function(e,t,r){"use strict";r.d(t,{B:function(){return s}});var n=r(5448),i=r(7803),o=r(3393),a=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function s(){var e="ManagedMediaSource"in window,t="WebKitMediaSource"in window,r="MediaSource"in window;return e||t||r}function l(){var e,t,r;return e={setConfig:function(e){e&&e.settings&&(t=e.settings)},supportsMediaSource:s,supportsEncryptedMedia:function(){return r},supportsCodec:function(e,r){return r!==o.Z.AUDIO&&r!==o.Z.VIDEO?Promise.resolve(!0):function(e,r){return t.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(e.codec&&r===o.Z.AUDIO||r===o.Z.VIDEO&&e.codec&&e.width&&e.height&&e.bitrate&&e.framerate)}(e,r)?function(e,t){return new Promise(function(r){if(e&&e.codec){var n={type:"media-source"};n[t]={},n[t].contentType=e.codec,n[t].width=e.width,n[t].height=e.height,n[t].bitrate=parseInt(e.bitrate),n[t].framerate=parseFloat(e.framerate),navigator.mediaCapabilities.decodingInfo(n).then(function(e){r(e.supported)}).catch(function(){r(!1)})}else r(!1)})}(e,r):function(e){return new Promise(function(t){if(e&&e.codec){var r=e.codec;e.width&&e.height&&(r+=';width="'+e.width+'";height="'+e.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(r)||"MediaSource"in window&&MediaSource.isTypeSupported(r)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(r)?t(!0):t(!1)}else t(!1)})}(e)},setEncryptedMediaSupported:function(e){r=e},supportsEssentialProperty:function(e){try{return-1!==i.Y.indexOf(e.schemeIdUri)||o.Z.FONT_DOWNLOAD_DVB_SCHEME===e.schemeIdUri}catch(e){return!0}},codecRootCompatibleWithCodec:function(e,t){for(var r,n=e.split(".")[0],i=0===t.indexOf(n),o=0;o<a.length;o++)if(a[o].codec===n){r=a[o];break}return r?i||r.compatibleCodecs.some(function(e){return 0===t.indexOf(e)}):i}},r=!1,e}l.__dashjs_factory_name="Capabilities",t.Z=n.Z.getSingletonFactory(l)},2295:function(e,t,r){"use strict";var n=r(5448),i=r(3106);function o(){return{customTimeRangeArray:[],length:0,add:function(e,t){var r;for(r=0;r<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[r].start;r++);for(this.customTimeRangeArray.splice(r,0,{start:e,end:t}),r=0;r<this.customTimeRangeArray.length-1;r++)this.mergeRanges(r,r+1)&&r--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var r=0;r<this.customTimeRangeArray.length;r++)if(e<=this.customTimeRangeArray[r].start&&t>=this.customTimeRangeArray[r].end)this.customTimeRangeArray.splice(r,1),r--;else{if(e>this.customTimeRangeArray[r].start&&t<this.customTimeRangeArray[r].end){this.customTimeRangeArray.splice(r+1,0,{start:t,end:this.customTimeRangeArray[r].end}),this.customTimeRangeArray[r].end=e;break}e>this.customTimeRangeArray[r].start&&e<this.customTimeRangeArray[r].end?this.customTimeRangeArray[r].end=e:t>this.customTimeRangeArray[r].start&&t<this.customTimeRangeArray[r].end&&(this.customTimeRangeArray[r].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var r=this.customTimeRangeArray[e],n=this.customTimeRangeArray[t];return r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(r.end=n.end,this.customTimeRangeArray.splice(t,1),!0):n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(r.start=n.start,this.customTimeRangeArray.splice(t,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end?(this.customTimeRangeArray.splice(e,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,i.SE)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,i.SE)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}o.__dashjs_factory_name="CustomTimeRanges",t.Z=n.Z.getClassFactory(o)},5:function(e,t,r){"use strict";var n=r(5448);function i(){var e,t=/^[a-z][a-z0-9+\-_.]*:/i,r=/^https?:\/\//i,n=/^https:\/\//i,i=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,o=function(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}},a=function(e,t){var r=s;if(!t)return e;if(!c(e))return e;f(e)&&(r=l),d(e)&&(r=u);var n=r(t),i="/"!==n.charAt(n.length-1)&&"/"!==e.charAt(0)?"/":"";return[n,e].join(i)};function s(e){var t=e.indexOf("/"),r=e.lastIndexOf("/");return-1!==t?r===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,r+1)):""}function l(e){var t=e.match(i);return t?t[1]:""}function u(e){var r=e.match(t);return r?r[0]:""}function c(e){return!t.test(e)}function f(e){return c(e)&&"/"===e.charAt(0)}function d(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y"),e=o}catch(e){}finally{e=e||a}}(),{parseBaseUrl:s,parseOrigin:l,parseScheme:u,isRelative:c,isPathAbsolute:f,isSchemeRelative:d,isHTTPURL:function(e){return r.test(e)},isHTTPS:function(e){return n.test(e)},removeHostname:function(e){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(t,r){return e(t,r)}}}i.__dashjs_factory_name="DefaultURLUtils",t.Z=n.Z.getSingletonFactory(i)},8260:function(e,t,r){"use strict";var n=r(2839),i=r(5448);function o(){var e;function t(t){var n=[];if(!t||!e||"function"!=typeof e.fetchAll)return n;for(var i,o=e.fetchAll(t),a=0,s=o.length;a<s;a++)(i=r(o[a]))&&n.push(i);return n}function r(e){if(!e)return null;var t=new n.Z(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return{getBox:function(t){return t&&e&&e.boxes&&0!==e.boxes.length&&"function"==typeof e.fetch?r(e.fetch(t)):null},getBoxes:t,setData:function(t){e=t},getLastBox:function(){if(!e||!e.boxes||!e.boxes.length)return null;var r=t(e.boxes[e.boxes.length-1].type);return r.length>0?r[r.length-1]:null}}}o.__dashjs_factory_name="IsoFile",t.Z=i.Z.getClassFactory(o)},7473:function(e,t,r){"use strict";r.d(t,{k:function(){return i}});var n=r(5448);function i(e,t){var r={url:e.url,method:e.method,headers:Object.assign({},e.headers),credentials:e.withCredentials?"include":void 0,range:e.request.range};return Promise.resolve(t.modifyRequest(r)).then(function(){return Object.assign(e,r,{withCredentials:"include"===r.credentials})})}function o(){return{modifyRequest:null,modifyRequestURL:function(e){return e},modifyRequestHeader:function(e,t){return t.url,e}}}o.__dashjs_factory_name="RequestModifier",t.Z=n.Z.getSingletonFactory(o)},3106:function(e,t,r){"use strict";r.d(t,{PS:function(){return o},SE:function(){return a}});var n=r(3393);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){if(i(e)!==t)throw n.Z.BAD_ARGUMENT_ERROR}function a(e){if(null===e||isNaN(e)||e%1!=0)throw n.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(e,t,r){"use strict";var n=r(5448),i=r(5);function o(){var e,t=[],r=this.context;function n(r,n,i){var o=function(r){var n;for(n=0;n<t.length;n++)if(t[n].regex.test(r))return t[n].utils;return e}(i||n);return o&&"function"==typeof o[r]?o[r](n,i):e[r](n,i)}return e=(0,i.Z)(r).getInstance(),{registerUrlRegex:function(e,r){t.push({regex:e,utils:r})},parseBaseUrl:function(e){return n("parseBaseUrl",e)},parseOrigin:function(e){return n("parseOrigin",e)},parseScheme:function(e){return n("parseScheme",e)},isRelative:function(e){return n("isRelative",e)},isPathAbsolute:function(e){return n("isPathAbsolute",e)},isSchemeRelative:function(e){return n("isSchemeRelative",e)},isHTTPURL:function(e){return n("isHTTPURL",e)},isHTTPS:function(e){return n("isHTTPS",e)},removeHostname:function(e){return n("removeHostname",e)},resolve:function(e,t){return n("resolve",e,t)}}}o.__dashjs_factory_name="URLUtils";var a=n.Z.getSingletonFactory(o);t.Z=a},5459:function(e,t){"use strict";t.Z=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=r||null,this.data=n||null}},3186:function(e,t,r){"use strict";var n=r(7855);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=t||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var t;return(t=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===n.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?n.w.INIT_SEGMENT_TYPE:n.w.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null}}])&&i(e.prototype,t),e}();o.ACTION_DOWNLOAD="download",o.ACTION_COMPLETE="complete",t.Z=o},2839:function(e,t){"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offset=t._offset,this.type=t.type,this.size=t.size,this.boxes=[],t.boxes)for(var r=0;r<t.boxes.length;r++)this.boxes.push(new e(t.boxes[r]));switch(this.isComplete=!0,t.type){case"sidx":if(this.timescale=t.timescale,this.earliest_presentation_time=t.earliest_presentation_time,this.first_offset=t.first_offset,this.references=t.references,t.references){this.references=[];for(var n=0;n<t.references.length;n++){var i={reference_type:t.references[n].reference_type,referenced_size:t.references[n].referenced_size,subsegment_duration:t.references[n].subsegment_duration};this.references.push(i)}}break;case"emsg":this.id=t.id,this.version=1===t.version?1:0,this.value=t.value,this.timescale=t.timescale,this.scheme_id_uri=t.scheme_id_uri,this.presentation_time_delta=1===t.version?t.presentation_time:t.presentation_time_delta,this.event_duration=t.event_duration,this.message_data=t.message_data;break;case"mdhd":this.timescale=t.timescale;break;case"mfhd":this.sequence_number=t.sequence_number;break;case"subs":this.entry_count=t.entry_count,this.entries=t.entries;break;case"tfhd":this.base_data_offset=t.base_data_offset,this.sample_description_index=t.sample_description_index,this.default_sample_duration=t.default_sample_duration,this.default_sample_size=t.default_sample_size,this.default_sample_flags=t.default_sample_flags,this.flags=t.flags;break;case"tfdt":this.version=t.version,this.baseMediaDecodeTime=t.baseMediaDecodeTime,this.flags=t.flags;break;case"trun":if(this.sample_count=t.sample_count,this.first_sample_flags=t.first_sample_flags,this.data_offset=t.data_offset,this.flags=t.flags,this.samples=t.samples,t.samples){this.samples=[];for(var o=0,a=t.samples.length;o<a;o++){var s={sample_size:t.samples[o].sample_size,sample_duration:t.samples[o].sample_duration,sample_composition_time_offset:t.samples[o].sample_composition_time_offset};this.samples.push(s)}}break;case"prft":this.version=t.version,this.reference_track_ID=t.reference_track_ID,this.ntp_timestamp_sec=t.ntp_timestamp_sec,this.ntp_timestamp_frac=t.ntp_timestamp_frac,this.media_time=t.media_time,this.flags=t.flags}}var t;return(t=[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],r=0;r<this.boxes.length;r++)this.boxes[r].type===e&&t.push(this.boxes[r]);return t}}])&&r(e.prototype,t),e}();t.Z=n},9597:function(e,t){"use strict";t.Z=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastCompletedOffset=t,this.found=r,this.size=n}},2128:function(e,t){"use strict";t.Z=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{O:function(){return o},w:function(){return i}});var i=function e(){n(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},o=function e(){n(this,e),this.s=null,this.d=null,this.b=[]};i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",i.DVB_REPORTING_TYPE="DVBReporting",i.LICENSE="license",i.CONTENT_STEERING_TYPE="ContentSteering",i.OTHER_TYPE="other"},3039:function(e,t){"use strict";function r(e,t){return function(r,i){for(var o,a,s,l=n(r,"tag"),u=n(null==i?"*":i,"range"),c=[],f=-1;++f<u.length;)if(o=u[f].toLowerCase(),t||"*"!==o){for(a=-1,s=[];++a<l.length;)if(e(l[a].toLowerCase(),o)){if(!t)return l[a];c.push(l[a])}else s.push(l[a]);l=s}return t?c:void 0}}function n(e,t){var r=e&&"string"==typeof e?[e]:e;if(!r||"object"!=typeof r||!("length"in r))throw new Error("Invalid "+t+" `"+r+"`, expected non-empty string");return r}t.basicFilter=r(function(e,t){return"*"===t||e===t||e.indexOf(t+"-")>-1},!0),t.extendedFilter=r(function(e,t){var r=e.split("-"),n=t.split("-"),i=0,o=0;if("*"!==n[o]&&r[i]!==n[o])return!1;for(i++,o++;o<n.length;)if("*"!==n[o]){if(!r[i])return!1;if(r[i]!==n[o]){if(1===r[i].length)return!1;i++}else i++,o++}else o++;return!0},!0),t.lookup=r(function(e,t){for(var r,n=t;;){if("*"===n||e===n)return!0;if((r=n.lastIndexOf("-"))<0)return!1;"-"===n.charAt(r-2)&&(r-=2),n=n.slice(0,r)}})},3973:function(e,t,r){"use strict";e.exports=r(3854)},3854:function(e,t,r){"use strict";var n=r(2415),i=r(3039),o=r(7778),a=r(5813),s=r(3165),l=r(9460);e.exports=function(e,t){var r,c=t||{},m=n.parse(String(e||"").toLowerCase(),c),y=n.stringify(m),v=-1;if(!y)return y;for(;++v<o.length;)i.extendedFilter(y,o[v].from).length&&(d(m,o[v].from,o[v].to),y=n.stringify(m));for(v=-1;++v<a.length;)h(m,a[v].from.field,a[v].from.value)&&p(m,a[v].to.field,a[v].to.value);for(y=n.stringify(Object.assign({},m,f)),v=-1;++v<s.length;)y===s[v]&&(d(m,s[v],s[v].split("-").slice(0,-1).join("-")),y=n.stringify(Object.assign({},m,f)));if(m.extensions.sort(g),c.warning)for(r in l)u.call(l[r],m[r])&&c.warning("Deprecated "+r+" `"+m[r]+"`, expected one of `"+l[r][m[r]].join("`, `")+"`",null,7);return m.script&&(m.script=m.script.charAt(0).toUpperCase()+m.script.slice(1)),m.region&&(m.region=m.region.toUpperCase()),n.stringify(m)};var u={}.hasOwnProperty,c=new Intl.Collator,f={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function d(e,t,r){var i,o=n.parse(t),a=n.parse(r),s=[];for(i in o)o[i]&&o[i].length&&h(e,i,o[i])&&s.push(i);for(i in a)a[i]&&a[i].length&&(s.indexOf(i)>-1||!e[i]||!e[i].length)&&p(e,i,a[i])}function h(e,t,r){var n,i,o,a,s=!1;if(r){if(i=n=e[t],n&&"object"==typeof n)for(i=[],o=-1;++o<n.length;)a=n[o],r.indexOf(a)<0?i.push(a):s=!0;else n===r&&(i=null,s=!0);e[t]=i}return s}function p(e,t,r){var n,i,o,a=e[t];if(a&&"object"==typeof a)for(n=[].concat(r),i=-1;++i<n.length;)o=n[i],a.indexOf(o)<0&&a.push(o);else e[t]=r}function g(e,t){return c.compare(e.singleton,t.singleton)}},2415:function(e,t,r){"use strict";t.parse=r(6903),t.stringify=r(6713)},6903:function(e,t,r){"use strict";var n=r(2219),i=r(3516),o=r(395),a=r(858),s=r(8589);e.exports=function e(t,r){var u,c,f,d=r||{},h={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},p=String(t),g=p.toLowerCase(),m=0;if(null==t)throw new Error("Expected string, got `"+t+"`");if(l.call(s,g))return(null==d.normalize||d.normalize)&&s[g]?e(s[g]):(h[-1===a.indexOf(g)?"irregular":"regular"]=p,h);for(;i(g.charCodeAt(m))&&m<9;)m++;if(m>1&&m<9){if(h.language=p.slice(0,m),m<4)for(c=0;45===g.charCodeAt(m)&&i(g.charCodeAt(m+1))&&i(g.charCodeAt(m+2))&&i(g.charCodeAt(m+3))&&!i(g.charCodeAt(m+4));){if(c>2)return y(m,3,"Too many extended language subtags, expected at most 3 subtags");h.extendedLanguageSubtags.push(p.slice(m+1,m+4)),m+=4,c++}for(45===g.charCodeAt(m)&&i(g.charCodeAt(m+1))&&i(g.charCodeAt(m+2))&&i(g.charCodeAt(m+3))&&i(g.charCodeAt(m+4))&&!i(g.charCodeAt(m+5))&&(h.script=p.slice(m+1,m+5),m+=5),45===g.charCodeAt(m)&&(i(g.charCodeAt(m+1))&&i(g.charCodeAt(m+2))&&!i(g.charCodeAt(m+3))?(h.region=p.slice(m+1,m+3),m+=3):o(g.charCodeAt(m+1))&&o(g.charCodeAt(m+2))&&o(g.charCodeAt(m+3))&&!o(g.charCodeAt(m+4))&&(h.region=p.slice(m+1,m+4),m+=4));45===g.charCodeAt(m);){for(f=u=m+1;n(g.charCodeAt(f));){if(f-u>7)return y(f,1,"Too long variant, expected at most 8 characters");f++}if(!(f-u>4||f-u>3&&o(g.charCodeAt(u))))break;h.variants.push(p.slice(u,f)),m=f}for(;45===g.charCodeAt(m)&&120!==g.charCodeAt(m+1)&&n(g.charCodeAt(m+1))&&45===g.charCodeAt(m+2)&&n(g.charCodeAt(m+3));){for(f=m+2,c=0;45===g.charCodeAt(f)&&n(g.charCodeAt(f+1))&&n(g.charCodeAt(f+2));)for(f=(u=f+1)+2,c++;n(g.charCodeAt(f));){if(f-u>7)return y(f,2,"Too long extension, expected at most 8 characters");f++}if(!c)return y(f,4,"Empty extension, extensions must have at least 2 characters of content");h.extensions.push({singleton:p.charAt(m+1),extensions:p.slice(m+3,f).split("-")}),m=f}}else m=0;if(0===m&&120===g.charCodeAt(m)||45===g.charCodeAt(m)&&120===g.charCodeAt(m+1))for(f=m=m?m+2:1;45===g.charCodeAt(f)&&n(g.charCodeAt(f+1));){for(f=u=m+1;n(g.charCodeAt(f));){if(f-u>7)return y(f,5,"Too long private-use area, expected at most 8 characters");f++}h.privateuse.push(p.slice(m+1,f)),m=f}return m!==p.length?y(m,6,"Found superfluous content after tag"):h;function y(e,t,r){return d.warning&&d.warning(r,t,e),d.forgiving?h:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var l={}.hasOwnProperty},6713:function(e){"use strict";e.exports=function(e){var t,r,n,i=e||{},o=[];if(i.irregular||i.regular)return i.irregular||i.regular;if(i.language)for(o=o.concat(i.language,i.extendedLanguageSubtags||[],i.script||[],i.region||[],i.variants||[]),t=i.extensions||[],r=-1;++r<t.length;)(n=t[r]).singleton&&n.extensions&&n.extensions.length&&(o=o.concat(n.singleton,n.extensions));return i.privateuse&&i.privateuse.length&&(o=o.concat("x",i.privateuse)),o.join("-")}},1549:function(e,t,r){"use strict";var n=r(6693),i=r(2165),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50;var a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|g(e,t),n=s(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Z(e,Uint8Array)){var t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Z(e,ArrayBuffer)||e&&Z(e.buffer,ArrayBuffer))return h(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Z(e,SharedArrayBuffer)||e&&Z(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,r);var i=function(e){if(l.isBuffer(e)){var t=0|p(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||q(e.length)?s(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return c(e),s(e<0?0:0|p(e))}function d(e){for(var t=e.length<0?0:0|p(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,l.prototype),n}function p(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return B(e).length;default:if(i)return n?-1:U(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return N(this,t,r);case"latin1":case"binary":return C(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),q(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:_(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):_(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,r,n,i){var o,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=r;o<s;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){for(var f=!0,d=0;d<l;d++)if(u(e,o+d)!==u(t,d)){f=!1;break}if(f)return o}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(q(s))return a;e[r+a]=s}return a}function E(e,t,r,n){return j(U(t,e.length-r),e,r,n)}function w(e,t,r,n){return j(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return j(B(t),e,r,n)}function T(e,t,r,n){return j(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function A(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function I(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,l,u=e[i],c=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=r)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=f}return function(e){var t=e.length;if(t<=R)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=R));return r}(n)}t.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return function(e,t,r){return c(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},l.allocUnsafe=function(e){return f(e)},l.allocUnsafeSlow=function(e){return f(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Z(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=l.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(Z(o,Uint8Array))i+o.length>n.length?l.from(o).copy(n,i):Uint8Array.prototype.set.call(n,o,i);else{if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i)}i+=o.length}return n},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):m.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,i){if(Z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(n,i),c=e.slice(t,r),f=0;f<s;++f)if(u[f]!==c[f]){o=u[f],a=c[f];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":case"latin1":case"binary":return w(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function N(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function C(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function O(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=G[e[o]];return i}function P(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function x(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function k(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,n,o){return t=+t,r>>>=0,o||k(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,o){return t=+t,r>>>=0,o||k(e,0,r,8),i.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||x(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||x(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return e>>>=0,t||x(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||x(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||x(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||x(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||D(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||D(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a|0)-s&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a|0)-s&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=l.isBuffer(e)?e:l.from(e,n),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var F=/[^+/0-9A-Za-z-_]/g;function U(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function B(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!=e}var G=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},6693:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=l(e),a=o[0],s=o[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),c=0,f=s>0?a-4:a;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,l=n-i;s<l;s+=a)o.push(u(e,s,s+a>l?l:s+a));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},2165:function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,f=r?i-1:0,d=r?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=u}return(h?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+f>=1?d/l:d*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+h]=255&a,h+=p,a/=256,u-=8);e[r+h-p]|=128*g}},6934:function(e,t){var r={parseBuffer:function(e){return new n(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(i.prototype._boxProcessors[e]=t)},createFile:function(){return new n},createBox:function(e,t,r){var n=i.create(e);return t&&t.append(n,r),n},createFullBox:function(e,t,n){var i=r.createBox(e,t,n);return i.version=0,i.flags=0,i},Utils:{}};r.Utils.dataViewToString=function(e,t){var r=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(r).decode(e);var n=[],i=0;if("utf-8"===r)for(;i<e.byteLength;){var o=e.getUint8(i++);o<128||(o<224?(o=(31&o)<<6,o|=63&e.getUint8(i++)):o<240?(o=(15&o)<<12,o|=(63&e.getUint8(i++))<<6,o|=63&e.getUint8(i++)):(o=(7&o)<<18,o|=(63&e.getUint8(i++))<<12,o|=(63&e.getUint8(i++))<<6,o|=63&e.getUint8(i++))),n.push(String.fromCharCode(o))}else for(;i<e.byteLength;)n.push(String.fromCharCode(e.getUint8(i++)));return n.join("")},r.Utils.utf8ToByteArray=function(e){var t,r;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],r=0;r<e.length;++r){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?(t.push(192|n>>6),t.push(128|63&n)):n<65536?(t.push(224|n>>12),t.push(128|63&n>>6),t.push(128|63&n)):(t.push(240|n>>18),t.push(128|63&n>>12),t.push(128|63&n>>6),t.push(128|63&n))}return t},r.Utils.appendBox=function(e,t,r){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==r)if(null!=r){var n,i=-1;if("number"==typeof r)i=r;else{if("string"==typeof r)n=r;else{if("object"!=typeof r||!r.type)return void e.boxes.push(t);n=r.type}for(var o=0;o<e.boxes.length;o++)if(n===e.boxes[o].type){i=o+1;break}}e.boxes.splice(i,0,t)}else e.boxes.push(t)},t.parseBuffer=r.parseBuffer,t.addBoxProcessor=r.addBoxProcessor,t.createFile=r.createFile,t.createBox=r.createBox,t.createFullBox=r.createFullBox,t.Utils=r.Utils,r.Cursor=function(e){this.offset=void 0===e?0:e};var n=function(e){this._cursor=new r.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};n.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},n.prototype.fetchAll=function(e,t){var r=[];return n._sweep.call(this,e,r,t),r},n.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=i.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},n._sweep=function(e,t,r){for(var i in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&r)return;n._sweep.call(this.boxes[i],e,t,r)}},n.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var r=new Uint8Array(t);for(this._rawo=new DataView(r.buffer),this.bytes=r,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return r.buffer},n.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)};var i=function(){this._cursor=new r.Cursor};i.parse=function(e){var t=new i;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},i.create=function(e){var t=new i;return t.type=e,t.boxes=[],t},i.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],i.prototype._boxProcessors={},i.prototype._procField=function(e,t,r){this._parsing?this[e]=this._readField(t,r):this._writeField(t,r,this[e])},i.prototype._procFieldArray=function(e,t,r,n){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(r,n);else for(i=0;i<this[e].length;i++)this._writeField(r,n,this[e][i])},i.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},i.prototype._procEntries=function(e,t,r){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push({}),r.call(this,this[e][n]);else for(n=0;n<t;n++)r.call(this,this[e][n])},i.prototype._procSubEntries=function(e,t,r,n){var i;if(this._parsing)for(e[t]=[],i=0;i<r;i++)e[t].push({}),n.call(this,e[t][i]);else for(i=0;i<r;i++)n.call(this,e[t][i])},i.prototype._procEntryField=function(e,t,r,n){this._parsing?e[t]=this._readField(r,n):this._writeField(r,n,e[t])},i.prototype._procSubBoxes=function(e,t){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push(i.parse(this));else for(r=0;r<t;r++)this._rawo?this[e][r].write():this.size+=this[e][r].getLength()},i.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},i.prototype._readInt=function(e){var t=null,r=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(r);break;case 16:t=this._raw.getInt16(r);break;case 32:t=this._raw.getInt32(r);break;case 64:var n=this._raw.getInt32(r),i=this._raw.getInt32(r+4);t=n*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},i.prototype._readUint=function(e){var t,r,n=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:n=this._raw.getUint8(i);break;case 16:n=this._raw.getUint16(i);break;case 24:n=((t=this._raw.getUint16(i))<<8)+(r=this._raw.getUint8(i+2));break;case 32:n=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),r=this._raw.getUint32(i+4),n=t*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,n},i.prototype._readString=function(e){for(var t="",r=0;r<e;r++){var n=this._readUint(8);t+=String.fromCharCode(n)}return t},i.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},i.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},i.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(t>0){var r=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,r}return null},i.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return e>0&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?r.Utils.dataViewToString(t):t},i.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},i.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},i.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(i.parse(this))},i.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)},i.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},i.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},i.prototype._writeInt=function(e,t){if(this._rawo){var r=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(r,t);break;case 16:this._rawo.setInt16(r,t);break;case 32:this._rawo.setInt32(r,t);break;case 64:var n=Math.floor(t/Math.pow(2,32)),i=t-n*Math.pow(2,32);this._rawo.setUint32(r,n),this._rawo.setUint32(r+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},i.prototype._writeUint=function(e,t){if(this._rawo){var r,n,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:r=(16776960&t)>>8,n=255&t,this._rawo.setUint16(i,r),this._rawo.setUint8(i+2,n);break;case 32:this._rawo.setUint32(i,t);break;case 64:n=t-(r=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,r),this._rawo.setUint32(i+4,n)}this._cursor.offset+=e>>3}else this.size+=e>>3},i.prototype._writeString=function(e,t){for(var r=0;r<e;r++)this._writeUint(8,t.charCodeAt(r))},i.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},i.prototype._writeTemplate=function(e,t){var r=Math.floor(t),n=(t-r)*Math.pow(2,e/2);this._writeUint(e/2,r),this._writeUint(e/2,n)},i.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,r=0;r<e.length;r++)this._rawo.setInt8(t+r,e[r]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},i.prototype._writeUTF8String=function(e){var t=r.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)n.setUint8(i,t[i]);else this.size+=t.length},i.prototype._writeField=function(e,t,r){switch(e){case"uint":this._writeUint(t,r);break;case"int":this._writeInt(t,r);break;case"template":this._writeTemplate(t,r);break;case"string":-1==t?this._writeTerminatedString(r):this._writeString(t,r);break;case"data":this._writeData(r);break;case"utf8":this._writeUTF8String(r)}},i.prototype._boxProcessors.avc1=i.prototype._boxProcessors.avc2=i.prototype._boxProcessors.avc3=i.prototype._boxProcessors.avc4=i.prototype._boxProcessors.hvc1=i.prototype._boxProcessors.hev1=i.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},i.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_offset",1===this.version?"int":"uint",32)})},i.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},i.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},i.prototype._boxProcessors.free=i.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},i.prototype._boxProcessors.ftyp=i.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},i.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},i.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},i.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},i.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},i.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},i.prototype._boxProcessors.mp4a=i.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},i.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},i.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},i.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",1==this.version?64:32)},i.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},i.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},i.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},i.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},i.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},i.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},i.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},i.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_delta","uint",32)})},i.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},i.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},i.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},i.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},i.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},i.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},i.prototype._boxProcessors["url "]=i.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},i.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},i.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},i.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},i.prototype._boxProcessors.vtte=function(){}},5530:function(e,t,r){"use strict";e.exports=r(6146).polyfill()},6146:function(e,t,r){e.exports=function(){"use strict";function e(e){return"function"==typeof e}var t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,i=void 0,o=void 0,a=function(e,t){h[n]=e,h[n+1]=t,2===(n+=2)&&(o?o(p):_())},s="undefined"!=typeof window?window:void 0,l=s||{},u=l.MutationObserver||l.WebKitMutationObserver,c="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var e=setTimeout;return function(){return e(p,1)}}var h=new Array(1e3);function p(){for(var e=0;e<n;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;n=0}var g,m,y,v,_=void 0;function b(e,t){var r=this,n=new this.constructor(S);void 0===n[w]&&k(n);var i=r._state;if(i){var o=arguments[i-1];a(function(){return x(i,n,o,r._result)})}else O(r,n,e,t);return n}function E(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(S);return I(t,e),t}_=c?function(){return process.nextTick(p)}:u?(m=0,y=new u(p),v=document.createTextNode(""),y.observe(v,{characterData:!0}),function(){v.data=m=++m%2}):f?((g=new MessageChannel).port1.onmessage=p,function(){return g.port2.postMessage(0)}):void 0===s?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(p)}:d()}catch(e){return d()}}():d();var w=Math.random().toString(36).substring(2);function S(){}var T=void 0;function A(t,r,n){r.constructor===t.constructor&&n===b&&r.constructor.resolve===E?function(e,t){1===t._state?N(e,t._result):2===t._state?C(e,t._result):O(t,void 0,function(t){return I(e,t)},function(t){return C(e,t)})}(t,r):void 0===n?N(t,r):e(n)?function(e,t,r){a(function(e){var n=!1,i=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,function(r){n||(n=!0,t!==r?I(e,r):N(e,r))},function(t){n||(n=!0,C(e,t))},e._label);!n&&i&&(n=!0,C(e,i))},e)}(t,r,n):N(t,r)}function I(e,t){if(e===t)C(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(n=t),null===n||"object"!==i&&"function"!==i)N(e,t);else{var r=void 0;try{r=t.then}catch(t){return void C(e,t)}A(e,t,r)}var n,i}function R(e){e._onerror&&e._onerror(e._result),P(e)}function N(e,t){e._state===T&&(e._result=t,e._state=1,0!==e._subscribers.length&&a(P,e))}function C(e,t){e._state===T&&(e._state=2,e._result=t,a(R,e))}function O(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+1]=r,i[o+2]=n,0===o&&e._state&&a(P,e)}function P(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?x(r,n,i,o):i(o);e._subscribers.length=0}}function x(t,r,n,i){var o=e(n),a=void 0,s=void 0,l=!0;if(o){try{a=n(i)}catch(e){l=!1,s=e}if(r===a)return void C(r,new TypeError("A promises callback cannot return that same promise."))}else a=i;r._state!==T||(o&&l?I(r,a):!1===l?C(r,s):1===t?N(r,a):2===t&&C(r,a))}var D=0;function k(e){e[w]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var M=function(){function e(e,r){this._instanceConstructor=e,this.promise=new e(S),this.promise[w]||k(this.promise),t(r)?(this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),0===this.length?N(this.promise,this._result):(this.length=this.length||0,this._enumerate(r),0===this._remaining&&N(this.promise,this._result))):C(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===T&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===E){var i=void 0,o=void 0,a=!1;try{i=e.then}catch(e){a=!0,o=e}if(i===b&&e._state!==T)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===L){var s=new r(S);a?C(s,o):A(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===T&&(this._remaining--,2===e?C(n,r):this._result[t]=r),0===this._remaining&&N(n,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;O(e,void 0,function(e){return r._settledAt(1,t,e)},function(e){return r._settledAt(2,t,e)})},e}(),L=function(){function t(e){this[w]=D++,this._result=this._state=void 0,this._subscribers=[],S!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t(function(t){I(e,t)},function(t){C(e,t)})}catch(t){C(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var r=this,n=r.constructor;return e(t)?r.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):r.then(t,t)},t}();return L.prototype.then=b,L.all=function(e){return new M(this,e).promise},L.race=function(e){var r=this;return t(e)?new r(function(t,n){for(var i=e.length,o=0;o<i;o++)r.resolve(e[o]).then(t,n)}):new r(function(e,t){return t(new TypeError("You must pass an array to race."))})},L.resolve=E,L.reject=function(e){var t=new this(S);return C(t,e),t},L._setScheduler=function(e){o=e},L._setAsap=function(e){a=e},L._asap=a,L.polyfill=function(){var e=void 0;if(void 0!==r.g)e=r.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=L},L.Promise=L,L}()},1159:function(e){"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,i)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var i,o,a,u;if(s(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,u=c,console&&console.warn&&console.warn(u)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=c.bind(n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var u=l.length,c=p(l,u);for(r=0;r<u;++r)n(c[r],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,a;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},3101:function(e){"use strict";var t=Array.isArray,r=Object.keys,n=Object.prototype.hasOwnProperty;e.exports=function e(i,o){if(i===o)return!0;if(i&&o&&"object"==typeof i&&"object"==typeof o){var a,s,l,u=t(i),c=t(o);if(u&&c){if((s=i.length)!=o.length)return!1;for(a=s;0!=a--;)if(!e(i[a],o[a]))return!1;return!0}if(u!=c)return!1;var f=i instanceof Date,d=o instanceof Date;if(f!=d)return!1;if(f&&d)return i.getTime()==o.getTime();var h=i instanceof RegExp,p=o instanceof RegExp;if(h!=p)return!1;if(h&&p)return i.toString()==o.toString();var g=r(i);if((s=g.length)!==r(o).length)return!1;for(a=s;0!=a--;)if(!n.call(o,g[a]))return!1;for(a=s;0!=a--;)if(!e(i[l=g[a]],o[l]))return!1;return!0}return i!=i&&o!=o}},3362:function(e,t,r){!function(e,t,r,n,i){function o(e){if("contents"in e)for(var t=("styleAttrs"in e?e.styleAttrs[n.byName.ruby.qname]:null),r="span"===e.kind&&("container"===t||"textContainer"===t||"baseContainer"===t),i=e.contents.length-1;i>=0;i--)!r||"styleAttrs"in e.contents[i]&&n.byName.ruby.qname in e.contents[i].styleAttrs?o(e.contents[i]):delete e.contents[i]}function a(e,t,r,n){var i=n&&"seq"===n.timeContainer,o=0;n&&(o=i&&r?r.end:n.begin),t.begin=t.explicit_begin?t.explicit_begin+o:o;var s=t.begin,l=null;if("sets"in t)for(var u=0;u<t.sets.length;u++)a(e,t.sets[u],l,t),s="seq"===t.timeContainer?t.sets[u].end:Math.max(s,t.sets[u].end),l=t.sets[u];if("contents"in t){if("contents"in t)for(var c=0;c<t.contents.length;c++)a(e,t.contents[c],l,t),s="seq"===t.timeContainer?t.contents[c].end:Math.max(s,t.contents[c].end),l=t.contents[c]}else s=i?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,o+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=o+t.explicit_end:t.end=s,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function s(e){this.node=e}function l(){this.events=[],this.head=new u,this.body=null}function u(){this.styling=new c,this.layout=new h}function c(){this.styles={},this.initials={}}function f(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function d(){this.styleAttrs=null}function h(){this.regions={}}function p(e,t){g.call(this,"image"),this.src=e,this.type=t}function g(e){this.kind=e}function m(e){this.id=e}function y(e){this.regionID=e}function v(e){this.styleAttrs=e}function _(e){this.sets=e}function b(e){this.contents=e}function E(e,t,r){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=r}function w(){g.call(this,"body")}function S(){g.call(this,"div")}function T(){g.call(this,"p")}function A(){g.call(this,"span")}function I(){g.call(this,"span")}function R(){g.call(this,"br")}function N(){}function C(){}function O(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function P(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function x(e,t){var r={};if(null!==e)for(var i in e.attributes){var o=e.attributes[i].uri+" "+e.attributes[i].local,a=n.byQName[o];if(void 0!==a){var s=a.parse(e.attributes[i].value);null!==s?(r[o]=s,a===n.byName.zIndex&&U(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):B(t,"Cannot parse styling attribute "+o+" --\x3e "+e.attributes[i].value)}}return r}function D(e,t,r){for(var n in e.attributes)if(e.attributes[n].uri===t&&e.attributes[n].local===r)return e.attributes[n].value;return null}function k(e,t,r){var n,i=null;return null!==(n=/^(\d+(?:\.\d+)?)f$/.exec(r))?null!==t&&(i=parseFloat(n[1])/t):null!==(n=/^(\d+(?:\.\d+)?)t$/.exec(r))?null!==e&&(i=parseFloat(n[1])/e):null!==(n=/^(\d+(?:\.\d+)?)ms$/.exec(r))?i=parseFloat(n[1])/1e3:null!==(n=/^(\d+(?:\.\d+)?)s$/.exec(r))?i=parseFloat(n[1]):null!==(n=/^(\d+(?:\.\d+)?)h$/.exec(r))?i=3600*parseFloat(n[1]):null!==(n=/^(\d+(?:\.\d+)?)m$/.exec(r))?i=60*parseFloat(n[1]):null!==(n=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(r))?i=3600*parseInt(n[1])+60*parseInt(n[2])+parseFloat(n[3]):null!==(n=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(r))&&null!==t&&(i=3600*parseInt(n[1])+60*parseInt(n[2])+parseInt(n[3])+(null===n[4]?0:parseInt(n[4])/t)),i}function M(e,t,r){for(;t.styleRefs.length>0;){var n=t.styleRefs.pop();n in e.styles?(M(e,e.styles[n],r),F(e.styles[n].styleAttrs,t.styleAttrs)):B(r,"Non-existant style id referenced")}}function L(e,t,r,n){for(var i=t.length-1;i>=0;i--){var o=t[i];o in e.styles?F(e.styles[o].styleAttrs,r):B(n,"Non-existant style id referenced")}}function F(e,t){for(var r in e)e.hasOwnProperty(r)&&(r in t||(t[r]=e[r]))}function U(e,t){if(e&&e.warn&&e.warn(t))throw t}function B(e,t){if(e&&e.error&&e.error(t))throw t}function j(e,t){throw e&&e.fatal&&e.fatal(t),t}function Z(e,t){for(var r,n=0,i=e.length-1;n<=i;){var o=e[r=Math.floor((n+i)/2)];if(o<t)n=r+1;else{if(!(o>t))return{found:!0,index:r};i=r-1}}return{found:!1,index:n}}e.fromXML=function(e,i,g){var m=t.parser(!0,{xmlns:!0}),y=[],v=[],_=[],b=0,E=null;m.onclosetag=function(e){if(y[0]instanceof N)null!==E.head&&null!==E.head.styling&&L(E.head.styling,y[0].styleRefs,y[0].styleAttrs,i),delete y[0].styleRefs;else if(y[0]instanceof c)for(var t in y[0].styles)y[0].styles.hasOwnProperty(t)&&M(y[0],y[0].styles[t],i);else if(y[0]instanceof T||y[0]instanceof A){if(y[0].contents.length>1){var n,o=[y[0].contents[0]];for(n=1;n<y[0].contents.length;n++)y[0].contents[n]instanceof I&&o[o.length-1]instanceof I?o[o.length-1].text+=y[0].contents[n].text:o.push(y[0].contents[n]);y[0].contents=o}y[0]instanceof A&&1===y[0].contents.length&&y[0].contents[0]instanceof I&&(y[0].text=y[0].contents[0].text,delete y[0].contents)}else y[0]instanceof s&&(y[0].node.uri===r.ns_tt&&"metadata"===y[0].node.local?b--:b>0&&g&&"onCloseTag"in g&&g.onCloseTag());_.shift(),v.shift(),y.shift()},m.ontext=function(e){if(void 0===y[0]);else if(y[0]instanceof A||y[0]instanceof T){if(y[0]instanceof A){var t=y[0].styleAttrs[n.byName.ruby.qname];if("container"===t||"textContainer"===t||"baseContainer"===t)return}var r=new I;r.initFromText(E,y[0],e,v[0],_[0],i),y[0].contents.push(r)}else y[0]instanceof s&&b>0&&g&&"onText"in g&&g.onText(e)},m.onopentag=function(e){var t=e.attributes["xml:space"];t?_.unshift(t.value):0===_.length?_.unshift("default"):_.unshift(_[0]);var o=e.attributes["xml:lang"];if(o?v.unshift(o.value):0===v.length?v.unshift(""):v.unshift(v[0]),e.uri===r.ns_tt)if("tt"===e.local)null!==E&&j(i,"Two <tt> elements at ("+this.line+","+this.column+")"),(E=new l).initFromNode(e,v[0],i),y.unshift(E);else if("head"===e.local)y[0]instanceof l||j(i,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),y.unshift(E.head);else if("styling"===e.local)y[0]instanceof u||j(i,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),y.unshift(E.head.styling);else if("style"===e.local){var a;y[0]instanceof c?((a=new f).initFromNode(e,i),a.id?E.head.styling.styles[a.id]=a:B(i,"<style> element missing @id attribute"),y.unshift(a)):y[0]instanceof N?((a=new f).initFromNode(e,i),F(a.styleAttrs,y[0].styleAttrs),y.unshift(a)):j(i,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("initial"===e.local){var m;if(y[0]instanceof c){for(var I in(m=new d).initFromNode(e,i),m.styleAttrs)m.styleAttrs.hasOwnProperty(I)&&(E.head.styling.initials[I]=m.styleAttrs[I]);y.unshift(m)}else j(i,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if("layout"===e.local)y[0]instanceof u||j(i,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),y.unshift(E.head.layout);else if("region"===e.local){y[0]instanceof h||j(i,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var O=new N;O.initFromNode(E,e,v[0],i),!O.id||O.id in E.head.layout.regions?B(i,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):E.head.layout.regions[O.id]=O,y.unshift(O)}else if("body"===e.local){y[0]instanceof l||j(i,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==E.body&&j(i,"Second <body> element at "+this.line+","+this.column+")");var P=new w;P.initFromNode(E,e,v[0],i),E.body=P,y.unshift(P)}else if("div"===e.local){y[0]instanceof S||y[0]instanceof w||j(i,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var x=new S;x.initFromNode(E,y[0],e,v[0],i);var D=x.styleAttrs[n.byName.backgroundImage.qname];D&&(x.contents.push(new p(D)),delete x.styleAttrs[n.byName.backgroundImage.qname]),y[0].contents.push(x),y.unshift(x)}else if("image"===e.local){y[0]instanceof S||j(i,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var k=new p;k.initFromNode(E,y[0],e,v[0],i),y[0].contents.push(k),y.unshift(k)}else if("p"===e.local){y[0]instanceof S||j(i,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var M=new T;M.initFromNode(E,y[0],e,v[0],i),y[0].contents.push(M),y.unshift(M)}else if("span"===e.local){y[0]instanceof A||y[0]instanceof T||j(i,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var L=new A;L.initFromNode(E,y[0],e,v[0],_[0],i),y[0].contents.push(L),y.unshift(L)}else if("br"===e.local){y[0]instanceof A||y[0]instanceof T||j(i,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var U=new R;U.initFromNode(E,y[0],e,v[0],i),y[0].contents.push(U),y.unshift(U)}else if("set"===e.local){y[0]instanceof A||y[0]instanceof T||y[0]instanceof S||y[0]instanceof w||y[0]instanceof N||y[0]instanceof R||j(i,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Z=new C;Z.initFromNode(E,y[0],e,i),y[0].sets.push(Z),y.unshift(Z)}else y.unshift(new s(e));else y.unshift(new s(e));if(y[0]instanceof s)if(e.uri===r.ns_tt&&"metadata"===e.local)b++;else if(b>0&&g&&"onOpenTag"in g){var q=[];for(var G in e.attributes)q[e.attributes[G].uri+" "+e.attributes[G].local]={uri:e.attributes[G].uri,local:e.attributes[G].local,value:e.attributes[G].value};g.onOpenTag(e.uri,e.local,q)}},m.write(e).close(),delete E.head.styling.styles;var O=!1;for(var P in E.head.layout.regions)if(E.head.layout.regions.hasOwnProperty(P)){O=!0;break}if(!O){var x=N.prototype.createDefaultRegion(E.lang);E.head.layout.regions[x.id]=x}for(var D in E.head.layout.regions)E.head.layout.regions.hasOwnProperty(D)&&a(E,E.head.layout.regions[D],null,null);return E.body&&a(E,E.body,null,null),E.body&&o(E.body),E},l.prototype.initFromNode=function(e,t,n){var o=function(e,t){var n=D(e,r.ns_ttp,"cellResolution"),i=15,o=32;if(null!==n){var a=/(\d+) (\d+)/.exec(n);null!==a?(o=parseInt(a[1]),i=parseInt(a[2])):U(t,"Malformed cellResolution value (using initial value instead)")}return{w:o,h:i}}(e,n);this.cellLength={h:new i.ComputedLength(0,1/o.h),w:new i.ComputedLength(1/o.w,0)};var a=function(e,t){var n,i=D(e,r.ns_ttp,"frameRate"),o=30;null!==i&&(null!==(n=/(\d+)/.exec(i))?o=parseInt(n[1]):U(t,"Malformed frame rate attribute (using initial value instead)"));var a=D(e,r.ns_ttp,"frameRateMultiplier"),s=1;null!==a&&(null!==(n=/(\d+) (\d+)/.exec(a))?s=parseInt(n[1])/parseInt(n[2]):U(t,"Malformed frame rate multiplier attribute (using initial value instead)"));var l=s*o,u=1,c=D(e,r.ns_ttp,"tickRate");return null===c?null!==i&&(u=l):null!==(n=/(\d+)/.exec(c))?u=parseInt(n[1]):U(t,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:l,tickRate:u}}(e,n);this.effectiveFrameRate=a.effectiveFrameRate,this.tickRate=a.tickRate,this.aspectRatio=function(e,t){var n=D(e,r.ns_ittp,"aspectRatio");null===n&&(n=D(e,r.ns_ttp,"displayAspectRatio"));var i=null;if(null!==n){var o=/(\d+)\s+(\d+)/.exec(n);if(null!==o){var a=parseInt(o[1]),s=parseInt(o[2]);0!==a&&0!==s?i=a/s:B(t,"Illegal aspectRatio values (ignoring)")}else B(t,"Malformed aspectRatio attribute (ignoring)")}return i}(e,n);var s=D(e,r.ns_ttp,"timeBase");null!==s&&"media"!==s&&j(n,"Unsupported time base");var l=function(e,t){var n=D(e,r.ns_tts,"extent");if(null===n)return null;var o=n.split(" ");if(2!==o.length)return U(t,"Malformed extent (ignoring)"),null;var a=i.parseLength(o[0]),s=i.parseLength(o[1]);return s&&a?{h:s,w:a}:(U(t,"Malformed extent values (ignoring)"),null)}(e,n);null===l?this.pxLength={h:null,w:null}:("px"===l.h.unit&&"px"===l.w.unit||j(n,"Extent on TT must be in px or absent"),this.pxLength={h:new i.ComputedLength(0,1/l.h.value),w:new i.ComputedLength(1/l.w.value,0)}),this.dimensions={h:new i.ComputedLength(0,1),w:new i.ComputedLength(1,0)},this.lang=t},l.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=Z(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var r=Z(this.events,e.end);r.found||this.events.splice(r.index,0,e.end)}}},l.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},l.prototype.getMediaTimeEvents=function(){return this.events},f.prototype.initFromNode=function(e,t){this.id=O(e),this.styleAttrs=x(e,t),this.styleRefs=P(e)},d.prototype.initFromNode=function(e,t){for(var n in this.styleAttrs={},e.attributes)if(e.attributes[n].uri===r.ns_itts||e.attributes[n].uri===r.ns_ebutts||e.attributes[n].uri===r.ns_tts){var i=e.attributes[n].uri+" "+e.attributes[n].local;this.styleAttrs[i]=e.attributes[n].value}},p.prototype.initFromNode=function(e,t,r,n,i){this.src="src"in r.attributes?r.attributes.src.value:null,this.src||B(i,"Invalid image@src attribute"),this.type="type"in r.attributes?r.attributes.type.value:null,this.type||B(i,"Invalid image@type attribute"),v.prototype.initFromNode.call(this,e,t,r,i),E.prototype.initFromNode.call(this,e,t,r,i),_.prototype.initFromNode.call(this,e,t,r,i),y.prototype.initFromNode.call(this,e,t,r,i),this.lang=n},m.prototype.initFromNode=function(e,t,r,n){this.id=O(r)},y.prototype.initFromNode=function(e,t,r,n){this.regionID=function(e){return e&&"region"in e.attributes?e.attributes.region.value:""}(r)},v.prototype.initFromNode=function(e,t,r,n){this.styleAttrs=x(r,n),null!==e.head&&null!==e.head.styling&&L(e.head.styling,P(r),this.styleAttrs,n)},_.prototype.initFromNode=function(e,t,r,n){this.sets=[]},b.prototype.initFromNode=function(e,t,r,n){this.contents=[]},E.prototype.initFromNode=function(e,t,r,n){var i=function(e,t,r,n){var i=null;r&&"begin"in r.attributes&&null===(i=k(e.tickRate,e.effectiveFrameRate,r.attributes.begin.value))&&U(n,"Malformed begin value "+r.attributes.begin.value+" (using 0)");var o=null;r&&"dur"in r.attributes&&null===(o=k(e.tickRate,e.effectiveFrameRate,r.attributes.dur.value))&&U(n,"Malformed dur value "+r.attributes.dur.value+" (ignoring)");var a=null;return r&&"end"in r.attributes&&null===(a=k(e.tickRate,e.effectiveFrameRate,r.attributes.end.value))&&U(n,"Malformed end value (ignoring)"),{explicit_begin:i,explicit_end:a,explicit_dur:o}}(e,0,r,n);this.explicit_begin=i.explicit_begin,this.explicit_end=i.explicit_end,this.explicit_dur=i.explicit_dur,this.timeContainer=function(e,t){var r=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return r&&"par"!==r?"seq"===r?"seq":(B(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(r,n)},w.prototype.initFromNode=function(e,t,r,n){v.prototype.initFromNode.call(this,e,null,t,n),E.prototype.initFromNode.call(this,e,null,t,n),_.prototype.initFromNode.call(this,e,null,t,n),y.prototype.initFromNode.call(this,e,null,t,n),b.prototype.initFromNode.call(this,e,null,t,n),this.lang=r},S.prototype.initFromNode=function(e,t,r,n,i){v.prototype.initFromNode.call(this,e,t,r,i),E.prototype.initFromNode.call(this,e,t,r,i),_.prototype.initFromNode.call(this,e,t,r,i),y.prototype.initFromNode.call(this,e,t,r,i),b.prototype.initFromNode.call(this,e,t,r,i),this.lang=n},T.prototype.initFromNode=function(e,t,r,n,i){v.prototype.initFromNode.call(this,e,t,r,i),E.prototype.initFromNode.call(this,e,t,r,i),_.prototype.initFromNode.call(this,e,t,r,i),y.prototype.initFromNode.call(this,e,t,r,i),b.prototype.initFromNode.call(this,e,t,r,i),this.lang=n},A.prototype.initFromNode=function(e,t,r,n,i,o){v.prototype.initFromNode.call(this,e,t,r,o),E.prototype.initFromNode.call(this,e,t,r,o),_.prototype.initFromNode.call(this,e,t,r,o),y.prototype.initFromNode.call(this,e,t,r,o),b.prototype.initFromNode.call(this,e,t,r,o),this.space=i,this.lang=n},I.prototype.initFromText=function(e,t,r,n,i,o){E.prototype.initFromNode.call(this,e,t,null,o),this.text=r,this.space=i,this.lang=n},R.prototype.initFromNode=function(e,t,r,n,i){y.prototype.initFromNode.call(this,e,t,r,i),E.prototype.initFromNode.call(this,e,t,r,i),this.lang=n},N.prototype.createDefaultRegion=function(e){var t=new N;return m.call(t,""),v.call(t,{}),_.call(t,[]),E.call(t,0,Number.POSITIVE_INFINITY,null),this.lang=e,t},N.prototype.initFromNode=function(e,t,r,n){m.prototype.initFromNode.call(this,e,null,t,n),E.prototype.initFromNode.call(this,e,null,t,n),_.prototype.initFromNode.call(this,e,null,t,n),this.styleAttrs=x(t,n),this.styleRefs=P(t),this.lang=r},C.prototype.initFromNode=function(e,t,r,n){E.prototype.initFromNode.call(this,e,t,r,n);var i=x(r,n);for(var o in this.qname=null,this.value=null,i)if(i.hasOwnProperty(o)){if(this.qname){B(n,"More than one style specified on set");break}this.qname=o,this.value=i[o]}}}(t,"undefined"==typeof sax?r(5378):sax,"undefined"==typeof imscNames?r(210):imscNames,"undefined"==typeof imscStyles?r(6811):imscStyles,"undefined"==typeof imscUtils?r(5926):imscUtils)},506:function(e,t,r){var n=/firefox/i.test(navigator.userAgent);!function(e,t,r){function i(e,t,f,h){var p;if("region"===f.kind)(p=document.createElement("div")).style.position="absolute";else if("body"===f.kind)p=document.createElement("div");else if("div"===f.kind)p=document.createElement("div");else if("image"===f.kind){if(p=document.createElement("img"),null!==e.imgResolver&&null!==f.src){var y=e.imgResolver(f.src,p);y&&(p.src=y),p.height=e.regionH,p.width=e.regionW}}else if("p"===f.kind)p=document.createElement("p");else if("span"===f.kind)if("container"===f.styleAttrs[r.byName.ruby.qname])p=document.createElement("ruby"),e.ruby=!0;else if("base"===f.styleAttrs[r.byName.ruby.qname])p=document.createElement("span");else if("text"===f.styleAttrs[r.byName.ruby.qname])p=document.createElement("rt");else if("baseContainer"===f.styleAttrs[r.byName.ruby.qname])p=document.createElement("rbc");else if("textContainer"===f.styleAttrs[r.byName.ruby.qname])p=document.createElement("rtc");else{if("delimiter"===f.styleAttrs[r.byName.ruby.qname])return;p=document.createElement("span")}else"br"===f.kind&&(p=document.createElement("br"));if(p){if(f.lang&&("region"!==f.kind&&f.lang===h.lang||(p.lang=f.lang)),t.appendChild(p),p.style.margin="0","region"===f.kind){var b=f.styleAttrs[r.byName.writingMode.qname];"lrtb"===b||"lr"===b?(e.ipd="lr",e.bpd="tb"):"rltb"===b||"rl"===b?(e.ipd="rl",e.bpd="tb"):"tblr"===b?(e.ipd="tb",e.bpd="lr"):"tbrl"!==b&&"tb"!==b||(e.ipd="tb",e.bpd="rl")}else if("p"===f.kind&&"tb"===e.bpd){var E=f.styleAttrs[r.byName.direction.qname];e.ipd="ltr"===E?"lr":"rl"}for(var w=0;w<d.length;w++){var S=d[w],T=f.styleAttrs[S.qname];void 0!==T&&null!==S.map&&S.map(e,p,f,T)}var A=p,I=f.styleAttrs[r.byName.linePadding.qname];if(I&&!I.isZero()){var R=I.toUsedLength(e.w,e.h);if(R>0){var N=Math.ceil(R)+"px";"tb"===e.bpd?(A.style.paddingLeft=N,A.style.paddingRight=N):(A.style.paddingTop=N,A.style.paddingBottom=N),e.lp=I}}var C=f.styleAttrs[r.byName.multiRowAlign.qname];if(C&&"auto"!==C){var O=document.createElement("span");O.style.display="inline-block",O.style.textAlign=C,p.appendChild(O),A=O,e.mra=C}var P=f.styleAttrs[r.byName.rubyReserve.qname];if(P&&"none"!==P[0]&&(e.rubyReserve=P),f.styleAttrs[r.byName.fillLineGap.qname]&&(e.flg=!0),"span"===f.kind&&f.text){var x=f.styleAttrs[r.byName.textEmphasis.qname];if(x&&"none"!==x.style&&(e.textEmphasis=!0),r.byName.textCombine.qname in f.styleAttrs&&"all"===f.styleAttrs[r.byName.textCombine.qname])p.textContent=f.text,p._isd_element=f,x&&c(e,p,0,x);else for(var D="",k=0;k<f.text.length;k++){D+=f.text.charAt(k);var M=f.text.charCodeAt(k);if(M<55296||M>56319||k===f.text.length-1){var L=document.createElement("span");L.textContent=D,x&&c(e,L,0,x),p.appendChild(L),D="",L._isd_element=f}}}if("contents"in f)for(var F=0;F<f.contents.length;F++)i(e,A,f.contents[F],f);var U=[];if("p"===f.kind&&(u(e,A,U,null),e.rubyReserve&&(function(e,t){for(var r=0;r<e.length;r++){var n,i,o=document.createElement("ruby"),a=document.createElement("span");a.textContent="\u200b",o.appendChild(a);var s,l=t.rubyReserve[1].toUsedLength(t.w,t.h)+"px";"both"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&1==e.length?((n=document.createElement("rtc")).style[m]=g?"after":"under",n.textContent="\u200b",n.style.fontSize=l,(i=document.createElement("rtc")).style[m]=g?"before":"over",i.textContent="\u200b",i.style.fontSize=l,o.appendChild(n),o.appendChild(i)):((n=document.createElement("rtc")).textContent="\u200b",n.style.fontSize=l,s="after"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&r>0?g?"after":"tb"===t.bpd||"rl"===t.bpd?"under":"over":g?"before":"tb"===t.bpd||"rl"===t.bpd?"over":"under",n.style[m]=s,o.appendChild(n));for(var u=null,c=0;c<e[r].rbc.length;c++)if("ruby"===e[r].rbc[c].localName){u=e[r].rbc[c];for(var f=0;f<u.style.length;f++)o.style.setProperty(u.style.item(f),u.style.getPropertyValue(u.style.item(f)));break}(u=u||e[r].elements[0].node).parentElement.insertBefore(o,u)}}(U,e),e.rubyReserve=null),(e.ruby||e.rubyReserve)&&(function(e,t){for(var r=0;r<e.length;r++)for(var n=0;n<e[r].rbc.length;n++){var i;e[r].rbc[n].style[m]||(i=g?0===r?"before":"after":"tb"===t.bpd||"rl"===t.bpd?0===r?"over":"under":0===r?"under":"over",e[r].rbc[n].style[m]=i)}}(U,e),e.ruby=null),e.textEmphasis&&(function(e,t){for(var r=0;r<e.length;r++)for(var n=0;n<e[r].te.length;n++){var i;e[r].te[n].style[v]&&"none"!==e[r].te[n].style[v]||(i="tb"===t.bpd?0===r?"left over":"left under":"rl"===t.bpd?0===r?"right under":"left under":0===r?"left under":"right under",e[r].te[n].style[v]=i)}}(U,e),e.textEmphasis=null),e.mra&&(function(e){for(var t=0;t<e.length-1;t++){var r=e[t].elements.length;if(0!==r&&!1===e[t].br){var n=document.createElement("br"),i=e[t].elements[r-1].node;i.parentElement.insertBefore(n,i.nextSibling)}}}(U),e.mra=null),e.lp&&(function(e,t,r){if(null!==e)for(var i=0;i<e.length;i++){var o=e[i].elements.length,a=Math.ceil(t)+"px",s="-"+Math.ceil(t)+"px";if(0!==o){var l=e[i].elements[e[i].start_elem],u=e[i].elements[e[i].end_elem];if(l===u){var c=l.node.getBoundingClientRect();if(0==c.width||0==c.height)continue}"lr"===r.ipd?(l.node.style.marginLeft=s,l.node.style.paddingLeft=a):"rl"===r.ipd?(l.node.style.paddingRight=a,l.node.style.marginRight=s):"tb"===r.ipd&&(l.node.style.paddingTop=a,l.node.style.marginTop=s),"lr"===r.ipd?(n||(u.node.style.marginRight=s),u.node.style.paddingRight=a):"rl"===r.ipd?(u.node.style.paddingLeft=a,n||(u.node.style.marginLeft=s)):"tb"===r.ipd&&(u.node.style.paddingBottom=a,u.node.style.marginBottom=s)}}}(U,e.lp.toUsedLength(e.w,e.h),e),e.lp=null),function(e,t){for(var r=0;r<e.length;r++)for(var n=e[r],i=1;i<n.elements.length;){var s=n.elements[i-1],l=n.elements[i];a(s.node,l.node,t)?n.elements.splice(i,1):i++}for(var u,c,f=[],d=0;d<e.length;d++)for(var h=0;h<e[d].elements.length;h++)(c=o(u=e[d].elements[h].node,f,!1))&&(u.style.backgroundColor=c);for(var p=0;p<f.length;p++)f[p].style.backgroundColor=""}(U,e),e.flg)){var B=l(A.getBoundingClientRect(),e);!function(e,t,r,n){for(var i=Math.sign(r-t),o=0;o<=e.length;o++){var a,s,l,u;if(a=0===o?Math.round(t):o===e.length?Math.round(r):Math.round((e[o-1].after+e[o].before)/2),o>0&&e[o-1])for(l=0;l<e[o-1].elements.length;l++)s=i*(a-(u=e[o-1].elements[l]).after)+"px","lr"===n.bpd?u.node.style.paddingRight=s:"rl"===n.bpd?u.node.style.paddingLeft=s:"tb"===n.bpd&&(u.node.style.paddingBottom=s);if(o<e.length)for(l=0;l<e[o].elements.length;l++)s=i*((u=e[o].elements[l]).before-a)+"px","lr"===n.bpd?u.node.style.paddingLeft=s:"rl"===n.bpd?u.node.style.paddingRight=s:"tb"===n.bpd&&(u.node.style.paddingTop=s)}}(U,B.before,B.after,e),e.flg=null}if("region"===f.kind&&"tb"===e.bpd&&e.enableRollUp&&f.contents.length>0&&"after"===f.styleAttrs[r.byName.displayAlign.qname]){u(e,A,U,null);var j=new s(""===f.id?"_":f.id,U);if(e.currentISDState[j.id]=j,e.previousISDState&&j.id in e.previousISDState&&e.previousISDState[j.id].plist.length>0&&j.plist.length>1&&j.plist[j.plist.length-2].text===e.previousISDState[j.id].plist[e.previousISDState[j.id].plist.length-1].text){var Z=p.firstElementChild,q=j.plist[j.plist.length-1].after-j.plist[j.plist.length-1].before;Z.style.bottom="-"+q+"px",Z.style.transition="transform 0.4s",Z.style.position="relative",Z.style.transform="translateY(-"+q+"px)"}}}else _(e.errorHandler,"Error processing ISD element kind: "+f.kind)}function o(e,t,r){return e.style.backgroundColor?(r&&!t.includes(e)&&t.push(e),e.style.backgroundColor):"SPAN"===e.parentElement.nodeName||"RUBY"===e.parentElement.nodeName||"RBC"===e.parentElement.nodeName||"RTC"===e.parentElement.nodeName||"RT"===e.parentElement.nodeName?o(e.parentElement,t,!0):void 0}function a(e,t,r){if("SPAN"===e.tagName&&"SPAN"===t.tagName&&e._isd_element===t._isd_element){if(!e._isd_element)return _(r.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;e.textContent+=t.textContent;for(var n=0;n<t.style.length;n++){var i=t.style[n];(i.indexOf("border")>=0||i.indexOf("padding")>=0||i.indexOf("margin")>=0)&&(e.style[i]=t.style[i])}return t.parentElement.removeChild(t),!0}return!1}function s(e,t){this.id=e,this.plist=t}function l(e,t){var r={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(r.before=e.top,r.after=e.bottom,"lr"===t.ipd?(r.start=e.left,r.end=e.right):(r.start=e.right,r.end=e.left)):"lr"===t.bpd?(r.before=e.left,r.after=e.right,r.start=e.top,r.end=e.bottom):"rl"===t.bpd&&(r.before=e.right,r.after=e.left,r.start=e.top,r.end=e.bottom),r}function u(e,t,r,n){if("rt"!==t.localName&&"rtc"!==t.localName){var i,o,a,s,c=t.style.backgroundColor||n;if(0===t.childElementCount)if("span"===t.localName||"rb"===t.localName){var f=l(t.getBoundingClientRect(),e);if(0!==r.length&&(i=f.before,o=f.after,a=r[r.length-1].before,o<(s=r[r.length-1].after)&&i>a||s<=o&&a>=i)){var d=Math.sign(f.after-f.before),h=Math.sign(f.end-f.start);d*(f.before-r[r.length-1].before)<0&&(r[r.length-1].before=f.before),d*(f.after-r[r.length-1].after)>0&&(r[r.length-1].after=f.after),h*(f.start-r[r.length-1].start)<0&&(r[r.length-1].start=f.start,r[r.length-1].start_elem=r[r.length-1].elements.length),h*(f.end-r[r.length-1].end)>0&&(r[r.length-1].end=f.end,r[r.length-1].end_elem=r[r.length-1].elements.length)}else r.push({before:f.before,after:f.after,start:f.start,end:f.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});r[r.length-1].text+=t.textContent,r[r.length-1].elements.push({node:t,bgcolor:c,before:f.before,after:f.after})}else"br"===t.localName&&0!==r.length&&(r[r.length-1].br=!0);else for(var p=t.firstChild;p;)p.nodeType===Node.ELEMENT_NODE&&(u(e,p,r,c),"ruby"===p.localName||"rtc"===p.localName?r.length>0&&r[r.length-1].rbc.push(p):"span"===p.localName&&p.style[y]&&"none"!==p.style[y]&&r.length>0&&r[r.length-1].te.push(p)),p=p.nextSibling}}function c(e,t,r,n){var i;"none"!==n.style&&("auto"===n.style?t.style[y]="filled":t.style[y]=n.style+" "+n.symbol,("before"===n.position||"after"===n.position)&&(i="tb"===e.bpd?"before"===n.position?"left over":"left under":"rl"===e.bpd?"before"===n.position?"right under":"left under":"before"===n.position?"left under":"right under",t.style[v]=i))}function f(e,t){this.qname=e,this.map=t}e.render=function(e,t,r,n,o,a,s,l,u){var c=n||t.clientHeight,f=o||t.clientWidth;if(null!==e.aspectRatio){var d=c*e.aspectRatio;d>f?c=Math.round(f/e.aspectRatio):f=d}var h=document.createElement("div");h.style.position="relative",h.style.width=f+"px",h.style.height=c+"px",h.style.margin="auto",h.style.top=0,h.style.bottom=0,h.style.left=0,h.style.right=0,h.style.zIndex=0;var p={h:c,w:f,regionH:null,regionW:null,imgResolver:r,displayForcedOnlyMode:a||!1,isd:e,errorHandler:s,previousISDState:l,enableRollUp:u||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(t.appendChild(h),"contents"in e)for(var g=0;g<e.contents.length;g++)i(p,h,e.contents[g],e);return p.currentISDState};for(var d=[new f("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,r,n){0!==n[3]&&(t.style.backgroundColor="rgba("+n[0].toString()+","+n[1].toString()+","+n[2].toString()+","+(n[3]/255).toString()+")")}),new f("http://www.w3.org/ns/ttml#styling color",function(e,t,r,n){t.style.color="rgba("+n[0].toString()+","+n[1].toString()+","+n[2].toString()+","+(n[3]/255).toString()+")"}),new f("http://www.w3.org/ns/ttml#styling direction",function(e,t,r,n){t.style.direction=n}),new f("http://www.w3.org/ns/ttml#styling display",function(e,t,r,n){}),new f("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,r,n){t.style.display="flex",t.style.flexDirection="column","before"===n?t.style.justifyContent="flex-start":"center"===n?t.style.justifyContent="center":"after"===n&&(t.style.justifyContent="flex-end")}),new f("http://www.w3.org/ns/ttml#styling extent",function(e,t,r,n){e.regionH=n.h.toUsedLength(e.w,e.h),e.regionW=n.w.toUsedLength(e.w,e.h);var i=0,o=0,a=r.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];a&&(i=a[0].toUsedLength(e.w,e.h)+a[2].toUsedLength(e.w,e.h),o=a[1].toUsedLength(e.w,e.h)+a[3].toUsedLength(e.w,e.h)),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-o+"px"}),new f("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,r,n){for(var i=[],o=0;o<n.length;o++)n[o]=n[o].trim(),"monospaceSerif"===n[o]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===n[o]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===n[o]?i.push("monospace"):"sansSerif"===n[o]?i.push("sans-serif"):"serif"===n[o]?i.push("serif"):"monospaceSansSerif"===n[o]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===n[o]?i.push("serif"):i.push(n[o]);if(i.length>0){for(var a=[i[0]],s=1;s<i.length;s++)-1==a.indexOf(i[s])&&a.push(i[s]);i=a}t.style.fontFamily=i.join(",")}),new f("http://www.w3.org/ns/ttml#styling shear",function(e,t,r,n){if(0!==n){var i=-.9*n;"tb"===e.bpd?t.style.transform="skewX("+i+"deg)":t.style.transform="skewY("+i+"deg)"}}),new f("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,r,n){t.style.fontSize=n.toUsedLength(e.w,e.h)+"px"}),new f("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,r,n){t.style.fontStyle=n}),new f("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,r,n){t.style.fontWeight=n}),new f("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,r,n){t.style.lineHeight="normal"===n?"normal":n.toUsedLength(e.w,e.h)+"px"}),new f("http://www.w3.org/ns/ttml#styling opacity",function(e,t,r,n){t.style.opacity=n}),new f("http://www.w3.org/ns/ttml#styling origin",function(e,t,r,n){t.style.top=n.h.toUsedLength(e.w,e.h)+"px",t.style.left=n.w.toUsedLength(e.w,e.h)+"px"}),new f("http://www.w3.org/ns/ttml#styling overflow",function(e,t,r,n){t.style.overflow=n}),new f("http://www.w3.org/ns/ttml#styling padding",function(e,t,r,n){var i=[];i[0]=n[0].toUsedLength(e.w,e.h)+"px",i[1]=n[3].toUsedLength(e.w,e.h)+"px",i[2]=n[2].toUsedLength(e.w,e.h)+"px",i[3]=n[1].toUsedLength(e.w,e.h)+"px",t.style.padding=i.join(" ")}),new f("http://www.w3.org/ns/ttml#styling position",function(e,t,r,n){t.style.top=n.h.toUsedLength(e.w,e.h)+"px",t.style.left=n.w.toUsedLength(e.w,e.h)+"px"}),new f("http://www.w3.org/ns/ttml#styling rubyAlign",function(e,t,r,n){t.style.rubyAlign="spaceAround"===n?"space-around":"center"}),new f("http://www.w3.org/ns/ttml#styling rubyPosition",function(e,t,r,n){var i;"before"!==n&&"after"!==n||(i=g?n:"tb"===e.bpd||"rl"===e.bpd?"before"===n?"over":"under":"before"===n?"under":"over",t.parentElement.style[m]=i)}),new f("http://www.w3.org/ns/ttml#styling showBackground",null),new f("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,r,n){var i;i="start"===n?"rl"===e.ipd?"right":"left":"end"===n?"rl"===e.ipd?"left":"right":n,t.style.textAlign=i}),new f("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,r,n){t.style.textDecoration=n.join(" ").replace("lineThrough","line-through")}),new f("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,r,n){}),new f("http://www.w3.org/ns/ttml#styling textShadow",function(e,t,n,i){var o=n.styleAttrs[r.byName.textOutline.qname];if("none"===i&&"none"===o)t.style.textShadow="";else{var a=[];if("none"!==o){var s="rgba("+o.color[0].toString()+","+o.color[1].toString()+","+o.color[2].toString()+","+(o.color[3]/255).toString()+")";a.push("1px 1px 1px "+s),a.push("-1px 1px 1px "+s),a.push("1px -1px 1px "+s),a.push("-1px -1px 1px "+s)}if("none"!==i)for(var l=0;l<i.length;l++)a.push(i[l].x_off.toUsedLength(e.w,e.h)+"px "+i[l].y_off.toUsedLength(e.w,e.h)+"px "+i[l].b_radius.toUsedLength(e.w,e.h)+"px rgba("+i[l].color[0].toString()+","+i[l].color[1].toString()+","+i[l].color[2].toString()+","+(i[l].color[3]/255).toString()+")");t.style.textShadow=a.join(",")}}),new f("http://www.w3.org/ns/ttml#styling textCombine",function(e,t,r,n){t.style.textCombineUpright=n}),new f("http://www.w3.org/ns/ttml#styling textEmphasis",function(e,t,r,n){}),new f("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,r,n){var i;i="bidiOverride"===n?"bidi-override":n,t.style.unicodeBidi=i}),new f("http://www.w3.org/ns/ttml#styling visibility",function(e,t,r,n){t.style.visibility=n}),new f("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,r,n){"wrap"===n?"preserve"===r.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===r.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new f("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,r,n){"lrtb"===n||"lr"===n||"rltb"===n||"rl"===n?t.style.writingMode="horizontal-tb":"tblr"===n?t.style.writingMode="vertical-lr":"tbrl"!==n&&"tb"!==n||(t.style.writingMode="vertical-rl")}),new f("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,r,n){t.style.zIndex=n}),new f("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,r,n){e.displayForcedOnlyMode&&!1===n&&(t.style.visibility="hidden")})],h={},p=0;p<d.length;p++)h[d[p].qname]=d[p];var g="webkitRubyPosition"in window.getComputedStyle(document.documentElement),m=g?"webkitRubyPosition":"rubyPosition",y="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",v="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function _(e,t){if(e&&e.error&&e.error(t))throw t}}(t,"undefined"==typeof imscNames?r(210):imscNames,"undefined"==typeof imscStyles?r(6811):imscStyles,"undefined"==typeof imscUtils?r(5926):imscUtils)},4080:function(e,t,r){!function(e,t,r,n){e.generateISD=function(e,t,n){var i,a=new l(e),s={},u={},c=e.head.styling.initials[r.byName.showBackground.qname],f=e.head.styling.initials[r.byName.backgroundColor.qname];for(var d in e.head.layout.regions)if(e.head.layout.regions.hasOwnProperty(d)){var h=e.head.layout.regions[d],p=h.styleAttrs[r.byName.showBackground.qname]||c,g=h.styleAttrs[r.byName.backgroundColor.qname]||f;u[h.id]=("always"===p||void 0===p)&&void 0!==g&&!(t<h.begin||t>=h.end)}for(var m in e.body&&e.body.regionID&&(u[e.body.regionID]=!0),i=null!==e.body?function e(t,r){if(r.contents){var n={};for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);return n.contents=[],r.contents.filter(function(e){return!(t<e.begin||t>=e.end)}).forEach(function(r){var i=e(t,r);i.regionID&&(u[i.regionID]=!0),null!==i&&n.contents.push(i)}),n}return r}(t,e.body):null,void 0!==u[""]&&(u[""]=!0),u)if(u[m]){var y=o(e,t,e.head.layout.regions[m],i,null,"",e.head.layout.regions[m],n,s);null!==y&&a.contents.push(y.element)}return a};var i=[r.byName.color.qname,r.byName.textCombine.qname,r.byName.textDecoration.qname,r.byName.textEmphasis.qname,r.byName.textOutline.qname,r.byName.textShadow.qname];function o(e,t,l,f,d,h,p,g,m){if(t<p.begin||t>=p.end)return null;var y="regionID"in p&&""!==p.regionID?p.regionID:h;if(null!==d&&y!==l.id&&(!("contents"in p)||"contents"in p&&0===p.contents.length||""!==y))return null;var v=new u(p);if("sets"in p)for(var _=0;_<p.sets.length;_++)t<p.sets[_].begin||t>=p.sets[_].end||(v.styleAttrs[p.sets[_].qname]=p.sets[_].value);var b={};for(var E in v.styleAttrs)if(v.styleAttrs.hasOwnProperty(E)&&(b[E]=!0,"region"===v.kind&&E===r.byName.writingMode.qname&&!(r.byName.direction.qname in v.styleAttrs))){var w=v.styleAttrs[E];"lrtb"===w||"lr"===w?v.styleAttrs[r.byName.direction.qname]="ltr":"rltb"!==w&&"rl"!==w||(v.styleAttrs[r.byName.direction.qname]="rtl")}if(null!==d)for(var S=0;S<r.all.length;S++){var T=r.all[S];if(T.qname===r.byName.textDecoration.qname){var A=d.styleAttrs[T.qname],I=v.styleAttrs[T.qname],R=[];void 0===I?R=A:-1===I.indexOf("none")?((-1===I.indexOf("noUnderline")&&-1!==A.indexOf("underline")||-1!==I.indexOf("underline"))&&R.push("underline"),(-1===I.indexOf("noLineThrough")&&-1!==A.indexOf("lineThrough")||-1!==I.indexOf("lineThrough"))&&R.push("lineThrough"),(-1===I.indexOf("noOverline")&&-1!==A.indexOf("overline")||-1!==I.indexOf("overline"))&&R.push("overline")):R.push("none"),v.styleAttrs[T.qname]=R}else if(T.qname!==r.byName.fontSize.qname||T.qname in v.styleAttrs||"span"!==v.kind||"textContainer"!==v.styleAttrs[r.byName.ruby.qname])if(T.qname!==r.byName.fontSize.qname||T.qname in v.styleAttrs||"span"!==v.kind||"text"!==v.styleAttrs[r.byName.ruby.qname])T.inherit&&T.qname in d.styleAttrs&&!(T.qname in v.styleAttrs)&&(v.styleAttrs[T.qname]=d.styleAttrs[T.qname]);else{var N=d.styleAttrs[r.byName.fontSize.qname];"textContainer"===d.styleAttrs[r.byName.ruby.qname]?v.styleAttrs[T.qname]=N:v.styleAttrs[T.qname]=new n.ComputedLength(.5*N.rw,.5*N.rh)}else{var C=d.styleAttrs[r.byName.fontSize.qname];v.styleAttrs[T.qname]=new n.ComputedLength(.5*C.rw,.5*C.rh)}}for(var O=0;O<r.all.length;O++){var P=r.all[O];if(!(P.qname in v.styleAttrs)&&!(P.qname===r.byName.position.qname&&r.byName.origin.qname in v.styleAttrs||P.qname===r.byName.origin.qname&&r.byName.position.qname in v.styleAttrs)){var x=e.head.styling.initials[P.qname]||P.initial;if(null!==x&&("region"===v.kind||!1===P.inherit&&null!==x)){var D=P.parse(x);null!==D?(v.styleAttrs[P.qname]=D,b[P.qname]=!0):c(g,"Invalid initial value for '"+P.qname+"' on element '"+v.kind)}}}for(var k=0;k<r.all.length;k++){var M=r.all[k];if(M.qname in b&&null!==M.compute){var L=M.compute(e,d,v,v.styleAttrs[M.qname],m);null!==L?v.styleAttrs[M.qname]=L:(v.styleAttrs[M.qname]=M.compute(e,d,v,M.parse(M.initial),m),c(g,"Style '"+M.qname+"' on element '"+v.kind+"' cannot be computed"))}}if("none"===v.styleAttrs[r.byName.display.qname])return null;var F=null;null===d?F=null===f?[]:[f]:"contents"in p&&(F=p.contents);for(var U=0;null!==F&&U<F.length;U++){var B=o(e,t,l,f,v,y,F[U],g,m);null!==B&&v.contents.push(B.element)}for(var j in v.styleAttrs)if(v.styleAttrs.hasOwnProperty(j)){var Z=!1;if("span"===v.kind){var q=v.styleAttrs[r.byName.ruby.qname];(Z=("container"===q||"textContainer"===q||"baseContainer"===q)&&-1!==i.indexOf(j))||(Z="container"!==q&&j===r.byName.rubyAlign.qname),Z||(Z=!("textContainer"===q||"text"===q)&&j===r.byName.rubyPosition.qname)}if(!Z){var G=r.byQName[j];"applies"in G&&(Z=-1===G.applies.indexOf(v.kind))}Z&&delete v.styleAttrs[j]}var z=v.styleAttrs[r.byName.ruby.qname];if("p"===v.kind||"span"===v.kind&&("textContainer"===z||"text"===z)){var H=[];a(v,H),function(e){for(var t,r=0;r<e.length;)if("br"!==(t=e[r]).kind&&"preserve"!==t.space){var n=t.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(n)&&(0===r||"br"===(i=e[r-1]).kind||/[\r\n\t ]$/.test(i.text))&&(n=n.substring(1)),t.text=n,0===n.length?e.splice(r,1):r++}else r++;var i,o;for(r=0;r<e.length;r++)"br"!==(t=e[r]).kind&&"preserve"!==t.space?/[ ]$/.test(t.text)&&(r===e.length-1||"br"===(o=e[r+1]).kind||"preserve"===o.space&&/^[\r\n]/.test(o.text))&&(t.text=t.text.slice(0,-1)):r++}(H),s(v)}return"div"===v.kind&&r.byName.backgroundImage.qname in v.styleAttrs||"br"===v.kind||"image"===v.kind||"contents"in v&&v.contents.length>0||"span"===v.kind&&null!==v.text||"region"===v.kind&&"always"===v.styleAttrs[r.byName.showBackground.qname]?{region_id:y,element:v}:null}function a(e,t){if("contents"in e)for(var n=0;n<e.contents.length;n++){var i=e.contents[n],o=i.styleAttrs[r.byName.ruby.qname];("span"!==i.kind||"textContainer"!==o&&"text"!==o)&&("contents"in i?a(i,t):("span"===i.kind&&0!==i.text.length||"br"===i.kind)&&t.push(i))}}function s(e){if("br"===e.kind)return!1;if("text"in e)return 0===e.text.length;if("contents"in e){for(var t=e.contents.length;t--;)s(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}function l(e){this.contents=[],this.aspectRatio=e.aspectRatio,this.lang=e.lang}function u(e){for(var t in this.kind=e.kind||"region",this.lang=e.lang,e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)e.styleAttrs.hasOwnProperty(t)&&(this.styleAttrs[t]=e.styleAttrs[t]);"src"in e&&(this.src=e.src),"type"in e&&(this.type=e.type),"text"in e?this.text=e.text:("region"===this.kind||"contents"in e)&&(this.contents=[]),"space"in e&&(this.space=e.space)}function c(e,t){if(e&&e.error&&e.error(t))throw t}}(t,"undefined"==typeof imscNames?r(210):imscNames,"undefined"==typeof imscStyles?r(6811):imscStyles,"undefined"==typeof imscUtils?r(5926):imscUtils)},4403:function(e,t,r){t.generateISD=r(4080).generateISD,t.fromXML=r(3362).fromXML,t.renderHTML=r(506).render},210:function(e,t){!function(e){e.ns_tt="http://www.w3.org/ns/ttml",e.ns_tts="http://www.w3.org/ns/ttml#styling",e.ns_ttp="http://www.w3.org/ns/ttml#parameter",e.ns_xml="http://www.w3.org/XML/1998/namespace",e.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",e.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",e.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",e.ns_ebutts="urn:ebu:tt:style"}(t)},6811:function(e,t,r){!function(e,t,r){function n(e,t,r,n,i,o,a,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=o,this.initial=r,this.applies=n,this.parse=a,this.compute=s}for(var i in e.all=[new n(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,r.parseColor,null),new n(t.ns_tts,"color","white",["span"],!0,!0,r.parseColor,null),new n(t.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new n(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new n(t.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new n(t.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=r.parseLength(t[0]),i=r.parseLength(t[1]);return i&&n?{h:i,w:n}:null},function(e,t,n,i,o){var a,s;if("auto"===i)a=new r.ComputedLength(0,1);else if(null===(a=r.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===i)s=new r.ComputedLength(1,0);else if(null===(s=r.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:a,w:s}}),new n(t.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(e){for(var t=e.split(","),r=[],n=0;n<t.length;n++)t[n]=t[n].trim(),"'"!==t[n].charAt(0)&&'"'!==t[n].charAt(0)&&"default"===t[n]?r.push("monospaceSerif"):r.push(t[n]);return r},null),new n(t.ns_tts,"shear","0%",["p"],!0,!0,r.parseLength,function(e,t,r,n){return"%"!==n.unit?null:Math.abs(n.value)>100?100*Math.sign(n.value):n.value}),new n(t.ns_tts,"fontSize","1c",["span","p"],!0,!0,r.parseLength,function(t,n,i,o,a){return r.toComputedLength(o.value,o.unit,null!==n?n.styleAttrs[e.byName.fontSize.qname]:t.cellLength.h,null!==n?n.styleAttrs[e.byName.fontSize.qname]:t.cellLength.h,t.cellLength.h,t.pxLength.h)}),new n(t.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(e){return e},null),new n(t.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(e){return e},null),new n(t.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:r.parseLength(e)},function(t,n,i,o,a){var s;if("normal"===o)s=o;else if(null===(s=r.toComputedLength(o.value,o.unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h)))return null;return s}),new n(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new n(t.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=r.parseLength(t[0]),i=r.parseLength(t[1]);return i&&n?{h:i,w:n}:null},function(e,t,n,i,o){var a,s;if("auto"===i)a=new r.ComputedLength(0,0);else if(null===(a=r.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===i)s=new r.ComputedLength(0,0);else if(null===(s=r.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:a,w:s}}),new n(t.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new n(t.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(t.length>4)return null;for(var n=[],i=0;i<t.length;i++){var o=r.parseLength(t[i]);if(!o)return null;n.push(o)}return n},function(t,n,i,o,a){var s;if(1===o.length)s=[o[0],o[0],o[0],o[0]];else if(2===o.length)s=[o[0],o[1],o[0],o[1]];else if(3===o.length)s=[o[0],o[1],o[2],o[1]];else{if(4!==o.length)return null;s=[o[0],o[1],o[2],o[3]]}var l=i.styleAttrs[e.byName.writingMode.qname];if("lrtb"===l||"lr"===l)s=[s[0],s[3],s[2],s[1]];else if("rltb"===l||"rl"===l)s=[s[0],s[1],s[2],s[3]];else if("tblr"===l)s=[s[3],s[0],s[1],s[2]];else{if("tbrl"!==l&&"tb"!==l)return null;s=[s[3],s[2],s[1],s[0]]}for(var u=[],c=0;c<s.length;c++)if(0===s[c].value)u[c]=new r.ComputedLength(0,0);else if(u[c]=r.toComputedLength(s[c].value,s[c].unit,i.styleAttrs[e.byName.fontSize.qname],0===c||2===c?i.styleAttrs[e.byName.extent.qname].h:i.styleAttrs[e.byName.extent.qname].w,0===c||2===c?t.cellLength.h:t.cellLength.w,0===c||2===c?t.pxLength.h:t.pxLength.w),null===u[c])return null;return u}),new n(t.ns_tts,"position","top left",["region"],!1,!0,function(e){return r.parsePosition(e)},function(t,n,i,o){var a,s;return null===(a=r.toComputedLength(o.v.offset.value,o.v.offset.unit,null,new r.ComputedLength(-i.styleAttrs[e.byName.extent.qname].h.rw,t.dimensions.h.rh-i.styleAttrs[e.byName.extent.qname].h.rh),null,t.pxLength.h))?null:("bottom"===o.v.edge&&(a=new r.ComputedLength(-a.rw-i.styleAttrs[e.byName.extent.qname].h.rw,t.dimensions.h.rh-a.rh-i.styleAttrs[e.byName.extent.qname].h.rh)),s=r.toComputedLength(o.h.offset.value,o.h.offset.unit,null,new r.ComputedLength(t.dimensions.w.rw-i.styleAttrs[e.byName.extent.qname].w.rw,-i.styleAttrs[e.byName.extent.qname].w.rh),null,t.pxLength.w),null===a?null:("right"===o.h.edge&&(s=new r.ComputedLength(t.dimensions.w.rw-s.rw-i.styleAttrs[e.byName.extent.qname].w.rw,-s.rh-i.styleAttrs[e.byName.extent.qname].w.rh)),{h:a,w:s}))}),new n(t.ns_tts,"ruby","none",["span"],!1,!0,function(e){return e},null),new n(t.ns_tts,"rubyAlign","center",["span"],!0,!0,function(e){return"center"!==e&&"spaceAround"!==e?null:e},null),new n(t.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(e){return e},null),new n(t.ns_tts,"rubyReserve","none",["p"],!0,!0,function(e){var t=e.split(" "),n=[null,null];if(0===t.length||t.length>2)return null;if("none"!==t[0]&&"both"!==t[0]&&"after"!==t[0]&&"before"!==t[0]&&"outside"!==t[0])return null;if(n[0]=t[0],2===t.length&&"none"!==t[0]){var i=r.parseLength(t[1]);if(!i)return null;n[1]=i}return n},function(t,n,i,o,a){return"none"===o[0]?o:null===(s=null===o[1]?new r.ComputedLength(.5*i.styleAttrs[e.byName.fontSize.qname].rw,.5*i.styleAttrs[e.byName.fontSize.qname].rh):r.toComputedLength(o[1].value,o[1].unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h))?null:[o[0],s];var s}),new n(t.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new n(t.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,r,n,i){return"left"===n?"start":"right"===n?"end":n}),new n(t.ns_tts,"textCombine","none",["span"],!0,!0,function(e){return"none"===e||"all"===e?e:null},null),new n(t.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new n(t.ns_tts,"textEmphasis","none",["span"],!0,!0,function(e){for(var t=e.split(" "),n={style:null,symbol:null,color:null,position:null},i=0;i<t.length;i++)if("none"===t[i]||"auto"===t[i])n.style=t[i];else if("filled"===t[i]||"open"===t[i])n.style=t[i];else if("circle"===t[i]||"dot"===t[i]||"sesame"===t[i])n.symbol=t[i];else if("current"===t[i])n.color=t[i];else if("outside"===t[i]||"before"===t[i]||"after"===t[i])n.position=t[i];else if(n.color=r.parseColor(t[i]),null===n.color)return null;return null==n.style&&null==n.symbol?n.style="auto":(n.symbol=n.symbol||"circle",n.style=n.style||"filled"),n.position=n.position||"outside",n.color=n.color||"current",n},null),new n(t.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},n=e.split(" ");if(0===n.length||n.length>2)return null;var i=r.parseColor(n[0]);if(t.color=i,null!==i&&n.shift(),1!==n.length)return null;var o=r.parseLength(n[0]);return o?(t.thickness=o,t):null},function(t,n,i,o,a){if("none"===o)return o;var s={};return null===o.color?s.color=i.styleAttrs[e.byName.color.qname]:s.color=o.color,s.thickness=r.toComputedLength(o.thickness.value,o.thickness.unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h),null===s.thickness?null:s}),new n(t.ns_tts,"textShadow","none",["span"],!0,!0,r.parseTextShadow,function(t,n,i,o){if("none"===o)return o;for(var a=[],s=0;s<o.length;s++){var l={};if(l.x_off=r.toComputedLength(o[s][0].value,o[s][0].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.w),null===l.x_off)return null;if(l.y_off=r.toComputedLength(o[s][1].value,o[s][1].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.h),null===l.y_off)return null;if(null===o[s][2])l.b_radius=0;else if(l.b_radius=r.toComputedLength(o[s][2].value,o[s][2].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.h),null===l.b_radius)return null;null===o[s][3]?l.color=i.styleAttrs[e.byName.color.qname]:l.color=o[s][3],a.push(l)}return a}),new n(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new n(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new n(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new n(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new n(t.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new n(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,r.parseLength,function(e,t,n,i,o){return r.toComputedLength(i.value,i.unit,null,null,e.cellLength.w,null)}),new n(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new n(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new n(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null),new n(t.ns_itts,"fillLineGap","false",["p"],!0,!0,function(e){return"true"===e},null)],e.byQName={},e.all)e.byQName[e.all[i].qname]=e.all[i];for(var o in e.byName={},e.all)e.byName[e.all[o].name]=e.all[o]}(t,"undefined"==typeof imscNames?r(210):imscNames,"undefined"==typeof imscUtils?r(5926):imscUtils)},5926:function(e,t){!function(e){var t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,r=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,n=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,i={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var o,a=null,s=i[e.toLowerCase()];return void 0!==s?a=s:null!==(o=t.exec(e))?a=[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16),void 0!==o[4]?parseInt(o[4],16):255]:null!==(o=r.exec(e))?a=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),255]:null!==(o=n.exec(e))&&(a=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),parseInt(o[4])]),a};var o=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;e.parseLength=function(e){var t,r=null;return null!==(t=o.exec(e))&&(r={value:parseFloat(t[1]),unit:t[2]}),r},e.parseTextShadow=function(t){for(var r=t.match(/([^\(,\)]|\([^\)]+\))+/g),n=[],i=0;i<r.length;i++){var o=r[i].split(" ");if(1===o.length&&"none"===o[0])return"none";if(o.length>1&&o.length<5){var a=[null,null,null,null],s=e.parseLength(o.shift());if(null===s)return null;if(a[0]=s,null===(s=e.parseLength(o.shift())))return null;if(a[1]=s,0===o.length){n.push(a);continue}if(null!==(s=e.parseLength(o[0]))&&(a[2]=s,o.shift()),0===o.length){n.push(a);continue}var l=e.parseColor(o[0]);if(null===l)return null;a[3]=l,n.push(a)}}return n},e.parsePosition=function(t){var r=t.split(" "),n=function(e){return"center"===e||"left"===e||"top"===e||"bottom"===e||"right"===e};if(r.length>4)return null;for(var i=0;i<r.length;i++)if(!n(r[i])){var o=e.parseLength(r[i]);if(null===o)return null;r[i]=o}for(var a={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},s=0;s<r.length;){var l=r[s++];if(n(l)){var u={value:0,unit:"%"};2!==r.length&&s<r.length&&!n(r[s])&&(u=r[s++]),"right"===l?(a.h.edge=l,a.h.offset=u):"bottom"===l?(a.v.edge=l,a.v.offset=u):"left"===l?a.h.offset=u:"top"===l&&(a.v.offset=u)}else{if(1!==r.length&&2!==r.length)return null;1===s?a.h.offset=l:a.v.offset=l}}return a},e.ComputedLength=function(e,t){this.rw=e,this.rh=t},e.ComputedLength.prototype.toUsedLength=function(e,t){return e*this.rw+t*this.rh},e.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},e.toComputedLength=function(t,r,n,i,o,a){return"%"===r&&i?new e.ComputedLength(i.rw*t/100,i.rh*t/100):"em"===r&&n?new e.ComputedLength(n.rw*t,n.rh*t):"c"===r&&o?new e.ComputedLength(t*o.rw,t*o.rh):"px"===r&&a?new e.ComputedLength(t*a.rw,t*a.rh):"rh"===r?new e.ComputedLength(0,t/100):"rw"===r?new e.ComputedLength(t/100,0):null}}(t)},3516:function(e){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=122||t>=65&&t<=90}},2219:function(e,t,r){"use strict";var n=r(3516),i=r(395);e.exports=function(e){return n(e)||i(e)}},395:function(e){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=48&&t<=57}},3875:function(e){"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",i=0,o=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(o===s-1||1===a);else if(o!==s-1&&2===a){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",i=0):i=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),o=s,a=0;continue}}else if(2===n.length||1===n.length){n="",i=0,o=s,a=0;continue}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(o+1,s):n=e.slice(o+1,s),i=s-o-1;o=s,a=0}else 46===r&&-1!==a?++a:a=-1}return n}var n={resolve:function(){for(var e,n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a;o>=0?a=arguments[o]:(void 0===e&&(e=process.cwd()),a=e),t(a),0!==a.length&&(n=a+"/"+n,i=47===a.charCodeAt(0))}return n=r(n,!i),i?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&i&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var i=arguments[r];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r)return"";if((e=n.resolve(e))===(r=n.resolve(r)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var o=e.length,a=o-i,s=1;s<r.length&&47===r.charCodeAt(s);++s);for(var l=r.length-s,u=a<l?a:l,c=-1,f=0;f<=u;++f){if(f===u){if(l>u){if(47===r.charCodeAt(s+f))return r.slice(s+f+1);if(0===f)return r.slice(s+f)}else a>u&&(47===e.charCodeAt(i+f)?c=f:0===f&&(c=0));break}var d=e.charCodeAt(i+f);if(d!==r.charCodeAt(s+f))break;47===d&&(c=f)}var h="";for(f=i+c+1;f<=o;++f)f!==o&&47!==e.charCodeAt(f)||(0===h.length?h+="..":h+="/..");return h.length>0?h+r.slice(s+c):(s+=c,47===r.charCodeAt(s)&&++s,r.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,i=-1,o=!0,a=e.length-1;a>=1;--a)if(47===(r=e.charCodeAt(a))){if(!o){i=a;break}}else o=!1;return-1===i?n?"/":".":n&&1===i?"//":e.slice(0,i)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var n,i=0,o=-1,a=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var s=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!a){i=n+1;break}}else-1===l&&(a=!1,l=n+1),s>=0&&(u===r.charCodeAt(s)?-1==--s&&(o=n):(s=-1,o=l))}return i===o?o=l:-1===o&&(o=e.length),e.slice(i,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!a){i=n+1;break}}else-1===o&&(a=!1,o=n+1);return-1===o?"":e.slice(i,o)},extname:function(e){t(e);for(var r=-1,n=0,i=-1,o=!0,a=0,s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(47!==l)-1===i&&(o=!1,i=s+1),46===l?-1===r?r=s:1!==a&&(a=1):-1!==r&&(a=-1);else if(!o){n=s+1;break}}return-1===r||-1===i||0===a||1===a&&r===i-1&&r===n+1?"":e.slice(r,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+"/"+n:n}(0,e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n,i=e.charCodeAt(0),o=47===i;o?(r.root="/",n=1):n=0;for(var a=-1,s=0,l=-1,u=!0,c=e.length-1,f=0;c>=n;--c)if(47!==(i=e.charCodeAt(c)))-1===l&&(u=!1,l=c+1),46===i?-1===a?a=c:1!==f&&(f=1):-1!==a&&(f=-1);else if(!u){s=c+1;break}return-1===a||-1===l||0===f||1===f&&a===l-1&&a===s+1?-1!==l&&(r.base=r.name=0===s&&o?e.slice(1,l):e.slice(s,l)):(0===s&&o?(r.name=e.slice(1,a),r.base=e.slice(1,l)):(r.name=e.slice(s,a),r.base=e.slice(s,l)),r.ext=e.slice(a,l)),s>0?r.dir=e.slice(0,s-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n},8387:function(e,t,r){var n=r(1549),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),o(i,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},5378:function(e,t,r){!function(e){e.parser=function(e,t){return new i(e,t)},e.SAXParser=i,e.SAXStream=a,e.createStream=function(e,t){return new a(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function i(t,r){if(!(this instanceof i))return new i(t,r);var o=this;!function(e){for(var t=0,r=n.length;t<r;t++)e[n[t]]=""}(o),o.q=o.c="",o.bufferCheckPosition=e.MAX_BUFFER_LENGTH,o.opt=r||{},o.opt.lowercase=o.opt.lowercase||o.opt.lowercasetags,o.looseCase=o.opt.lowercase?"toLowerCase":"toUpperCase",o.tags=[],o.closed=o.closedRoot=o.sawRoot=!1,o.tag=o.error=null,o.strict=!!t,o.noscript=!(!t&&!o.opt.noscript),o.state=A.BEGIN,o.strictEntities=o.opt.strictEntities,o.ENTITIES=o.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),o.attribList=[],o.opt.xmlns&&(o.ns=Object.create(p)),o.trackPosition=!1!==o.opt.position,o.trackPosition&&(o.position=o.line=o.column=0),R(o,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),i.prototype={end:function(){x(this)},write:function(t){var r=this;if(this.error)throw this.error;if(r.closed)return P(r,"Cannot write after close. Assign an onready handler.");if(null===t)return x(r);"object"==typeof t&&(t=t.toString());for(var i=0,o="";o=Z(t,i++),r.c=o,o;)switch(r.trackPosition&&(r.position++,"\n"===o?(r.line++,r.column=0):r.column++),r.state){case A.BEGIN:if(r.state=A.BEGIN_WHITESPACE,"\ufeff"===o)continue;j(r,o);continue;case A.BEGIN_WHITESPACE:j(r,o);continue;case A.TEXT:if(r.sawRoot&&!r.closedRoot){for(var a=i-1;o&&"<"!==o&&"&"!==o;)(o=Z(t,i++))&&r.trackPosition&&(r.position++,"\n"===o?(r.line++,r.column=0):r.column++);r.textNode+=t.substring(a,i-1)}"<"!==o||r.sawRoot&&r.closedRoot&&!r.strict?(!E(s,o)||r.sawRoot&&!r.closedRoot||D(r,"Text data outside of root node."),"&"===o?r.state=A.TEXT_ENTITY:r.textNode+=o):(r.state=A.OPEN_WAKA,r.startTagPosition=r.position);continue;case A.SCRIPT:"<"===o?r.state=A.SCRIPT_ENDING:r.script+=o;continue;case A.SCRIPT_ENDING:"/"===o?r.state=A.CLOSE_TAG:(r.script+="<"+o,r.state=A.SCRIPT);continue;case A.OPEN_WAKA:if("!"===o)r.state=A.SGML_DECL,r.sgmlDecl="";else if(b(s,o));else if(b(g,o))r.state=A.OPEN_TAG,r.tagName=o;else if("/"===o)r.state=A.CLOSE_TAG,r.tagName="";else if("?"===o)r.state=A.PROC_INST,r.procInstName=r.procInstBody="";else{if(D(r,"Unencoded <"),r.startTagPosition+1<r.position){var l=r.position-r.startTagPosition;o=new Array(l).join(" ")+o}r.textNode+="<"+o,r.state=A.TEXT}continue;case A.SGML_DECL:"[CDATA["===(r.sgmlDecl+o).toUpperCase()?(N(r,"onopencdata"),r.state=A.CDATA,r.sgmlDecl="",r.cdata=""):r.sgmlDecl+o==="--"?(r.state=A.COMMENT,r.comment="",r.sgmlDecl=""):"DOCTYPE"===(r.sgmlDecl+o).toUpperCase()?(r.state=A.DOCTYPE,(r.doctype||r.sawRoot)&&D(r,"Inappropriately located doctype declaration"),r.doctype="",r.sgmlDecl=""):">"===o?(N(r,"onsgmldeclaration",r.sgmlDecl),r.sgmlDecl="",r.state=A.TEXT):b(c,o)?(r.state=A.SGML_DECL_QUOTED,r.sgmlDecl+=o):r.sgmlDecl+=o;continue;case A.SGML_DECL_QUOTED:o===r.q&&(r.state=A.SGML_DECL,r.q=""),r.sgmlDecl+=o;continue;case A.DOCTYPE:">"===o?(r.state=A.TEXT,N(r,"ondoctype",r.doctype),r.doctype=!0):(r.doctype+=o,"["===o?r.state=A.DOCTYPE_DTD:b(c,o)&&(r.state=A.DOCTYPE_QUOTED,r.q=o));continue;case A.DOCTYPE_QUOTED:r.doctype+=o,o===r.q&&(r.q="",r.state=A.DOCTYPE);continue;case A.DOCTYPE_DTD:r.doctype+=o,"]"===o?r.state=A.DOCTYPE:b(c,o)&&(r.state=A.DOCTYPE_DTD_QUOTED,r.q=o);continue;case A.DOCTYPE_DTD_QUOTED:r.doctype+=o,o===r.q&&(r.state=A.DOCTYPE_DTD,r.q="");continue;case A.COMMENT:"-"===o?r.state=A.COMMENT_ENDING:r.comment+=o;continue;case A.COMMENT_ENDING:"-"===o?(r.state=A.COMMENT_ENDED,r.comment=O(r.opt,r.comment),r.comment&&N(r,"oncomment",r.comment),r.comment=""):(r.comment+="-"+o,r.state=A.COMMENT);continue;case A.COMMENT_ENDED:">"!==o?(D(r,"Malformed comment"),r.comment+="--"+o,r.state=A.COMMENT):r.state=A.TEXT;continue;case A.CDATA:"]"===o?r.state=A.CDATA_ENDING:r.cdata+=o;continue;case A.CDATA_ENDING:"]"===o?r.state=A.CDATA_ENDING_2:(r.cdata+="]"+o,r.state=A.CDATA);continue;case A.CDATA_ENDING_2:">"===o?(r.cdata&&N(r,"oncdata",r.cdata),N(r,"onclosecdata"),r.cdata="",r.state=A.TEXT):"]"===o?r.cdata+="]":(r.cdata+="]]"+o,r.state=A.CDATA);continue;case A.PROC_INST:"?"===o?r.state=A.PROC_INST_ENDING:b(s,o)?r.state=A.PROC_INST_BODY:r.procInstName+=o;continue;case A.PROC_INST_BODY:if(!r.procInstBody&&b(s,o))continue;"?"===o?r.state=A.PROC_INST_ENDING:r.procInstBody+=o;continue;case A.PROC_INST_ENDING:">"===o?(N(r,"onprocessinginstruction",{name:r.procInstName,body:r.procInstBody}),r.procInstName=r.procInstBody="",r.state=A.TEXT):(r.procInstBody+="?"+o,r.state=A.PROC_INST_BODY);continue;case A.OPEN_TAG:b(m,o)?r.tagName+=o:(k(r),">"===o?F(r):"/"===o?r.state=A.OPEN_TAG_SLASH:(E(s,o)&&D(r,"Invalid character in tag name"),r.state=A.ATTRIB));continue;case A.OPEN_TAG_SLASH:">"===o?(F(r,!0),U(r)):(D(r,"Forward-slash in opening tag not followed by >"),r.state=A.ATTRIB);continue;case A.ATTRIB:if(b(s,o))continue;">"===o?F(r):"/"===o?r.state=A.OPEN_TAG_SLASH:b(g,o)?(r.attribName=o,r.attribValue="",r.state=A.ATTRIB_NAME):D(r,"Invalid attribute name");continue;case A.ATTRIB_NAME:"="===o?r.state=A.ATTRIB_VALUE:">"===o?(D(r,"Attribute without value"),r.attribValue=r.attribName,L(r),F(r)):b(s,o)?r.state=A.ATTRIB_NAME_SAW_WHITE:b(m,o)?r.attribName+=o:D(r,"Invalid attribute name");continue;case A.ATTRIB_NAME_SAW_WHITE:if("="===o)r.state=A.ATTRIB_VALUE;else{if(b(s,o))continue;D(r,"Attribute without value"),r.tag.attributes[r.attribName]="",r.attribValue="",N(r,"onattribute",{name:r.attribName,value:""}),r.attribName="",">"===o?F(r):b(g,o)?(r.attribName=o,r.state=A.ATTRIB_NAME):(D(r,"Invalid attribute name"),r.state=A.ATTRIB)}continue;case A.ATTRIB_VALUE:if(b(s,o))continue;b(c,o)?(r.q=o,r.state=A.ATTRIB_VALUE_QUOTED):(D(r,"Unquoted attribute value"),r.state=A.ATTRIB_VALUE_UNQUOTED,r.attribValue=o);continue;case A.ATTRIB_VALUE_QUOTED:if(o!==r.q){"&"===o?r.state=A.ATTRIB_VALUE_ENTITY_Q:r.attribValue+=o;continue}L(r),r.q="",r.state=A.ATTRIB_VALUE_CLOSED;continue;case A.ATTRIB_VALUE_CLOSED:b(s,o)?r.state=A.ATTRIB:">"===o?F(r):"/"===o?r.state=A.OPEN_TAG_SLASH:b(g,o)?(D(r,"No whitespace between attributes"),r.attribName=o,r.attribValue="",r.state=A.ATTRIB_NAME):D(r,"Invalid attribute name");continue;case A.ATTRIB_VALUE_UNQUOTED:if(E(f,o)){"&"===o?r.state=A.ATTRIB_VALUE_ENTITY_U:r.attribValue+=o;continue}L(r),">"===o?F(r):r.state=A.ATTRIB;continue;case A.CLOSE_TAG:if(r.tagName)">"===o?U(r):b(m,o)?r.tagName+=o:r.script?(r.script+="</"+r.tagName,r.tagName="",r.state=A.SCRIPT):(E(s,o)&&D(r,"Invalid tagname in closing tag"),r.state=A.CLOSE_TAG_SAW_WHITE);else{if(b(s,o))continue;E(g,o)?r.script?(r.script+="</"+o,r.state=A.SCRIPT):D(r,"Invalid tagname in closing tag."):r.tagName=o}continue;case A.CLOSE_TAG_SAW_WHITE:if(b(s,o))continue;">"===o?U(r):D(r,"Invalid characters in closing tag");continue;case A.TEXT_ENTITY:case A.ATTRIB_VALUE_ENTITY_Q:case A.ATTRIB_VALUE_ENTITY_U:var u,d;switch(r.state){case A.TEXT_ENTITY:u=A.TEXT,d="textNode";break;case A.ATTRIB_VALUE_ENTITY_Q:u=A.ATTRIB_VALUE_QUOTED,d="attribValue";break;case A.ATTRIB_VALUE_ENTITY_U:u=A.ATTRIB_VALUE_UNQUOTED,d="attribValue"}";"===o?(r[d]+=B(r),r.entity="",r.state=u):b(r.entity.length?v:y,o)?r.entity+=o:(D(r,"Invalid character in entity name"),r[d]+="&"+r.entity+o,r.entity="",r.state=u);continue;default:throw new Error(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&function(t){for(var r=Math.max(e.MAX_BUFFER_LENGTH,10),i=0,o=0,a=n.length;o<a;o++){var s=t[n[o]].length;if(s>r)switch(n[o]){case"textNode":C(t);break;case"cdata":N(t,"oncdata",t.cdata),t.cdata="";break;case"script":N(t,"onscript",t.script),t.script="";break;default:P(t,"Max buffer length exceeded: "+n[o])}i=Math.max(i,s)}var l=e.MAX_BUFFER_LENGTH-i;t.bufferCheckPosition=l+t.position}(r),r},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;C(e=this),""!==e.cdata&&(N(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(N(e,"onscript",e.script),e.script="")}};try{t=r(182).Stream}catch(e){t=function(){}}var o=e.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function a(e,r){if(!(this instanceof a))return new a(e,r);t.apply(this),this._parser=new i(e,r),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,o.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})})}a.prototype=Object.create(t.prototype,{constructor:{value:a}}),a.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=r(7503).s;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},a.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},a.prototype.on=function(e,r){var n=this;return n._parser["on"+e]||-1===o.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),t.prototype.on.call(n,e,r)};var s="\r\n\t ",l="0124356789",u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",c="'\"",f=s+">",d="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/2000/xmlns/",p={xml:d,xmlns:h};s=_(s),l=_(l),u=_(u);var g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function _(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function b(e,t){return function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}(e)?!!t.match(e):e[t]}function E(e,t){return!b(e,t)}c=_(c),f=_(f);var w,S,T,A=0;for(var I in e.STATE={BEGIN:A++,BEGIN_WHITESPACE:A++,TEXT:A++,TEXT_ENTITY:A++,OPEN_WAKA:A++,SGML_DECL:A++,SGML_DECL_QUOTED:A++,DOCTYPE:A++,DOCTYPE_QUOTED:A++,DOCTYPE_DTD:A++,DOCTYPE_DTD_QUOTED:A++,COMMENT_STARTING:A++,COMMENT:A++,COMMENT_ENDING:A++,COMMENT_ENDED:A++,CDATA:A++,CDATA_ENDING:A++,CDATA_ENDING_2:A++,PROC_INST:A++,PROC_INST_BODY:A++,PROC_INST_ENDING:A++,OPEN_TAG:A++,OPEN_TAG_SLASH:A++,ATTRIB:A++,ATTRIB_NAME:A++,ATTRIB_NAME_SAW_WHITE:A++,ATTRIB_VALUE:A++,ATTRIB_VALUE_QUOTED:A++,ATTRIB_VALUE_CLOSED:A++,ATTRIB_VALUE_UNQUOTED:A++,ATTRIB_VALUE_ENTITY_Q:A++,ATTRIB_VALUE_ENTITY_U:A++,CLOSE_TAG:A++,CLOSE_TAG_SAW_WHITE:A++,SCRIPT:A++,SCRIPT_ENDING:A++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var r=e.ENTITIES[t],n="number"==typeof r?String.fromCharCode(r):r;e.ENTITIES[t]=n}),e.STATE)e.STATE[e.STATE[I]]=I;function R(e,t,r){e[t]&&e[t](r)}function N(e,t,r){e.textNode&&C(e),R(e,t,r)}function C(e){e.textNode=O(e.opt,e.textNode),e.textNode&&R(e,"ontext",e.textNode),e.textNode=""}function O(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function P(e,t){return C(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,R(e,"onerror",t),e}function x(e){return e.sawRoot&&!e.closedRoot&&D(e,"Unclosed root tag"),e.state!==A.BEGIN&&e.state!==A.BEGIN_WHITESPACE&&e.state!==A.TEXT&&P(e,"Unexpected end"),C(e),e.c="",e.closed=!0,R(e,"onend"),i.call(e,e.strict,e.opt),e}function D(e,t){if("object"!=typeof e||!(e instanceof i))throw new Error("bad call to strictFail");e.strict&&P(e,t)}function k(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,N(e,"onopentagstart",r)}function M(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),n=r[0],i=r[1];return t&&"xmlns"===e&&(n="xmlns",i=""),{prefix:n,local:i}}function L(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=M(e.attribName,!0),r=t.prefix,n=t.local;if("xmlns"===r)if("xml"===n&&e.attribValue!==d)D(e,"xml: prefix must be bound to "+d+"\nActual: "+e.attribValue);else if("xmlns"===n&&e.attribValue!==h)D(e,"xmlns: prefix must be bound to "+h+"\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[n]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,N(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function F(e,t){if(e.opt.xmlns){var r=e.tag,n=M(e.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(D(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=n.prefix);var i=e.tags[e.tags.length-1]||e;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach(function(t){N(e,"onopennamespace",{prefix:t,uri:r.ns[t]})});for(var o=0,a=e.attribList.length;o<a;o++){var s=e.attribList[o],l=s[0],u=s[1],c=M(l,!0),f=c.prefix,d=c.local,h=""===f?"":r.ns[f]||"",p={name:l,value:u,prefix:f,local:d,uri:h};f&&"xmlns"!==f&&!h&&(D(e,"Unbound namespace prefix: "+JSON.stringify(f)),p.uri=f),e.tag.attributes[l]=p,N(e,"onattribute",p)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),N(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=A.TEXT:e.state=A.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function U(e){if(!e.tagName)return D(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=A.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=A.SCRIPT);N(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var n=r;t--&&e.tags[t].name!==n;)D(e,"Unexpected close tag");if(t<0)return D(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=A.TEXT);e.tagName=r;for(var i=e.tags.length;i-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,N(e,"onclosetag",e.tagName);var a={};for(var s in o.ns)a[s]=o.ns[s];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==l.ns&&Object.keys(o.ns).forEach(function(t){var r=o.ns[t];N(e,"onclosenamespace",{prefix:t,uri:r})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=A.TEXT}function B(e){var t,r=e.entity,n=r.toLowerCase(),i="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),i=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),i=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),i.toLowerCase()!==r?(D(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function j(e,t){"<"===t?(e.state=A.OPEN_WAKA,e.startTagPosition=e.position):E(s,t)&&(D(e,"Non-whitespace before first tag."),e.textNode=t,e.state=A.TEXT)}function Z(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r}A=e.STATE,String.fromCodePoint||(w=String.fromCharCode,S=Math.floor,T=function(){var e,t,r=16384,n=[],i=-1,o=arguments.length;if(!o)return"";for(var a="";++i<o;){var s=Number(arguments[i]);if(!isFinite(s)||s<0||s>1114111||S(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?n.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,n.push(e,t)),(i+1===o||n.length>r)&&(a+=w.apply(null,n),n.length=0)}return a},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:T,configurable:!0,writable:!0}):String.fromCodePoint=T)}(t)},182:function(e,t,r){e.exports=i;var n=r(1159).EventEmitter;function i(){n.call(this)}r(1765)(i,n),i.Readable=r(2846),i.Writable=r(8318),i.Duplex=r(6138),i.Transform=r(9798),i.PassThrough=r(5472),i.finished=r(8800),i.pipeline=r(7295),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",l));var a=!1;function s(){a||(a=!0,e.end())}function l(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===n.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",l),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",u),e.on("error",u),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e}},1765:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},3690:function(e){"use strict";var t={};function r(e,r,n){n||(n=Error);var i=function(e){var t,n;function i(t,n,i){return e.call(this,function(e,t,n){return"string"==typeof r?r:r(e,t,n)}(t,n,i))||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i}(n);i.prototype.name=n.name,i.prototype.code=e,t[e]=i}function n(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(e){return String(e)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}r("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(e,t,r){var i,o,a,s,l;if("string"==typeof t&&(o="not ",t.substr(0,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(i," ").concat(n(t,"type"));else{var u=("number"!=typeof l&&(l=0),l+1>(s=e).length||-1===s.indexOf(".",l)?"argument":"property");a='The "'.concat(e,'" ').concat(u," ").concat(i," ").concat(n(t,"type"))}return a+". Received type ".concat(typeof r)},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},6138:function(e,t,r){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=u;var i=r(2846),o=r(8318);r(1765)(u,i);for(var a=n(o.prototype),s=0;s<a.length;s++){var l=a[s];u.prototype[l]||(u.prototype[l]=o.prototype[l])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||process.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},5472:function(e,t,r){"use strict";e.exports=i;var n=r(9798);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(1765)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},2846:function(e,t,r){"use strict";var n;e.exports=T,T.ReadableState=S,r(1159).EventEmitter;var i,o=function(e,t){return e.listeners(t).length},a=r(9299),s=r(1549).Buffer,l=r.g.Uint8Array||function(){},u=r(964);i=u&&u.debuglog?u.debuglog("stream"):function(){};var c,f,d,h=r(8393),p=r(6163),g=r(7269).getHighWaterMark,m=r(3690).q,y=m.ERR_INVALID_ARG_TYPE,v=m.ERR_STREAM_PUSH_AFTER_EOF,_=m.ERR_METHOD_NOT_IMPLEMENTED,b=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(1765)(T,a);var E=p.errorOrDestroy,w=["error","close","destroy","pause","resume"];function S(e,t,i){n=n||r(6138),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",i),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(c||(c=r(7503).s),this.decoder=new c(e.encoding),this.encoding=e.encoding)}function T(e){if(n=n||r(6138),!(this instanceof T))return new T(e);var t=this instanceof n;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function A(e,t,r,n,o){i("readableAddChunk",t);var a,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(i("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?C(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}}(e,u);else if(o||(a=function(e,t){var r,n;return n=t,s.isBuffer(n)||n instanceof l||"string"==typeof t||void 0===t||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t)),r}(u,t)),a)E(e,a);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),n)u.endEmitted?E(e,new b):I(e,u,t,!0);else if(u.ended)E(e,new v);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?I(e,u,t,!1):P(e,u)):I(e,u,t,!1)}else n||(u.reading=!1,P(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function I(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&C(e)),P(e,t)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),T.prototype.destroy=p.destroy,T.prototype._undestroy=p.undestroy,T.prototype._destroy=function(e,t){t(e)},T.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=s.from(e,t),t=""),r=!0),A(this,e,t,!1,r)},T.prototype.unshift=function(e){return A(this,e,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(e){c||(c=r(7503).s);var t=new c(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var R=1073741824;function N(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=R?e=R:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;i("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(i("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(O,e))}function O(e){var t=e._readableState;i("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function P(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(x,e,t))}function x(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(i("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function D(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function k(e){i("readable nexttick read 0"),e.read(0)}function M(e,t){i("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(i("flow",t.flowing);t.flowing&&null!==e.read(););}function F(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function U(e){var t=e._readableState;i("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(B,t,e))}function B(e,t){if(i("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function j(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}T.prototype.read=function(e){i("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return i("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):C(this),null;if(0===(e=N(e,t))&&t.ended)return 0===t.length&&U(this),null;var n,o=t.needReadable;return i("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&i("length less than watermark",o=!0),t.ended||t.reading?i("reading or ended",o=!1):o&&(i("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=N(r,t))),null===(n=e>0?F(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&U(this)),null!==n&&this.emit("data",n),n},T.prototype._read=function(e){E(this,new _("_read()"))},T.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,i("pipe count=%d opts=%j",n.pipesCount,t);var a=t&&!1===t.end||e===process.stdout||e===process.stderr?p:s;function s(){i("onend"),e.end()}n.endEmitted?process.nextTick(a):r.once("end",a),e.on("unpipe",function t(o,a){i("onunpipe"),o===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,i("cleanup"),e.removeListener("close",d),e.removeListener("finish",h),e.removeListener("drain",l),e.removeListener("error",f),e.removeListener("unpipe",t),r.removeListener("end",s),r.removeListener("end",p),r.removeListener("data",c),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||l())});var l=function(e){return function(){var t=e._readableState;i("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,L(e))}}(r);e.on("drain",l);var u=!1;function c(t){i("ondata");var o=e.write(t);i("dest.write",o),!1===o&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==j(n.pipes,e))&&!u&&(i("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(t){i("onerror",t),p(),e.removeListener("error",f),0===o(e,"error")&&E(e,t)}function d(){e.removeListener("finish",h),p()}function h(){i("onfinish"),e.removeListener("close",d),p()}function p(){i("unpipe"),r.unpipe(e)}return r.on("data",c),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",f),e.once("close",d),e.once("finish",h),e.emit("pipe",r),n.flowing||(i("pipe resume"),r.resume()),e},T.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=j(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},T.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,i("on readable",n.length,n.reading),n.length?C(this):n.reading||process.nextTick(k,this))),r},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(D,this),r},T.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(D,this),t},T.prototype.resume=function(){var e=this._readableState;return e.flowing||(i("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(M,e,t))}(this,e)),e.paused=!1,this},T.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",function(){if(i("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(o){i("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o||(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))}),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var a=0;a<w.length;a++)e.on(w[a],this.emit.bind(this,w[a]));return this._read=function(t){i("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r(7299)),f(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),T._fromList=F,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(e,t){return void 0===d&&(d=r(6233)),d(T,e,t)})},9798:function(e,t,r){"use strict";e.exports=c;var n=r(3690).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,l=r(6138);function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);l.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(t,r){d(e,t,r)})}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}r(1765)(c,l),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,r){r(new i("_transform()"))},c.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,function(e){t(e)})}},8318:function(e,t,r){"use strict";function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t){var r=e.entry;for(e.entry=null;r;){var n=r.callback;t.pendingcb--,n(void 0),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=T,T.WritableState=S;var o,a={deprecate:r(7839)},s=r(9299),l=r(1549).Buffer,u=r.g.Uint8Array||function(){},c=r(6163),f=r(7269).getHighWaterMark,d=r(3690).q,h=d.ERR_INVALID_ARG_TYPE,p=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,m=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,_=d.ERR_STREAM_WRITE_AFTER_END,b=d.ERR_UNKNOWN_ENCODING,E=c.errorOrDestroy;function w(){}function S(e,t,o){i=i||r(6138),e=e||{},"boolean"!=typeof o&&(o=t instanceof i),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(O,e,t),e._writableState.errorEmitted=!0,E(e,n)):(i(n),e._writableState.errorEmitted=!0,E(e,n),O(e,t))}(e,r,n,t,i);else{var o=N(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||R(e,r),n?process.nextTick(I,e,r,o,i):I(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function T(e){var t=this instanceof(i=i||r(6138));if(!t&&!o.call(T,this))return new T(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function A(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function I(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),O(e,t)}function R(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,o=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var s=0,l=!0;r;)o[s]=r,r.isBuf||(l=!1),r=r.next,s+=1;o.allBuffers=l,A(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,f=r.callback;if(A(e,t,!1,t.objectMode?1:u.length,u,c,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function N(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final(function(r){t.pendingcb--,r&&E(e,r),t.prefinished=!0,e.emit("prefinish"),O(e,t)})}function O(e,t){var r=N(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(C,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(1765)(T,s),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||this===T&&e&&e._writableState instanceof S}})):o=function(e){return e instanceof this},T.prototype.pipe=function(){E(this,new m)},T.prototype.write=function(e,t,r){var n,i=this._writableState,o=!1,a=!i.objectMode&&(n=e,l.isBuffer(n)||n instanceof u);return a&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=w),i.ending?function(e,t){var r=new _;E(e,r),process.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var i;return null===r?i=new v:"string"==typeof r||t.objectMode||(i=new h("chunk",["string","Buffer"],r)),!i||(E(e,i),process.nextTick(n,i),!1)}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,r)),t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else A(e,t,!1,s,n,i,o);return u}(this,i,a,e,t,r)),o},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||R(this,e))},T.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new b(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(e,t,r){r(new p("_write()"))},T.prototype._writev=null,T.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,O(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),T.prototype.destroy=c.destroy,T.prototype._undestroy=c.undestroy,T.prototype._destroy=function(e,t){t(e)}},7299:function(e,t,r){"use strict";var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(8800),a=Symbol("lastResolve"),s=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),c=Symbol("lastPromise"),f=Symbol("handlePromise"),d=Symbol("stream");function h(e,t){return{value:e,done:t}}function p(e){var t=e[a];if(null!==t){var r=e[d].read();null!==r&&(e[c]=null,e[a]=null,e[s]=null,t(h(r,!1)))}}function g(e){process.nextTick(p,e)}var m=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((i(n={get stream(){return this[d]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(h(void 0,!0));if(this[d].destroyed)return new Promise(function(t,r){process.nextTick(function(){e[l]?r(e[l]):t(h(void 0,!0))})});var r,n=this[c];if(n)r=new Promise(function(e,t){return function(r,n){e.then(function(){t[u]?r(h(void 0,!0)):t[f](r,n)},n)}}(n,this));else{var i=this[d].read();if(null!==i)return Promise.resolve(h(i,!1));r=new Promise(this[f])}return this[c]=r,r}},Symbol.asyncIterator,function(){return this}),i(n,"return",function(){var e=this;return new Promise(function(t,r){e[d].destroy(null,function(e){e?r(e):t(h(void 0,!0))})})}),n),m);e.exports=function(e){var t,r=Object.create(y,(i(t={},d,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var n=r[d].read();n?(r[c]=null,r[a]=null,r[s]=null,e(h(n,!1))):(r[a]=e,r[s]=t)},writable:!0}),t));return r[c]=null,o(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[s];return null!==t&&(r[c]=null,r[a]=null,r[s]=null,t(e)),void(r[l]=e)}var n=r[a];null!==n&&(r[c]=null,r[a]=null,r[s]=null,n(h(void 0,!0))),r[u]=!0}),e.on("readable",g.bind(null,r)),r}},8393:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1549).Buffer,s=r(9862).inspect,l=s&&s.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t;return t=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,r,n,i=a.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,r=i,n=s,a.prototype.copy.call(t,r,n),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:l,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t,{depth:0,customInspect:!1}))}}],t&&o(e.prototype,t),e}()},6163:function(e){"use strict";function t(e,t){n(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var o=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,e)):process.nextTick(n,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!i&&e?o._writableState?o._writableState.errorEmitted?process.nextTick(r,o):(o._writableState.errorEmitted=!0,process.nextTick(t,o,e)):process.nextTick(t,o,e):i?(process.nextTick(r,o),i(e)):process.nextTick(r,o)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},8800:function(e,t,r){"use strict";var n=r(3690).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var a=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,l=function(){t.writable||c()},u=t._writableState&&t._writableState.finished,c=function(){s=!1,u=!0,a||o.call(t)},f=t._readableState&&t._readableState.endEmitted,d=function(){a=!1,f=!0,s||o.call(t)},h=function(e){o.call(t,e)},p=function(){var e;return a&&!f?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):s&&!u?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},g=function(){t.req.on("finish",c)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",c),t.on("abort",p),t.req?g():t.on("request",g)):s&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",d),t.on("finish",c),!1!==r.error&&t.on("error",h),t.on("close",p),function(){t.removeListener("complete",c),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",c),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("end",d),t.removeListener("error",h),t.removeListener("close",p)}}},6233:function(e){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(e,t,r){"use strict";var n,i=r(3690).q,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function l(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;e.on("close",function(){s=!0}),void 0===n&&(n=r(8800)),n(e,{readable:t,writable:i},function(e){if(e)return o(e);s=!0,o()});var l=!1;return function(t){if(!s&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new a("pipe"))}}function u(e){e()}function c(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var a=t.map(function(e,r){var o=r<t.length-1;return l(e,o,r>0,function(e){n||(n=e),e&&a.forEach(u),o||(a.forEach(u),i(n))})});return t.reduce(c)}},7269:function(e,t,r){"use strict";var n=r(3690).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},9299:function(e,t,r){e.exports=r(1159).EventEmitter},7503:function(e,t,r){"use strict";var n=r(8387).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=f,t=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function c(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=a(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=a(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=a(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},1067:function(e,t,r){var n;!function(i,o){"use strict";var a="function",s="undefined",l="object",u="string",c="major",f="model",d="name",h="type",p="vendor",g="version",m="architecture",y="console",v="mobile",_="tablet",b="smarttv",E="wearable",w="embedded",S="Amazon",T="Apple",A="ASUS",I="BlackBerry",R="Browser",N="Chrome",C="Firefox",O="Google",P="Huawei",x="LG",D="Microsoft",k="Motorola",M="Opera",L="Samsung",F="Sharp",U="Sony",B="Xiaomi",j="Zebra",Z="Facebook",q="Chromium OS",G="Mac OS",z=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},H=function(e,t){return typeof e===u&&-1!==V(t).indexOf(V(e))},V=function(e){return e.toLowerCase()},W=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,500)},Y=function(e,t){for(var r,n,i,s,u,c,f=0;f<t.length&&!u;){var d=t[f],h=t[f+1];for(r=n=0;r<d.length&&!u&&d[r];)if(u=d[r++].exec(e))for(i=0;i<h.length;i++)c=u[++n],typeof(s=h[i])===l&&s.length>0?2===s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,c):this[s[0]]=s[1]:3===s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=c?c.replace(s[1],s[2]):o:this[s[0]]=c?s[1].call(this,c,s[2]):o:4===s.length&&(this[s[0]]=c?s[3].call(this,c.replace(s[1],s[2])):o):this[s]=c||o;f+=2}},K=function(e,t){for(var r in t)if(typeof t[r]===l&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(H(t[r][n],e))return"?"===r?o:r}else if(H(t[r],e))return"?"===r?o:r;return e},Q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,g],[/opios[\/ ]+([\w\.]+)/i],[g,[d,M+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[d,M]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[g,[d,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[d,"UC"+R]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[g,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[g,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[g,[d,"Smart Lenovo "+R]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+R],g],[/\bfocus\/([\w\.]+)/i],[g,[d,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[d,M+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[d,M+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[d,"MIUI "+R]],[/fxios\/([-\w\.]+)/i],[g,[d,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+R]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+R],g],[/samsungbrowser\/([\w\.]+)/i],[g,[d,L+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],g],[/metasr[\/ ]?([\d\.]+)/i],[g,[d,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,"Sogou Mobile"],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[d,g],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,Z],g],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[g,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[d,N+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,N+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[d,"Android "+R]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[g,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[d,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,g],[/(cobalt)\/([\w\.]+)/i],[d,[g,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,V]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,"",V]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,V]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[p,L],[h,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[p,L],[h,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[p,T],[h,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[p,T],[h,_]],[/(macintosh);/i],[f,[p,T]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[p,F],[h,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[p,P],[h,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[p,P],[h,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[p,B],[h,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[p,B],[h,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[p,"OPPO"],[h,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[p,"Vivo"],[h,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[f,[p,"Realme"],[h,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[p,k],[h,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[p,k],[h,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[p,x],[h,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[p,x],[h,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[p,"Lenovo"],[h,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[p,"Nokia"],[h,v]],[/(pixel c)\b/i],[f,[p,O],[h,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[p,O],[h,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[p,U],[h,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[p,U],[h,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[p,"OnePlus"],[h,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[p,S],[h,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[p,S],[h,v]],[/(playbook);[-\w\),; ]+(rim)/i],[f,p,[h,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[p,I],[h,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[p,A],[h,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[p,A],[h,v]],[/(nexus 9)/i],[f,[p,"HTC"],[h,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[f,/_/g," "],[h,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[p,"Acer"],[h,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[p,"Meizu"],[h,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[f,[p,"Ulefone"],[h,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,f,[h,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,f,[h,_]],[/(surface duo)/i],[f,[p,D],[h,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[p,"Fairphone"],[h,v]],[/(u304aa)/i],[f,[p,"AT&T"],[h,v]],[/\bsie-(\w*)/i],[f,[p,"Siemens"],[h,v]],[/\b(rct\w+) b/i],[f,[p,"RCA"],[h,_]],[/\b(venue[\d ]{2,7}) b/i],[f,[p,"Dell"],[h,_]],[/\b(q(?:mv|ta)\w+) b/i],[f,[p,"Verizon"],[h,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[p,"Barnes & Noble"],[h,_]],[/\b(tm\d{3}\w+) b/i],[f,[p,"NuVision"],[h,_]],[/\b(k88) b/i],[f,[p,"ZTE"],[h,_]],[/\b(nx\d{3}j) b/i],[f,[p,"ZTE"],[h,v]],[/\b(gen\d{3}) b.+49h/i],[f,[p,"Swiss"],[h,v]],[/\b(zur\d{3}) b/i],[f,[p,"Swiss"],[h,_]],[/\b((zeki)?tb.*\b) b/i],[f,[p,"Zeki"],[h,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],f,[h,_]],[/\b(ns-?\w{0,9}) b/i],[f,[p,"Insignia"],[h,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[p,"NextBook"],[h,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],f,[h,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],f,[h,v]],[/\b(ph-1) /i],[f,[p,"Essential"],[h,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[p,"Envizen"],[h,_]],[/\b(trio[-\w\. ]+) b/i],[f,[p,"MachSpeed"],[h,_]],[/\btu_(1491) b/i],[f,[p,"Rotor"],[h,_]],[/(shield[\w ]+) b/i],[f,[p,"Nvidia"],[h,_]],[/(sprint) (\w+)/i],[p,f,[h,v]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[p,D],[h,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[p,j],[h,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[p,j],[h,v]],[/smart-tv.+(samsung)/i],[p,[h,b]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[p,L],[h,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,x],[h,b]],[/(apple) ?tv/i],[p,[f,T+" TV"],[h,b]],[/crkey/i],[[f,N+"cast"],[p,O],[h,b]],[/droid.+aft(\w+)( bui|\))/i],[f,[p,S],[h,b]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[p,F],[h,b]],[/(bravia[\w ]+)( bui|\))/i],[f,[p,U],[h,b]],[/(mitv-\w{5}) bui/i],[f,[p,B],[h,b]],[/Hbbtv.*(technisat) (.*);/i],[p,f,[h,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,W],[f,W],[h,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,f,[h,y]],[/droid.+; (shield) bui/i],[f,[p,"Nvidia"],[h,y]],[/(playstation [345portablevi]+)/i],[f,[p,U],[h,y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[p,D],[h,y]],[/((pebble))app/i],[p,f,[h,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[p,T],[h,E]],[/droid.+; (glass) \d/i],[f,[p,O],[h,E]],[/droid.+; (wt63?0{2,3})\)/i],[f,[p,j],[h,E]],[/(quest( 2| pro)?)/i],[f,[p,Z],[h,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[h,w]],[/(aeobc)\b/i],[f,[p,S],[h,w]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[f,[h,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[h,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,v]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,g],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[d,[g,K,Q]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,K,Q],[d,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,G],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,g],[/\(bb(10);/i],[g,[d,I]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[d,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[g,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[g,[d,N+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,q],g],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,g],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,g]]},$=function(e,t){if(typeof e===l&&(t=e,e=o),!(this instanceof $))return new $(e,t).getResult();var r=typeof i!==s&&i.navigator?i.navigator:o,n=e||(r&&r.userAgent?r.userAgent:""),y=r&&r.userAgentData?r.userAgentData:o,b=t?function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r}(X,t):X,E=r&&r.userAgent==n;return this.getBrowser=function(){var e,t={};return t[d]=o,t[g]=o,Y.call(t,n,b.browser),t[c]=typeof(e=t[g])===u?e.replace(/[^\d\.]/g,"").split(".")[0]:o,E&&r&&r.brave&&typeof r.brave.isBrave==a&&(t[d]="Brave"),t},this.getCPU=function(){var e={};return e[m]=o,Y.call(e,n,b.cpu),e},this.getDevice=function(){var e={};return e[p]=o,e[f]=o,e[h]=o,Y.call(e,n,b.device),E&&!e[h]&&y&&y.mobile&&(e[h]=v),E&&"Macintosh"==e[f]&&r&&typeof r.standalone!==s&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[f]="iPad",e[h]=_),e},this.getEngine=function(){var e={};return e[d]=o,e[g]=o,Y.call(e,n,b.engine),e},this.getOS=function(){var e={};return e[d]=o,e[g]=o,Y.call(e,n,b.os),E&&!e[d]&&y&&"Unknown"!=y.platform&&(e[d]=y.platform.replace(/chrome os/i,q).replace(/macos/i,G)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===u&&e.length>500?W(e,500):e,this},this.setUA(n),this};$.VERSION="1.0.37",$.BROWSER=z([d,g,c]),$.CPU=z([m]),$.DEVICE=z([f,p,h,y,v,b,_,E,w]),$.ENGINE=$.OS=z([d,g]),typeof t!==s?(e.exports&&(t=e.exports=$),t.UAParser=$):r.amdO?(n=function(){return $}.call(t,r,t,e))===o||(e.exports=n):typeof i!==s&&(i.UAParser=$);var J=typeof i!==s&&(i.jQuery||i.Zepto);if(J&&!J.ua){var ee=new $;J.ua=ee.getResult(),J.ua.get=function(){return ee.getUA()},J.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var r in t)J.ua[r]=t[r]}}}("object"==typeof window?window:this)},7839:function(e,t,r){function n(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(e){"use strict";e.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(e){"use strict";e.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(e){"use strict";e.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(e){"use strict";e.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(e){"use strict";e.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(e){"use strict";e.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.amdO={},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var n={};return function(){"use strict";r.d(n,{default:function(){return c}}),r(8416);var e,t=r(1715),i=r(8080),o=r(1737),a=r(1139),s=function(){var e,t="application/dash+xml";function r(r,n,i){if(!r||!/^VIDEO$/i.test(r.nodeName))return null;if(r._dashjs_player)return r._dashjs_player;var o,s=r.id||r.name||"video element";if(!(n=n||[].slice.call(r.querySelectorAll("source")).filter(function(e){return e.type==t})[0])&&r.src)(n=document.createElement("source")).src=r.src;else if(!n&&!r.src)return null;return i=i||{},(o=(0,a.Z)(i).create()).initialize(r,n.src,r.autoplay),e||(e=o.getDebug().getLogger()),e.debug("Converted "+s+" to dash.js player and added content: "+n.src),r._dashjs_player=o,o}function n(e){return/^VIDEO$/i.test(e.nodeName)?e:n(e.parentNode)}return{create:r,createAll:function(e,i){var o=[];e=e||"[data-dashjs-player]";for(var a=(i=i||document).querySelectorAll(e),s=0;s<a.length;s++){var l=r(a[s],null);o.push(l)}for(var u=i.querySelectorAll('source[type="'+t+'"]'),c=0;c<u.length;c++){var f=r(n(u[c]),null);o.push(f)}return o}}}();!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?s.createAll():e=window.setInterval(function(){window.dashjs&&(window.clearInterval(e),s.createAll())},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),s.createAll()}));var l=s,u=r(6398);dashjs.Protection=o.default,dashjs.MetricsReporting=i.default,dashjs.MediaPlayerFactory=l,dashjs.Debug=u.Z,dashjs.supportsMediaSource=t.B;var c=dashjs}(),n.default}()},391:(e,t,r)=>{"use strict";var n=r(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},579:(e,t,r)=>{"use strict";e.exports=r(153)},730:(e,t,r)=>{"use strict";var n=r(43),i=r(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function m(e,t,r,n,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){y[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){y[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){y[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){y[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){y[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function b(e,t,r,n){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!d.call(g,e)||!d.call(p,e)&&(h.test(e)?g[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,_);y[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,_);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,_);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var E=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),N=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var F,U=Object.assign;function B(e){if(void 0===F)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var j=!1;function Z(e,t){if(!e||j)return"";j=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=n.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?B(e):""}function q(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=Z(e.type,!1);case 11:return e=Z(e.type.render,!1);case 1:return e=Z(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case T:return"Fragment";case S:return"Portal";case I:return"Profiler";case A:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case R:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case x:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return G(e(t))}catch(r){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=V(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var r=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function X(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=H(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var r=H(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,r):t.hasOwnProperty("defaultValue")&&te(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function te(e,t,r){"number"===t&&K(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var re=Array.isArray;function ne(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+H(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(o(92));if(re(r)){if(1<r.length)throw Error(o(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:H(r)}}function ae(e,t){var r=H(t.value),n=H(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,fe=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function de(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=ge(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(he).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ye=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Te=null;function Ae(e){if(e=mi(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=vi(t),we(e.stateNode,e.type,t))}}function Ie(e){Se?Te?Te.push(e):Te=[e]:Se=e}function Re(){if(Se){var e=Se,t=Te;if(Te=Se=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ne(e,t){return e(t)}function Ce(){}var Oe=!1;function Pe(e,t,r){if(Oe)return e(t,r);Oe=!0;try{return Ne(e,t,r)}finally{Oe=!1,(null!==Se||null!==Te)&&(Ce(),Re())}}function xe(e,t){var r=e.stateNode;if(null===r)return null;var n=vi(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(o(231,t,typeof r));return r}var De=!1;if(f)try{var ke={};Object.defineProperty(ke,"passive",{get:function(){De=!0}}),window.addEventListener("test",ke,ke),window.removeEventListener("test",ke,ke)}catch(a){De=!1}function Me(e,t,r,n,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(c){this.onError(c)}}var Le=!1,Fe=null,Ue=!1,Be=null,je={onError:function(e){Le=!0,Fe=e}};function Ze(e,t,r,n,i,o,a,s,l){Le=!1,Fe=null,Me.apply(je,arguments)}function qe(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(qe(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return ze(i),e;if(a===n)return ze(i),t;a=a.sibling}throw Error(o(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Ke=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,rt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&r;if(0!==a){var s=a&~i;0!==s?n=ft(s):0!==(o&=a)&&(n=ft(o))}else 0!==(a=r&~i)?n=ft(a):0!==o&&(n=ft(o));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-at(t)),n|=e[r],t&=~i;return n}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-at(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,wt,St,Tt,At,It=!1,Rt=[],Nt=null,Ct=null,Ot=null,Pt=new Map,xt=new Map,Dt=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xt.delete(t.pointerId)}}function Lt(e,t,r,n,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=mi(t))&&wt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var r=qe(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ge(r)))return e.blockedOn=t,void At(e.priority,function(){St(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=mi(r))&&wt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function Bt(e,t,r){Ut(e)&&r.delete(t)}function jt(){It=!1,null!==Nt&&Ut(Nt)&&(Nt=null),null!==Ct&&Ut(Ct)&&(Ct=null),null!==Ot&&Ut(Ot)&&(Ot=null),Pt.forEach(Bt),xt.forEach(Bt)}function Zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function qt(e){function t(t){return Zt(t,e)}if(0<Rt.length){Zt(Rt[0],e);for(var r=1;r<Rt.length;r++){var n=Rt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Nt&&Zt(Nt,e),null!==Ct&&Zt(Ct,e),null!==Ot&&Zt(Ot,e),Pt.forEach(t),xt.forEach(t),r=0;r<Dt.length;r++)(n=Dt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Dt.length&&null===(r=Dt[0]).blockedOn;)Ft(r),null===r.blockedOn&&Dt.shift()}var Gt=E.ReactCurrentBatchConfig,zt=!0;function Ht(e,t,r,n){var i=_t,o=Gt.transition;Gt.transition=null;try{_t=1,Wt(e,t,r,n)}finally{_t=i,Gt.transition=o}}function Vt(e,t,r,n){var i=_t,o=Gt.transition;Gt.transition=null;try{_t=4,Wt(e,t,r,n)}finally{_t=i,Gt.transition=o}}function Wt(e,t,r,n){if(zt){var i=Kt(e,t,r,n);if(null===i)Zn(e,t,n,Yt,r),Mt(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return Nt=Lt(Nt,e,t,r,n,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,r,n,i),!0;case"mouseover":return Ot=Lt(Ot,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Lt(Pt.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,xt.set(o,Lt(xt.get(o)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Mt(e,n),4&t&&-1<kt.indexOf(e)){for(;null!==i;){var o=mi(i);if(null!==o&&Et(o),null===(o=Kt(e,t,r,n))&&Zn(e,t,n,Yt,r),o===i)break;i=o}null!==i&&n.stopPropagation()}else Zn(e,t,n,null,r)}}var Yt=null;function Kt(e,t,r,n){if(Yt=null,null!==(e=gi(e=Ee(n))))if(null===(t=qe(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Jt=null;function er(){if(Jt)return Jt;var e,t,r=$t,n=r.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[o-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ir(e){function t(t,r,n,i,o){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var or,ar,sr,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=ir(lr),cr=U({},lr,{view:0,detail:0}),fr=ir(cr),dr=U({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(or=e.screenX-sr.screenX,ar=e.screenY-sr.screenY):ar=or=0,sr=e),or)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),hr=ir(dr),pr=ir(U({},dr,{dataTransfer:0})),gr=ir(U({},cr,{relatedTarget:0})),mr=ir(U({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=ir(U({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),vr=ir(U({},lr,{data:0})),_r={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},br={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Er={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Er[e])&&!!t[e]}function Sr(){return wr}var Tr=ir(U({},cr,{key:function(e){if(e.key){var t=_r[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?br[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Ar=ir(U({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ir=ir(U({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr})),Rr=ir(U({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nr=ir(U({},dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Cr=[9,13,27,32],Or=f&&"CompositionEvent"in window,Pr=null;f&&"documentMode"in document&&(Pr=document.documentMode);var xr=f&&"TextEvent"in window&&!Pr,Dr=f&&(!Or||Pr&&8<Pr&&11>=Pr),kr=String.fromCharCode(32),Mr=!1;function Lr(e,t){switch(e){case"keyup":return-1!==Cr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1;var Br={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Br[e.type]:"textarea"===t}function Zr(e,t,r,n){Ie(n),0<(t=Gn(t,"onChange")).length&&(r=new ur("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var qr=null,Gr=null;function zr(e){Mn(e,0)}function Hr(e){if(Y(yi(e)))return e}function Vr(e,t){if("change"===e)return t}var Wr=!1;if(f){var Yr;if(f){var Kr="oninput"in document;if(!Kr){var Qr=document.createElement("div");Qr.setAttribute("oninput","return;"),Kr="function"===typeof Qr.oninput}Yr=Kr}else Yr=!1;Wr=Yr&&(!document.documentMode||9<document.documentMode)}function Xr(){qr&&(qr.detachEvent("onpropertychange",$r),Gr=qr=null)}function $r(e){if("value"===e.propertyName&&Hr(Gr)){var t=[];Zr(t,Gr,e,Ee(e)),Pe(zr,t)}}function Jr(e,t,r){"focusin"===e?(Xr(),Gr=r,(qr=t).attachEvent("onpropertychange",$r)):"focusout"===e&&Xr()}function en(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hr(Gr)}function tn(e,t){if("click"===e)return Hr(t)}function rn(e,t){if("input"===e||"change"===e)return Hr(t)}var nn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function on(e,t){if(nn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!d.call(t,i)||!nn(e[i],t[i]))return!1}return!0}function an(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sn(e,t){var r,n=an(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=an(n)}}function ln(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ln(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function un(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=K((e=t.contentWindow).document)}return t}function cn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=un(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ln(r.ownerDocument.documentElement,r)){if(null!==n&&cn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=void 0===n.end?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=sn(r,o);var a=sn(r,n);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dn=f&&"documentMode"in document&&11>=document.documentMode,hn=null,pn=null,gn=null,mn=!1;function yn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;mn||null==hn||hn!==K(n)||("selectionStart"in(n=hn)&&cn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},gn&&on(gn,n)||(gn=n,0<(n=Gn(pn,"onSelect")).length&&(t=new ur("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=hn)))}function vn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _n={animationend:vn("Animation","AnimationEnd"),animationiteration:vn("Animation","AnimationIteration"),animationstart:vn("Animation","AnimationStart"),transitionend:vn("Transition","TransitionEnd")},bn={},En={};function wn(e){if(bn[e])return bn[e];if(!_n[e])return e;var t,r=_n[e];for(t in r)if(r.hasOwnProperty(t)&&t in En)return bn[e]=r[t];return e}f&&(En=document.createElement("div").style,"AnimationEvent"in window||(delete _n.animationend.animation,delete _n.animationiteration.animation,delete _n.animationstart.animation),"TransitionEvent"in window||delete _n.transitionend.transition);var Sn=wn("animationend"),Tn=wn("animationiteration"),An=wn("animationstart"),In=wn("transitionend"),Rn=new Map,Nn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(e,t){Rn.set(e,t),u(t,[e])}for(var On=0;On<Nn.length;On++){var Pn=Nn[On];Cn(Pn.toLowerCase(),"on"+(Pn[0].toUpperCase()+Pn.slice(1)))}Cn(Sn,"onAnimationEnd"),Cn(Tn,"onAnimationIteration"),Cn(An,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(In,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dn=new Set("cancel close invalid load scroll toggle".split(" ").concat(xn));function kn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,a,s,l,u){if(Ze.apply(this,arguments),Le){if(!Le)throw Error(o(198));var c=Fe;Le=!1,Fe=null,Ue||(Ue=!0,Be=c)}}(n,t,void 0,e),e.currentTarget=null}function Mn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;kn(i,s,u),o=l}else for(a=0;a<n.length;a++){if(l=(s=n[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;kn(i,s,u),o=l}}}if(Ue)throw e=Be,Ue=!1,Be=null,e}function Ln(e,t){var r=t[di];void 0===r&&(r=t[di]=new Set);var n=e+"__bubble";r.has(n)||(jn(t,e,2,!1),r.add(n))}function Fn(e,t,r){var n=0;t&&(n|=4),jn(r,e,n,t)}var Un="_reactListening"+Math.random().toString(36).slice(2);function Bn(e){if(!e[Un]){e[Un]=!0,s.forEach(function(t){"selectionchange"!==t&&(Dn.has(t)||Fn(t,!1,e),Fn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Un]||(t[Un]=!0,Fn("selectionchange",!1,t))}}function jn(e,t,r,n){switch(Qt(t)){case 1:var i=Ht;break;case 4:i=Vt;break;default:i=Wt}r=i.bind(null,t,r,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Zn(e,t,r,n,i){var o=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=gi(s)))return;if(5===(l=a.tag)||6===l){n=o=a;continue e}s=s.parentNode}}n=n.return}Pe(function(){var n=o,i=Ee(r),a=[];e:{var s=Rn.get(e);if(void 0!==s){var l=ur,u=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Tr;break;case"focusin":u="focus",l=gr;break;case"focusout":u="blur",l=gr;break;case"beforeblur":case"afterblur":l=gr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ir;break;case Sn:case Tn:case An:l=mr;break;case In:l=Rr;break;case"scroll":l=fr;break;case"wheel":l=Nr;break;case"copy":case"cut":case"paste":l=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ar}var c=0!==(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=n;null!==p;){var g=(h=p).stateNode;if(5===h.tag&&null!==g&&(h=g,null!==d&&(null!=(g=xe(p,d))&&c.push(qn(p,g,h)))),f)break;p=p.return}0<c.length&&(s=new l(s,u,null,r,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===be||!(u=r.relatedTarget||r.fromElement)||!gi(u)&&!u[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(u=(u=r.relatedTarget||r.toElement)?gi(u):null)&&(u!==(f=qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=n),l!==u)){if(c=hr,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ar,g="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==l?s:yi(l),h=null==u?s:yi(u),(s=new c(g,p+"leave",l,r,i)).target=f,s.relatedTarget=h,g=null,gi(i)===n&&((c=new c(d,p+"enter",u,r,i)).target=h,c.relatedTarget=f,g=c),f=g,l&&u)e:{for(d=u,p=0,h=c=l;h;h=zn(h))p++;for(h=0,g=d;g;g=zn(g))h++;for(;0<p-h;)c=zn(c),p--;for(;0<h-p;)d=zn(d),h--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=zn(c),d=zn(d)}c=null}else c=null;null!==l&&Hn(a,s,l,c,!1),null!==u&&null!==f&&Hn(a,f,u,c,!0)}if("select"===(l=(s=n?yi(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Vr;else if(jr(s))if(Wr)m=rn;else{m=en;var y=Jr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=tn);switch(m&&(m=m(e,n))?Zr(a,m,r,i):(y&&y(e,s,n),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&te(s,"number",s.value)),y=n?yi(n):window,e){case"focusin":(jr(y)||"true"===y.contentEditable)&&(hn=y,pn=n,gn=null);break;case"focusout":gn=pn=hn=null;break;case"mousedown":mn=!0;break;case"contextmenu":case"mouseup":case"dragend":mn=!1,yn(a,r,i);break;case"selectionchange":if(dn)break;case"keydown":case"keyup":yn(a,r,i)}var v;if(Or)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ur?Lr(e,r)&&(_="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(_="onCompositionStart");_&&(Dr&&"ko"!==r.locale&&(Ur||"onCompositionStart"!==_?"onCompositionEnd"===_&&Ur&&(v=er()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,Ur=!0)),0<(y=Gn(n,_)).length&&(_=new vr(_,e,null,r,i),a.push({event:_,listeners:y}),v?_.data=v:null!==(v=Fr(r))&&(_.data=v))),(v=xr?function(e,t){switch(e){case"compositionend":return Fr(t);case"keypress":return 32!==t.which?null:(Mr=!0,kr);case"textInput":return(e=t.data)===kr&&Mr?null:e;default:return null}}(e,r):function(e,t){if(Ur)return"compositionend"===e||!Or&&Lr(e,t)?(e=er(),Jt=$t=Xt=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Gn(n,"onBeforeInput")).length&&(i=new vr("onBeforeInput","beforeinput",null,r,i),a.push({event:i,listeners:n}),i.data=v))}Mn(a,t)})}function qn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gn(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=xe(e,r))&&n.unshift(qn(e,o,i)),null!=(o=xe(e,t))&&n.push(qn(e,o,i))),e=e.return}return n}function zn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hn(e,t,r,n,i){for(var o=t._reactName,a=[];null!==r&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=xe(r,o))&&a.unshift(qn(r,l,s)):i||null!=(l=xe(r,o))&&a.push(qn(r,l,s))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var Vn=/\r\n?/g,Wn=/\u0000|\uFFFD/g;function Yn(e){return("string"===typeof e?e:""+e).replace(Vn,"\n").replace(Wn,"")}function Kn(e,t,r){if(t=Yn(t),Yn(e)!==t&&r)throw Error(o(425))}function Qn(){}var Xn=null,$n=null;function Jn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ei="function"===typeof setTimeout?setTimeout:void 0,ti="function"===typeof clearTimeout?clearTimeout:void 0,ri="function"===typeof Promise?Promise:void 0,ni="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ri?function(e){return ri.resolve(null).then(e).catch(ii)}:ei;function ii(e){setTimeout(function(){throw e})}function oi(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void qt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);qt(t)}function ai(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function si(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var li=Math.random().toString(36).slice(2),ui="__reactFiber$"+li,ci="__reactProps$"+li,fi="__reactContainer$"+li,di="__reactEvents$"+li,hi="__reactListeners$"+li,pi="__reactHandles$"+li;function gi(e){var t=e[ui];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fi]||r[ui]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=si(e);null!==e;){if(r=e[ui])return r;e=si(e)}return t}r=(e=r).parentNode}return null}function mi(e){return!(e=e[ui]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function vi(e){return e[ci]||null}var _i=[],bi=-1;function Ei(e){return{current:e}}function wi(e){0>bi||(e.current=_i[bi],_i[bi]=null,bi--)}function Si(e,t){bi++,_i[bi]=e.current,e.current=t}var Ti={},Ai=Ei(Ti),Ii=Ei(!1),Ri=Ti;function Ni(e,t){var r=e.type.contextTypes;if(!r)return Ti;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ci(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){wi(Ii),wi(Ai)}function Pi(e,t,r){if(Ai.current!==Ti)throw Error(o(168));Si(Ai,t),Si(Ii,r)}function xi(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(o(108,z(e)||"Unknown",i));return U({},r,n)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ri=Ai.current,Si(Ai,e),Si(Ii,Ii.current),!0}function ki(e,t,r){var n=e.stateNode;if(!n)throw Error(o(169));r?(e=xi(e,t,Ri),n.__reactInternalMemoizedMergedChildContext=e,wi(Ii),wi(Ai),Si(Ai,e)):wi(Ii),Si(Ii,r)}var Mi=null,Li=!1,Fi=!1;function Ui(e){null===Mi?Mi=[e]:Mi.push(e)}function Bi(){if(!Fi&&null!==Mi){Fi=!0;var e=0,t=_t;try{var r=Mi;for(_t=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Mi=null,Li=!1}catch(i){throw null!==Mi&&(Mi=Mi.slice(e+1)),We(Je,Bi),i}finally{_t=t,Fi=!1}}return null}var ji=[],Zi=0,qi=null,Gi=0,zi=[],Hi=0,Vi=null,Wi=1,Yi="";function Ki(e,t){ji[Zi++]=Gi,ji[Zi++]=qi,qi=e,Gi=t}function Qi(e,t,r){zi[Hi++]=Wi,zi[Hi++]=Yi,zi[Hi++]=Vi,Vi=e;var n=Wi;e=Yi;var i=32-at(n)-1;n&=~(1<<i),r+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Wi=1<<32-at(t)+i|r<<i|n,Yi=o+e}else Wi=1<<o|r<<i|n,Yi=e}function Xi(e){null!==e.return&&(Ki(e,1),Qi(e,1,0))}function $i(e){for(;e===qi;)qi=ji[--Zi],ji[Zi]=null,Gi=ji[--Zi],ji[Zi]=null;for(;e===Vi;)Vi=zi[--Hi],zi[Hi]=null,Yi=zi[--Hi],zi[Hi]=null,Wi=zi[--Hi],zi[Hi]=null}var Ji=null,eo=null,to=!1,ro=null;function no(e,t){var r=Nu(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function io(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ji=e,eo=ai(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ji=e,eo=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Vi?{id:Wi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Nu(18,null,null,0)).stateNode=t,r.return=e,e.child=r,Ji=e,eo=null,!0);default:return!1}}function oo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ao(e){if(to){var t=eo;if(t){var r=t;if(!io(e,t)){if(oo(e))throw Error(o(418));t=ai(r.nextSibling);var n=Ji;t&&io(e,t)?no(n,r):(e.flags=-4097&e.flags|2,to=!1,Ji=e)}}else{if(oo(e))throw Error(o(418));e.flags=-4097&e.flags|2,to=!1,Ji=e}}}function so(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ji=e}function lo(e){if(e!==Ji)return!1;if(!to)return so(e),to=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Jn(e.type,e.memoizedProps)),t&&(t=eo)){if(oo(e))throw uo(),Error(o(418));for(;t;)no(e,t),t=ai(t.nextSibling)}if(so(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){eo=ai(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}eo=null}}else eo=Ji?ai(e.stateNode.nextSibling):null;return!0}function uo(){for(var e=eo;e;)e=ai(e.nextSibling)}function co(){eo=Ji=null,to=!1}function fo(e){null===ro?ro=[e]:ro.push(e)}var ho=E.ReactCurrentBatchConfig;function po(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var n=r.stateNode}if(!n)throw Error(o(147,e));var i=n,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!r._owner)throw Error(o(290,e))}return e}function go(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mo(e){return(0,e._init)(e._payload)}function yo(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ou(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=ku(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function u(e,t,r,n){var o=r.type;return o===T?f(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===D&&mo(o)===t.type)?((n=i(t,r.props)).ref=po(e,t,r),n.return=e,n):((n=Pu(r.type,r.key,r.props,null,e.mode,n)).ref=po(e,t,r),n.return=e,n)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Mu(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function f(e,t,r,n,o){return null===t||7!==t.tag?((t=xu(r,e.mode,n,o)).return=e,t):((t=i(t,r)).return=e,t)}function d(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=ku(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Pu(t.type,t.key,t.props,null,e.mode,r)).ref=po(e,null,t),r.return=e,r;case S:return(t=Mu(t,e.mode,r)).return=e,t;case D:return d(e,(0,t._init)(t._payload),r)}if(re(t)||L(t))return(t=xu(t,e.mode,r,null)).return=e,t;go(e,t)}return null}function h(e,t,r,n){var i=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==i?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===i?u(e,t,r,n):null;case S:return r.key===i?c(e,t,r,n):null;case D:return h(e,t,(i=r._init)(r._payload),n)}if(re(r)||L(r))return null!==i?null:f(e,t,r,n,null);go(e,r)}return null}function p(e,t,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case S:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case D:return p(e,t,r,(0,n._init)(n._payload),i)}if(re(n)||L(n))return f(t,e=e.get(r)||null,n,i,null);go(t,n)}return null}function g(i,o,s,l){for(var u=null,c=null,f=o,g=o=0,m=null;null!==f&&g<s.length;g++){f.index>g?(m=f,f=null):m=f.sibling;var y=h(i,f,s[g],l);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,g),null===c?u=y:c.sibling=y,c=y,f=m}if(g===s.length)return r(i,f),to&&Ki(i,g),u;if(null===f){for(;g<s.length;g++)null!==(f=d(i,s[g],l))&&(o=a(f,o,g),null===c?u=f:c.sibling=f,c=f);return to&&Ki(i,g),u}for(f=n(i,f);g<s.length;g++)null!==(m=p(f,i,g,s[g],l))&&(e&&null!==m.alternate&&f.delete(null===m.key?g:m.key),o=a(m,o,g),null===c?u=m:c.sibling=m,c=m);return e&&f.forEach(function(e){return t(i,e)}),to&&Ki(i,g),u}function m(i,s,l,u){var c=L(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var f=c=null,g=s,m=s=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var _=h(i,g,v.value,u);if(null===_){null===g&&(g=y);break}e&&g&&null===_.alternate&&t(i,g),s=a(_,s,m),null===f?c=_:f.sibling=_,f=_,g=y}if(v.done)return r(i,g),to&&Ki(i,m),c;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(i,v.value,u))&&(s=a(v,s,m),null===f?c=v:f.sibling=v,f=v);return to&&Ki(i,m),c}for(g=n(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,u))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=a(v,s,m),null===f?c=v:f.sibling=v,f=v);return e&&g.forEach(function(e){return t(i,e)}),to&&Ki(i,m),c}return function e(n,o,a,l){if("object"===typeof a&&null!==a&&a.type===T&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===T){if(7===c.tag){r(n,c.sibling),(o=i(c,a.props.children)).return=n,n=o;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===D&&mo(u)===c.type){r(n,c.sibling),(o=i(c,a.props)).ref=po(n,c,a),o.return=n,n=o;break e}r(n,c);break}t(n,c),c=c.sibling}a.type===T?((o=xu(a.props.children,n.mode,l,a.key)).return=n,n=o):((l=Pu(a.type,a.key,a.props,null,n.mode,l)).ref=po(n,o,a),l.return=n,n=l)}return s(n);case S:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){r(n,o.sibling),(o=i(o,a.children||[])).return=n,n=o;break e}r(n,o);break}t(n,o),o=o.sibling}(o=Mu(a,n.mode,l)).return=n,n=o}return s(n);case D:return e(n,o,(c=a._init)(a._payload),l)}if(re(a))return g(n,o,a,l);if(L(a))return m(n,o,a,l);go(n,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(r(n,o.sibling),(o=i(o,a)).return=n,n=o):(r(n,o),(o=ku(a,n.mode,l)).return=n,n=o),s(n)):r(n,o)}}var vo=yo(!0),_o=yo(!1),bo=Ei(null),Eo=null,wo=null,So=null;function To(){So=wo=Eo=null}function Ao(e){var t=bo.current;wi(bo),e._currentValue=t}function Io(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ro(e,t){Eo=e,So=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ms=!0),e.firstContext=null)}function No(e){var t=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===Eo)throw Error(o(308));wo=e,Eo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var Co=null;function Oo(e){null===Co?Co=[e]:Co.push(e)}function Po(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,Oo(t)):(r.next=i.next,i.next=r),t.interleaved=r,xo(e,n)}function xo(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Do=!1;function ko(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fo(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Al)){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,xo(e,r)}return null===(i=n.interleaved)?(t.next=t,Oo(n)):(t.next=i.next,i.next=t),n.interleaved=t,xo(e,r)}function Uo(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}function Bo(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?i=o=a:o=o.next=a,r=r.next}while(null!==r);null===o?i=o=t:o=o.next=t}else i=o=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function jo(e,t,r,n){var i=e.updateQueue;Do=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var f=i.baseState;for(a=0,c=u=l=null,s=o;;){var d=s.lane,h=s.eventTime;if((n&d)===d){null!==c&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(d=t,h=r,g.tag){case 1:if("function"===typeof(p=g.payload)){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(h,f,d):p)||void 0===d)break e;f=U({},f,d);break e;case 2:Do=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=h,l=f):c=c.next=h,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Dl|=a,e.lanes=a,e.memoizedState=f}}function Zo(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(o(191,i));i.call(n)}}}var qo={},Go=Ei(qo),zo=Ei(qo),Ho=Ei(qo);function Vo(e){if(e===qo)throw Error(o(174));return e}function Wo(e,t){switch(Si(Ho,t),Si(zo,e),Si(Go,qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}wi(Go),Si(Go,t)}function Yo(){wi(Go),wi(zo),wi(Ho)}function Ko(e){Vo(Ho.current);var t=Vo(Go.current),r=ue(t,e.type);t!==r&&(Si(zo,e),Si(Go,r))}function Qo(e){zo.current===e&&(wi(Go),wi(zo))}var Xo=Ei(0);function $o(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Jo=[];function ea(){for(var e=0;e<Jo.length;e++)Jo[e]._workInProgressVersionPrimary=null;Jo.length=0}var ta=E.ReactCurrentDispatcher,ra=E.ReactCurrentBatchConfig,na=0,ia=null,oa=null,aa=null,sa=!1,la=!1,ua=0,ca=0;function fa(){throw Error(o(321))}function da(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!nn(e[r],t[r]))return!1;return!0}function ha(e,t,r,n,i,a){if(na=a,ia=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ta.current=null===e||null===e.memoizedState?Qa:Xa,e=r(n,i),la){a=0;do{if(la=!1,ua=0,25<=a)throw Error(o(301));a+=1,aa=oa=null,t.updateQueue=null,ta.current=$a,e=r(n,i)}while(la)}if(ta.current=Ka,t=null!==oa&&null!==oa.next,na=0,aa=oa=ia=null,sa=!1,t)throw Error(o(300));return e}function pa(){var e=0!==ua;return ua=0,e}function ga(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===aa?ia.memoizedState=aa=e:aa=aa.next=e,aa}function ma(){if(null===oa){var e=ia.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===aa?ia.memoizedState:aa.next;if(null!==t)aa=t,oa=e;else{if(null===e)throw Error(o(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===aa?ia.memoizedState=aa=e:aa=aa.next=e}return aa}function ya(e,t){return"function"===typeof t?t(e):t}function va(e){var t=ma(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=oa,i=n.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(null!==i){a=i.next,n=n.baseState;var l=s=null,u=null,c=a;do{var f=c.lane;if((na&f)===f)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=n):u=u.next=d,ia.lanes|=f,Dl|=f}c=c.next}while(null!==c&&c!==a);null===u?s=n:u.next=l,nn(n,t.memoizedState)||(ms=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=u,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{a=i.lane,ia.lanes|=a,Dl|=a,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function _a(e){var t=ma(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);nn(a,t.memoizedState)||(ms=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function ba(){}function Ea(e,t){var r=ia,n=ma(),i=t(),a=!nn(n.memoizedState,i);if(a&&(n.memoizedState=i,ms=!0),n=n.queue,Da(Ta.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||null!==aa&&1&aa.memoizedState.tag){if(r.flags|=2048,Na(9,Sa.bind(null,r,n,i,t),void 0,null),null===Il)throw Error(o(349));0!==(30&na)||wa(r,t,i)}return i}function wa(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ia.updateQueue)?(t={lastEffect:null,stores:null},ia.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Sa(e,t,r,n){t.value=r,t.getSnapshot=n,Aa(t)&&Ia(e)}function Ta(e,t,r){return r(function(){Aa(t)&&Ia(e)})}function Aa(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!nn(e,r)}catch(n){return!0}}function Ia(e){var t=xo(e,1);null!==t&&Jl(t,e,1,-1)}function Ra(e){var t=ga();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:e},t.queue=e,e=e.dispatch=Ha.bind(null,ia,e),[t.memoizedState,e]}function Na(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ia.updateQueue)?(t={lastEffect:null,stores:null},ia.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ca(){return ma().memoizedState}function Oa(e,t,r,n){var i=ga();ia.flags|=e,i.memoizedState=Na(1|t,r,void 0,void 0===n?null:n)}function Pa(e,t,r,n){var i=ma();n=void 0===n?null:n;var o=void 0;if(null!==oa){var a=oa.memoizedState;if(o=a.destroy,null!==n&&da(n,a.deps))return void(i.memoizedState=Na(t,r,o,n))}ia.flags|=e,i.memoizedState=Na(1|t,r,o,n)}function xa(e,t){return Oa(8390656,8,e,t)}function Da(e,t){return Pa(2048,8,e,t)}function ka(e,t){return Pa(4,2,e,t)}function Ma(e,t){return Pa(4,4,e,t)}function La(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fa(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Pa(4,4,La.bind(null,t,e),r)}function Ua(){}function Ba(e,t){var r=ma();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&da(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ja(e,t){var r=ma();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&da(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Za(e,t,r){return 0===(21&na)?(e.baseState&&(e.baseState=!1,ms=!0),e.memoizedState=r):(nn(r,t)||(r=gt(),ia.lanes|=r,Dl|=r,e.baseState=!0),t)}function qa(e,t){var r=_t;_t=0!==r&&4>r?r:4,e(!0);var n=ra.transition;ra.transition={};try{e(!1),t()}finally{_t=r,ra.transition=n}}function Ga(){return ma().memoizedState}function za(e,t,r){var n=$l(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Va(e))Wa(t,r);else if(null!==(r=Po(e,t,r,n))){Jl(r,e,n,Xl()),Ya(r,t,n)}}function Ha(e,t,r){var n=$l(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Va(e))Wa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,nn(s,a)){var l=t.interleaved;return null===l?(i.next=i,Oo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(r=Po(e,t,i,n))&&(Jl(r,e,n,i=Xl()),Ya(r,t,n))}}function Va(e){var t=e.alternate;return e===ia||null!==t&&t===ia}function Wa(e,t){la=sa=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ya(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}var Ka={readContext:No,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Qa={readContext:No,useCallback:function(e,t){return ga().memoizedState=[e,void 0===t?null:t],e},useContext:No,useEffect:xa,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Oa(4194308,4,La.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var r=ga();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ga();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=za.bind(null,ia,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},ga().memoizedState=e},useState:Ra,useDebugValue:Ua,useDeferredValue:function(e){return ga().memoizedState=e},useTransition:function(){var e=Ra(!1),t=e[0];return e=qa.bind(null,e[1]),ga().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ia,i=ga();if(to){if(void 0===r)throw Error(o(407));r=r()}else{if(r=t(),null===Il)throw Error(o(349));0!==(30&na)||wa(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,xa(Ta.bind(null,n,a,e),[e]),n.flags|=2048,Na(9,Sa.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=ga(),t=Il.identifierPrefix;if(to){var r=Yi;t=":"+t+"R"+(r=(Wi&~(1<<32-at(Wi)-1)).toString(32)+r),0<(r=ua++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ca++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xa={readContext:No,useCallback:Ba,useContext:No,useEffect:Da,useImperativeHandle:Fa,useInsertionEffect:ka,useLayoutEffect:Ma,useMemo:ja,useReducer:va,useRef:Ca,useState:function(){return va(ya)},useDebugValue:Ua,useDeferredValue:function(e){return Za(ma(),oa.memoizedState,e)},useTransition:function(){return[va(ya)[0],ma().memoizedState]},useMutableSource:ba,useSyncExternalStore:Ea,useId:Ga,unstable_isNewReconciler:!1},$a={readContext:No,useCallback:Ba,useContext:No,useEffect:Da,useImperativeHandle:Fa,useInsertionEffect:ka,useLayoutEffect:Ma,useMemo:ja,useReducer:_a,useRef:Ca,useState:function(){return _a(ya)},useDebugValue:Ua,useDeferredValue:function(e){var t=ma();return null===oa?t.memoizedState=e:Za(t,oa.memoizedState,e)},useTransition:function(){return[_a(ya)[0],ma().memoizedState]},useMutableSource:ba,useSyncExternalStore:Ea,useId:Ga,unstable_isNewReconciler:!1};function Ja(e,t){if(e&&e.defaultProps){for(var r in t=U({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function es(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:U({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ts={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Xl(),i=$l(e),o=Lo(n,i);o.payload=t,void 0!==r&&null!==r&&(o.callback=r),null!==(t=Fo(e,o,i))&&(Jl(t,e,i,n),Uo(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Xl(),i=$l(e),o=Lo(n,i);o.tag=1,o.payload=t,void 0!==r&&null!==r&&(o.callback=r),null!==(t=Fo(e,o,i))&&(Jl(t,e,i,n),Uo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Xl(),n=$l(e),i=Lo(r,n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fo(e,i,n))&&(Jl(t,e,n,r),Uo(t,e,n))}};function rs(e,t,r,n,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!on(r,n)||!on(i,o))}function ns(e,t,r){var n=!1,i=Ti,o=t.contextType;return"object"===typeof o&&null!==o?o=No(o):(i=Ci(t)?Ri:Ai.current,o=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ni(e,i):Ti),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ts,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function is(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ts.enqueueReplaceState(t,t.state,null)}function os(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},ko(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=No(o):(o=Ci(t)?Ri:Ai.current,i.context=Ni(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(es(e,t,o,r),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ts.enqueueReplaceState(i,i.state,null),jo(e,r,i,n),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function as(e,t){try{var r="",n=t;do{r+=q(n),n=n.return}while(n);var i=r}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ss(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ls(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var us="function"===typeof WeakMap?WeakMap:Map;function cs(e,t,r){(r=Lo(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Zl||(Zl=!0,ql=n),ls(0,t)},r}function fs(e,t,r){(r=Lo(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){ls(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(r.callback=function(){ls(0,t),"function"!==typeof n&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ds(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new us;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=wu.bind(null,e,t,r),t.then(e,e))}function hs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ps(e,t,r,n,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Lo(-1,1)).tag=2,Fo(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var gs=E.ReactCurrentOwner,ms=!1;function ys(e,t,r,n){t.child=null===e?_o(t,null,r,n):vo(t,e.child,r,n)}function vs(e,t,r,n,i){r=r.render;var o=t.ref;return Ro(t,i),n=ha(e,t,r,n,o,i),r=pa(),null===e||ms?(to&&r&&Xi(t),t.flags|=1,ys(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zs(e,t,i))}function _s(e,t,r,n,i){if(null===e){var o=r.type;return"function"!==typeof o||Cu(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Pu(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,bs(e,t,o,n,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((r=null!==(r=r.compare)?r:on)(a,n)&&e.ref===t.ref)return Zs(e,t,i)}return t.flags|=1,(e=Ou(o,n)).ref=t.ref,e.return=t,t.child=e}function bs(e,t,r,n,i){if(null!==e){var o=e.memoizedProps;if(on(o,n)&&e.ref===t.ref){if(ms=!1,t.pendingProps=n=o,0===(e.lanes&i))return t.lanes=e.lanes,Zs(e,t,i);0!==(131072&e.flags)&&(ms=!0)}}return Ss(e,t,r,n,i)}function Es(e,t,r){var n=t.pendingProps,i=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ol,Cl),Cl|=r;else{if(0===(1073741824&r))return e=null!==o?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ol,Cl),Cl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:r,Si(Ol,Cl),Cl|=n}else null!==o?(n=o.baseLanes|r,t.memoizedState=null):n=r,Si(Ol,Cl),Cl|=n;return ys(e,t,i,r),t.child}function ws(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,r,n,i){var o=Ci(r)?Ri:Ai.current;return o=Ni(t,o),Ro(t,i),r=ha(e,t,r,n,o,i),n=pa(),null===e||ms?(to&&n&&Xi(t),t.flags|=1,ys(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zs(e,t,i))}function Ts(e,t,r,n,i){if(Ci(r)){var o=!0;Di(t)}else o=!1;if(Ro(t,i),null===t.stateNode)js(e,t),ns(t,r,n),os(t,r,n,i),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=r.contextType;"object"===typeof u&&null!==u?u=No(u):u=Ni(t,u=Ci(r)?Ri:Ai.current);var c=r.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==u)&&is(t,a,n,u),Do=!1;var d=t.memoizedState;a.state=d,jo(t,n,a,i),l=t.memoizedState,s!==n||d!==l||Ii.current||Do?("function"===typeof c&&(es(t,r,c,n),l=t.memoizedState),(s=Do||rs(t,r,s,n,d,l,u))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=u,n=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Mo(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ja(t.type,s),a.props=u,f=t.pendingProps,d=a.context,"object"===typeof(l=r.contextType)&&null!==l?l=No(l):l=Ni(t,l=Ci(r)?Ri:Ai.current);var h=r.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==f||d!==l)&&is(t,a,n,l),Do=!1,d=t.memoizedState,a.state=d,jo(t,n,a,i);var p=t.memoizedState;s!==f||d!==p||Ii.current||Do?("function"===typeof h&&(es(t,r,h,n),p=t.memoizedState),(u=Do||rs(t,r,u,n,d,p,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),a.props=n,a.state=p,a.context=l,n=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return As(e,t,r,n,o,i)}function As(e,t,r,n,i,o){ws(e,t);var a=0!==(128&t.flags);if(!n&&!a)return i&&ki(t,r,!1),Zs(e,t,o);n=t.stateNode,gs.current=t;var s=a&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=vo(t,e.child,null,o),t.child=vo(t,null,s,o)):ys(e,t,s,o),t.memoizedState=n.state,i&&ki(t,r,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),Wo(e,t.containerInfo)}function Rs(e,t,r,n,i){return co(),fo(i),t.flags|=256,ys(e,t,r,n),t.child}var Ns,Cs,Os,Ps,xs={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function ks(e,t,r){var n,i=t.pendingProps,a=Xo.current,s=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&a)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Si(Xo,1&a),null===e)return ao(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Du(l,i,0,null),e=xu(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ds(r),t.memoizedState=xs,e):Ms(t,l));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,r,n,i,a,s){if(r)return 256&t.flags?(t.flags&=-257,Ls(e,t,s,n=ss(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Du({mode:"visible",children:n.children},i,0,null),(a=xu(a,i,s,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,0!==(1&t.mode)&&vo(t,e.child,null,s),t.child.memoizedState=Ds(s),t.memoizedState=xs,a);if(0===(1&t.mode))return Ls(e,t,s,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var l=n.dgst;return n=l,Ls(e,t,s,n=ss(a=Error(o(419)),n,void 0))}if(l=0!==(s&e.childLanes),ms||l){if(null!==(n=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,xo(e,i),Jl(n,e,i,-1))}return du(),Ls(e,t,s,n=ss(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,eo=ai(i.nextSibling),Ji=t,to=!0,ro=null,null!==e&&(zi[Hi++]=Wi,zi[Hi++]=Yi,zi[Hi++]=Vi,Wi=e.id,Yi=e.overflow,Vi=t),t=Ms(t,n.children),t.flags|=4096,t)}(e,t,l,i,n,a,r);if(s){s=i.fallback,l=t.mode,n=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Ou(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==n?s=Ou(n,s):(s=xu(s,l,r,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ds(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~r,t.memoizedState=xs,i}return e=(s=e.child).sibling,i=Ou(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Ms(e,t){return(t=Du({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ls(e,t,r,n){return null!==n&&fo(n),vo(t,e.child,null,r),(e=Ms(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Io(e.return,t,r)}function Us(e,t,r,n,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function Bs(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(ys(e,t,n.children,r),0!==(2&(n=Xo.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,r,t);else if(19===e.tag)Fs(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Si(Xo,n),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===$o(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Us(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===$o(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Us(t,!0,r,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function js(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zs(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=Ou(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ou(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function qs(e,t){if(!to)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function zs(e,t,r){var n=t.pendingProps;switch($i(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ci(t.type)&&Oi(),Gs(t),null;case 3:return n=t.stateNode,Yo(),wi(Ii),wi(Ai),ea(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(lo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ro&&(nu(ro),ro=null))),Cs(e,t),Gs(t),null;case 5:Qo(t);var i=Vo(Ho.current);if(r=t.type,null!==e&&null!=t.stateNode)Os(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(o(166));return Gs(t),null}if(e=Vo(Go.current),lo(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[ui]=t,n[ci]=a,e=0!==(1&t.mode),r){case"dialog":Ln("cancel",n),Ln("close",n);break;case"iframe":case"object":case"embed":Ln("load",n);break;case"video":case"audio":for(i=0;i<xn.length;i++)Ln(xn[i],n);break;case"source":Ln("error",n);break;case"img":case"image":case"link":Ln("error",n),Ln("load",n);break;case"details":Ln("toggle",n);break;case"input":X(n,a),Ln("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ln("invalid",n);break;case"textarea":oe(n,a),Ln("invalid",n)}for(var s in ve(r,a),i=null,a)if(a.hasOwnProperty(s)){var u=a[s];"children"===s?"string"===typeof u?n.textContent!==u&&(!0!==a.suppressHydrationWarning&&Kn(n.textContent,u,e),i=["children",u]):"number"===typeof u&&n.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Kn(n.textContent,u,e),i=["children",""+u]):l.hasOwnProperty(s)&&null!=u&&"onScroll"===s&&Ln("scroll",n)}switch(r){case"input":W(n),ee(n,a,!0);break;case"textarea":W(n),se(n);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(n.onclick=Qn)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),"select"===r&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[ui]=t,e[ci]=n,Ns(e,t,!1,!1),t.stateNode=e;e:{switch(s=_e(r,n),r){case"dialog":Ln("cancel",e),Ln("close",e),i=n;break;case"iframe":case"object":case"embed":Ln("load",e),i=n;break;case"video":case"audio":for(i=0;i<xn.length;i++)Ln(xn[i],e);i=n;break;case"source":Ln("error",e),i=n;break;case"img":case"image":case"link":Ln("error",e),Ln("load",e),i=n;break;case"details":Ln("toggle",e),i=n;break;case"input":X(e,n),i=Q(e,n),Ln("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=U({},n,{value:void 0}),Ln("invalid",e);break;case"textarea":oe(e,n),i=ie(e,n),Ln("invalid",e)}for(a in ve(r,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?me(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===a?"string"===typeof c?("textarea"!==r||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Ln("scroll",e):null!=c&&b(e,a,c,s))}switch(r){case"input":W(e),ee(e,n,!1);break;case"textarea":W(e),se(e);break;case"option":null!=n.value&&e.setAttribute("value",""+H(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?ne(e,!!n.multiple,a,!1):null!=n.defaultValue&&ne(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ps(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));if(r=Vo(Ho.current),Vo(Go.current),lo(t)){if(n=t.stateNode,r=t.memoizedProps,n[ui]=t,(a=n.nodeValue!==r)&&null!==(e=Ji))switch(e.tag){case 3:Kn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Kn(n.nodeValue,r,0!==(1&e.mode))}a&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ui]=t,t.stateNode=n}return Gs(t),null;case 13:if(wi(Xo),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(to&&null!==eo&&0!==(1&t.mode)&&0===(128&t.flags))uo(),co(),t.flags|=98560,a=!1;else if(a=lo(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[ui]=t}else co(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),a=!1}else null!==ro&&(nu(ro),ro=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xo.current)?0===Pl&&(Pl=3):du())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return Yo(),Cs(e,t),null===e&&Bn(t.stateNode.containerInfo),Gs(t),null;case 10:return Ao(t.type._context),Gs(t),null;case 19:if(wi(Xo),null===(a=t.memoizedState))return Gs(t),null;if(n=0!==(128&t.flags),null===(s=a.rendering))if(n)qs(a,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=$o(e))){for(t.flags|=128,qs(a,!1),null!==(n=s.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(a=r).flags&=14680066,null===(s=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Si(Xo,1&Xo.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Bl&&(t.flags|=128,n=!0,qs(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=$o(s))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),qs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!to)return Gs(t),null}else 2*Xe()-a.renderingStartTime>Bl&&1073741824!==r&&(t.flags|=128,n=!0,qs(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(r=a.last)?r.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,r=Xo.current,Si(Xo,n?1&r|2:1&r),t):(Gs(t),null);case 22:case 23:return lu(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Cl)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Hs(e,t){switch($i(t),t.tag){case 1:return Ci(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yo(),wi(Ii),wi(Ai),ea(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qo(t),null;case 13:if(wi(Xo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));co()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return wi(Xo),null;case 4:return Yo(),null;case 10:return Ao(t.type._context),null;case 22:case 23:return lu(),null;default:return null}}Ns=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Cs=function(){},Os=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Vo(Go.current);var o,a=null;switch(r){case"input":i=Q(e,i),n=Q(e,n),a=[];break;case"select":i=U({},i,{value:void 0}),n=U({},n,{value:void 0}),a=[];break;case"textarea":i=ie(e,i),n=ie(e,n),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof n.onClick&&(e.onclick=Qn)}for(c in ve(r,n),r=null,i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var s=i[c];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(l.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var u=n[c];if(s=null!=i?i[c]:void 0,n.hasOwnProperty(c)&&u!==s&&(null!=u||null!=s))if("style"===c)if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(c,r)),r=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(l.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Ln("scroll",e),a||s===u||(a=[])):(a=a||[]).push(c,u))}r&&(a=a||[]).push("style",r);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ps=function(e,t,r,n){r!==n&&(t.flags|=4)};var Vs=!1,Ws=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Ks=null;function Qs(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Eu(e,t,n)}else r.current=null}function Xs(e,t,r){try{r()}catch(n){Eu(e,t,n)}}var $s=!1;function Js(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&Xs(t,r,o)}i=i.next}while(i!==n)}}function el(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function tl(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ui],delete t[ci],delete t[di],delete t[hi],delete t[pi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nl(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||nl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ol(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Qn));else if(4!==n&&null!==(e=e.child))for(ol(e,t,r),e=e.sibling;null!==e;)ol(e,t,r),e=e.sibling}function al(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(al(e,t,r),e=e.sibling;null!==e;)al(e,t,r),e=e.sibling}var sl=null,ll=!1;function ul(e,t,r){for(r=r.child;null!==r;)cl(e,t,r),r=r.sibling}function cl(e,t,r){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,r)}catch(s){}switch(r.tag){case 5:Ws||Qs(r,t);case 6:var n=sl,i=ll;sl=null,ul(e,t,r),ll=i,null!==(sl=n)&&(ll?(e=sl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):sl.removeChild(r.stateNode));break;case 18:null!==sl&&(ll?(e=sl,r=r.stateNode,8===e.nodeType?oi(e.parentNode,r):1===e.nodeType&&oi(e,r),qt(e)):oi(sl,r.stateNode));break;case 4:n=sl,i=ll,sl=r.stateNode.containerInfo,ll=!0,ul(e,t,r),sl=n,ll=i;break;case 0:case 11:case 14:case 15:if(!Ws&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&Xs(r,t,a),i=i.next}while(i!==n)}ul(e,t,r);break;case 1:if(!Ws&&(Qs(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Eu(r,t,s)}ul(e,t,r);break;case 21:ul(e,t,r);break;case 22:1&r.mode?(Ws=(n=Ws)||null!==r.memoizedState,ul(e,t,r),Ws=n):ul(e,t,r);break;default:ul(e,t,r)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Ys),t.forEach(function(t){var n=Au.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function dl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:sl=l.stateNode,ll=!1;break e;case 3:case 4:sl=l.stateNode.containerInfo,ll=!0;break e}l=l.return}if(null===sl)throw Error(o(160));cl(a,s,i),sl=null,ll=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Eu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)hl(t,e),t=t.sibling}function hl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dl(t,e),pl(e),4&n){try{Js(3,e,e.return),el(3,e)}catch(m){Eu(e,e.return,m)}try{Js(5,e,e.return)}catch(m){Eu(e,e.return,m)}}break;case 1:dl(t,e),pl(e),512&n&&null!==r&&Qs(r,r.return);break;case 5:if(dl(t,e),pl(e),512&n&&null!==r&&Qs(r,r.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Eu(e,e.return,m)}}if(4&n&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==r?r.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(i,a),_e(l,s);var c=_e(l,a);for(s=0;s<u.length;s+=2){var f=u[s],d=u[s+1];"style"===f?me(i,d):"dangerouslySetInnerHTML"===f?fe(i,d):"children"===f?de(i,d):b(i,f,d,c)}switch(l){case"input":J(i,a);break;case"textarea":ae(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):h!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[ci]=a}catch(m){Eu(e,e.return,m)}}break;case 6:if(dl(t,e),pl(e),4&n){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Eu(e,e.return,m)}}break;case 3:if(dl(t,e),pl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(m){Eu(e,e.return,m)}break;case 4:default:dl(t,e),pl(e);break;case 13:dl(t,e),pl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Xe())),4&n&&fl(e);break;case 22:if(f=null!==r&&null!==r.memoizedState,1&e.mode?(Ws=(c=Ws)||f,dl(t,e),Ws=c):dl(t,e),pl(e),8192&n){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!==(1&e.mode))for(Ks=e,f=e.child;null!==f;){for(d=Ks=f;null!==Ks;){switch(p=(h=Ks).child,h.tag){case 0:case 11:case 14:case 15:Js(4,h,h.return);break;case 1:Qs(h,h.return);var g=h.stateNode;if("function"===typeof g.componentWillUnmount){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Eu(n,r,m)}}break;case 5:Qs(h,h.return);break;case 22:if(null!==h.memoizedState){vl(d);continue}}null!==p?(p.return=h,Ks=p):vl(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{i=d.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ge("display",s))}catch(m){Eu(e,e.return,m)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Eu(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dl(t,e),pl(e),4&n&&fl(e);case 21:}}function pl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(nl(r)){var n=r;break e}r=r.return}throw Error(o(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(de(i,""),n.flags&=-33),al(e,il(e),i);break;case 3:case 4:var a=n.stateNode.containerInfo;ol(e,il(e),a);break;default:throw Error(o(161))}}catch(s){Eu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gl(e,t,r){Ks=e,ml(e,t,r)}function ml(e,t,r){for(var n=0!==(1&e.mode);null!==Ks;){var i=Ks,o=i.child;if(22===i.tag&&n){var a=null!==i.memoizedState||Vs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ws;s=Vs;var u=Ws;if(Vs=a,(Ws=l)&&!u)for(Ks=i;null!==Ks;)l=(a=Ks).child,22===a.tag&&null!==a.memoizedState?_l(i):null!==l?(l.return=a,Ks=l):_l(i);for(;null!==o;)Ks=o,ml(o,t,r),o=o.sibling;Ks=i,Vs=s,Ws=u}yl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ks=o):yl(e)}}function yl(e){for(;null!==Ks;){var t=Ks;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ws||el(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Ws)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Ja(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Zo(t,a,n);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Zo(t,s,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&qt(d)}}}break;default:throw Error(o(163))}Ws||512&t.flags&&tl(t)}catch(h){Eu(t,t.return,h)}}if(t===e){Ks=null;break}if(null!==(r=t.sibling)){r.return=t.return,Ks=r;break}Ks=t.return}}function vl(e){for(;null!==Ks;){var t=Ks;if(t===e){Ks=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Ks=r;break}Ks=t.return}}function _l(e){for(;null!==Ks;){var t=Ks;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{el(4,t)}catch(l){Eu(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(l){Eu(t,i,l)}}var o=t.return;try{tl(t)}catch(l){Eu(t,o,l)}break;case 5:var a=t.return;try{tl(t)}catch(l){Eu(t,a,l)}}}catch(l){Eu(t,t.return,l)}if(t===e){Ks=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ks=s;break}Ks=t.return}}var bl,El=Math.ceil,wl=E.ReactCurrentDispatcher,Sl=E.ReactCurrentOwner,Tl=E.ReactCurrentBatchConfig,Al=0,Il=null,Rl=null,Nl=0,Cl=0,Ol=Ei(0),Pl=0,xl=null,Dl=0,kl=0,Ml=0,Ll=null,Fl=null,Ul=0,Bl=1/0,jl=null,Zl=!1,ql=null,Gl=null,zl=!1,Hl=null,Vl=0,Wl=0,Yl=null,Kl=-1,Ql=0;function Xl(){return 0!==(6&Al)?Xe():-1!==Kl?Kl:Kl=Xe()}function $l(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Nl?Nl&-Nl:null!==ho.transition?(0===Ql&&(Ql=gt()),Ql):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function Jl(e,t,r,n){if(50<Wl)throw Wl=0,Yl=null,Error(o(185));yt(e,r,n),0!==(2&Al)&&e===Il||(e===Il&&(0===(2&Al)&&(kl|=r),4===Pl&&iu(e,Nl)),eu(e,n),1===r&&0===Al&&0===(1&t.mode)&&(Bl=Xe()+500,Li&&Bi()))}function eu(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&r)&&0===(s&n)||(i[a]=ht(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var n=dt(e,e===Il?Nl:0);if(0===n)null!==r&&Ye(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ye(r),1===t)0===e.tag?function(e){Li=!0,Ui(e)}(ou.bind(null,e)):Ui(ou.bind(null,e)),ni(function(){0===(6&Al)&&Bi()}),r=null;else{switch(bt(n)){case 1:r=Je;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Iu(r,tu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function tu(e,t){if(Kl=-1,Ql=0,0!==(6&Al))throw Error(o(327));var r=e.callbackNode;if(_u()&&e.callbackNode!==r)return null;var n=dt(e,e===Il?Nl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=hu(e,n);else{t=n;var i=Al;Al|=2;var a=fu();for(Il===e&&Nl===t||(jl=null,Bl=Xe()+500,uu(e,t));;)try{gu();break}catch(l){cu(e,l)}To(),wl.current=a,Al=i,null!==Rl?t=0:(Il=null,Nl=0,t=Pl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(n=i,t=ru(e,i))),1===t)throw r=xl,uu(e,0),iu(e,n),eu(e,Xe()),r;if(6===t)iu(e,n);else{if(i=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!nn(o(),i))return!1}catch(s){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=hu(e,n))&&(0!==(a=pt(e))&&(n=a,t=ru(e,a))),1===t))throw r=xl,uu(e,0),iu(e,n),eu(e,Xe()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(o(345));case 2:case 5:vu(e,Fl,jl);break;case 3:if(iu(e,n),(130023424&n)===n&&10<(t=Ul+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){Xl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ei(vu.bind(null,e,Fl,jl),t);break}vu(e,Fl,jl);break;case 4:if(iu(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-at(n);a=1<<s,(s=t[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=Xe()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*El(n/1960))-n)){e.timeoutHandle=ei(vu.bind(null,e,Fl,jl),n);break}vu(e,Fl,jl);break;default:throw Error(o(329))}}}return eu(e,Xe()),e.callbackNode===r?tu.bind(null,e):null}function ru(e,t){var r=Ll;return e.current.memoizedState.isDehydrated&&(uu(e,t).flags|=256),2!==(e=hu(e,t))&&(t=Fl,Fl=r,null!==t&&nu(t)),e}function nu(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function iu(e,t){for(t&=~Ml,t&=~kl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-at(t),n=1<<r;e[r]=-1,t&=~n}}function ou(e){if(0!==(6&Al))throw Error(o(327));_u();var t=dt(e,0);if(0===(1&t))return eu(e,Xe()),null;var r=hu(e,t);if(0!==e.tag&&2===r){var n=pt(e);0!==n&&(t=n,r=ru(e,n))}if(1===r)throw r=xl,uu(e,0),iu(e,t),eu(e,Xe()),r;if(6===r)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vu(e,Fl,jl),eu(e,Xe()),null}function au(e,t){var r=Al;Al|=1;try{return e(t)}finally{0===(Al=r)&&(Bl=Xe()+500,Li&&Bi())}}function su(e){null!==Hl&&0===Hl.tag&&0===(6&Al)&&_u();var t=Al;Al|=1;var r=Tl.transition,n=_t;try{if(Tl.transition=null,_t=1,e)return e()}finally{_t=n,Tl.transition=r,0===(6&(Al=t))&&Bi()}}function lu(){Cl=Ol.current,wi(Ol)}function uu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ti(r)),null!==Rl)for(r=Rl.return;null!==r;){var n=r;switch($i(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Oi();break;case 3:Yo(),wi(Ii),wi(Ai),ea();break;case 5:Qo(n);break;case 4:Yo();break;case 13:case 19:wi(Xo);break;case 10:Ao(n.type._context);break;case 22:case 23:lu()}r=r.return}if(Il=e,Rl=e=Ou(e.current,null),Nl=Cl=t,Pl=0,xl=null,Ml=kl=Dl=0,Fl=Ll=null,null!==Co){for(t=0;t<Co.length;t++)if(null!==(n=(r=Co[t]).interleaved)){r.interleaved=null;var i=n.next,o=r.pending;if(null!==o){var a=o.next;o.next=i,n.next=a}r.pending=n}Co=null}return e}function cu(e,t){for(;;){var r=Rl;try{if(To(),ta.current=Ka,sa){for(var n=ia.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}sa=!1}if(na=0,aa=oa=ia=null,la=!1,ua=0,Sl.current=null,null===r||null===r.return){Pl=1,xl=t,Rl=null;break}e:{var a=e,s=r.return,l=r,u=t;if(t=Nl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,f=l,d=f.tag;if(0===(1&f.mode)&&(0===d||11===d||15===d)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=hs(s);if(null!==p){p.flags&=-257,ps(p,s,l,0,t),1&p.mode&&ds(a,c,t),u=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(0===(1&t)){ds(a,c,t),du();break e}u=Error(o(426))}else if(to&&1&l.mode){var y=hs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ps(y,s,l,0,t),fo(as(u,l));break e}}a=u=as(u,l),4!==Pl&&(Pl=2),null===Ll?Ll=[a]:Ll.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bo(a,cs(0,u,t));break e;case 1:l=u;var v=a.type,_=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Gl||!Gl.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t,Bo(a,fs(a,l,t));break e}}a=a.return}while(null!==a)}yu(r)}catch(b){t=b,Rl===r&&null!==r&&(Rl=r=r.return);continue}break}}function fu(){var e=wl.current;return wl.current=Ka,null===e?Ka:e}function du(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Il||0===(268435455&Dl)&&0===(268435455&kl)||iu(Il,Nl)}function hu(e,t){var r=Al;Al|=2;var n=fu();for(Il===e&&Nl===t||(jl=null,uu(e,t));;)try{pu();break}catch(i){cu(e,i)}if(To(),Al=r,wl.current=n,null!==Rl)throw Error(o(261));return Il=null,Nl=0,Pl}function pu(){for(;null!==Rl;)mu(Rl)}function gu(){for(;null!==Rl&&!Ke();)mu(Rl)}function mu(e){var t=bl(e.alternate,e,Cl);e.memoizedProps=e.pendingProps,null===t?yu(e):Rl=t,Sl.current=null}function yu(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=zs(r,t,Cl)))return void(Rl=r)}else{if(null!==(r=Hs(r,t)))return r.flags&=32767,void(Rl=r);if(null===e)return Pl=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Pl&&(Pl=5)}function vu(e,t,r){var n=_t,i=Tl.transition;try{Tl.transition=null,_t=1,function(e,t,r,n){do{_u()}while(null!==Hl);if(0!==(6&Al))throw Error(o(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-at(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}(e,a),e===Il&&(Rl=Il=null,Nl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||zl||(zl=!0,Iu(tt,function(){return _u(),null})),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var s=_t;_t=1;var l=Al;Al|=4,Sl.current=null,function(e,t){if(Xn=zt,cn(e=un())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(E){r=null;break e}var s=0,l=-1,u=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==r||0!==i&&3!==d.nodeType||(l=s+i),d!==a||0!==n&&3!==d.nodeType||(u=s+n),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===r&&++c===i&&(l=s),h===a&&++f===n&&(u=s),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}r=-1===l||-1===u?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for($n={focusedElem:e,selectionRange:r},zt=!1,Ks=t;null!==Ks;)if(e=(t=Ks).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ks=e;else for(;null!==Ks;){t=Ks;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ja(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(E){Eu(t,t.return,E)}if(null!==(e=t.sibling)){e.return=t.return,Ks=e;break}Ks=t.return}g=$s,$s=!1}(e,r),hl(r,e),fn($n),zt=!!Xn,$n=Xn=null,e.current=r,gl(r,e,i),Qe(),Al=l,_t=s,Tl.transition=a}else e.current=r;if(zl&&(zl=!1,Hl=e,Vl=i),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),eu(e,Xe()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Zl)throw Zl=!1,e=ql,ql=null,e;0!==(1&Vl)&&0!==e.tag&&_u(),a=e.pendingLanes,0!==(1&a)?e===Yl?Wl++:(Wl=0,Yl=e):Wl=0,Bi()}(e,t,r,n)}finally{Tl.transition=i,_t=n}return null}function _u(){if(null!==Hl){var e=bt(Vl),t=Tl.transition,r=_t;try{if(Tl.transition=null,_t=16>e?16:e,null===Hl)var n=!1;else{if(e=Hl,Hl=null,Vl=0,0!==(6&Al))throw Error(o(331));var i=Al;for(Al|=4,Ks=e.current;null!==Ks;){var a=Ks,s=a.child;if(0!==(16&Ks.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Ks=c;null!==Ks;){var f=Ks;switch(f.tag){case 0:case 11:case 15:Js(8,f,a)}var d=f.child;if(null!==d)d.return=f,Ks=d;else for(;null!==Ks;){var h=(f=Ks).sibling,p=f.return;if(rl(f),f===c){Ks=null;break}if(null!==h){h.return=p,Ks=h;break}Ks=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ks=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Ks=s;else e:for(;null!==Ks;){if(0!==(2048&(a=Ks).flags))switch(a.tag){case 0:case 11:case 15:Js(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Ks=v;break e}Ks=a.return}}var _=e.current;for(Ks=_;null!==Ks;){var b=(s=Ks).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Ks=b;else e:for(s=_;null!==Ks;){if(0!==(2048&(l=Ks).flags))try{switch(l.tag){case 0:case 11:case 15:el(9,l)}}catch(w){Eu(l,l.return,w)}if(l===s){Ks=null;break e}var E=l.sibling;if(null!==E){E.return=l.return,Ks=E;break e}Ks=l.return}}if(Al=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(w){}n=!0}return n}finally{_t=r,Tl.transition=t}}return!1}function bu(e,t,r){e=Fo(e,t=cs(0,t=as(r,t),1),1),t=Xl(),null!==e&&(yt(e,1,t),eu(e,t))}function Eu(e,t,r){if(3===e.tag)bu(e,e,r);else for(;null!==t;){if(3===t.tag){bu(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Gl||!Gl.has(n))){t=Fo(t,e=fs(t,e=as(r,e),1),1),e=Xl(),null!==t&&(yt(t,1,e),eu(t,e));break}}t=t.return}}function wu(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=Xl(),e.pingedLanes|=e.suspendedLanes&r,Il===e&&(Nl&r)===r&&(4===Pl||3===Pl&&(130023424&Nl)===Nl&&500>Xe()-Ul?uu(e,0):Ml|=r),eu(e,t)}function Su(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var r=Xl();null!==(e=xo(e,t))&&(yt(e,t,r),eu(e,r))}function Tu(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Su(e,r)}function Au(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(o(314))}null!==n&&n.delete(t),Su(e,r)}function Iu(e,t){return We(e,t)}function Ru(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nu(e,t,r,n){return new Ru(e,t,r,n)}function Cu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ou(e,t){var r=e.alternate;return null===r?((r=Nu(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pu(e,t,r,n,i,a){var s=2;if(n=e,"function"===typeof e)Cu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case T:return xu(r.children,i,a,t);case A:s=8,i|=8;break;case I:return(e=Nu(12,r,t,2|i)).elementType=I,e.lanes=a,e;case O:return(e=Nu(13,r,t,i)).elementType=O,e.lanes=a,e;case P:return(e=Nu(19,r,t,i)).elementType=P,e.lanes=a,e;case k:return Du(r,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case R:s=10;break e;case N:s=9;break e;case C:s=11;break e;case x:s=14;break e;case D:s=16,n=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Nu(s,r,t,i)).elementType=e,t.type=n,t.lanes=a,t}function xu(e,t,r,n){return(e=Nu(7,e,n,t)).lanes=r,e}function Du(e,t,r,n){return(e=Nu(22,e,n,t)).elementType=k,e.lanes=r,e.stateNode={isHidden:!1},e}function ku(e,t,r){return(e=Nu(6,e,null,t)).lanes=r,e}function Mu(e,t,r){return(t=Nu(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lu(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fu(e,t,r,n,i,o,a,s,l){return e=new Lu(e,t,r,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Nu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ko(o),e}function Uu(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ci(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var r=e.type;if(Ci(r))return xi(e,r,t)}return t}function Bu(e,t,r,n,i,o,a,s,l){return(e=Fu(r,n,!0,e,0,o,0,s,l)).context=Uu(null),r=e.current,(o=Lo(n=Xl(),i=$l(r))).callback=void 0!==t&&null!==t?t:null,Fo(r,o,i),e.current.lanes=i,yt(e,i,n),eu(e,n),e}function ju(e,t,r,n){var i=t.current,o=Xl(),a=$l(i);return r=Uu(r),null===t.context?t.context=r:t.pendingContext=r,(t=Lo(o,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Fo(i,t,a))&&(Jl(e,i,a,o),Uo(e,i,a)),a}function Zu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Gu(e,t){qu(e,t),(e=e.alternate)&&qu(e,t)}bl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)ms=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return ms=!1,function(e,t,r){switch(t.tag){case 3:Is(t),co();break;case 5:Ko(t);break;case 1:Ci(t.type)&&Di(t);break;case 4:Wo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Si(bo,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Si(Xo,1&Xo.current),t.flags|=128,null):0!==(r&t.child.childLanes)?ks(e,t,r):(Si(Xo,1&Xo.current),null!==(e=Zs(e,t,r))?e.sibling:null);Si(Xo,1&Xo.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Bs(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(Xo,Xo.current),n)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,r)}return Zs(e,t,r)}(e,t,r);ms=0!==(131072&e.flags)}else ms=!1,to&&0!==(1048576&t.flags)&&Qi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;js(e,t),e=t.pendingProps;var i=Ni(t,Ai.current);Ro(t,r),i=ha(null,t,n,e,i,r);var a=pa();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ci(n)?(a=!0,Di(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ko(t),i.updater=ts,t.stateNode=i,i._reactInternals=t,os(t,n,e,r),t=As(null,t,n,!0,a,r)):(t.tag=0,to&&a&&Xi(t),ys(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(js(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"===typeof e)return Cu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===x)return 14}return 2}(n),e=Ja(n,e),i){case 0:t=Ss(null,t,n,e,r);break e;case 1:t=Ts(null,t,n,e,r);break e;case 11:t=vs(null,t,n,e,r);break e;case 14:t=_s(null,t,n,Ja(n.type,e),r);break e}throw Error(o(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Ss(e,t,n,i=t.elementType===n?i:Ja(n,i),r);case 1:return n=t.type,i=t.pendingProps,Ts(e,t,n,i=t.elementType===n?i:Ja(n,i),r);case 3:e:{if(Is(t),null===e)throw Error(o(387));n=t.pendingProps,i=(a=t.memoizedState).element,Mo(e,t),jo(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rs(e,t,n,r,i=as(Error(o(423)),t));break e}if(n!==i){t=Rs(e,t,n,r,i=as(Error(o(424)),t));break e}for(eo=ai(t.stateNode.containerInfo.firstChild),Ji=t,to=!0,ro=null,r=_o(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(co(),n===i){t=Zs(e,t,r);break e}ys(e,t,n,r)}t=t.child}return t;case 5:return Ko(t),null===e&&ao(t),n=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Jn(n,i)?s=null:null!==a&&Jn(n,a)&&(t.flags|=32),ws(e,t),ys(e,t,s,r),t.child;case 6:return null===e&&ao(t),null;case 13:return ks(e,t,r);case 4:return Wo(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=vo(t,null,n,r):ys(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,vs(e,t,n,i=t.elementType===n?i:Ja(n,i),r);case 7:return ys(e,t,t.pendingProps,r),t.child;case 8:case 12:return ys(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Si(bo,n._currentValue),n._currentValue=s,null!==a)if(nn(a.value,s)){if(a.children===i.children&&!Ii.current){t=Zs(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===n){if(1===a.tag){(u=Lo(-1,r&-r)).tag=2;var c=a.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}a.lanes|=r,null!==(u=a.alternate)&&(u.lanes|=r),Io(a.return,r,t),l.lanes|=r;break}u=u.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),Io(s,r,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ys(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Ro(t,r),n=n(i=No(i)),t.flags|=1,ys(e,t,n,r),t.child;case 14:return i=Ja(n=t.type,t.pendingProps),_s(e,t,n,i=Ja(n.type,i),r);case 15:return bs(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ja(n,i),js(e,t),t.tag=1,Ci(n)?(e=!0,Di(t)):e=!1,Ro(t,r),ns(t,n,i),os(t,n,i,r),As(null,t,n,!0,e,r);case 19:return Bs(e,t,r);case 22:return Es(e,t,r)}throw Error(o(156,t.tag))};var zu="function"===typeof reportError?reportError:function(e){console.error(e)};function Hu(e){this._internalRoot=e}function Vu(e){this._internalRoot=e}function Wu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ku(){}function Qu(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Zu(a);s.call(e)}}ju(t,a,e,i)}else a=function(e,t,r,n,i){if(i){if("function"===typeof n){var o=n;n=function(){var e=Zu(a);o.call(e)}}var a=Bu(t,n,e,0,null,!1,0,"",Ku);return e._reactRootContainer=a,e[fi]=a.current,Bn(8===e.nodeType?e.parentNode:e),su(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof n){var s=n;n=function(){var e=Zu(l);s.call(e)}}var l=Fu(e,0,!1,null,0,!1,0,"",Ku);return e._reactRootContainer=l,e[fi]=l.current,Bn(8===e.nodeType?e.parentNode:e),su(function(){ju(t,l,r,n)}),l}(r,t,e,i,n);return Zu(a)}Vu.prototype.render=Hu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));ju(e,t,null,null)},Vu.prototype.unmount=Hu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;su(function(){ju(null,e,null,null)}),t[fi]=null}},Vu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Dt.length&&0!==t&&t<Dt[r].priority;r++);Dt.splice(r,0,e),0===r&&Ft(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ft(t.pendingLanes);0!==r&&(vt(t,1|r),eu(t,Xe()),0===(6&Al)&&(Bl=Xe()+500,Bi()))}break;case 13:su(function(){var t=xo(e,1);if(null!==t){var r=Xl();Jl(t,e,1,r)}}),Gu(e,1)}},wt=function(e){if(13===e.tag){var t=xo(e,134217728);if(null!==t)Jl(t,e,134217728,Xl());Gu(e,134217728)}},St=function(e){if(13===e.tag){var t=$l(e),r=xo(e,t);if(null!==r)Jl(r,e,t,Xl());Gu(e,t)}},Tt=function(){return _t},At=function(e,t){var r=_t;try{return _t=e,t()}finally{_t=r}},we=function(e,t,r){switch(t){case"input":if(J(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=vi(n);if(!i)throw Error(o(90));Y(n),J(n,i)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&ne(e,!!r.multiple,t,!1)}},Ne=au,Ce=su;var Xu={usingClientEntryPoint:!1,Events:[mi,yi,vi,Ie,Re,au]},$u={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ju={bundleType:$u.bundleType,version:$u.version,rendererPackageName:$u.rendererPackageName,rendererConfig:$u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:$u.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{it=ec.inject(Ju),ot=ec}catch(a){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Wu(t))throw Error(o(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Wu(e))throw Error(o(299));var r=!1,n="",i=zu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fu(e,1,!1,null,0,r,0,n,i),e[fi]=t.current,Bn(8===e.nodeType?e.parentNode:e),new Hu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return su(e)},t.hydrate=function(e,t,r){if(!Yu(t))throw Error(o(200));return Qu(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Wu(e))throw Error(o(405));var n=null!=r&&r.hydratedSources||null,i=!1,a="",s=zu;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=Bu(t,null,e,1,null!=r?r:null,i,0,a,s),e[fi]=t.current,Bn(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Vu(t)},t.render=function(e,t,r){if(!Yu(t))throw Error(o(200));return Qu(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Yu(e))throw Error(o(40));return!!e._reactRootContainer&&(su(function(){Qu(null,null,e,!1,function(){e._reactRootContainer=null,e[fi]=null})}),!0)},t.unstable_batchedUpdates=au,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Yu(r))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Qu(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,r)=>{"use strict";e.exports=r(234)},950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.m=e,r.amdO={},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var o=Object.create(null);r.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>n[e]);return a.default=()=>n,r.d(o,a),o}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,n)=>(r.f[n](e,t),t),[])),r.u=e=>"static/js/"+e+".d0fcfe3c.chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="synamediairisdemo:";r.l=(n,i,o,a)=>{if(e[n])e[n].push(i);else{var s,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var f=u[c];if(f.getAttribute("src")==n||f.getAttribute("data-webpack")==t+o){s=f;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+o),s.src=n),e[n]=[i];var d=(t,r)=>{s.onerror=s.onload=null,clearTimeout(h);var i=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(r)),t)return t(r)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.f.j=(t,n)=>{var i=r.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise((r,n)=>i=e[t]=[r,n]);n.push(i[2]=o);var a=r.p+r.u(t),s=new Error;r.l(a,n=>{if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}},"chunk-"+t,t)}};var t=(t,n)=>{var i,o,a=n[0],s=n[1],l=n[2],u=0;if(a.some(t=>0!==e[t])){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(l)l(r)}for(t&&t(n);u<a.length;u++)o=a[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunksynamediairisdemo=self.webpackChunksynamediairisdemo||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e={};r.r(e),r.d(e,{hasBrowserEnv:()=>Kt,hasStandardBrowserEnv:()=>Xt,hasStandardBrowserWebWorkerEnv:()=>$t,navigator:()=>Qt,origin:()=>Jt});var t=r(43),n=r.t(t,2),i=r(391);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function l(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f,d=r(950),h=r.t(d,2);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(f||(f={}));const g="popstate";function m(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function y(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function _(e,t,r,n){return void 0===r&&(r=null),p({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?E(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function b(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function E(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function w(e,t,r,n){void 0===n&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,s=f.Pop,l=null,u=c();function c(){return(a.state||{idx:null}).idx}function d(){s=f.Pop;let e=c(),t=null==e?null:e-u;u=e,l&&l({action:s,location:y.location,delta:t})}function h(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,r="string"===typeof e?e:b(e);return r=r.replace(/ $/,"%20"),m(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==u&&(u=0,a.replaceState(p({},a.state,{idx:u}),""));let y={get action(){return s},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(g,d),l=e,()=>{i.removeEventListener(g,d),l=null}},createHref:e=>t(i,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s=f.Push;let n=_(y.location,e,t);r&&r(n,e),u=c()+1;let d=v(n,u),h=y.createHref(n);try{a.pushState(d,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(h)}o&&l&&l({action:s,location:y.location,delta:1})},replace:function(e,t){s=f.Replace;let n=_(y.location,e,t);r&&r(n,e),u=c();let i=v(n,u),d=y.createHref(n);a.replaceState(i,"",d),o&&l&&l({action:s,location:y.location,delta:0})},go:e=>a.go(e)};return y}var S;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(S||(S={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function T(e,t,r){return void 0===r&&(r="/"),A(e,t,r,!1)}function A(e,t,r,n){let i=B(("string"===typeof t?E(t):t).pathname||"/",r);if(null==i)return null;let o=I(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=U(i);a=L(o[s],e,n)}return a}function I(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(m(a.relativePath.startsWith(n),'Absolute route path "'+a.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(n.length));let s=z([n,a.relativePath]),l=r.concat(a);e.children&&e.children.length>0&&(m(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),I(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:M(s,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of R(e.path))i(e,t,n);else i(e,t)}),t}function R(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===n.length)return i?[o,""]:[o];let a=R(n.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),i&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const N=/^:[\w-]+$/,C=3,O=2,P=1,x=10,D=-2,k=e=>"*"===e;function M(e,t){let r=e.split("/"),n=r.length;return r.some(k)&&(n+=D),t&&(n+=O),r.filter(e=>!k(e)).reduce((e,t)=>e+(N.test(t)?C:""===t?P:x),n)}function L(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,i={},o="/",a=[];for(let s=0;s<n.length;++s){let e=n[s],l=s===n.length-1,u="/"===o?t:t.slice(o.length)||"/",c=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),f=e.route;if(!c&&l&&r&&!n[n.length-1].route.index&&(c=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:z([o,c.pathname]),pathnameBase:H(z([o,c.pathnameBase])),route:f}),"/"!==c.pathnameBase&&(o=z([o,c.pathnameBase]))}return a}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);y("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,n]}(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((e,t,r)=>{let{paramName:n,isOptional:i}=t;if("*"===n){let e=s[r]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[r];return e[n]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:a,pattern:e}}function U(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return y(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function B(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function j(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Z(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function q(e,t){let r=Z(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function G(e,t,r,n){let i;void 0===n&&(n=!1),"string"===typeof e?i=E(e):(i=p({},e),m(!i.pathname||!i.pathname.includes("?"),j("?","pathname","search",i)),m(!i.pathname||!i.pathname.includes("#"),j("#","pathname","hash",i)),m(!i.search||!i.search.includes("#"),j("#","search","hash",i)));let o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(null==s)o=r;else{let e=t.length-1;if(!n&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:i=""}="string"===typeof e?E(e):e,o=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:o,search:V(n),hash:W(i)}}(i,o),u=s&&"/"!==s&&s.endsWith("/"),c=(a||"."===s)&&r.endsWith("/");return l.pathname.endsWith("/")||!u&&!c||(l.pathname+="/"),l}const z=e=>e.join("/").replace(/\/\/+/g,"/"),H=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function Y(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const K=["post","put","patch","delete"],Q=(new Set(K),["get",...K]);new Set(Q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X.apply(this,arguments)}const $=t.createContext(null);const J=t.createContext(null);const ee=t.createContext(null);const te=t.createContext(null);const re=t.createContext({outlet:null,matches:[],isDataRoute:!1});const ne=t.createContext(null);function ie(){return null!=t.useContext(te)}function oe(){return ie()||m(!1),t.useContext(te).location}function ae(e){t.useContext(ee).static||t.useLayoutEffect(e)}function se(){let{isDataRoute:e}=t.useContext(re);return e?function(){let{router:e}=ye(ge.UseNavigateStable),r=_e(me.UseNavigateStable),n=t.useRef(!1);return ae(()=>{n.current=!0}),t.useCallback(function(t,i){void 0===i&&(i={}),n.current&&("number"===typeof t?e.navigate(t):e.navigate(t,X({fromRouteId:r},i)))},[e,r])}():function(){ie()||m(!1);let e=t.useContext($),{basename:r,future:n,navigator:i}=t.useContext(ee),{matches:o}=t.useContext(re),{pathname:a}=oe(),s=JSON.stringify(q(o,n.v7_relativeSplatPath)),l=t.useRef(!1);return ae(()=>{l.current=!0}),t.useCallback(function(t,n){if(void 0===n&&(n={}),!l.current)return;if("number"===typeof t)return void i.go(t);let o=G(t,JSON.parse(s),a,"path"===n.relative);null==e&&"/"!==r&&(o.pathname="/"===o.pathname?r:z([r,o.pathname])),(n.replace?i.replace:i.push)(o,n.state,n)},[r,i,s,a,e])}()}function le(e,r){let{relative:n}=void 0===r?{}:r,{future:i}=t.useContext(ee),{matches:o}=t.useContext(re),{pathname:a}=oe(),s=JSON.stringify(q(o,i.v7_relativeSplatPath));return t.useMemo(()=>G(e,JSON.parse(s),a,"path"===n),[e,s,a,n])}function ue(e,r,n,i){ie()||m(!1);let{navigator:o}=t.useContext(ee),{matches:a}=t.useContext(re),s=a[a.length-1],l=s?s.params:{},u=(s&&s.pathname,s?s.pathnameBase:"/");s&&s.route;let c,d=oe();if(r){var h;let e="string"===typeof r?E(r):r;"/"===u||(null==(h=e.pathname)?void 0:h.startsWith(u))||m(!1),c=e}else c=d;let p=c.pathname||"/",g=p;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=T(e,{pathname:g});let v=pe(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:z([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:z([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,i);return r&&v?t.createElement(te.Provider,{value:{location:X({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:f.Pop}},v):v}function ce(){let e=function(){var e;let r=t.useContext(ne),n=ve(me.UseRouteError),i=_e(me.UseRouteError);if(void 0!==r)return r;return null==(e=n.errors)?void 0:e[i]}(),r=Y(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},r),n?t.createElement("pre",{style:o},n):null,null)}const fe=t.createElement(ce,null);class de extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(re.Provider,{value:this.props.routeContext},t.createElement(ne.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function he(e){let{routeContext:r,match:n,children:i}=e,o=t.useContext($);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),t.createElement(re.Provider,{value:r},i)}function pe(e,r,n,i){var o;if(void 0===r&&(r=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===r.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=s.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||m(!1),s=s.slice(0,Math.min(s.length,e+1))}let u=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let t=0;t<s.length;t++){let e=s[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=t),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,s=c>=0?s.slice(0,c+1):[s[0]];break}}}return s.reduceRight((e,i,o)=>{let a,f=!1,d=null,h=null;var p;n&&(a=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||fe,u&&(c<0&&0===o?(p="route-fallback",!1||be[p]||(be[p]=!0),f=!0,h=null):c===o&&(f=!0,h=i.route.hydrateFallbackElement||null)));let g=r.concat(s.slice(0,o+1)),m=()=>{let r;return r=a?d:f?h:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(he,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:r})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(de,{location:n.location,revalidation:n.revalidation,component:d,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var ge=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ge||{}),me=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(me||{});function ye(e){let r=t.useContext($);return r||m(!1),r}function ve(e){let r=t.useContext(J);return r||m(!1),r}function _e(e){let r=function(){let e=t.useContext(re);return e||m(!1),e}(),n=r.matches[r.matches.length-1];return n.route.id||m(!1),n.route.id}const be={};function Ee(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}n.startTransition;function we(e){m(!1)}function Se(e){let{basename:r="/",children:n=null,location:i,navigationType:o=f.Pop,navigator:a,static:s=!1,future:l}=e;ie()&&m(!1);let u=r.replace(/^\/*/,"/"),c=t.useMemo(()=>({basename:u,navigator:a,static:s,future:X({v7_relativeSplatPath:!1},l)}),[u,l,a,s]);"string"===typeof i&&(i=E(i));let{pathname:d="/",search:h="",hash:p="",state:g=null,key:y="default"}=i,v=t.useMemo(()=>{let e=B(d,u);return null==e?null:{location:{pathname:e,search:h,hash:p,state:g,key:y},navigationType:o}},[u,d,h,p,g,y,o]);return null==v?null:t.createElement(ee.Provider,{value:c},t.createElement(te.Provider,{children:n,value:v}))}function Te(e){let{children:t,location:r}=e;return ue(Ae(t),r)}new Promise(()=>{});t.Component;function Ae(e,r){void 0===r&&(r=[]);let n=[];return t.Children.forEach(e,(e,i)=>{if(!t.isValidElement(e))return;let o=[...r,i];if(e.type===t.Fragment)return void n.push.apply(n,Ae(e.props.children,o));e.type!==we&&m(!1),e.props.index&&e.props.children&&m(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ae(e.props.children,o)),n.push(a)}),n}function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ie.apply(this,arguments)}function Re(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ne=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(kf){}new Map;const Ce=n.startTransition;h.flushSync,n.useId;function Oe(e){let{basename:r,children:n,future:i,window:o}=e,a=t.useRef();var s;null==a.current&&(a.current=(void 0===(s={window:o,v5Compat:!0})&&(s={}),w(function(e,t){let{pathname:r,search:n,hash:i}=e.location;return _("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:b(t)},null,s)));let l=a.current,[u,c]=t.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},d=t.useCallback(e=>{f&&Ce?Ce(()=>c(e)):c(e)},[c,f]);return t.useLayoutEffect(()=>l.listen(d),[l,d]),t.useEffect(()=>Ee(i),[i]),t.createElement(Se,{basename:r,children:n,location:u.location,navigationType:u.action,navigator:l,future:i})}const Pe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,xe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=t.forwardRef(function(e,r){let n,{onClick:i,relative:o,reloadDocument:a,replace:s,state:l,target:u,to:c,preventScrollReset:f,viewTransition:d}=e,h=Re(e,Ne),{basename:p}=t.useContext(ee),g=!1;if("string"===typeof c&&xe.test(c)&&(n=c,Pe))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),r=B(t.pathname,p);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:g=!0}catch(kf){}let y=function(e,r){let{relative:n}=void 0===r?{}:r;ie()||m(!1);let{basename:i,navigator:o}=t.useContext(ee),{hash:a,pathname:s,search:l}=le(e,{relative:n}),u=s;return"/"!==i&&(u="/"===s?i:z([i,s])),o.createHref({pathname:u,search:l,hash:a})}(c,{relative:o}),v=function(e,r){let{target:n,replace:i,state:o,preventScrollReset:a,relative:s,viewTransition:l}=void 0===r?{}:r,u=se(),c=oe(),f=le(e,{relative:s});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let r=void 0!==i?i:b(c)===b(f);u(e,{replace:r,state:o,preventScrollReset:a,relative:s,viewTransition:l})}},[c,u,f,i,o,n,e,a,s,l])}(c,{replace:s,state:l,target:u,preventScrollReset:f,relative:o,viewTransition:d});return t.createElement("a",Ie({},h,{href:n||y,onClick:g||a?i:function(e){i&&i(e),e.defaultPrevented||v(e)},ref:r,target:u}))});var ke,Me;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ke||(ke={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Me||(Me={}));var Le=r(579);const Fe=function(){return(0,Le.jsx)("header",{className:"bg-black text-white py-6 h-17 text-center shadow",children:(0,Le.jsx)("img",{src:"/TopHeader.png",alt:"Top Header",className:"mx-auto max-h-12 w-auto"})})};const Ue=function(){return(0,Le.jsx)("main",{className:"\r relative w-full m-0\r min-h-[calc(100svh-96px)]  /* set to your navbar height */\r bg-no-repeat bg-cover bg-center\r p-0 overflow-hidden\r ",style:{backgroundImage:"url('/SplashScreenBG.png')"},children:(0,Le.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-6 pointer-events-none select-none",children:[(0,Le.jsx)("img",{src:"/SynamediaIrisWhite.png",alt:"Syna",className:"w-40 md:w-56 lg:w-72 h-auto drop-shadow"}),(0,Le.jsx)("img",{src:"/Welcomeapp.png",alt:"Welcome",className:"w-48 md:w-72 lg:w-96 h-auto drop-shadow"})]})})},Be=JSON.parse('{"k":[{"demo_scene":"1","active":true,"type":"VOD","postroll_offset":675,"volume":"20%","menu_title":"Std Pre/Post","great_title":"Spot Pre-roll","left_title":"1x30s Pre-Roll","left_segment":"Home Cooking/Foods","left_flag":"","right_title":"1x30s Pre-Roll","right_segment":"Luxury Travel/Outside","right_flag":"","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/vod-clear/ElephantsDream/default.mpd?PID=dai.com&PAID=GLDB1200015072990000&deviceIdType=%5BdevIdType%5D&appId=%5BappId%5D&appName=%5BappName%5D&devModel=%5BdevModel%5D&playerWidth=%5BplayerWidth%5D&playerHeight=%5BplayerHeight%5D&optin=true&externalPackageId=GLDB1000015072990000&parentalRating=PG-13&playedPosition=00%3A00%3A00&hhid=efc1a6c51e2e2ec8e6bf592cf142d313&kvp=lang%7Eeng&kvp=genre%7EScience+fiction%2CAnimated&kvp=contentId%7EGLDB1200015072990001&kvp=provider%7Edai.com&kvp=parentalRating%7EPG-13&daiEnabled=true","right_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/vod-clear/ElephantsDream/default.mpd?PID=dai.com&PAID=GLDB1200015072990000&deviceIdType=%5BdevIdType%5D&appId=%5BappId%5D&appName=%5BappName%5D&devModel=%5BdevModel%5D&playerWidth=%5BplayerWidth%5D&playerHeight=%5BplayerHeight%5D&optin=true&externalPackageId=GLDB1000015072990000&parentalRating=PG-13&playedPosition=00%3A00%3A00&hhid=36dd0152fe26c99c8555a55db1bc358f&kvp=lang%7Eeng&kvp=genre%7EScience+fiction%2CAnimated&kvp=contentId%7EGLDB1200015072990001&kvp=provider%7Edai.com&kvp=parentalRating%7EPG-13&daiEnabled=true"},{"demo_scene":"2","active":true,"type":"VOD","postroll_offset":650,"volume":"20%","menu_title":"Pre w/pod / Mid / Post","great_title":"Pod Pre-roll + Spot Mid-roll","left_title":"3x10s Pre-Roll, 1x30s Mid-roll","left_segment":"Home Cooking/Foods","left_flag":"","right_title":"1x30s Pre-Roll, 1x30s Mid-roll","right_segment":"Luxury Travel/Outside","right_flag":"","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/d3tj4kpfw13jex.cloudfront.net/assets/BigBuckBunny/dash_mid/default_ott.mpd?PID=dai.com&PAID=GLDB1200035072990000&deviceIdType=%5BdevIdType%5D&appId=%5BappId%5D&appName=%5BappName%5D&devModel=%5BdevModel%5D&playerWidth=%5BplayerWidth%5D&playerHeight=%5BplayerHeight%5D&optin=true&externalPackageId=GLDB1000035072990000&parentalRating=PG-13&playedPosition=00%3A00%3A00&hhid=efc1a6c51e2e2ec8e6bf592cf142d313&kvp=lang%7Eeng&kvp=genre%7EComedy%2CAnimated&kvp=contentId%7EGLDB1200035072990000&kvp=provider%7Edai.com&kvp=parentalRating%7EPG-13&daiEnabled=true","right_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/d3tj4kpfw13jex.cloudfront.net/assets/BigBuckBunny/dash_mid/default_ott.mpd?PID=dai.com&PAID=GLDB1200035072990000&deviceIdType=%5BdevIdType%5D&appId=%5BappId%5D&appName=%5BappName%5D&devModel=%5BdevModel%5D&playerWidth=%5BplayerWidth%5D&playerHeight=%5BplayerHeight%5D&optin=true&externalPackageId=GLDB1000035072990000&parentalRating=PG-13&playedPosition=00%3A00%3A00&hhid=36dd0152fe26c99c8555a55db1bc358f&kvp=lang%7Eeng&kvp=genre%7EComedy%2CAnimated&kvp=contentId%7EGLDB120003507299009&kvp=provider%7Edai.com&kvp=parentalRating%7EPG-13&daiEnabled=true"},{"demo_scene":"3","active":true,"type":"LINEAR","volume":"20%","menu_title":"Break w/flex pod","great_title":"Spot Mid-roll, SCTE35 on demand","left_title":"Flex pod 30s spots  Mid-roll","left_segment":"Home Cooking/Foods","left_flag":"","right_title":"Flex pod 30s spots Mid-roll","right_segment":"Luxury Travel/Outside","right_flag":"","left_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/swim/Syna_Swimming.mpd?hhid=sub_100067&PAID=dai.com&daiEnabled=true","right_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/swim/Syna_Swimming.mpd?hhid=6209804952225ab3d14348307b5a4a27&PAID=dai.com&daiEnabled=true"},{"demo_scene":"4","active":true,"type":"LINEAR","volume":"20%","menu_title":"Break w/fixed pod","great_title":"Mixed Pod and Spot Mid-roll, SCTE35 on demand","left_title":"3x10s Mid-roll","left_segment":"Home Cooking/Foods","left_flag":"","right_title":"1x30s Mid-roll","right_segment":"Luxury Travel/Outside","right_flag":"","left_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/swim/Syna_Swimming.mpd?PAID=dai.com&kvp=POD~yes&daiEnabled=true","right_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/swim/Syna_Swimming.mpd?hhid=6209804952225ab3d14348307b5a4a27&PAID=dai.com&daiEnabled=true"},{"demo_scene":"5","active":true,"type":"VOD","postroll_offset":136,"volume":"20%","menu_title":"Short Ads","great_title":"Short Pre/Post-roll","left_title":"1x5s Pre/Post-roll","left_segment":"Profile A","left_flag":"","right_title":"1x5s Pre/Post-roll","right_segment":"Profile B","right_flag":"","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/beetlejuice/BeetlejuiceTrailler.mpd?PID=dai.com&optin=true&kvp=shortPreRoll~yes&kvp=resolution~HD&daiEnabled=true","right_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/beetlejuice/BeetlejuiceTrailler.mpd?PID=dai.com&optin=true&kvp=shortPreRoll~yes&kvp=resolution~SD&daiEnabled=true"},{"demo_scene":"6","active":true,"type":"LINEAR","volume":"20%","menu_title":"Region: SLO/CRO","great_title":"Spot Mid-roll, SCTE35 on demand","left_title":"Mid-roll Spots","left_segment":"Region: Slovenia","left_flag":"https://upload.wikimedia.org/wikipedia/commons/f/f0/Flag_of_Slovenia.svg","right_title":"Mid-roll Spots","right_segment":"Region: Crotia","right_flag":"https://upload.wikimedia.org/wikipedia/commons/d/d5/Civil_ensign_of_Croatia.svg","left_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/de/DE.mpd?PAID=dai.com&daiEnabled=true&channelId=201&kvp=language~slo&kvp=resolution~HD","right_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/de/DE.mpd?PAID=dai.com&daiEnabled=true&channelId=201&kvp=language~cro&kvp=resolution~HD"},{"demo_scene":"7","active":true,"type":"VOD","postroll_offset":164,"volume":"20%","menu_title":"Region: Balkans","great_title":"Spot Pre-roll","left_title":"1x Pre-roll","left_segment":"Region: Slovenia","left_flag":"https://upload.wikimedia.org/wikipedia/commons/f/f0/Flag_of_Slovenia.svg","right_title":"1x Pre-roll","right_segment":"Region: Crotia","right_flag":"https://upload.wikimedia.org/wikipedia/commons/d/d5/Civil_ensign_of_Croatia.svg","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/beetlejuice/BeetlejuiceTrailler.mpd?PID=dai.com&PAID=GLDB1200015072990100&optin=true&externalPackageId=GLDB1000015072990100&daiEnabled=true&kvp=language~slo&kvp=resolution~HD","right_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/beetlejuice/BeetlejuiceTrailler.mpd?PID=dai.com&PAID=GLDB1200035072990210&optin=true&externalPackageId=GLDB1000035072990000&daiEnabled=true&kvp=country~CRO&kvp=profile~p2"},{"demo_scene":"8","active":false,"type":"VOD","postroll_offset":180,"volume":"20%","menu_title":"Profile 1|2: ITA","great_title":"Spot Pre/Post-roll","left_title":"1x Pre/post-roll","left_segment":"Profile: P1","left_flag":"https://upload.wikimedia.org/wikipedia/en/0/03/Flag_of_Italy.svg","right_title":"1x Pre/post-roll","right_segment":"Profile: P2","right_flag":"https://upload.wikimedia.org/wikipedia/en/0/03/Flag_of_Italy.svg","left_playback_url":"https://vod-dai-ott-eu3.ssai.infinite-insights-net.com/tenant/degbmyr8/vod.infiniteplatform.tv/iris/content/thecrow/TheCrowTrailler.mpd?optin=true&hhid=1&kvp=profile~p1&daiEnabled=true","right_playback_url":"https://vod-dai-ott-eu3.ssai.infinite-insights-net.com/tenant/degbmyr8/vod.infiniteplatform.tv/iris/content/thecrow/TheCrowTrailler.mpd?optin=true&hhid=1&kvp=profile~p2&daiEnabled=true"},{"demo_scene":"9","active":true,"type":"LINEAR","volume":"20%","menu_title":"Profile 1|2: KOR (vDCM)","great_title":"Spot Mid-roll, SCTE35 on demand","left_title":"Mid-roll Spots","left_segment":"Profile: P1","left_flag":"https://upload.wikimedia.org/wikipedia/commons/0/09/Flag_of_South_Korea.svg","right_title":"Mid-roll Spots","right_segment":"Profile: P2","right_flag":"https://upload.wikimedia.org/wikipedia/commons/0/09/Flag_of_South_Korea.svg","left_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/swim/Syna_Swimming.mpd?channelId=201&PAID=dai.com&daiEnabled=true&kvp=language~kor&kvp=profile~p1","right_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/swim/Syna_Swimming.mpd?channelId=204&PAID=dai.com&daiEnabled=true&kvp=language~kor&kvp=profile~p2"},{"demo_scene":"10","active":false,"type":"LINEAR","volume":"20%","menu_title":"Profile 1|2: KOR (Quortex CH2)","great_title":"Spot Mid-roll, SCTE35 on demand","left_title":"Mid-roll Spots","left_segment":"Profile: P1","left_flag":"https://upload.wikimedia.org/wikipedia/commons/0/09/Flag_of_South_Korea.svg","right_title":"Mid-roll Spots","right_segment":"Profile: P2","right_flag":"https://upload.wikimedia.org/wikipedia/commons/0/09/Flag_of_South_Korea.svg","left_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/f325nk61.live.quortex.io/fast_ch2/1080p50/dash_no_multi/index.mpd?channelId=201&PAID=dai.com&daiEnabled=true&kvp=language~kor&kvp=profile~p1","right_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/f325nk61.live.quortex.io/fast_ch2/1080p50/dash_no_multi/index.mpd?channelId=204&PAID=dai.com&daiEnabled=true&kvp=language~kor&kvp=profile~p2"},{"demo_scene":"11","active":true,"type":"VOD","postroll_offset":140,"volume":"20%","menu_title":"Profile 1|2: HEB","great_title":"Spot Pre/Post-roll","left_title":"1x Pre/post-roll","left_segment":"Profile: P1","left_flag":"https://upload.wikimedia.org/wikipedia/commons/d/d4/Flag_of_Israel.svg","right_title":"1x Pre/post-roll","right_segment":"Profile: P2","right_flag":"https://upload.wikimedia.org/wikipedia/commons/d/d4/Flag_of_Israel.svg","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/asia/asia_trailer_ISR.mpd?PID=dai.com&optin=true&kvp=profile~p1&kvp=language~heb&kvp=adForm~video&daiEnabled=true","right_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/asia/asia_trailer_ISR.mpd?PID=dai.com&optin=true&kvp=profile~p2&kvp=language~heb&kvp=adForm~video&daiEnabled=true"},{"demo_scene":"12","active":true,"type":"SPECIALS","volume":"20%","menu_title":"VOD AdPause: Bundle","great_title":"AdPause - Brand Bundled - [HEB]","left_title":"1x Pre/post-roll","left_segment":"Profile: P3","left_flag":"https://upload.wikimedia.org/wikipedia/commons/d/d4/Flag_of_Israel.svg","right_title":"","right_segment":"","right_flag":"","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/asia/asia_trailer_ISR.mpd?PID=dai.com&optin=true&kvp=profile~p3&kvp=language~heb&kvp=adForm~video&daiEnabled=true","right_playback_url":"","left_display_ad_querystring":"&position=pre&kvp=language~heb&kvp=profile~p3&kvp=adForm~display","left_display_ad_querystring_1":"&position=pre&kvp=language~heb&kvp=adForm~adPause","left_display_ad_querystring_2":"&position=pre&kvp=language~heb&kvp=adForm~adPausePreRoll","left_MSO_Name":"Iris","inSequence":"1","inAdOverlay":false},{"demo_scene":"13","active":false,"type":"SPECIALS","volume":"20%","menu_title":"VOD Ad Video + Overlay [HEB]","great_title":"Ad Video + Overlay","left_title":"1x Pre/post-roll","left_segment":"Profile: P3","left_flag":"","right_title":"","right_segment":"","right_flag":"","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/sublet/sublet_trailer_ISR.mpd?PID=dai.com&optin=true&kvp=profile~p3&kvp=language~heb&kvp=adForm~video&daiEnabled=true","right_playback_url":"","inAdOverlay":true},{"demo_scene":"14","active":true,"type":"LINEAR","volume":"20%","menu_title":"Profile 1|2: HEB (Keshet)","great_title":"Spot Mid-roll, SCTE35 on demand","left_title":"Mid-roll Spots","left_segment":"Profile: P1","left_flag":"https://upload.wikimedia.org/wikipedia/commons/d/d4/Flag_of_Israel.svg","right_title":"Mid-roll Spots","right_segment":"Profile: P2","right_flag":"https://upload.wikimedia.org/wikipedia/commons/d/d4/Flag_of_Israel.svg","left_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/keshet/Syna_Keshet.mpd?channelId=201&PAID=dai.com&daiEnabled=true&kvp=language~heb&kvp=profile~p1","right_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/keshet/Syna_Keshet.mpd?channelId=204&PAID=dai.com&daiEnabled=true&kvp=language~heb&kvp=profile~p2"},{"demo_scene":"15","active":false,"type":"SPECIALS","volume":"20%","menu_title":"VOD Ad Video + Video Ad on Pause [HEB]","great_title":"Ad Video + Video Ad on Pause [HEB]","left_title":"1x Pre/post-roll","left_segment":"Profile: P3","left_flag":"https://upload.wikimedia.org/wikipedia/commons/d/d4/Flag_of_Israel.svg","right_title":"","right_segment":"","right_flag":"","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/sublet/sublet_trailer_ISR.mpd?PID=dai.com&optin=true&kvp=profile~p3&kvp=language~heb&kvp=adForm~video&daiEnabled=true","left_display_ad_querystring":"&position=pre&kvp=language~heb&kvp=adForm~adPause","left_display_ad_querystring_1":"&position=pre&kvp=language~heb&kvp=adForm~adPausePreRoll","right_playback_url":"","inSequence":"1","inAdOverlay":false},{"demo_scene":"16","active":true,"type":"LINEARCC","volume":"20%","menu_title":"Linear Ch. Change + POI","great_title":"Linear Channel Change and Point of Interest","left_title":"Linear Non-SCTE Inventory","left_segment":"Profile: P1","left_flag":"","right_title":"Linear Non-SCTE Inventory","right_segment":"Profile: P2","right_flag":"","max_channels":"2","left_playback_url_1":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/skiing/Syna_Skiing.mpd?channelId=204&PAID=ads1&daiEnabled=true&kvp=language~heb&kvp=profile~p1","left_playback_url_2":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/redbull/Syna_RedBull.mpd?channelId=204&PAID=ads1&daiEnabled=true&kvp=language~heb&kvp=profile~p1","left_display_ads_url":"https://ott-decision-apb.ads.iris.synamedia.com/adServer/op7z4geq/vast/vod?position=pre&kvp=adForm~display&kvp=profile~p1","left_video_ads_url":"","right_playback_url_1":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/skiing/Syna_Skiing.mpd?channelId=204&PAID=ads1&daiEnabled=true&kvp=language~heb&kvp=profile~p1","right_playback_url_2":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/redbull/Syna_RedBull.mpd?channelId=204&PAID=ads1&daiEnabled=true&kvp=language~heb&kvp=profile~p1","right_display_ads_url":"https://ott-decision-apb.ads.iris.synamedia.com/adServer/op7z4geq/vast/vod?position=pre&kvp=adForm~display&kvp=profile~p2","right_video_ads_url":""},{"demo_scene":"17","active":true,"type":"VOD","postroll_offset":185,"volume":"20%","menu_title":"Profile 1|2: UAE","great_title":"Spot Pre/Post-roll","left_title":"1x Pre/post-roll","left_segment":"Profile: P1 [Abu Dhabi]","left_flag":"https://upload.wikimedia.org/wikipedia/commons/d/d8/Flag_of_Abu_Dhabi.svg","right_title":"1x Pre/post-roll","right_segment":"Profile: P2 [Dubai]","right_flag":"https://upload.wikimedia.org/wikipedia/commons/0/07/Flag_of_Dubai.svg","max_channels":"0","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/three_uea/UEA_Three_Trailer.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~UEA&kvp=language~arb&kvp=profile~p1","left_playback_url_1":"","left_playback_url_2":"","left_ads_url":"","right_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/three_uea/UEA_Three_Trailer.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~UEA&kvp=language~arb&kvp=profile~p2","right_playback_url_1":"","right_playback_url_2":"","right_ads_url":""},{"demo_scene":"18","active":true,"type":"LINEAR","volume":"20%","postroll_offset":0,"menu_title":"Profile 1|2: UAE (Fujairah TV)","great_title":"Spot Mid-roll, SCTE35 on demand","left_title":"Mid-roll Spots","left_segment":"Profile: P1 [Abu Dhabi]","left_flag":"https://upload.wikimedia.org/wikipedia/commons/d/d8/Flag_of_Abu_Dhabi.svg","right_title":"Mid-roll Spots","right_segment":"Profile: P2 [Dubai]","right_flag":"https://upload.wikimedia.org/wikipedia/commons/0/07/Flag_of_Dubai.svg","max_channels":"0","left_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/uea/Syna_Fujairahtv.mpd?PAID=ads1&channelId=201&daiEnabled=true&kvp=country~UEA&kvp=language~arb&kvp=profile~p1","left_playback_url_1":"","left_playback_url_2":"","left_ads_url":"","right_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/easdemo.godev.coldsnow.net/iris/blackout/uea/Syna_Fujairahtv.mpd?PAID=ads1&channelId=204&daiEnabled=true&kvp=country~UEA&kvp=language~arb&kvp=profile~p2","right_playback_url_1":"","right_playback_url_2":"","right_ads_url":""},{"demo_scene":"19","active":false,"type":"LINEAR","postroll_offset":0,"volume":"20%","menu_title":"Profile 1|2: ITA","great_title":"Spot Mid-roll, SCTE35 on demand","left_title":"Mid-roll Spots","left_segment":"Profile: P1 [ITA]","left_flag":"https://upload.wikimedia.org/wikipedia/en/0/03/Flag_of_Italy.svg","right_title":"Mid-roll Spots","right_segment":"Profile: P2 [ITA]","right_flag":"https://upload.wikimedia.org/wikipedia/en/0/03/Flag_of_Italy.svg","max_channels":"0","left_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/livemds.cb.ticdn.it/Content/DASH_DASH/live/channel(fast_test)/manifestADV.mpd?hhid=sub_100067&PAID=dai.com&daiEnabled=true","left_playback_url_1":"","left_playback_url_2":"","left_ads_url":"","right_playback_url":"https://livemds.cb.ticdn.it/Content/DASH_DASH/live/channel(fast_test)/manifestADV.mpd","right_playback_url_1":"","right_playback_url_2":"","right_ads_url":""},{"demo_scene":"20","active":true,"type":"VOD","postroll_offset":3977,"volume":"20%","menu_title":"Profile 1|2: BRA","great_title":"Spot Pre/Post-roll","left_title":"1x Pre/Post-roll","left_segment":"Profile: P1 [SPO]","left_flag":"https://upload.wikimedia.org/wikipedia/commons/4/4b/Bandeira_da_cidade_de_S%C3%A3o_Paulo.svg","right_title":"Mid-roll Spots","right_segment":"Profile: P2 [RJO]","right_flag":"https://upload.wikimedia.org/wikipedia/commons/a/a9/Bandeira_da_cidade_do_Rio_de_Janeiro.svg","max_channels":"0","special_header":{},"left_playback_url":"http://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/voslab.live.nowonline.com.br/Content/dsc7/VOD/15849/1498/7fc35a83-38bb-4564-9509-ea386b90923d/c039d313-474b-1e6c-6396-558c9f7b0017/manifest.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~BRA&kvp=adForm~video&kvp=profile~p1","left_playback_url_1":"","left_playback_url_2":"","left_ads_url":"","right_playback_url":"http://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/voslab.live.nowonline.com.br/Content/dsc7/VOD/15849/1498/7fc35a83-38bb-4564-9509-ea386b90923d/c039d313-474b-1e6c-6396-558c9f7b0017/manifest.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~BRA&kvp=adForm~video&kvp=profile~p2","right_playback_url_1":"","right_playback_url_2":"","right_ads_url":""},{"demo_scene":"21","active":false,"type":"LINEAR","postroll_offset":0,"volume":"20%","menu_title":"Profile 1|2: ZAF","great_title":"TBN Africa TV Spot Mid-roll, SCTE35 on demand","left_title":"Mid-roll Spots","left_segment":"Profile: P1 [ZAF]","left_flag":"https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg","right_title":"Mid-roll Spots","right_segment":"Profile: P2 [ZAF]","right_flag":"https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg","max_channels":"0","left_playback_url":"https://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/mqitwktu.live.quortex.io/blue_pictures/1080_1_aud_0_sub/clear_dash_scte-test/index.mpd?channelId=204&hhid=sub_100067&PAID=ads1&daiEnabled=true","left_playback_url_1":"","left_playback_url_2":"","left_ads_url":"","right_playback_url":"https://mqitwktu.live.quortex.io/blue_pictures/1080_1_aud_0_sub/clear_dash_scte-test/index.mpd","right_playback_url_1":"","right_playback_url_2":"","right_ads_url":""},{"demo_scene":"22","active":true,"type":"LINEAR","postroll_offset":0,"volume":"20%","menu_title":"Profile 1|2: BRA","great_title":"Spot Mid-roll, SCTE35 on demand","left_title":"Mid-roll Spots","left_segment":"Profile: P1 [SPO]","left_flag":"https://upload.wikimedia.org/wikipedia/commons/4/4b/Bandeira_da_cidade_de_S%C3%A3o_Paulo.svg","right_title":"Mid-roll Spots","right_segment":"Profile: P2 [RJO]","right_flag":"https://upload.wikimedia.org/wikipedia/commons/a/a9/Bandeira_da_cidade_do_Rio_de_Janeiro.svg","max_channels":"0","special_header":{},"left_playback_url":"http://linear-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/d270ul7trkm76m.cloudfront.net/Content/Channel/DAI02/dss4/manifest.mpd?channelId=204&hhid=sub_100067&PAID=ads1&daiEnabled=true&kvp=country~BRA&kvp=adForm~video&kvp=profile~p1,p2","left_playback_url_1":"","left_playback_url_2":"","left_ads_url":"","right_playback_url":"https://d270ul7trkm76m.cloudfront.net/Content/Channel/DAI02/dss4/manifest.mpd","right_playback_url_1":"","right_playback_url_2":"","right_ads_url":""},{"demo_scene":"23","active":false,"type":"SPECIALS","postroll_offset":0,"volume":"20%","menu_title":"VOD AdPause [UAE]","great_title":"AdPause - Brand Bundled - [UAE]","left_title":"1x Pre/post-roll","left_segment":"Profile: P3","left_flag":"https://upload.wikimedia.org/wikipedia/commons/c/cb/Flag_of_the_United_Arab_Emirates.svg","right_title":"","right_segment":"","right_flag":"","max_channels":"0","special_header":{},"left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/three_uea/UEA_Three_Trailer.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~UEA&kvp=profile~p3&kvp=adForm~video","left_playback_url_1":"","left_playback_url_2":"","left_ads_url":"","left_display_ad_querystring":"&position=pre&kvp=country~UEA&kvp=profile~p3&kvp=adForm~display","left_MSO_Name":"Iris","right_playback_url":"","right_playback_url_1":"","right_playback_url_2":"","right_ads_url":"","inSequence":"1","inAdOverlay":false},{"demo_scene":"24","active":true,"type":"SPECIALS","postroll_offset":0,"volume":"20%","menu_title":"VOD Ad Video + Overlay Bundle","great_title":"Ad Video + Overlay - Bundled - UAE","left_title":"1x Pre/post-roll","left_segment":"Profile: P3","left_flag":"https://upload.wikimedia.org/wikipedia/commons/c/cb/Flag_of_the_United_Arab_Emirates.svg","right_title":"","right_segment":"","right_flag":"","max_channels":"0","special_header":{},"left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/three_uea/UEA_Three_Trailer.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~UEA&kvp=profile~p3&kvp=adForm~video","left_playback_url_1":"","left_playback_url_2":"","left_ads_url":"","left_display_ad_querystring":"&position=pre&kvp=country~UEA&kvp=profile~p3&kvp=adForm~display","left_MSO_Name":"Syna","right_playback_url":"","right_playback_url_1":"","right_playback_url_2":"","right_ads_url":"","inAdOverlay":true},{"demo_scene":"25","active":false,"type":"SPECIALS","volume":"20%","menu_title":"VOD Ad Video + Video Ad on Pause [UAE]","great_title":"Ad Video + Video Ad on Pause [UAE]","left_title":"1x Pre/post-roll","left_segment":"Profile: P3","left_flag":"https://upload.wikimedia.org/wikipedia/commons/c/cb/Flag_of_the_United_Arab_Emirates.svg","right_title":"","right_segment":"","right_flag":"","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/three_uea/UEA_Three_Trailer.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~UEA&kvp=profile~p3&kvp=adForm~video","left_display_ad_querystring":"&position=pre&kvp=country~UEA&kvp=adForm~adPause","left_display_ad_querystring_1":"&position=pre&kvp=country~UEA&kvp=adForm~adPausePreRoll","right_playback_url":"","inAdOverlay":false},{"demo_scene":"26","active":true,"type":"VOD","postroll_offset":184,"volume":"20%","menu_title":"Profile 1|2: IND","great_title":"Spot Pre/Post-roll","left_title":"1x Pre/Post-roll","left_segment":"Profile: P1","left_flag":"https://upload.wikimedia.org/wikipedia/en/4/41/Flag_of_India.svg","right_title":"1x Pre/Post-roll","right_segment":"Profile: P1","right_flag":"https://upload.wikimedia.org/wikipedia/en/4/41/Flag_of_India.svg","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/latenight/LateNightWiththeDevilTrailler.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~IND&kvp=profile~p1","left_display_ad_querystring":"","left_display_ad_querystring_1":"","right_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/latenight/LateNightWiththeDevilTrailler.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~IND&kvp=profile~p2"},{"demo_scene":"27","active":true,"type":"VOD","postroll_offset":184,"volume":"20%","menu_title":"Profile 1|2: Nordics","great_title":"Spot Pre/Post-roll","left_title":"1x Pre/Post-roll","left_segment":"Profile: P1 - NOR","left_flag":"https://upload.wikimedia.org/wikipedia/commons/d/d9/Flag_of_Norway.svg","right_title":"1x Pre/Post-roll","right_segment":"Profile: P2 - SWE","right_flag":"https://upload.wikimedia.org/wikipedia/en/4/4c/Flag_of_Sweden.svg","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/latenight/LateNightWiththeDevilTrailler.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~NOR&kvp=profile~p1","left_display_ad_querystring":"","left_display_ad_querystring_1":"","right_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/latenight/LateNightWiththeDevilTrailler.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~SWE&kvp=profile~p1"},{"demo_scene":"28","active":true,"type":"VOD","postroll_offset":184,"volume":"20%","menu_title":"Profile 1|2: Greece","great_title":"Spot Pre/Post-roll","left_title":"1x Pre/Post-roll","left_segment":"Profile: P1 - GRE","left_flag":"https://upload.wikimedia.org/wikipedia/commons/5/5c/Flag_of_Greece.svg","right_title":"1x Pre/Post-roll","right_segment":"Profile: P2 - GRE","right_flag":"https://upload.wikimedia.org/wikipedia/commons/5/5c/Flag_of_Greece.svg","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/latenight/LateNightWiththeDevilTrailler.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~GRE&kvp=profile~p1","left_display_ad_querystring":"","left_display_ad_querystring_1":"","right_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/latenight/LateNightWiththeDevilTrailler.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~GRE&kvp=profile~p2"},{"demo_scene":"29","active":true,"type":"VOD","postroll_offset":165,"volume":"20%","menu_title":"Profile 1|2: Turkey","great_title":"Spot Pre/Post-roll","left_title":"1x Pre/Post-roll","left_segment":"Profile: P1 - TUR","left_flag":"","right_title":"1x Pre/Post-roll","right_segment":"Profile: P2 - TUR","right_flag":"","left_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/janetplanet/JanetPlanetTrailler.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~TUR&kvp=profile~p1","left_display_ad_querystring":"","left_display_ad_querystring_1":"","right_playback_url":"https://vod-dai-ott-ap.ssai.iris.synamedia.com/tenant/op7z4geq/vod.infiniteplatform.tv/iris/content/janetplanet/JanetPlanetTrailler.mpd?PID=dai.com&optin=true&daiEnabled=true&kvp=country~TUR&kvp=profile~p2"}]}'),je=e=>!1!==e.active,Ze=e=>{const t=e.demo_scene;switch(e.type){case"SPECIALS":return"/specials".concat(t);case"LINEARCC":return"/linearcc".concat(t);default:return"/playback".concat(t)}};const qe=function(){const[e,r]=(0,t.useState)(null),n=e=>r(e),i=()=>r(null),o=[...Be.k],a=o.filter(e=>"VOD"===e.type&&je(e)).map(e=>({label:e.menu_title,path:Ze(e),key:e.demo_scene})),s=o.filter(e=>"LINEAR"===e.type&&je(e)).map(e=>({label:e.menu_title,path:Ze(e),key:e.demo_scene})),l=o.filter(e=>("SPECIALS"===e.type||"LINEARCC"===e.type)&&je(e)).map(e=>{var t;return{label:(null!==(t=e.menu_title)&&void 0!==t?t:"").trim()||"Item ".concat(e.demo_scene),path:Ze(e),key:"".concat(e.type,"-").concat(e.demo_scene)}}).sort((e,t)=>e.label.localeCompare(t.label,void 0,{sensitivity:"base",numeric:!0})),u="px-4 py-2 block transition hover:text-yellow-300",c="bg-gray-700 rounded shadow-lg min-w-[220px] whitespace-nowrap overflow-hidden";return(0,Le.jsx)("nav",{className:"bg-gray-800 text-white px-6 h-10 shadow-md font-poppins flex items-center",children:(0,Le.jsxs)("ul",{className:"mx-auto flex items-center justify-center gap-8",children:[(0,Le.jsx)("li",{children:(0,Le.jsx)(De,{to:"/",className:u,onClick:i,children:"Home"})}),a.length>0&&(0,Le.jsxs)("li",{className:"relative",onMouseEnter:()=>n("vod"),onMouseLeave:i,children:[(0,Le.jsx)("button",{type:"button",className:u,"aria-haspopup":"true","aria-expanded":"vod"===e,onClick:()=>"vod"===e?i():n("vod"),children:"SSAI-VOD"}),"vod"===e&&(0,Le.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full z-50",children:(0,Le.jsx)("ul",{className:c,children:a.map(e=>(0,Le.jsx)("li",{children:(0,Le.jsx)(De,{to:e.path,className:"block px-5 py-2 hover:bg-gray-600",onClick:i,children:e.label})},e.key))})})]}),s.length>0&&(0,Le.jsxs)("li",{className:"relative",onMouseEnter:()=>n("linear"),onMouseLeave:i,children:[(0,Le.jsx)("button",{type:"button",className:u,"aria-haspopup":"true","aria-expanded":"linear"===e,onClick:()=>"linear"===e?i():n("linear"),children:"SSAI-Linear"}),"linear"===e&&(0,Le.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full z-50",children:(0,Le.jsx)("ul",{className:c,children:s.map(e=>(0,Le.jsx)("li",{children:(0,Le.jsx)(De,{to:e.path,className:"block px-5 py-2 hover:bg-gray-600",onClick:i,children:e.label})},e.key))})})]}),l.length>0&&(0,Le.jsxs)("li",{className:"relative",onMouseEnter:()=>n("specials"),onMouseLeave:i,children:[(0,Le.jsx)("button",{type:"button",className:u,"aria-haspopup":"true","aria-expanded":"specials"===e,onClick:()=>"specials"===e?i():n("specials"),children:"CSAI-New Inventories"}),"specials"===e&&(0,Le.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full z-50",children:(0,Le.jsx)("ul",{className:c,children:l.map(e=>(0,Le.jsx)("li",{children:(0,Le.jsx)(De,{to:e.path,className:"block px-5 py-2 hover:bg-gray-600",onClick:i,children:e.label})},e.key))})})]}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"https://d16s6yuyoczwni.cloudfront.net/nab-concept-operation-console/latest/index.html#/iris_analytics",className:u,onClick:i,target:"_blank",rel:"noopener noreferrer",children:"AI"})})]})})};var Ge=r(261),ze=r.n(Ge);function He(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ve}=Object.prototype,{getPrototypeOf:We}=Object,{iterator:Ye,toStringTag:Ke}=Symbol,Qe=(Xe=Object.create(null),e=>{const t=Ve.call(e);return Xe[t]||(Xe[t]=t.slice(8,-1).toLowerCase())});var Xe;const $e=e=>(e=e.toLowerCase(),t=>Qe(t)===e),Je=e=>t=>typeof t===e,{isArray:et}=Array,tt=Je("undefined");const rt=$e("ArrayBuffer");const nt=Je("string"),it=Je("function"),ot=Je("number"),at=e=>null!==e&&"object"===typeof e,st=e=>{if("object"!==Qe(e))return!1;const t=We(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Ke in e)&&!(Ye in e)},lt=$e("Date"),ut=$e("File"),ct=$e("Blob"),ft=$e("FileList"),dt=$e("URLSearchParams"),[ht,pt,gt,mt]=["ReadableStream","Request","Response","Headers"].map($e);function yt(e,t){let r,n,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),et(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{const n=i?Object.getOwnPropertyNames(e):Object.keys(e),o=n.length;let a;for(r=0;r<o;r++)a=n[r],t.call(null,e[a],a,e)}}function vt(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,i=r.length;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const _t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,bt=e=>!tt(e)&&e!==_t;const Et=(wt="undefined"!==typeof Uint8Array&&We(Uint8Array),e=>wt&&e instanceof wt);var wt;const St=$e("HTMLFormElement"),Tt=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),At=$e("RegExp"),It=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};yt(r,(r,i)=>{let o;!1!==(o=t(r,i,e))&&(n[i]=o||r)}),Object.defineProperties(e,n)};const Rt=$e("AsyncFunction"),Nt=((e,t)=>{return e?setImmediate:t?(r="axios@".concat(Math.random()),n=[],_t.addEventListener("message",e=>{let{source:t,data:i}=e;t===_t&&i===r&&n.length&&n.shift()()},!1),e=>{n.push(e),_t.postMessage(r,"*")}):e=>setTimeout(e);var r,n})("function"===typeof setImmediate,it(_t.postMessage)),Ct="undefined"!==typeof queueMicrotask?queueMicrotask.bind(_t):"undefined"!==typeof process&&process.nextTick||Nt,Ot={isArray:et,isArrayBuffer:rt,isBuffer:function(e){return null!==e&&!tt(e)&&null!==e.constructor&&!tt(e.constructor)&&it(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||it(e.append)&&("formdata"===(t=Qe(e))||"object"===t&&it(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&rt(e.buffer),t},isString:nt,isNumber:ot,isBoolean:e=>!0===e||!1===e,isObject:at,isPlainObject:st,isReadableStream:ht,isRequest:pt,isResponse:gt,isHeaders:mt,isUndefined:tt,isDate:lt,isFile:ut,isBlob:ct,isRegExp:At,isFunction:it,isStream:e=>at(e)&&it(e.pipe),isURLSearchParams:dt,isTypedArray:Et,isFileList:ft,forEach:yt,merge:function e(){const{caseless:t}=bt(this)&&this||{},r={},n=(n,i)=>{const o=t&&vt(r,i)||i;st(r[o])&&st(n)?r[o]=e(r[o],n):st(n)?r[o]=e({},n):et(n)?r[o]=n.slice():r[o]=n};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&yt(arguments[i],n);return r},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return yt(t,(t,n)=>{r&&it(t)?e[n]=He(t,r):e[n]=t},{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,o,a;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],n&&!n(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==r&&We(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Qe,kindOfTest:$e,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(et(e))return e;let t=e.length;if(!ot(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Ye]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:St,hasOwnProperty:Tt,hasOwnProp:Tt,reduceDescriptors:It,freezeMethods:e=>{It(e,(t,r)=>{if(it(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];it(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return et(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:vt,global:_t,isContextDefined:bt,isSpecCompliantForm:function(e){return!!(e&&it(e.append)&&"FormData"===e[Ke]&&e[Ye])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(at(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const i=et(e)?[]:{};return yt(e,(e,t)=>{const o=r(e,n+1);!tt(o)&&(i[t]=o)}),t[n]=void 0,i}}return e};return r(e,0)},isAsyncFn:Rt,isThenable:e=>e&&(at(e)||it(e))&&it(e.then)&&it(e.catch),setImmediate:Nt,asap:Ct,isIterable:e=>null!=e&&it(e[Ye])};function Pt(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Ot.inherits(Pt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ot.toJSONObject(this.config),code:this.code,status:this.status}}});const xt=Pt.prototype,Dt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Dt[e]={value:e}}),Object.defineProperties(Pt,Dt),Object.defineProperty(xt,"isAxiosError",{value:!0}),Pt.from=(e,t,r,n,i,o)=>{const a=Object.create(xt);return Ot.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),Pt.call(a,e.message,t,r,n,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const kt=Pt;function Mt(e){return Ot.isPlainObject(e)||Ot.isArray(e)}function Lt(e){return Ot.endsWith(e,"[]")?e.slice(0,-2):e}function Ft(e,t,r){return e?e.concat(t).map(function(e,t){return e=Lt(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Ut=Ot.toFlatObject(Ot,{},null,function(e){return/^is[A-Z]/.test(e)});const Bt=function(e,t,r){if(!Ot.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=Ot.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Ot.isUndefined(t[e])})).metaTokens,i=r.visitor||u,o=r.dots,a=r.indexes,s=(r.Blob||"undefined"!==typeof Blob&&Blob)&&Ot.isSpecCompliantForm(t);if(!Ot.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Ot.isDate(e))return e.toISOString();if(Ot.isBoolean(e))return e.toString();if(!s&&Ot.isBlob(e))throw new kt("Blob is not supported. Use a Buffer instead.");return Ot.isArrayBuffer(e)||Ot.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,r,i){let s=e;if(e&&!i&&"object"===typeof e)if(Ot.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(Ot.isArray(e)&&function(e){return Ot.isArray(e)&&!e.some(Mt)}(e)||(Ot.isFileList(e)||Ot.endsWith(r,"[]"))&&(s=Ot.toArray(e)))return r=Lt(r),s.forEach(function(e,n){!Ot.isUndefined(e)&&null!==e&&t.append(!0===a?Ft([r],n,o):null===a?r:r+"[]",l(e))}),!1;return!!Mt(e)||(t.append(Ft(i,r,o),l(e)),!1)}const c=[],f=Object.assign(Ut,{defaultVisitor:u,convertValue:l,isVisitable:Mt});if(!Ot.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!Ot.isUndefined(r)){if(-1!==c.indexOf(r))throw Error("Circular reference detected in "+n.join("."));c.push(r),Ot.forEach(r,function(r,o){!0===(!(Ot.isUndefined(r)||null===r)&&i.call(t,r,Ot.isString(o)?o.trim():o,n,f))&&e(r,n?n.concat(o):[o])}),c.pop()}}(e),t};function jt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Zt(e,t){this._pairs=[],e&&Bt(e,this,t)}const qt=Zt.prototype;qt.append=function(e,t){this._pairs.push([e,t])},qt.toString=function(e){const t=e?function(t){return e.call(this,t,jt)}:jt;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Gt=Zt;function zt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ht(e,t,r){if(!t)return e;const n=r&&r.encode||zt;Ot.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let o;if(o=i?i(t,r):Ot.isURLSearchParams(t)?t.toString():new Gt(t,r).toString(n),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const Vt=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ot.forEach(this.handlers,function(t){null!==t&&e(t)})}},Wt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Gt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Kt="undefined"!==typeof window&&"undefined"!==typeof document,Qt="object"===typeof navigator&&navigator||void 0,Xt=Kt&&(!Qt||["ReactNative","NativeScript","NS"].indexOf(Qt.product)<0),$t="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Jt=Kt&&window.location.href||"http://localhost",er=c(c({},e),Yt);const tr=function(e){function t(e,r,n,i){let o=e[i++];if("__proto__"===o)return!0;const a=Number.isFinite(+o),s=i>=e.length;if(o=!o&&Ot.isArray(n)?n.length:o,s)return Ot.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!a;n[o]&&Ot.isObject(n[o])||(n[o]=[]);return t(e,r,n[o],i)&&Ot.isArray(n[o])&&(n[o]=function(e){const t={},r=Object.keys(e);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],t[o]=e[o];return t}(n[o])),!a}if(Ot.isFormData(e)&&Ot.isFunction(e.entries)){const r={};return Ot.forEachEntry(e,(e,n)=>{t(function(e){return Ot.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null};const rr={transitional:Wt,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,i=Ot.isObject(e);i&&Ot.isHTMLForm(e)&&(e=new FormData(e));if(Ot.isFormData(e))return n?JSON.stringify(tr(e)):e;if(Ot.isArrayBuffer(e)||Ot.isBuffer(e)||Ot.isStream(e)||Ot.isFile(e)||Ot.isBlob(e)||Ot.isReadableStream(e))return e;if(Ot.isArrayBufferView(e))return e.buffer;if(Ot.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Bt(e,new er.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return er.isNode&&Ot.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=Ot.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Bt(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),function(e,t,r){if(Ot.isString(e))try{return(t||JSON.parse)(e),Ot.trim(e)}catch(kf){if("SyntaxError"!==kf.name)throw kf}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||rr.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(Ot.isResponse(e)||Ot.isReadableStream(e))return e;if(e&&Ot.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(kf){if(r){if("SyntaxError"===kf.name)throw kt.from(kf,kt.ERR_BAD_RESPONSE,this,null,this.response);throw kf}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:er.classes.FormData,Blob:er.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ot.forEach(["delete","get","head","post","put","patch"],e=>{rr.headers[e]={}});const nr=rr,ir=Ot.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),or=Symbol("internals");function ar(e){return e&&String(e).trim().toLowerCase()}function sr(e){return!1===e||null==e?e:Ot.isArray(e)?e.map(sr):String(e)}function lr(e,t,r,n,i){return Ot.isFunction(n)?n.call(this,t,r):(i&&(t=r),Ot.isString(t)?Ot.isString(n)?-1!==t.indexOf(n):Ot.isRegExp(n)?n.test(t):void 0:void 0)}class ur{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function i(e,t,r){const i=ar(t);if(!i)throw new Error("header name must be a non-empty string");const o=Ot.findKey(n,i);(!o||void 0===n[o]||!0===r||void 0===r&&!1!==n[o])&&(n[o||t]=sr(e))}const o=(e,t)=>Ot.forEach(e,(e,r)=>i(e,r,t));if(Ot.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Ot.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let r,n,i;return e&&e.split("\n").forEach(function(e){i=e.indexOf(":"),r=e.substring(0,i).trim().toLowerCase(),n=e.substring(i+1).trim(),!r||t[r]&&ir[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(Ot.isObject(e)&&Ot.isIterable(e)){let r,n,i={};for(const t of e){if(!Ot.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[n=t[0]]=(r=i[n])?Ot.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}o(i,t)}else null!=e&&i(t,e,r);return this}get(e,t){if(e=ar(e)){const r=Ot.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(Ot.isFunction(t))return t.call(this,e,r);if(Ot.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ar(e)){const r=Ot.findKey(this,e);return!(!r||void 0===this[r]||t&&!lr(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function i(e){if(e=ar(e)){const i=Ot.findKey(r,e);!i||t&&!lr(0,r[i],i,t)||(delete r[i],n=!0)}}return Ot.isArray(e)?e.forEach(i):i(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const i=t[r];e&&!lr(0,this[i],i,e,!0)||(delete this[i],n=!0)}return n}normalize(e){const t=this,r={};return Ot.forEach(this,(n,i)=>{const o=Ot.findKey(r,i);if(o)return t[o]=sr(n),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(i):String(i).trim();a!==i&&delete t[i],t[a]=sr(n),r[a]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Ot.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&Ot.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[or]=this[or]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=ar(e);t[n]||(!function(e,t){const r=Ot.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,i){return this[n].call(this,t,e,r,i)},configurable:!0})})}(r,e),t[n]=!0)}return Ot.isArray(e)?e.forEach(n):n(e),this}}ur.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ot.reduceDescriptors(ur.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}}),Ot.freezeMethods(ur);const cr=ur;function fr(e,t){const r=this||nr,n=t||r,i=cr.from(n.headers);let o=n.data;return Ot.forEach(e,function(e){o=e.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function dr(e){return!(!e||!e.__CANCEL__)}function hr(e,t,r){kt.call(this,null==e?"canceled":e,kt.ERR_CANCELED,t,r),this.name="CanceledError"}Ot.inherits(hr,kt,{__CANCEL__:!0});const pr=hr;function gr(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new kt("Request failed with status code "+r.status,[kt.ERR_BAD_REQUEST,kt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const mr=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i,o=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),u=n[a];i||(i=l),r[o]=s,n[o]=l;let c=a,f=0;for(;c!==o;)f+=r[c++],c%=e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),l-i<t)return;const d=u&&l-u;return d?Math.round(1e3*f/d):void 0}};const yr=function(e,t){let r,n,i=0,o=1e3/t;const a=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];t>=o?a(l,e):(r=l,n||(n=setTimeout(()=>{n=null,a(r)},o-t)))},()=>r&&a(r)]},vr=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const i=mr(50,250);return yr(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,s=o-n,l=i(s);n=o;e({loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:r,lengthComputable:null!=a,[t?"download":"upload"]:!0})},r)},_r=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},br=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ot.asap(()=>e(...r))},Er=er.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,er.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(er.origin),er.navigator&&/(msie|trident)/i.test(er.navigator.userAgent)):()=>!0,wr=er.hasStandardBrowserEnv?{write(e,t,r,n,i,o){const a=[e+"="+encodeURIComponent(t)];Ot.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),Ot.isString(n)&&a.push("path="+n),Ot.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Sr(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Tr=e=>e instanceof cr?c({},e):e;function Ar(e,t){t=t||{};const r={};function n(e,t,r,n){return Ot.isPlainObject(e)&&Ot.isPlainObject(t)?Ot.merge.call({caseless:n},e,t):Ot.isPlainObject(t)?Ot.merge({},t):Ot.isArray(t)?t.slice():t}function i(e,t,r,i){return Ot.isUndefined(t)?Ot.isUndefined(e)?void 0:n(void 0,e,0,i):n(e,t,0,i)}function o(e,t){if(!Ot.isUndefined(t))return n(void 0,t)}function a(e,t){return Ot.isUndefined(t)?Ot.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(r,i,o){return o in t?n(r,i):o in e?n(void 0,r):void 0}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t,r)=>i(Tr(e),Tr(t),0,!0)};return Ot.forEach(Object.keys(Object.assign({},e,t)),function(n){const o=l[n]||i,a=o(e[n],t[n],n);Ot.isUndefined(a)&&o!==s||(r[n]=a)}),r}const Ir=e=>{const t=Ar({},e);let r,{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:s,auth:l}=t;if(t.headers=s=cr.from(s),t.url=Ht(Sr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Ot.isFormData(n))if(er.hasStandardBrowserEnv||er.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(r=s.getContentType())){const[e,...t]=r?r.split(";").map(e=>e.trim()).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(er.hasStandardBrowserEnv&&(i&&Ot.isFunction(i)&&(i=i(t)),i||!1!==i&&Er(t.url))){const e=o&&a&&wr.read(a);e&&s.set(o,e)}return t},Rr="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=Ir(e);let i=n.data;const o=cr.from(n.headers).normalize();let a,s,l,u,c,{responseType:f,onUploadProgress:d,onDownloadProgress:h}=n;function p(){u&&u(),c&&c(),n.cancelToken&&n.cancelToken.unsubscribe(a),n.signal&&n.signal.removeEventListener("abort",a)}let g=new XMLHttpRequest;function m(){if(!g)return;const n=cr.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());gr(function(e){t(e),p()},function(e){r(e),p()},{data:f&&"text"!==f&&"json"!==f?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:e,request:g}),g=null}g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(r(new kt("Request aborted",kt.ECONNABORTED,e,g)),g=null)},g.onerror=function(){r(new kt("Network Error",kt.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const i=n.transitional||Wt;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new kt(t,i.clarifyTimeoutError?kt.ETIMEDOUT:kt.ECONNABORTED,e,g)),g=null},void 0===i&&o.setContentType(null),"setRequestHeader"in g&&Ot.forEach(o.toJSON(),function(e,t){g.setRequestHeader(t,e)}),Ot.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),f&&"json"!==f&&(g.responseType=n.responseType),h&&([l,c]=vr(h,!0),g.addEventListener("progress",l)),d&&g.upload&&([s,u]=vr(d),g.upload.addEventListener("progress",s),g.upload.addEventListener("loadend",u)),(n.cancelToken||n.signal)&&(a=t=>{g&&(r(!t||t.type?new pr(null,e,g):t),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(a),n.signal&&(n.signal.aborted?a():n.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===er.protocols.indexOf(y)?r(new kt("Unsupported protocol "+y+":",kt.ERR_BAD_REQUEST,e)):g.send(i||null)})},Nr=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const i=function(e){if(!r){r=!0,a();const t=e instanceof Error?e:this.reason;n.abort(t instanceof kt?t:new pr(t instanceof Error?t.message:t))}};let o=t&&setTimeout(()=>{o=null,i(new kt("timeout ".concat(t," of ms exceeded"),kt.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));const{signal:s}=n;return s.unsubscribe=()=>Ot.asap(a),s}};function Cr(e,t){this.v=e,this.k=t}function Or(e){return function(){return new Pr(e.apply(this,arguments))}}function Pr(e){var t,r;function n(t,r){try{var o=e[t](r),a=o.value,s=a instanceof Cr;Promise.resolve(s?a.v:a).then(function(r){if(s){var l="return"===t?"return":"next";if(!a.k||r.done)return n(l,r);r=e[l](r).value}i(o.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,i){return new Promise(function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,i))})},"function"!=typeof e.return&&(this.return=void 0)}function xr(e){return new Cr(e,0)}function Dr(e){var t={},r=!1;function n(t,n){return r=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:new Cr(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function kr(e){var t,r,n,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Mr(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Mr(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Mr=function(e){this.s=e,this.n=e.next},Mr.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Mr(e)}Pr.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Pr.prototype.next=function(e){return this._invoke("next",e)},Pr.prototype.throw=function(e){return this._invoke("throw",e)},Pr.prototype.return=function(e){return this._invoke("return",e)};const Lr=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,i=0;for(;i<r;)n=i+t,yield e.slice(i,n),i=n},Fr=function(){var e=Or(function*(e,t){var r,n=!1,i=!1;try{for(var o,a=kr(Ur(e));n=!(o=yield xr(a.next())).done;n=!1){const e=o.value;yield*Dr(kr(Lr(e,t)))}}catch(s){i=!0,r=s}finally{try{n&&null!=a.return&&(yield xr(a.return()))}finally{if(i)throw r}}});return function(t,r){return e.apply(this,arguments)}}(),Ur=function(){var e=Or(function*(e){if(e[Symbol.asyncIterator])return void(yield*Dr(kr(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield xr(t.read());if(e)break;yield r}}finally{yield xr(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Br=(e,t,r,n)=>{const i=Fr(e,t);let o,a=0,s=e=>{o||(o=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await i.next();if(t)return s(),void e.close();let o=n.byteLength;if(r){let e=a+=o;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw s(t),t}},cancel:e=>(s(e),i.return())},{highWaterMark:2})},jr="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Zr=jr&&"function"===typeof ReadableStream,qr=jr&&("function"===typeof TextEncoder?(Gr=new TextEncoder,e=>Gr.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Gr;const zr=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(kf){return!1}},Hr=Zr&&zr(()=>{let e=!1;const t=new Request(er.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Vr=Zr&&zr(()=>Ot.isReadableStream(new Response("").body)),Wr={stream:Vr&&(e=>e.body)};var Yr;jr&&(Yr=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Wr[e]&&(Wr[e]=Ot.isFunction(Yr[e])?t=>t[e]():(t,r)=>{throw new kt("Response type '".concat(e,"' is not supported"),kt.ERR_NOT_SUPPORT,r)})}));const Kr=async(e,t)=>{const r=Ot.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(Ot.isBlob(e))return e.size;if(Ot.isSpecCompliantForm(e)){const t=new Request(er.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Ot.isArrayBufferView(e)||Ot.isArrayBuffer(e)?e.byteLength:(Ot.isURLSearchParams(e)&&(e+=""),Ot.isString(e)?(await qr(e)).byteLength:void 0)})(t):r},Qr=jr&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:l,responseType:u,headers:f,withCredentials:d="same-origin",fetchOptions:h}=Ir(e);u=u?(u+"").toLowerCase():"text";let p,g=Nr([i,o&&o.toAbortSignal()],a);const m=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let y;try{if(l&&Hr&&"get"!==r&&"head"!==r&&0!==(y=await Kr(f,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(Ot.isFormData(n)&&(e=r.headers.get("content-type"))&&f.setContentType(e),r.body){const[e,t]=_r(y,vr(br(l)));n=Br(r.body,65536,e,t)}}Ot.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,c(c({},h),{},{signal:g,method:r.toUpperCase(),headers:f.normalize().toJSON(),body:n,duplex:"half",credentials:i?d:void 0}));let o=await fetch(p,h);const a=Vr&&("stream"===u||"response"===u);if(Vr&&(s||a&&m)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=o[t]});const t=Ot.toFiniteNumber(o.headers.get("content-length")),[r,n]=s&&_r(t,vr(br(s),!0))||[];o=new Response(Br(o.body,65536,r,()=>{n&&n(),m&&m()}),e)}u=u||"text";let v=await Wr[Ot.findKey(Wr,u)||"text"](o,e);return!a&&m&&m(),await new Promise((t,r)=>{gr(t,r,{data:v,headers:cr.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p})})}catch(v){if(m&&m(),v&&"TypeError"===v.name&&/Load failed|fetch/i.test(v.message))throw Object.assign(new kt("Network Error",kt.ERR_NETWORK,e,p),{cause:v.cause||v});throw kt.from(v,v&&v.code,e,p)}}),Xr={http:null,xhr:Rr,fetch:Qr};Ot.forEach(Xr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(kf){}Object.defineProperty(e,"adapterName",{value:t})}});const $r=e=>"- ".concat(e),Jr=e=>Ot.isFunction(e)||null===e||!1===e,en=e=>{e=Ot.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let o=0;o<t;o++){let t;if(r=e[o],n=r,!Jr(r)&&(n=Xr[(t=String(r)).toLowerCase()],void 0===n))throw new kt("Unknown adapter '".concat(t,"'"));if(n)break;i[t||"#"+o]=n}if(!n){const e=Object.entries(i).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});let r=t?e.length>1?"since :\n"+e.map($r).join("\n"):" "+$r(e[0]):"as no adapter specified";throw new kt("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n};function tn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new pr(null,e)}function rn(e){tn(e),e.headers=cr.from(e.headers),e.data=fr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return en(e.adapter||nr.adapter)(e).then(function(t){return tn(e),t.data=fr.call(e,e.transformResponse,t),t.headers=cr.from(t.headers),t},function(t){return dr(t)||(tn(e),t&&t.response&&(t.response.data=fr.call(e,e.transformResponse,t.response),t.response.headers=cr.from(t.response.headers))),Promise.reject(t)})}const nn="1.10.0",on={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{on[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const an={};on.transitional=function(e,t,r){function n(e,t){return"[Axios v"+nn+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,i,o)=>{if(!1===e)throw new kt(n(i," has been removed"+(t?" in "+t:"")),kt.ERR_DEPRECATED);return t&&!an[i]&&(an[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,o)}},on.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const sn={assertOptions:function(e,t,r){if("object"!==typeof e)throw new kt("options must be an object",kt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const o=n[i],a=t[o];if(a){const t=e[o],r=void 0===t||a(t,o,e);if(!0!==r)throw new kt("option "+o+" must be "+r,kt.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new kt("Unknown option "+o,kt.ERR_BAD_OPTION)}},validators:on},ln=sn.validators;class un{constructor(e){this.defaults=e||{},this.interceptors={request:new Vt,response:new Vt}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(kf){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ar(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:i}=t;void 0!==r&&sn.assertOptions(r,{silentJSONParsing:ln.transitional(ln.boolean),forcedJSONParsing:ln.transitional(ln.boolean),clarifyTimeoutError:ln.transitional(ln.boolean)},!1),null!=n&&(Ot.isFunction(n)?t.paramsSerializer={serialize:n}:sn.assertOptions(n,{encode:ln.function,serialize:ln.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),sn.assertOptions(t,{baseUrl:ln.spelling("baseURL"),withXsrfToken:ln.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&Ot.merge(i.common,i[t.method]);i&&Ot.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=cr.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let u;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let c,f=0;if(!s){const e=[rn.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),c=e.length,u=Promise.resolve(t);f<c;)u=u.then(e[f++],e[f++]);return u}c=a.length;let d=t;for(f=0;f<c;){const e=a[f++],t=a[f++];try{d=e(d)}catch(h){t.call(this,h);break}}try{u=rn.call(this,d)}catch(h){return Promise.reject(h)}for(f=0,c=l.length;f<c;)u=u.then(l[f++],l[f++]);return u}getUri(e){return Ht(Sr((e=Ar(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Ot.forEach(["delete","get","head","options"],function(e){un.prototype[e]=function(t,r){return this.request(Ar(r||{},{method:e,url:t,data:(r||{}).data}))}}),Ot.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,i){return this.request(Ar(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}un.prototype[e]=t(),un.prototype[e+"Form"]=t(!0)});const cn=un;class fn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,i){r.reason||(r.reason=new pr(e,n,i),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new fn(function(t){e=t}),cancel:e}}}const dn=fn;const hn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hn).forEach(e=>{let[t,r]=e;hn[r]=t});const pn=hn;const gn=function e(t){const r=new cn(t),n=He(cn.prototype.request,r);return Ot.extend(n,cn.prototype,r,{allOwnKeys:!0}),Ot.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Ar(t,r))},n}(nr);gn.Axios=cn,gn.CanceledError=pr,gn.CancelToken=dn,gn.isCancel=dr,gn.VERSION=nn,gn.toFormData=Bt,gn.AxiosError=kt,gn.Cancel=gn.CanceledError,gn.all=function(e){return Promise.all(e)},gn.spread=function(e){return function(t){return e.apply(null,t)}},gn.isAxiosError=function(e){return Ot.isObject(e)&&!0===e.isAxiosError},gn.mergeConfig=Ar,gn.AxiosHeaders=cr,gn.formToJSON=e=>tr(Ot.isHTMLForm(e)?new FormData(e):e),gn.getAdapter=en,gn.HttpStatusCode=pn,gn.default=gn;const mn=gn,yn=()=>(0,Le.jsxs)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[(0,Le.jsx)("circle",{cx:"12",cy:"12",r:"9",fill:"none",stroke:"#1976d2",strokeWidth:"2"}),(0,Le.jsx)("polyline",{points:"8,12 11,15 16,9",fill:"none",stroke:"#1976d2",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),vn=e=>{let{title:t,segment:r,flag:n,isAd:i,advertName:o}=e;return(0,Le.jsx)("div",{className:"bg-white/80 backdrop-blur rounded-lg shadow-md ring-1 ring-black/5 px-4 py-3 text-center font-poppins",children:(0,Le.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,Le.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Le.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:[t," & ",r]}),n&&""!==n&&(0,Le.jsx)("img",{src:n,alt:"Flag",className:"w-[50px] h-[25px] object-contain"})]}),(0,Le.jsxs)("label",{className:"text-gray-700",children:["Stream Type:"," ",(0,Le.jsx)("b",{className:"text-gray-900",children:i?":: AD :: ".concat(o):"Content"})]})]})})},_n=e=>{let{labels:t}=e;return(0,Le.jsx)("div",{className:"bg-gray-100/90 rounded-xl shadow-md ring-1 ring-black/5 px-4 py-3 md:px-5 md:py-4",children:(0,Le.jsx)("div",{className:"flex divide-x divide-gray-300",children:[{key:"impression",label:"Impression"},{key:"adstart",label:"ADSTART"},{key:"firstQuartile",label:"25%"},{key:"secondQuartile",label:"50%"},{key:"thirdQuartile",label:"75%"},{key:"completion",label:"ADCOMPL"}].map((e,r)=>{const n=null===t||void 0===t?void 0:t[e.key],i=Boolean(n);return(0,Le.jsxs)("div",{className:"flex-1 px-3 text-center",children:[(0,Le.jsx)("div",{className:"text-gray-700 font-medium",children:e.label}),(0,Le.jsx)("div",{className:"mt-2 flex justify-center",children:i?(0,Le.jsx)(yn,{className:"w-6 h-6"}):(0,Le.jsx)("span",{className:"text-blue-600 text-xl leading-none",children:"\u2013"})})]},e.key)})})})},bn=e=>{let{input_index:r}=e;const n=1e3,[,i]=(0,t.useState)(0),o=(0,t.useRef)(null),a=(0,t.useRef)(null),s=(0,t.useRef)(null),l=(0,t.useRef)(null),u=(0,t.useRef)(null),f=(0,t.useRef)(null),d=(0,t.useRef)(!1),h=(0,t.useRef)(!1),[p,g]=(0,t.useState)(Be.k[r].left_playback_url),[m,y]=(0,t.useState)(Be.k[r].right_playback_url),[v,_]=(0,t.useState)(Be.k[r].volume),[b,E]=(0,t.useState)(Be.k[r].volume),w=(0,t.useRef)(""),S=(0,t.useRef)(""),T=(0,t.useRef)(!1),A=(0,t.useRef)(!1),I=(0,t.useRef)(""),R=(0,t.useRef)(""),[N,C]=(0,t.useState)(!1),[O,P]=(0,t.useState)(!1),[x,D]=(0,t.useState)(!1),[k,M]=(0,t.useState)([]),L=(0,t.useRef)([]),[F,U]=(0,t.useState)([]),B=(0,t.useRef)([]),[j,Z]=(0,t.useState)(!1),[q,G]=(0,t.useState)(""),[z,H]=(0,t.useState)(""),[V,W]=(0,t.useState)({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),[Y,K]=(0,t.useState)({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""});(0,t.useEffect)(()=>(s.current=setInterval(Q,1e3),l.current=setInterval(X,1e3),()=>{console.log("[Linear] Component unmounting \u2014 tearing down players"),s.current&&(clearInterval(s.current),s.current=null),l.current&&(clearInterval(l.current),l.current=null),o.current&&(o.current.pause(),o.current.removeAttribute("src"),o.current.load()),a.current&&(a.current.pause(),a.current.removeAttribute("src"),a.current.load()),u.current&&(u.current.reset(),u.current=null),f.current&&(f.current.reset(),f.current=null)}),[]),(0,t.useEffect)(()=>{L.current=k},[k]),(0,t.useEffect)(()=>{B.current=F},[F]),(0,t.useEffect)(()=>{T.current=O},[O]),(0,t.useEffect)(()=>{A.current=x},[x]),(0,t.useEffect)(()=>{if(T.current&&w.current&&L.current.length>0){const e=L.current.find(e=>e.id===w.current);G((null===e||void 0===e?void 0:e.advert)||"")}else G("")},[k,O,w.current]),(0,t.useEffect)(()=>{if(A.current&&S.current&&B.current.length>0){const e=B.current.find(e=>e.id===S.current);H((null===e||void 0===e?void 0:e.advert)||"")}else H("")},[F,x,S.current]);const Q=()=>{let e=u.current;if(Array.isArray(L.current)&&0!==L.current.length){var t,r;const n=null===(t=e.getActiveStream)||void 0===t?void 0:t.call(e),i=null===n||void 0===n||null===(r=n.getId)||void 0===r?void 0:r.call(n);if(!i)return void console.log("[updateCurrentTime] Could not retrieve manifestId");const o=1e3*e.time(i);te(L.current,W,o,"l",i)}},X=()=>{let e=f.current;if(Array.isArray(B.current)&&0!==B.current.length){var t,r;const n=null===(t=e.getActiveStream)||void 0===t?void 0:t.call(e),i=null===n||void 0===n||null===(r=n.getId)||void 0===r?void 0:r.call(n);if(!i)return void console.log("[updateCurrentTime] Could not retrieve manifestId");const o=1e3*e.time(i);te(B.current,K,o,"r",i)}};(0,t.useEffect)(()=>{console.log("enter cleaning"),u.current&&(u.current.reset(),u.current=null),f.current&&(f.current.reset(),f.current=null),o.current&&(o.current.pause(),o.current.removeAttribute("src"),o.current.load()),a.current&&(a.current.pause(),a.current.removeAttribute("src"),a.current.load()),clearInterval(s.current),clearInterval(l.current),s.current=null,l.current=null,console.log("(VOD) initializePlayers() called."),u.current=ze().MediaPlayer().create(),u.current.updateSettings({debug:{logLevel:ze().Debug.LOG_LEVEL_NONE}}),u.current.initialize(o.current,"",!1,0),o.current.muted=!0,console.log("(VOD) initialize LP"),f.current=ze().MediaPlayer().create(),f.current.updateSettings({debug:{logLevel:ze().Debug.LOG_LEVEL_NONE}}),f.current.initialize(a.current,"",!1,0),a.current.muted=!0,console.log("(VOD) initialize RP"),s.current=setInterval(Q,n),l.current=setInterval(X,n),u.current.on(ze().MediaPlayer.events.MANIFEST_LOADED,()=>{u.current.on(ze().MediaPlayer.events.PERIOD_SWITCH_STARTED,e=>{}),u.current.on(ze().MediaPlayer.events.STREAM_ACTIVATED,e=>{var t,r;const n=null===(t=e.streamInfo)||void 0===t?void 0:t.id;if(!n)return;const o=w.current;o&&o!==n&&T.current&&re("l"),w.current=n;const a=null===(r=u.current.getDashAdapter())||void 0===r?void 0:r.getMpd();if(!a)return;const s=$(a,n);if(s.isAd){M(s.events),P(!0),i(e=>e+1);const e=s.events.some(e=>"clicktrough"===e.type&&e.ct);d.current=e,i(e=>e+1)}else M([]),P(!1),re("l"),d.current=!1})}),f.current.on(ze().MediaPlayer.events.MANIFEST_LOADED,()=>{f.current.on(ze().MediaPlayer.events.PERIOD_SWITCH_STARTED,e=>{}),f.current.on(ze().MediaPlayer.events.STREAM_ACTIVATED,e=>{var t,r;const n=null===(t=e.streamInfo)||void 0===t?void 0:t.id;if(!n)return;const o=S.current;o&&o!==n&&A.current&&re("l"),S.current=n;const a=null===(r=f.current.getDashAdapter())||void 0===r?void 0:r.getMpd();if(!a)return;const s=$(a,n);if(s.isAd){U(s.events),D(!0),i(e=>e+1);const e=s.events.some(e=>"clicktrough"===e.type&&e.ct);h.current=e,i(e=>e+1)}else U([]),D(!1),re("r"),h.current=!1})})},[r]);const $=(e,t)=>{let r=!1,n=[];const i=null===e||void 0===e?void 0:e.manifest,o=((null===i||void 0===i?void 0:i.Period_asArray)||[])[parseInt(t.split("_")[1],10)];if(!o)return{isAd:!1,events:n};if(o&&o["dai:adPeriod"]){r=!0,((e,t,r)=>{let n,i,o="",a="",s="",l="",u=[],c="";if(n=e.find(e=>"com.synamedia.dai.tracking.v2"===e.value),n||(n=e.find(e=>"com.synamedia.dai.tracking"===e.value),n)){for(let e=0;e<n.Event_asArray.length;e++)a=n.Event_asArray[e].Tracking_asArray[0].__cdata,c=n.Event_asArray[e].Tracking_asArray[0].event,u=new URLSearchParams(a),l=u.get("creativeId"),c.includes("impression")?s="Impression":c.includes("start")?s="Ad Start":c.includes("firstQuartile")?s="First Quartile":c.includes("midpoint")?s="Second Quartile":c.includes("thirdQuartile")?s="Third Quartile":c.includes("complete")?s="Fourth Quartile":(console.log("event: ",c),s="Unkknown"),o={stream:e,id:r,pt:n.Event_asArray[e].presentationTime,type:s,url:a,reported:!1,advert:l,ct:""},t.push(o);if(i=e.find(e=>"com.synamedia.dai.videoclick.v2"===e.value),i)for(let e=0;e<i.Event_asArray.length;e++)a=i.Event_asArray[e].VideoClicks_asArray[0].ClickTracking_asArray[0],l=i.Event_asArray[e].VideoClicks_asArray[0].ClickThrough_asArray[0],o={stream:r,id:r,pt:0,type:"clicktrough",url:a,reported:!1,advert:"",ct:l},t.push(o)}})(o.EventStream_asArray,n,t)}return{isAd:r,events:n}};function J(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}const ee=(e,t)=>{let n="",i="";return"l"===t?((N||""===I.current)&&(I.current=J()),i=I.current):((N||""===R.current)&&(R.current=J()),i=R.current),n=e+"&sessionId=SYNAIRISDEMO_"+t+"_"+r.toString()+"_"+Math.floor((new Date).getTime()/1e3).toString(),n=n+"&deviceId="+i,n},te=(e,t,r,n,i)=>{for(let l=0;l<e.length;l++){var o,a,s;if((null===(o=e[l])||void 0===o?void 0:o.id)===i)r>=(null===(a=e[l])||void 0===a?void 0:a.pt)&&(null===(s=e[l])||void 0===s||!s.reported)&&"clicktrough"!==e[l].type&&(console.log("HTTP GET: "+n+" - "+e[l].advert+" - "+e[l].type+" - ",e[l].url),ie(e[l].url),e[l].reported=!0,t(t=>{const r=c({},t);switch(e[l].type){case"Impression":r.impression="\u2714";break;case"Ad Start":r.adstart="\u2714";break;case"First Quartile":r.firstQuartile="\u2714";break;case"Second Quartile":r.secondQuartile="\u2714";break;case"Third Quartile":r.thirdQuartile="\u2714";break;case"Fourth Quartile":r.completion="\u2714"}return r}))}},re=e=>{"l"===e&&W({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),"r"===e&&K({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),"rl"===e&&(W({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),K({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""})),i(e=>e+1)},ne=e=>{console.log("ClickThrough: ",e);const t="l"===e?L.current:B.current,r="l"===e?w.current:S.current,n=t.find(e=>e.id===r&&"clicktrough"===e.type&&e.ct)||t.find(e=>"clicktrough"===e.type&&e.ct);n?(window.open(n.ct,"_blank"),console.log("HTTP GET: "+e+" - "+n.advert+" - "+n.type+" - ",n.url),ie(n.url)):console.log("No clickthrough URL found for",e)},ie=async e=>{try{return(await mn.get(e)).status}catch(t){return console.error("Error posting data:",t),-1}};return(0,Le.jsxs)("div",{className:"relative min-h-screen bg-cover bg-center font-poppins",style:{backgroundImage:"url('/SplashScreenBG.png')"},children:[(0,Le.jsx)("div",{className:"absolute inset-0 bg-white/35"}),(0,Le.jsxs)("div",{className:"relative z-10 text-white",children:[(0,Le.jsx)("div",{children:(0,Le.jsx)("h1",{className:"font-poppins font-bold text-center text-3xl",children:Be.k[r].great_title})}),(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)(vn,{title:Be.k[r].left_title,segment:Be.k[r].left_segment,flag:Be.k[r].left_flag,isAd:O,advertName:q}),(0,Le.jsx)("div",{children:(0,Le.jsx)(_n,{labels:V})}),(0,Le.jsx)("div",{children:(0,Le.jsx)("video",{ref:o,controls:!0,preload:"none",style:{width:"750px"}})})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)(vn,{title:Be.k[r].right_title,segment:Be.k[r].right_segment,flag:Be.k[r].right_flag,isAd:x,advertName:z}),(0,Le.jsx)("div",{children:(0,Le.jsx)(_n,{labels:Y})}),(0,Le.jsx)("div",{children:(0,Le.jsx)("video",{ref:a,controls:!0,preload:"none",style:{width:"750px"}})})]})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("button",{onClick:()=>{if(u&&f){let e="";if(u.current.reset(),f.current.reset(),Be.k[r]&&Be.k[r].special_header){const e=Be.k[r].special_header,t={modifyRequestHeader:function(t){for(const r in e)e[r]&&t.setRequestHeader(r,e[r]);return t}};u.current.updateSettings({streaming:{xhr:t}}),f.current.updateSettings({streaming:{xhr:t}})}e=ee(p,"l"),u.current.initialize(o.current,e,!1,0),e=ee(m,"r"),f.current.initialize(a.current,e,!1,0)}Z(!1),re()},className:"bg-blue-600 text-white px-4 py-2 rounded transition hover:bg-blue-700 disabled:bg-gray-400 disabled:text-gray-100 disabled:cursor-not-allowed",children:"Load/Reload"}),(0,Le.jsx)("button",{onClick:()=>{if(j)o.current.pause(),a.current.pause(),Z(!1),s.current&&(clearInterval(s.current),s.current=null),l.current&&(clearInterval(l.current),l.current=null);else{var e,t;const r=null===(e=o.current)||void 0===e?void 0:e.play(),i=null===(t=a.current)||void 0===t?void 0:t.play();null!==r&&void 0!==r&&r.catch&&r.catch(e=>{"AbortError"!==e.name&&console.error("leftVideo play error:",e)}),null!==i&&void 0!==i&&i.catch&&i.catch(e=>{"AbortError"!==e.name&&console.error("rightVideo play error:",e)}),Z(!0),s.current||(s.current=setInterval(Q,n)),l.current||(l.current=setInterval(X,n))}},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:j?"Pause":"Play"}),(0,Le.jsx)("button",{onClick:()=>{s.current&&(clearInterval(s.current),s.current=null),l.current&&(clearInterval(l.current),l.current=null),o.current&&(o.current.pause(),o.current.removeAttribute("src"),o.current.load()),a.current&&(a.current.pause(),a.current.removeAttribute("src"),a.current.load()),u.current&&u.current.reset(),f.current&&f.current.reset(),Z(!1),re("rl"),d.current=!1,h.current=!1},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Stop"}),(0,Le.jsx)("button",{onClick:()=>ne("l"),disabled:!d.current,className:"bg-blue-600 text-white px-4 py-2 rounded transition hover:bg-blue-700 disabled:bg-gray-400 disabled:text-gray-100 disabled:cursor-not-allowed",children:"Left player clicktrough"}),(0,Le.jsx)("button",{onClick:()=>ne("r"),disabled:!h.current,className:"bg-blue-600 text-white px-4 py-2 rounded transition hover:bg-blue-700 disabled:bg-gray-400 disabled:text-gray-100 disabled:cursor-not-allowed",children:"Right player clickthrough"}),(0,Le.jsxs)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",onClick:()=>{if(o.current)if(v===Be.k[r].volume){let e=Number(v.replace(/[^\d.,-]+/g,"").replace(",","."))/100;o.current.volume=e,o.current.muted=!1,_("0%")}else o.current.volume=0,_(Be.k[r].volume)},children:["L: ",v]}),(0,Le.jsxs)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",onClick:()=>{if(a.current)if(b===Be.k[r].volume){let e=Number(b.replace(/[^\d.,-]+/g,"").replace(",","."))/100;a.current.volume=e,a.current.muted=!1,E("0%")}else a.current.volume=0,E(Be.k[r].volume)},children:["R: ",b]}),(0,Le.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",onClick:()=>{try{const e=parseFloat(Be.k[r].postroll_offset);if(isNaN(e)||0===e)return void console.warn("Invalid postroll offset");u.current&&u.current.seek(e),f.current&&f.current.seek(e),console.log("Skipped both players to ".concat(e," seconds"))}catch(e){console.error("Failed to skip to postroll:",e)}},children:"Skip"}),(0,Le.jsx)("button",{onClick:()=>C(e=>!e),className:N?"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition shadow":"bg-blue-900 text-white px-4 py-2 rounded shadow-inner translate-y-[1px]",title:"Toggle random deviceId (applies on next Load/Reload)",children:"rnd.did"})]})]})]})},En=()=>(0,Le.jsxs)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[(0,Le.jsx)("circle",{cx:"12",cy:"12",r:"9",fill:"none",stroke:"#1976d2",strokeWidth:"2"}),(0,Le.jsx)("polyline",{points:"8,12 11,15 16,9",fill:"none",stroke:"#1976d2",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),wn=e=>{let{title:t,segment:r,flag:n,isAd:i,advertName:o}=e;return(0,Le.jsx)("div",{className:"bg-white/80 backdrop-blur rounded-lg shadow-md ring-1 ring-black/5 px-4 py-3 text-center font-poppins",children:(0,Le.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,Le.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Le.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:[t," & ",r]}),n&&""!==n&&(0,Le.jsx)("img",{src:n,alt:"Flag",className:"w-[50px] h-[25px] object-contain"})]}),(0,Le.jsxs)("label",{className:"text-gray-700",children:["Stream Type:"," ",(0,Le.jsx)("b",{className:"text-gray-900",children:i?":: AD :: ".concat(o):"Content"})]})]})})},Sn=e=>{let{labels:t}=e;return(0,Le.jsx)("div",{className:"bg-gray-100/90 rounded-xl shadow-md ring-1 ring-black/5 px-4 py-3 md:px-5 md:py-4",children:(0,Le.jsx)("div",{className:"flex divide-x divide-gray-300",children:[{key:"impression",label:"Impression"},{key:"adstart",label:"ADSTART"},{key:"firstQuartile",label:"25%"},{key:"secondQuartile",label:"50%"},{key:"thirdQuartile",label:"75%"},{key:"completion",label:"ADCOMPL"}].map((e,r)=>{const n=null===t||void 0===t?void 0:t[e.key],i=Boolean(n);return(0,Le.jsxs)("div",{className:"flex-1 px-3 text-center",children:[(0,Le.jsx)("div",{className:"text-gray-700 font-medium",children:e.label}),(0,Le.jsx)("div",{className:"mt-2 flex justify-center",children:i?(0,Le.jsx)(En,{className:"w-6 h-6"}):(0,Le.jsx)("span",{className:"text-blue-600 text-xl leading-none",children:"\u2013"})})]},e.key)})})})},Tn=e=>{let{input_index:r}=e;const[,n]=(0,t.useState)(0),i=(0,t.useRef)(null),o=(0,t.useRef)(null),a=(0,t.useRef)(null),s=(0,t.useRef)(null),l=(0,t.useRef)(null),u=(0,t.useRef)(null),f=(0,t.useRef)(!1),d=(0,t.useRef)(!1),[h,p]=(0,t.useState)(Be.k[r].left_playback_url),[g,m]=(0,t.useState)(Be.k[r].right_playback_url),[y,v]=(0,t.useState)(Be.k[r].volume),[_,b]=(0,t.useState)(Be.k[r].volume),E=(0,t.useRef)(""),w=(0,t.useRef)(""),S=(0,t.useRef)(!1),T=(0,t.useRef)(!1),A=(0,t.useRef)(""),I=(0,t.useRef)(""),R=(0,t.useRef)(!1),[N,C]=(0,t.useState)(null),[O,P]=(0,t.useState)(!1),[x,D]=(0,t.useState)(!1),[k,M]=(0,t.useState)(!1),[L,F]=(0,t.useState)([]),U=(0,t.useRef)([]),[B,j]=(0,t.useState)([]),Z=(0,t.useRef)([]),[q,G]=(0,t.useState)(!1),[z,H]=(0,t.useState)(""),[V,W]=(0,t.useState)(""),[Y,K]=(0,t.useState)({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),[Q,X]=(0,t.useState)({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),$=1e3;let J=null,ee=null;function te(e,t){if(!t)return;const r={modifyRequestHeader:e=>(Object.entries(t).forEach(t=>{let[r,n]=t;return n&&e.setRequestHeader(r,n)}),e),modifyRequestURL:e=>e};e.extend("RequestModifier",()=>r,!0)}(0,t.useEffect)(()=>(a.current=setInterval(re,$),s.current=setInterval(ne,$),()=>{console.log("[Linear] Component unmounting \u2014 tearing down players"),a.current&&(clearInterval(a.current),a.current=null),s.current&&(clearInterval(s.current),s.current=null),i.current&&(i.current.pause(),i.current.removeAttribute("src"),i.current.load()),o.current&&(o.current.pause(),o.current.removeAttribute("src"),o.current.load()),l.current&&(l.current.off(ze().MediaPlayer.events.ERROR),l.current.reset()),u.current&&(u.current.off(ze().MediaPlayer.events.ERROR),u.current.reset())}),[]),(0,t.useEffect)(()=>{U.current=L},[L]),(0,t.useEffect)(()=>{Z.current=B},[B]),(0,t.useEffect)(()=>{S.current=x},[x]),(0,t.useEffect)(()=>{T.current=k},[k]),(0,t.useEffect)(()=>{if(S.current&&E.current&&U.current.length>0){const e=U.current.find(e=>e.id===E.current);H((null===e||void 0===e?void 0:e.advert)||"")}else H("")},[L,x,E.current]),(0,t.useEffect)(()=>{if(T.current&&w.current&&Z.current.length>0){const e=Z.current.find(e=>e.id===w.current);W((null===e||void 0===e?void 0:e.advert)||"")}else W("")},[B,k,w.current]),(0,t.useEffect)(()=>{const e=new WebSocket("ws://127.0.0.1:8765");return e.onmessage=e=>{try{!0===JSON.parse(e.data).special&&(R.current=!0,console.log("Received isSpecial signal from IrisWOF."))}catch(t){console.error("Error Handling WebSocket:",t)}},()=>e.close()},[]);const re=()=>{let e=l.current;if(Array.isArray(U.current)&&0!==U.current.length){var t,r;const n=null===(t=e.getActiveStream)||void 0===t?void 0:t.call(e),i=null===n||void 0===n||null===(r=n.getId)||void 0===r?void 0:r.call(n);if(!i)return void console.log("[updateCurrentTime] Could not retrieve manifestId");const o=1e3*e.time(i);se(U.current,K,o,"l",i)}},ne=()=>{let e=u.current;if(Array.isArray(Z.current)&&0!==Z.current.length){var t,r;const n=null===(t=e.getActiveStream)||void 0===t?void 0:t.call(e),i=null===n||void 0===n||null===(r=n.getId)||void 0===r?void 0:r.call(n);if(!i)return void console.log("[updateCurrentTime] Could not retrieve manifestId");const o=1e3*e.time(i);se(Z.current,X,o,"r",i)}};(0,t.useEffect)(()=>{(()=>{var e,t;console.log("(LIN) initializePlayers() called."),console.log(ze().Version),l.current=ze().MediaPlayer().create(),l.current.updateSettings({streaming:{delay:{liveDelay:15},abr:{useDefaultABRRules:!0,movingAverageMethod:"ewma",initialBitrate:{audio:-1,video:500},autoSwitchBitrate:{audio:!0,video:!0}},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0}},debug:{logLevel:ze().Debug.LOG_LEVEL_NONE}}),te(l.current,null===(e=Be.k[r])||void 0===e?void 0:e.special_header),l.current.initialize(i.current,ae(h,"l"),!0,0),i.current.muted=!0,console.log("(LIN) initialize LP"),u.current=ze().MediaPlayer().create(),u.current.updateSettings({streaming:{delay:{liveDelay:15},abr:{useDefaultABRRules:!0,movingAverageMethod:"ewma",initialBitrate:{audio:-1,video:500},autoSwitchBitrate:{audio:!0,video:!0}},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0}},debug:{logLevel:ze().Debug.LOG_LEVEL_NONE}}),te(u.current,null===(t=Be.k[r])||void 0===t?void 0:t.special_header),u.current.initialize(o.current,ae(g,"r"),!0,0),o.current.muted=!0,console.log("(LIN) initialize RP"),a.current=setInterval(re,$),console.log("setIntervalLeft() "+a.current),s.current=setInterval(ne,$),console.log("setIntervalRight() "+s.current);const c=e=>{var t,r,n;if(console.error(e),20===(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.code))return void ue();const i=null===e||void 0===e||null===(r=e.event)||void 0===r||null===(n=r.response)||void 0===n?void 0:n.status;console.warn("[Dash Error] - HTTP ",i,e),[401,403,404].includes(i)&&(console.warn("[Dash Error] Triggering reinitialization due to HTTP ".concat(i)),ue())};l.current.on(ze().MediaPlayer.events.ERROR,c),u.current.on(ze().MediaPlayer.events.ERROR,c),l.current.on(ze().MediaPlayer.events.MANIFEST_LOADED,()=>{l.current.on(ze().MediaPlayer.events.PERIOD_SWITCH_STARTED,e=>{}),l.current.on(ze().MediaPlayer.events.STREAM_ACTIVATED,e=>{var t,r;const i=null===(t=e.streamInfo)||void 0===t?void 0:t.id;if(!i)return;const o=E.current;o&&o!==i&&S.current&&le("l"),E.current=i;const a=null===(r=l.current.getDashAdapter())||void 0===r?void 0:r.getMpd();if(!a)return;const s=ie(a,i);if(s.isAd){F(s.events),D(!0),n(e=>e+1);const e=s.events.some(e=>"clicktrough"===e.type&&e.ct);f.current=e,R.current&&(P(!0),fetch("./specials/index.json").then(e=>e.json()).then(e=>{const t=e.filter(e=>e.endsWith(".jpg")).sort().reverse()[0];C("./specials/".concat(t))}),R.current=!1),n(e=>e+1)}else F([]),D(!1),le("l"),P(!1),f.current=!1})}),u.current.on(ze().MediaPlayer.events.MANIFEST_LOADED,()=>{u.current.on(ze().MediaPlayer.events.PERIOD_SWITCH_STARTED,e=>{}),u.current.on(ze().MediaPlayer.events.STREAM_ACTIVATED,e=>{var t,r;const i=null===(t=e.streamInfo)||void 0===t?void 0:t.id;if(!i)return;const o=w.current;o&&o!==i&&T.current&&le("r"),w.current=i;const a=null===(r=u.current.getDashAdapter())||void 0===r?void 0:r.getMpd();if(!a)return;const s=ie(a,i);if(s.isAd){j(s.events),M(!0),n(e=>e+1);const e=s.events.some(e=>"clicktrough"===e.type&&e.ct);d.current=e,n(e=>e+1)}else j([]),M(!1),le("r"),d.current=!1})})})()},[h,g]),(0,t.useEffect)(()=>{});const ie=(e,t)=>{let r=!1,n=[];const i=null===e||void 0===e?void 0:e.manifest,o=((null===i||void 0===i?void 0:i.Period_asArray)||[]).find(e=>(null===e||void 0===e?void 0:e.id)===t);if(!o)return{isAd:!1,events:n};if(!o.EventStream_asArray)return{isAd:!1,events:n};const a=o.EventStream_asArray.find(e=>"com.synamedia.dai.tracking.v2"===(null===e||void 0===e?void 0:e.value)),s=o.EventStream_asArray.find(e=>"com.synamedia.dai.videoclick.v2"===(null===e||void 0===e?void 0:e.value));return a&&(r=!0,((e,t,r,n,i)=>{let o="",a="",s="",l="",u="",c=[],f="";for(let d=0;d<n.Event_asArray.length;d++)a=n.Event_asArray[d].Tracking_asArray[0].__cdata,f=n.Event_asArray[d].Tracking_asArray[0].event,c=new URLSearchParams(a),l=c.get("creativeId"),s=f.includes("impression")?"Impression":f.includes("start")?"Ad Start":f.includes("firstQuartile")?"First Quartile":f.includes("midpoint")?"Second Quartile":f.includes("thirdQuartile")?"Third Quartile":f.includes("complete")?"Fourth Quartile":"Unkknown",o={stream:d,id:r,pt:n.Event_asArray[d].presentationTime,type:s,url:a,reported:!1,advert:l,ct:""},t.push(o);if(i)for(let d=0;d<i.Event_asArray.length;d++)a=i.Event_asArray[d].VideoClicks_asArray[0].ClickTracking_asArray[0],u=i.Event_asArray[d].VideoClicks_asArray[0].ClickThrough_asArray[0],o={stream:r,id:r,pt:0,type:"clicktrough",url:a,reported:!1,advert:l,ct:u},t.push(o)})(0,n,o.id,a,s)),{isAd:r,events:n}};function oe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}const ae=(e,t)=>{let n="",i="";return"l"===t?(""===A.current&&(A.current=oe()),i=A.current):(""===I.current&&(I.current=oe()),i=I.current),""!==e&&(e.includes("?")?(n=e+"&sessionId=SYNAIRISDEMO_"+t+"_"+r.toString()+"_"+Math.floor((new Date).getTime()/1e3).toString(),n=n+"&deviceId="+i):n=e,console.log("buildURL: ",n)),n},se=(e,t,r,n,i)=>{for(let l=0;l<e.length;l++){var o,a,s;if((null===(o=e[l])||void 0===o?void 0:o.id)===i)r>=(null===(a=e[l])||void 0===a?void 0:a.pt)&&(null===(s=e[l])||void 0===s||!s.reported)&&(console.log("HTTP GET: "+n+" - "+e[l].advert+" - "+e[l].type+" - ",e[l].url),ce(e[l].url),e[l].reported=!0,t(t=>{const r=c({},t);switch(e[l].type){case"Impression":r.impression="\u2714";break;case"Ad Start":r.adstart="\u2714";break;case"First Quartile":r.firstQuartile="\u2714";break;case"Second Quartile":r.secondQuartile="\u2714";break;case"Third Quartile":r.thirdQuartile="\u2714";break;case"Fourth Quartile":r.completion="\u2714"}return r}))}},le=e=>{"l"===e&&K({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),"r"===e&&X({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),"rl"===e&&(K({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),X({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""})),n(e=>e+1)},ue=()=>{try{if(l&&u){var e,t;let n="";l.current.reset(),u.current.reset(),n=ae(h,"l"),te(l.current,null===(e=Be.k[r])||void 0===e?void 0:e.special_header),l.current.initialize(i.current,n,!1,0),n=ae(g,"r"),te(u.current,null===(t=Be.k[r])||void 0===t?void 0:t.special_header),u.current.initialize(o.current,n,!1,0)}G(!1),le()}catch(n){console.error("Error Handling Reinitialize:",n)}},ce=async e=>{try{return(await mn.get(e)).status}catch(t){return console.error("Error posting data:",t),-1}},fe=()=>{console.log("Normal click behavior triggered (left)");const e=U.current,t=E.current,r=e.find(e=>e.id===t&&"clicktrough"===e.type&&e.ct)||e.find(e=>"clicktrough"===e.type&&e.ct);r?(window.open(r.ct,"_blank"),console.log("HTTP GET: L - "+r.advert+" - "+r.type+" - ",r.url),ce(r.url)):console.log("No clickthrough URL found for L")},de=()=>{console.log("Normal click behavior triggered (right)");const e=Z.current,t=w.current,r=e.find(e=>e.id===t&&"clicktrough"===e.type&&e.ct)||e.find(e=>"clicktrough"===e.type&&e.ct);r?(window.open(r.ct,"_blank"),console.log("HTTP GET: R - "+r.advert+" - "+r.type+" - ",r.url),ce(r.url)):console.log("No clickthrough URL found for R")},he=()=>{console.log("Click-and-hold behavior triggered (left)");const e=U.current,t=E.current;let r="";const n=e.find(e=>e.id===t&&"clicktrough"===e.type&&e.ct)||e.find(e=>"clicktrough"===e.type&&e.ct);n?(r="http://localhost:3000/landing?assetId="+n.advert,window.open(r,"_blank"),console.log("HTTP GET: L - "+n.advert+" - "+n.type+" - ",r),ce(n.url)):console.log("No clickthrough URL found for L")},pe=()=>{console.log("Click-and-hold behavior triggered (right)");const e=Z.current,t=w.current;let r="";const n=e.find(e=>e.id===t&&"clicktrough"===e.type&&e.ct)||e.find(e=>"clicktrough"===e.type&&e.ct);n?(r="http://localhost:3000/landing?assetId="+n.advert,window.open(r,"_blank"),console.log("HTTP GET: R - "+n.advert+" - "+n.type+" - ",r),ce(n.url)):console.log("No clickthrough URL found for R")};return(0,Le.jsxs)("div",{className:"relative min-h-screen bg-cover bg-center font-poppins",style:{backgroundImage:"url('/SplashScreenBG.png')"},children:[(0,Le.jsx)("div",{className:"absolute inset-0 bg-white/35"}),(0,Le.jsxs)("div",{className:"relative z-10 text-white",children:[(0,Le.jsx)("div",{children:(0,Le.jsx)("h1",{className:"font-poppins font-bold text-center text-3xl",children:Be.k[r].great_title})}),(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)(wn,{title:Be.k[r].left_title,segment:Be.k[r].left_segment,flag:Be.k[r].left_flag,isAd:x,advertName:z}),(0,Le.jsx)("div",{children:(0,Le.jsx)(Sn,{labels:Y})}),(0,Le.jsxs)("div",{className:"relative inline-block overflow-hidden",style:{width:"750px",aspectRatio:"16 / 9"},children:[(0,Le.jsx)("video",{ref:i,controls:!0,style:{width:"100%",height:"100%",display:"block"}}),O&&(0,Le.jsx)("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,zIndex:12,pointerEvents:"none",clipPath:"polygon(0 0, 100% 0, 0 100%)",background:"linear-gradient(135deg,rgba(0,0,0,0.92) 0%,rgba(0,0,0,0.85) 25%,rgba(0,0,0,0.00) 60%)"},children:(0,Le.jsx)("img",{src:N,alt:"Latest Special",style:{position:"absolute",top:"15px",left:"15px",width:"280px",height:"220px",objectFit:"cover",borderRadius:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.5)",filter:"brightness(1.0) contrast(1.0)"}})})]})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)(wn,{title:Be.k[r].right_title,segment:Be.k[r].right_segment,flag:Be.k[r].right_flag,isAd:k,advertName:V}),(0,Le.jsx)("div",{children:(0,Le.jsx)(Sn,{labels:Q})}),(0,Le.jsx)("div",{children:(0,Le.jsx)("video",{ref:o,controls:!0,style:{width:"750px"}})})]})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("button",{onClick:ue,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Load/Reload"}),(0,Le.jsx)("button",{onClick:()=>{q?(i.current.pause(),o.current.pause(),G(!1),a.current&&(clearInterval(a.current),a.current=null),s.current&&(clearInterval(s.current),s.current=null)):(i.current.play(),o.current.play(),G(!0),a.current||(a.current=setInterval(re,$)),s.current||(s.current=setInterval(ne,$)))},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:q?"Pause":"Play"}),(0,Le.jsx)("button",{onClick:()=>{try{a.current&&(clearInterval(a.current),a.current=null),s.current&&(clearInterval(s.current),s.current=null),l&&u&&(l.current.reset(),u.current.reset()),i.current&&o.current&&(i.current.pause(),i.current.removeAttribute("src"),i.current.load(),o.current.pause(),o.current.removeAttribute("src"),o.current.load()),G(!1),le()}catch(e){console.error("Error Handling Stop:",e)}},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Stop"}),(0,Le.jsx)("button",{onMouseDown:()=>{J=(new Date).getTime()},onMouseUp:()=>{(new Date).getTime()-J<1e3?fe():he()},disabled:!f.current,className:"bg-blue-600 text-white px-4 py-2 rounded transition hover:bg-blue-700 disabled:bg-gray-400 disabled:text-gray-100 disabled:cursor-not-allowed",children:"Left player clickthrough"}),(0,Le.jsx)("button",{onMouseDown:()=>{ee=(new Date).getTime()},onMouseUp:()=>{(new Date).getTime()-ee<1e3?de():pe()},disabled:!d.current,className:"bg-blue-600 text-white px-4 py-2 rounded transition hover:bg-blue-700 disabled:bg-gray-400 disabled:text-gray-100 disabled:cursor-not-allowed",children:"Right player clickthrough"}),(0,Le.jsxs)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",onClick:()=>{if(i.current)if(y===Be.k[r].volume){let e=Number(y.replace(/[^\d.,-]+/g,"").replace(",","."))/100;i.current.volume=e,i.current.muted=!1,v("0%")}else i.current.volume=0,v(Be.k[r].volume)},children:["L: ",y]}),(0,Le.jsxs)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",onClick:()=>{if(o.current)if(_===Be.k[r].volume){let e=Number(_.replace(/[^\d.,-]+/g,"").replace(",","."))/100;o.current.volume=e,o.current.muted=!1,b("0%")}else o.current.volume=0,b(Be.k[r].volume)},children:["R: ",_]})]})]})]})};function An(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function In(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rn(e,t,r){In(e,t),t.set(e,r)}function Nn(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function Cn(e,t,r){return e.set(Nn(e,t),r),r}function On(e,t){return e.get(Nn(e,t))}const Pn=["context","forceRefresh"],xn=["host","port","socksProxy"];var Dn=Object.defineProperty,kn=Object.getOwnPropertyDescriptor,Mn=Object.getOwnPropertyNames,Ln=Object.prototype.hasOwnProperty,Fn=(e,t)=>()=>(e&&(t=e(e=0)),t),Un=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Bn=(e,t)=>{for(var r in t)Dn(e,r,{get:t[r],enumerable:!0})},jn=e=>((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of Mn(t))!Ln.call(e,i)&&i!==r&&Dn(e,i,{get:()=>t[i],enumerable:!(n=kn(t,i))||n.enumerable});return e})(Dn({},"__esModule",{value:!0}),e),Zn=Fn(()=>{}),qn={};function Gn(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function zn(){!ai||!si||(ai=!1,si.length?oi=si.concat(oi):li=-1,oi.length&&Hn())}function Hn(){if(!ai){var e=setTimeout(zn,0);ai=!0;for(var t=oi.length;t;){for(si=oi,oi=[];++li<t;)si&&si[li].run();li=-1,t=oi.length}si=null,ai=!1,clearTimeout(e)}}function Vn(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];oi.push(new Wn(e,t)),1===oi.length&&!ai&&setTimeout(Hn,0)}function Wn(e,t){this.fun=e,this.array=t}function Yn(){}function Kn(e){Gn("_linkedBinding")}function Qn(e){Gn("dlopen")}function Xn(){return[]}function $n(){return[]}function Jn(e,t){if(!e)throw new Error(t||"assertion error")}function ei(){return!1}function ti(){return no.now()/1e3}function ri(e){var t=Math.floor(.001*(Date.now()-no.now())),r=.001*no.now(),n=Math.floor(r)+t,i=Math.floor(r%1*1e9);return e&&(n-=e[0],(i-=e[1])<0&&(n--,i+=oo)),[n,i]}function ni(){return vo}function ii(e){return[]}Bn(qn,{_debugEnd:()=>Gi,_debugProcess:()=>qi,_events:()=>so,_eventsCount:()=>lo,_exiting:()=>Ri,_fatalExceptions:()=>Bi,_getActiveHandles:()=>$n,_getActiveRequests:()=>Xn,_kill:()=>Oi,_linkedBinding:()=>Kn,_maxListeners:()=>ao,_preload_modules:()=>to,_rawDebug:()=>Ti,_startProfilerIdleNotifier:()=>zi,_stopProfilerIdleNotifier:()=>Hi,_tickCallback:()=>Zi,abort:()=>Ki,addListener:()=>uo,allowedNodeEnvironmentFlags:()=>Fi,arch:()=>ci,argv:()=>hi,argv0:()=>eo,assert:()=>Jn,binding:()=>vi,browser:()=>Si,chdir:()=>Ei,config:()=>Ni,cpuUsage:()=>Pi,cwd:()=>bi,debugPort:()=>Ji,default:()=>vo,dlopen:()=>Qn,domain:()=>Ii,emit:()=>go,emitWarning:()=>yi,env:()=>di,execArgv:()=>pi,execPath:()=>$i,exit:()=>Mi,features:()=>Ui,hasUncaughtExceptionCaptureCallback:()=>ei,hrtime:()=>ri,kill:()=>ki,listeners:()=>ii,memoryUsage:()=>Di,moduleLoadList:()=>Ai,nextTick:()=>Vn,off:()=>fo,on:()=>ni,once:()=>co,openStdin:()=>Li,pid:()=>Qi,platform:()=>fi,ppid:()=>Xi,prependListener:()=>mo,prependOnceListener:()=>yo,reallyExit:()=>Ci,release:()=>wi,removeAllListeners:()=>po,removeListener:()=>ho,resourceUsage:()=>xi,setSourceMapsEnabled:()=>ro,setUncaughtExceptionCaptureCallback:()=>ji,stderr:()=>Wi,stdin:()=>Yi,stdout:()=>Vi,title:()=>ui,umask:()=>_i,uptime:()=>ti,version:()=>gi,versions:()=>mi});var oi,ai,si,li,ui,ci,fi,di,hi,pi,gi,mi,yi,vi,_i,bi,Ei,wi,Si,Ti,Ai,Ii,Ri,Ni,Ci,Oi,Pi,xi,Di,ki,Mi,Li,Fi,Ui,Bi,ji,Zi,qi,Gi,zi,Hi,Vi,Wi,Yi,Ki,Qi,Xi,$i,Ji,eo,to,ro,no,io,oo,ao,so,lo,uo,co,fo,ho,po,go,mo,yo,vo,_o=Fn(()=>{Zn(),Mo(),bo(),oi=[],ai=!1,li=-1,Wn.prototype.run=function(){this.fun.apply(null,this.array)},ui="browser",ci="x64",fi="browser",di={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},hi=["/usr/bin/node"],pi=[],gi="v16.8.0",mi={},yi=function(e,t){console.warn((t?t+": ":"")+e)},vi=function(e){Gn("binding")},_i=function(e){return 0},bi=function(){return"/"},Ei=function(e){},wi={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Si=!0,Ti=Yn,Ai=[],Ii={},Ri=!1,Ni={},Ci=Yn,Oi=Yn,xi=Pi=function(){return{}},Di=Pi,ki=Yn,Mi=Yn,Li=Yn,Fi={},Ui={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Bi=Yn,ji=Yn,Zi=Yn,qi=Yn,Gi=Yn,zi=Yn,Hi=Yn,Vi=void 0,Wi=void 0,Yi=void 0,Ki=Yn,Qi=2,Xi=1,$i="/bin/usr/node",Ji=9229,eo="node",to=[],ro=Yn,void 0===(no={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0}).now&&(io=Date.now(),no.timing&&no.timing.navigationStart&&(io=no.timing.navigationStart),no.now=()=>Date.now()-io),oo=1e9,ri.bigint=function(e){var t=ri(e);return typeof BigInt>"u"?t[0]*oo+t[1]:BigInt(t[0]*oo)+BigInt(t[1])},vo={version:gi,versions:mi,arch:ci,platform:fi,browser:Si,release:wi,_rawDebug:Ti,moduleLoadList:Ai,binding:vi,_linkedBinding:Kn,_events:so={},_eventsCount:lo=0,_maxListeners:ao=10,on:ni,addListener:uo=ni,once:co=ni,off:fo=ni,removeListener:ho=ni,removeAllListeners:po=ni,emit:go=Yn,prependListener:mo=ni,prependOnceListener:yo=ni,listeners:ii,domain:Ii,_exiting:Ri,config:Ni,dlopen:Qn,uptime:ti,_getActiveRequests:Xn,_getActiveHandles:$n,reallyExit:Ci,_kill:Oi,cpuUsage:Pi,resourceUsage:xi,memoryUsage:Di,kill:ki,exit:Mi,openStdin:Li,allowedNodeEnvironmentFlags:Fi,assert:Jn,features:Ui,_fatalExceptions:Bi,setUncaughtExceptionCaptureCallback:ji,hasUncaughtExceptionCaptureCallback:ei,emitWarning:yi,nextTick:Vn,_tickCallback:Zi,_debugProcess:qi,_debugEnd:Gi,_startProfilerIdleNotifier:zi,_stopProfilerIdleNotifier:Hi,stdout:Vi,stdin:Yi,stderr:Wi,abort:Ki,umask:_i,chdir:Ei,cwd:bi,env:di,title:ui,argv:hi,execArgv:pi,pid:Qi,ppid:Xi,execPath:$i,debugPort:Ji,hrtime:ri,argv0:eo,_preload_modules:to,setSourceMapsEnabled:ro}}),bo=Fn(()=>{_o()});function Eo(){if(Ro)return Io;Ro=!0;let e=function(){if(So)return wo;So=!0,wo.byteLength=function(e){var t=o(e),r=t[0],n=t[1];return 3*(r+n)/4-n},wo.toByteArray=function(e){var n,i,a=o(e),s=a[0],l=a[1],u=new r(function(e,t,r){return 3*(t+r)/4-r}(0,s,l)),c=0,f=l>0?s-4:s;for(i=0;i<f;i+=4)n=t[e.charCodeAt(i)]<<18|t[e.charCodeAt(i+1)]<<12|t[e.charCodeAt(i+2)]<<6|t[e.charCodeAt(i+3)],u[c++]=n>>16&255,u[c++]=n>>8&255,u[c++]=255&n;return 2===l&&(n=t[e.charCodeAt(i)]<<2|t[e.charCodeAt(i+1)]>>4,u[c++]=255&n),1===l&&(n=t[e.charCodeAt(i)]<<10|t[e.charCodeAt(i+1)]<<4|t[e.charCodeAt(i+2)]>>2,u[c++]=n>>8&255,u[c++]=255&n),u},wo.fromByteArray=function(t){for(var r,n=t.length,i=n%3,o=[],a=16383,l=0,u=n-i;l<u;l+=a)o.push(s(t,l,l+a>u?u:l+a));return 1===i?(r=t[n-1],o.push(e[r>>2]+e[r<<4&63]+"==")):2===i&&(r=(t[n-2]<<8)+t[n-1],o.push(e[r>>10]+e[r>>4&63]+e[r<<2&63]+"=")),o.join("")};for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)e[i]=n[i],t[n.charCodeAt(i)]=i;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function a(t){return e[t>>18&63]+e[t>>12&63]+e[t>>6&63]+e[63&t]}function s(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(a(n));return i.join("")}return t[45]=62,t[95]=63,wo}(),t=(Ao||(Ao=!0,To.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,f=r?i-1:0,d=r?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=u}return(h?-1:1)*a*Math.pow(2,o-n)},To.write=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+f>=1?d/l:d*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+h]=255&a,h+=p,a/=256,u-=8);e[r+h-p]|=128*g}),To),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Io.Buffer=o,Io.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},Io.INSPECT_MAX_BYTES=50;let n=2147483647;function i(e){if(e>n)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return a(e,t,r)}function a(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=0|d(e,t),n=i(r),a=n.write(e,t);return a!==r&&(n=n.slice(0,a)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(V(e,Uint8Array)){let t=new Uint8Array(e);return c(t.buffer,t.byteOffset,t.byteLength)}return u(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(V(e,SharedArrayBuffer)||e&&V(e.buffer,SharedArrayBuffer)))return c(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);let a=function(e){if(o.isBuffer(e)){let t=0|f(e.length),r=i(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||W(e.length)?i(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(a)return a;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return s(e),i(e<0?0:0|f(e))}function u(e){let t=e.length<0?0:0|f(e.length),r=i(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function c(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,o.prototype),n}function f(e){if(e>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function d(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(i)return n?-1:G(e).length;t=(""+t).toLowerCase(),i=!0}}function h(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return w(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function p(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),W(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,i){let o,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let n=-1;for(o=r;o<s;o++)if(u(e,o)===u(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===l)return n*a}else-1!==n&&(o-=o-n),n=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){let r=!0;for(let n=0;n<l;n++)if(u(e,o+n)!==u(t,n)){r=!1;break}if(r)return o}return-1}function y(e,t,r,n){r=Number(r)||0;let i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;let o,a=t.length;for(n>a/2&&(n=a/2),o=0;o<n;++o){let n=parseInt(t.substr(2*o,2),16);if(W(n))return o;e[r+o]=n}return o}function v(e,t,r,n){return H(G(t,e.length-r),e,r,n)}function _(e,t,r,n){return H(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r,n){return H(z(t),e,r,n)}function E(e,t,r,n){return H(function(e,t){let r,n,i,o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function w(t,r,n){return 0===r&&n===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(r,n))}function S(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128===(192&r)&&(l=(31&t)<<6|63&r,l>127&&(o=l));break;case 3:r=e[i+1],n=e[i+2],128===(192&r)&&128===(192&n)&&(l=(15&t)<<12|(63&r)<<6|63&n,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:r=e[i+1],n=e[i+2],s=e[i+3],128===(192&r)&&128===(192&n)&&128===(192&s)&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=a}return function(e){let t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=T));return r}(n)}Io.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return a(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return function(e,t,r){return s(e),e<=0?i(e):void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)}(e,t,r)},o.allocUnsafe=function(e){return l(e)},o.allocUnsafeSlow=function(e){return l(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(V(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),V(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(V(t,Uint8Array))i+t.length>n.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!o.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},o.byteLength=d,o.prototype._isBuffer=!0,o.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)p(this,t,t+1);return this},o.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},o.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},o.prototype.toString=function(){let e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):h.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let e="",t=Io.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(e,t,r,n,i){if(V(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let a=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),l=Math.min(a,s),u=this.slice(n,i),c=e.slice(t,r);for(let o=0;o<l;++o)if(u[o]!==c[o]){a=u[o],s=c[o];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}let i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return v(this,e,t,r);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return b(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};let T=4096;function A(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function I(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function R(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=t;o<r;++o)i+=Y[e[o]];return i}function N(e,t,r){let n=e.slice(t,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function C(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,n,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function P(e,t,r,n,i){B(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function x(e,t,r,n,i){B(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function D(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function k(e,r,n,i,o){return r=+r,n>>>=0,o||D(e,0,n,4),t.write(e,r,n,i,23,4),n+4}function M(e,r,n,i,o){return r=+r,n>>>=0,o||D(e,0,n,8),t.write(e,r,n,i,52,8),n+8}o.prototype.slice=function(e,t){let r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=K(function(e){j(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&Z(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))}),o.prototype.readBigUInt64BE=K(function(e){j(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&Z(e,this.length-8);let n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||C(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||C(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=K(function(e){j(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&Z(e,this.length-8);let n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),o.prototype.readBigInt64BE=K(function(e){j(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&Z(e,this.length-8);let n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)}),o.prototype.readFloatLE=function(e,r){return e>>>=0,r||C(e,4,this.length),t.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,r){return e>>>=0,r||C(e,4,this.length),t.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,r){return e>>>=0,r||C(e,8,this.length),t.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,r){return e>>>=0,r||C(e,8,this.length),t.read(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){O(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){O(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=K(function(e){return P(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=K(function(e){return x(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);O(this,e,t,r,n-1,-n)}let i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);O(this,e,t,r,n-1,-n)}let i=r-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=K(function(e){return P(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=K(function(e){return x(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),!n&&0!==n&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let a=o.isBuffer(e)?e:o.from(e,n),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=a[i%s]}return this};let L={};function F(e,t,r){L[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function U(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function B(e,t,r,n,i,o){if(e>r||e<t){let r,n="bigint"==typeof t?"n":"";throw r=0===t||t===BigInt(0)?">= 0".concat(n," and < 2").concat(n," ** ").concat(8*(o+1)).concat(n):">= -(2".concat(n," ** ").concat(8*(o+1)-1).concat(n,") and < 2 ** ").concat(8*(o+1)-1).concat(n),new L.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,r){j(t,"offset"),(void 0===e[t]||void 0===e[t+r])&&Z(t,e.length-(r+1))}(n,i,o)}function j(e,t){if("number"!=typeof e)throw new L.ERR_INVALID_ARG_TYPE(t,"number",e)}function Z(e,t,r){throw Math.floor(e)!==e?(j(e,r),new L.ERR_OUT_OF_RANGE("offset","an integer",e)):t<0?new L.ERR_BUFFER_OUT_OF_BOUNDS:new L.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(t),e)}F("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),F("ERR_INVALID_ARG_TYPE",function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)},TypeError),F("ERR_OUT_OF_RANGE",function(e,t,r){let n='The value of "'.concat(e,'" is out of range.'),i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=U(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=U(i)),i+="n"),n+=" It must be ".concat(t,". Received ").concat(i),n},RangeError);let q=/[^+/0-9A-Za-z-_]/g;function G(e,t){t=t||1/0;let r,n=e.length,i=null,o=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(t){return e.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(t))}function H(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function V(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function W(e){return e!==e}let Y=function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function K(e){return typeof BigInt>"u"?Q:e}function Q(){throw new Error("BigInt not supported")}return Io}var wo,So,To,Ao,Io,Ro,No=Fn(()=>{Zn(),Mo(),bo(),wo={},So=!1,To={},Ao=!1,Io={},Ro=!1}),Co={};Bn(Co,{Buffer:()=>Po,INSPECT_MAX_BYTES:()=>xo,default:()=>Oo,kMaxLength:()=>Do});var Oo,Po,xo,Do,ko=Fn(()=>{Zn(),Mo(),bo(),No(),(Oo=Eo()).Buffer,Oo.SlowBuffer,Oo.INSPECT_MAX_BYTES,Oo.kMaxLength,Po=Oo.Buffer,xo=Oo.INSPECT_MAX_BYTES,Do=Oo.kMaxLength}),Mo=Fn(()=>{ko()}),Lo=Un((e,t)=>{Zn(),Mo(),bo();var r=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got ".concat(typeof e));let t="";for(let r=0;r<e.length;r++)t+="    ".concat(e[r].stack,"\n");super(t),this.name="AggregateError",this.errors=e}};t.exports={AggregateError:r,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error:Error,FunctionPrototypeCall(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return e.call(t,...n)},FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number:Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise:Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String:String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol:Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean:Boolean,Uint8Array:Uint8Array}}),Fo=Un((e,t)=>{Zn(),Mo(),bo(),t.exports={format(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.replace(/%([sdifj])/g,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,o]=t,a=r.shift();return"f"===o?a.toFixed(6):"j"===o?JSON.stringify(a):"s"===o&&"object"==typeof a?"".concat(a.constructor!==Object?a.constructor.name:""," {}").trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return'"'.concat(e,'"');if(!e.includes("`")&&!e.includes("${"))return"`".concat(e,"`")}return"'".concat(e,"'");case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return"".concat(String(e),"n");case"boolean":case"undefined":return String(e);case"object":return"{}"}}}}),Uo=Un((e,t)=>{Zn(),Mo(),bo();var{format:r,inspect:n}=Fo(),{AggregateError:i}=Lo(),o=globalThis.AggregateError||i,a=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,u={};function c(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function f(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function d(e,t,n){n||(n=Error);class i extends n{constructor(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];super(function(e,t,n){if("function"==typeof t)return c(t.length<=n.length,"Code: ".concat(e,"; The provided arguments length (").concat(n.length,") does not match the required ones (").concat(t.length,").")),t(...n);let i=(t.match(/%[dfijoOs]/g)||[]).length;return c(i===n.length,"Code: ".concat(e,"; The provided arguments length (").concat(n.length,") does not match the required ones (").concat(i,").")),0===n.length?t:r(t,...n)}(e,t,i))}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}Object.defineProperties(i.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[a]=!0,u[e]=i}function h(e){let t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}var p=class extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0!==t&&"object"!=typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}};d("ERR_ASSERTION","%s",Error),d("ERR_INVALID_ARG_TYPE",(e,t,r)=>{c("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let i="The ";e.endsWith(" argument")?i+="".concat(e," "):i+='"'.concat(e,'" ').concat(e.includes(".")?"property":"argument"," "),i+="must be ";let o=[],a=[],u=[];for(let n of t)c("string"==typeof n,"All expected entries have to be of type string"),s.includes(n)?o.push(n.toLowerCase()):l.test(n)?a.push(n):(c("object"!==n,'The value "object" should be written as "Object"'),u.push(n));if(a.length>0){let e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),a.push("Object"))}if(o.length>0){switch(o.length){case 1:i+="of type ".concat(o[0]);break;case 2:i+="one of type ".concat(o[0]," or ").concat(o[1]);break;default:{let e=o.pop();i+="one of type ".concat(o.join(", "),", or ").concat(e)}}(a.length>0||u.length>0)&&(i+=" or ")}if(a.length>0){switch(a.length){case 1:i+="an instance of ".concat(a[0]);break;case 2:i+="an instance of ".concat(a[0]," or ").concat(a[1]);break;default:{let e=a.pop();i+="an instance of ".concat(a.join(", "),", or ").concat(e)}}u.length>0&&(i+=" or ")}switch(u.length){case 0:break;case 1:u[0].toLowerCase()!==u[0]&&(i+="an "),i+="".concat(u[0]);break;case 2:i+="one of ".concat(u[0]," or ").concat(u[1]);break;default:{let e=u.pop();i+="one of ".concat(u.join(", "),", or ").concat(e)}}if(null==r)i+=". Received ".concat(r);else if("function"==typeof r&&r.name)i+=". Received function ".concat(r.name);else if("object"==typeof r){var f;if(null!==(f=r.constructor)&&void 0!==f&&f.name)i+=". Received an instance of ".concat(r.constructor.name);else{let e=n(r,{depth:-1});i+=". Received ".concat(e)}}else{let e=n(r,{colors:!1});e.length>25&&(e="".concat(e.slice(0,25),"...")),i+=". Received type ".concat(typeof r," (").concat(e,")")}return i},TypeError),d("ERR_INVALID_ARG_VALUE",function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid",i=n(t);return i.length>128&&(i=i.slice(0,128)+"..."),"The ".concat(e.includes(".")?"property":"argument"," '").concat(e,"' ").concat(r,". Received ").concat(i)},TypeError),d("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;let i=null!=r&&null!==(n=r.constructor)&&void 0!==n&&n.name?"instance of ".concat(r.constructor.name):"type ".concat(typeof r);return"Expected ".concat(e,' to be returned from the "').concat(t,'" function but got ').concat(i,".")},TypeError),d("ERR_MISSING_ARGS",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];c(t.length>0,"At least one arg needs to be specified");let n,i=t.length;switch(t=(Array.isArray(t)?t:[t]).map(e=>'"'.concat(e,'"')).join(" or "),i){case 1:n+="The ".concat(t[0]," argument");break;case 2:n+="The ".concat(t[0]," and ").concat(t[1]," arguments");break;default:{let e=t.pop();n+="The ".concat(t.join(", "),", and ").concat(e," arguments")}}return"".concat(n," must be specified")},TypeError),d("ERR_OUT_OF_RANGE",(e,t,r)=>{let i;if(c(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>2**32)i=f(String(r));else if("bigint"==typeof r){i=String(r);let e=BigInt(2)**BigInt(32);(r>e||r<-e)&&(i=f(i)),i+="n"}else i=n(r);return'The value of "'.concat(e,'" is out of range. It must be ').concat(t,". Received ").concat(i)},RangeError),d("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),d("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),d("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),d("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),d("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),d("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),d("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),d("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),d("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),d("ERR_STREAM_WRITE_AFTER_END","write after end",Error),d("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError:p,aggregateTwoErrors:h(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let r=new o([t,e],t.message);return r.code=t.code,r}return e||t}),hideStackFrames:h,codes:u}}),Bo=Un((e,t)=>{Zn(),Mo(),bo();var{AbortController:r,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;t.exports=r,t.exports.AbortSignal=n,t.exports.default=r}),jo={};function Zo(){if(Go)return qo;Go=!0;var e,t="object"==typeof Reflect?Reflect:null,r=t&&"function"==typeof t.apply?t.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!==e};function i(){i.init.call(this)}(qo=i).once=function(e,t){return new Promise(function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}p(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&p(e,"error",t,r)}(e,i,{once:!0})})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function s(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var i,o,l;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),l=o[t]),void 0===l)l=o[t]=r,++e._eventsCount;else if("function"==typeof l?l=o[t]=n?[r,l]:[l,r]:n?l.unshift(r):l.push(r),(i=s(e))>0&&l.length>i&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=l.length,function(e){console&&console.warn&&console.warn(e)}(u)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=u.bind(n);return i.listener=r,n.wrapFn=i,i}function f(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):h(i,i.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function h(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function p(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)})}}return Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return s(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var u=l.length,c=h(l,u);for(n=0;n<u;++n)r(c[n],this,t)}return!0},i.prototype.addListener=function(e,t){return l(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return l(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,c(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,c(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},i.prototype.listenerCount=d,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},qo}Bn(jo,{EventEmitter:()=>Ho,default:()=>zo,defaultMaxListeners:()=>Vo,init:()=>Wo,listenerCount:()=>Yo,on:()=>Ko,once:()=>Qo});var qo,Go,zo,Ho,Vo,Wo,Yo,Ko,Qo,Xo=Fn(()=>{Zn(),Mo(),bo(),qo={},Go=!1,(zo=Zo()).once,zo.once=function(e,t){return new Promise((r,n)=>{function i(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];void 0!==o&&e.removeListener("error",o),r(n)}let o;"error"!==t&&(o=t=>{e.removeListener(name,i),n(t)},e.once("error",o)),e.once(t,i)})},zo.on=function(e,t){let r=[],n=[],i=null,o=!1,a={async next(){let e=r.shift();if(e)return createIterResult(e,!1);if(i){let e=Promise.reject(i);return i=null,e}return o?createIterResult(void 0,!0):new Promise((e,t)=>n.push({resolve:e,reject:t}))},async return(){e.removeListener(t,s),e.removeListener("error",l),o=!0;for(let e of n)e.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(r){i=r,e.removeListener(t,s),e.removeListener("error",l)},[Symbol.asyncIterator](){return this}};return e.on(t,s),e.on("error",l),a;function s(){let e=n.shift();for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];e?e.resolve(createIterResult(i,!1)):r.push(i)}function l(e){o=!0;let t=n.shift();t?t.reject(e):i=e,a.return()}},({EventEmitter:Ho,defaultMaxListeners:Vo,init:Wo,listenerCount:Yo,on:Ko,once:Qo}=zo)}),$o=Un((e,t)=>{Zn(),Mo(),bo();var r=(ko(),jn(Co)),{format:n,inspect:i}=Fo(),{codes:{ERR_INVALID_ARG_TYPE:o}}=Uo(),{kResistStopPropagation:a,AggregateError:s,SymbolDispose:l}=Lo(),u=globalThis.AbortSignal||Bo().AbortSignal,c=globalThis.AbortController||Bo().AbortController,f=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||r.Blob,h=typeof d<"u"?function(e){return e instanceof d}:function(e){return!1},p=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new o(t,"AbortSignal",e)};t.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t||(t=!0,e.apply(this,n))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}},promisify:e=>new Promise((t,r)=>{e(function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return e?r(e):t(...i)})}),debuglog:()=>function(){},format:n,inspect:i,types:{isAsyncFunction:e=>e instanceof f,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:h,deprecate:(e,t)=>e,addAbortListener:(Xo(),jn(jo)).addAbortListener||function(e,t){if(void 0===e)throw new o("signal","AbortSignal",e);let r;return p(e,"signal"),((e,t)=>{if("function"!=typeof e)throw new o(t,"Function",e)})(t,"listener"),e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[a]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[l](){var e;null===(e=r)||void 0===e||e()}}},AbortSignalAny:u.any||function(e){if(1===e.length)return e[0];let t=new c,r=()=>t.abort();return e.forEach(e=>{p(e,"signals"),e.addEventListener("abort",r,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",r))},{once:!0}),t.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),Jo=Un((e,t)=>{Zn(),Mo(),bo();var{ArrayIsArray:r,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:i,ArrayPrototypeMap:o,NumberIsInteger:a,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:u,NumberParseInt:c,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:d,String:h,StringPrototypeToUpperCase:p,StringPrototypeTrim:g}=Lo(),{hideStackFrames:m,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:v,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:b,ERR_UNKNOWN_SIGNAL:E}}=Uo(),{normalizeEncoding:w}=$o(),{isAsyncFunction:S,isArrayBufferView:T}=$o().types,A={};var I=/^[0-7]+$/;var R=m(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l;if("number"!=typeof e)throw new v(t,"number",e);if(!a(e))throw new b(t,"an integer",e);if(e<r||e>n)throw new b(t,">= ".concat(r," && <= ").concat(n),e)}),N=m(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-2147483648,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2147483647;if("number"!=typeof e)throw new v(t,"number",e);if(!a(e))throw new b(t,"an integer",e);if(e<r||e>n)throw new b(t,">= ".concat(r," && <= ").concat(n),e)}),C=m(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"!=typeof e)throw new v(t,"number",e);if(!a(e))throw new b(t,"an integer",e);let n=r?1:0,i=4294967295;if(e<n||e>i)throw new b(t,">= ".concat(n," && <= ").concat(i),e)});function O(e,t){if("string"!=typeof e)throw new v(t,"string",e)}var P=m((e,t,r)=>{if(!n(r,e)){let n="must be one of: "+i(o(r,e=>"string"==typeof e?"'".concat(e,"'"):h(e)),", ");throw new _(t,e,n)}});function x(e,t){if("boolean"!=typeof e)throw new v(t,"boolean",e)}function D(e,t,r){return null!=e&&f(e,t)?e[t]:r}var k=m(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=D(n,"allowArray",!1),o=D(n,"allowFunction",!1);if(!D(n,"nullable",!1)&&null===e||!i&&r(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new v(t,"Object",e)}),M=m((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new v(t,"a dictionary",e)}),L=m(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!r(e))throw new v(t,"Array",e);if(e.length<n){let r="must be longer than ".concat(n);throw new _(t,e,r)}});var F=m(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"buffer";if(!T(e))throw new v(t,["Buffer","TypedArray","DataView"],e)});var U=m((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new v(t,"AbortSignal",e)}),B=m((e,t)=>{if("function"!=typeof e)throw new v(t,"Function",e)}),j=m((e,t)=>{if("function"!=typeof e||S(e))throw new v(t,"Function",e)}),Z=m((e,t)=>{if(void 0!==e)throw new v(t,"undefined",e)});var q=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function G(e,t){if(typeof e>"u"||!d(q,e))throw new _(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if(typeof e>"u"&&(e=r),"string"==typeof e){if(null===d(I,e))throw new _(t,e,"must be a 32-bit unsigned integer or an octal string");e=c(e,8)}return C(e,t),e},validateArray:L,validateStringArray:function(e,t){L(e,t);for(let r=0;r<e.length;r++)O(e[r],"".concat(t,"[").concat(r,"]"))},validateBooleanArray:function(e,t){L(e,t);for(let r=0;r<e.length;r++)x(e[r],"".concat(t,"[").concat(r,"]"))},validateAbortSignalArray:function(e,t){L(e,t);for(let r=0;r<e.length;r++){let n=e[r],i="".concat(t,"[").concat(r,"]");if(null==n)throw new v(i,"AbortSignal",n);U(n,i)}},validateBoolean:x,validateBuffer:F,validateDictionary:M,validateEncoding:function(e,t){let r=w(t),n=e.length;if("hex"===r&&n%2!==0)throw new _("encoding",t,"is invalid for data of length ".concat(n))},validateFunction:B,validateInt32:N,validateInteger:R,validateNumber:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if("number"!=typeof e)throw new v(t,"number",e);if(null!=r&&e<r||null!=n&&e>n||(null!=r||null!=n)&&s(e))throw new b(t,"".concat(null!=r?">= ".concat(r):"").concat(null!=r&&null!=n?" && ":"").concat(null!=n?"<= ".concat(n):""),e)},validateObject:k,validateOneOf:P,validatePlainFunction:j,validatePort:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Port",r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===g(e).length||+e!==+e>>>0||e>65535||0===e&&!r)throw new y(t,e,r);return 0|e},validateSignalName:function(e){if(O(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"signal"),void 0===A[e])throw void 0!==A[p(e)]?new E(e+" (signals must use all capital letters)"):new E(e)},validateString:O,validateUint32:C,validateUndefined:Z,validateUnion:function(e,t,r){if(!n(r,e))throw new v(t,"('".concat(i(r,"|"),"')"),e)},validateAbortSignal:U,validateLinkHeaderValue:function(e){if("string"==typeof e)return G(e,"hints"),e;if(r(e)){let t=e.length,r="";if(0===t)return r;for(let n=0;n<t;n++){let i=e[n];G(i,"hints"),r+=i,n!==t-1&&(r+=", ")}return r}throw new _("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}}),ea=Un((e,t)=>{Zn(),Mo(),bo();var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(n){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,u=[],c=!1,f=-1;function d(){!c||!l||(c=!1,l.length?u=l.concat(u):f=-1,u.length&&h())}function h(){if(!c){var e=s(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(r){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1===u.length&&!c&&s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}),ta=Un((e,t)=>{Zn(),Mo(),bo();var{SymbolAsyncIterator:r,SymbolIterator:n,SymbolFor:i}=Lo(),o=i("nodejs.stream.destroyed"),a=i("nodejs.stream.errored"),s=i("nodejs.stream.readable"),l=i("nodejs.stream.writable"),u=i("nodejs.stream.disturbed"),c=i("nodejs.webstream.isClosedPromise"),f=i("nodejs.webstream.controllerErrorFunction");function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(r=e._readableState)||void 0===r?void 0:r.readable)||e._writableState&&!e._readableState)}function h(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function p(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function g(e){return!(!e||p(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function m(e){return!(!e||p(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function y(e){return!(!e||p(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function v(e){if(!p(e))return null;let t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[o]||null!=n&&n.destroyed)}function _(e){if(!h(e))return null;if(!0===e.writableEnded)return!0;let t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null===t||void 0===t?void 0:t.ended)?null:t.ended)}function b(e,t){if(!d(e))return null;let r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null===r||void 0===r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function E(e){return e&&null!=e[s]?e[s]:"boolean"!=typeof(null===e||void 0===e?void 0:e.readable)?null:!v(e)&&(d(e)&&e.readable&&!b(e))}function w(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null===e||void 0===e?void 0:e.writable)?null:!v(e)&&(h(e)&&e.writable&&!_(e))}function S(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function T(e){return"boolean"==typeof e._sent100&&S(e)}t.exports={isDestroyed:v,kIsDestroyed:o,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[u])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:u,isErrored:function(e){var t,r,n,i,o,s,l,u,c,f;return!(!e||!(null!==(t=null!==(r=null!==(n=null!==(i=null!==(o=null!==(s=e[a])&&void 0!==s?s:e.readableErrored)&&void 0!==o?o:e.writableErrored)&&void 0!==i?i:null===(l=e._readableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==n?n:null===(u=e._writableState)||void 0===u?void 0:u.errorEmitted)&&void 0!==r?r:null===(c=e._readableState)||void 0===c?void 0:c.errored)&&void 0!==t?t:null!==(f=e._writableState)&&void 0!==f&&f.errored))},kIsErrored:a,isReadable:E,kIsReadable:s,kIsClosedPromise:c,kControllerErrorFunction:f,kIsWritable:l,isClosed:function(e){if(!p(e))return null;if("boolean"==typeof e.closed)return e.closed;let t=e._writableState,r=e._readableState;return"boolean"==typeof(null===t||void 0===t?void 0:t.closed)||"boolean"==typeof(null===r||void 0===r?void 0:r.closed)?(null===t||void 0===t?void 0:t.closed)||(null===r||void 0===r?void 0:r.closed):"boolean"==typeof e._closed&&S(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return p(e)?!!v(e)||!(!1!==(null===t||void 0===t?void 0:t.readable)&&E(e)||!1!==(null===t||void 0===t?void 0:t.writable)&&w(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[r]:!1===t?"function"==typeof e[n]:"function"==typeof e[r]||"function"==typeof e[n])},isReadableNodeStream:d,isReadableStream:g,isReadableEnded:function(e){if(!d(e))return null;if(!0===e.readableEnded)return!0;let t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null===t||void 0===t?void 0:t.ended)?null:t.ended)},isReadableFinished:b,isReadableErrored:function(e){var t,r;return p(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream:p,isWebStream:function(e){return g(e)||m(e)||y(e)},isWritable:w,isWritableNodeStream:h,isWritableStream:m,isWritableEnded:_,isWritableFinished:function(e,t){if(!h(e))return null;if(!0===e.writableFinished)return!0;let r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null===r||void 0===r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return p(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:T,willEmitClose:function(e){if(!p(e))return null;let t=e._writableState,r=e._readableState,n=t||r;return!n&&T(e)||!!(n&&n.autoDestroy&&n.emitClose&&!1===n.closed)},isTransformStream:y}}),ra=Un((e,t)=>{Zn(),Mo(),bo();var r,n=ea(),{AbortError:i,codes:o}=Uo(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:s}=o,{kEmptyObject:l,once:u}=$o(),{validateAbortSignal:c,validateFunction:f,validateObject:d,validateBoolean:h}=Jo(),{Promise:p,PromisePrototypeThen:g,SymbolDispose:m}=Lo(),{isClosed:y,isReadable:v,isReadableNodeStream:_,isReadableStream:b,isReadableFinished:E,isReadableErrored:w,isWritable:S,isWritableNodeStream:T,isWritableStream:A,isWritableFinished:I,isWritableErrored:R,isNodeStream:N,willEmitClose:C,kIsClosedPromise:O}=ta();var P=()=>{};function x(e,t,o){var h,p;if(2===arguments.length?(o=t,t=l):null==t?t=l:d(t,"options"),f(o,"callback"),c(t.signal,"options.signal"),o=u(o),b(e)||A(e))return function(e,t,o){let a=!1,s=P;if(t.signal)if(s=()=>{a=!0,o.call(e,new i(void 0,{cause:t.signal.reason}))},t.signal.aborted)n.nextTick(s);else{let n=(r=r||$o().addAbortListener)(t.signal,s),i=o;o=u(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];n[m](),i.apply(e,r)})}let l=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];a||n.nextTick(()=>o.apply(e,r))};return g(e[O].promise,l,l),P}(e,t,o);if(!N(e))throw new a("stream",["ReadableStream","WritableStream","Stream"],e);let x=null!==(h=t.readable)&&void 0!==h?h:_(e),D=null!==(p=t.writable)&&void 0!==p?p:T(e),k=e._writableState,M=e._readableState,L=()=>{e.writable||B()},F=C(e)&&_(e)===x&&T(e)===D,U=I(e,!1),B=()=>{U=!0,e.destroyed&&(F=!1),(!F||e.readable&&!x)&&(!x||j)&&o.call(e)},j=E(e,!1),Z=()=>{j=!0,e.destroyed&&(F=!1),(!F||e.writable&&!D)&&(!D||U)&&o.call(e)},q=t=>{o.call(e,t)},G=y(e),z=()=>{G=!0;let t=R(e)||w(e);return t&&"boolean"!=typeof t?o.call(e,t):x&&!j&&_(e,!0)&&!E(e,!1)?o.call(e,new s):!D||U||I(e,!1)?void o.call(e):o.call(e,new s)},H=()=>{G=!0;let t=R(e)||w(e);if(t&&"boolean"!=typeof t)return o.call(e,t);o.call(e)},V=()=>{e.req.on("finish",B)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?D&&!k&&(e.on("end",L),e.on("close",L)):(e.on("complete",B),F||e.on("abort",z),e.req?V():e.on("request",V)),!F&&"boolean"==typeof e.aborted&&e.on("aborted",z),e.on("end",Z),e.on("finish",B),!1!==t.error&&e.on("error",q),e.on("close",z),G?n.nextTick(z):null!=k&&k.errorEmitted||null!=M&&M.errorEmitted?F||n.nextTick(H):(!x&&(!F||v(e))&&(U||!1===S(e))||!D&&(!F||S(e))&&(j||!1===v(e))||M&&e.req&&e.aborted)&&n.nextTick(H);let W=()=>{o=P,e.removeListener("aborted",z),e.removeListener("complete",B),e.removeListener("abort",z),e.removeListener("request",V),e.req&&e.req.removeListener("finish",B),e.removeListener("end",L),e.removeListener("close",L),e.removeListener("finish",B),e.removeListener("end",Z),e.removeListener("error",q),e.removeListener("close",z)};if(t.signal&&!G){let a=()=>{let r=o;W(),r.call(e,new i(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)n.nextTick(a);else{let n=(r=r||$o().addAbortListener)(t.signal,a),i=o;o=u(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];n[m](),i.apply(e,r)})}}return W}t.exports=x,t.exports.finished=function(e,t){var r;let n=!1;return null===t&&(t=l),null!==(r=t)&&void 0!==r&&r.cleanup&&(h(t.cleanup,"cleanup"),n=t.cleanup),new p((r,i)=>{let o=x(e,t,e=>{n&&o(),e?i(e):r()})})}}),na=Un((e,t)=>{Zn(),Mo(),bo();var r=ea(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:o}=Uo(),{Symbol:a}=Lo(),{kIsDestroyed:l,isDestroyed:u,isFinished:c,isServerRequest:f}=ta(),d=a("kDestroy"),h=a("kConstruct");function p(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function g(e,t,n){let i=!1;function o(t){if(i)return;i=!0;let o=e._readableState,a=e._writableState;p(t,a,o),a&&(a.closed=!0),o&&(o.closed=!0),"function"==typeof n&&n(t),t?r.nextTick(m,e,t):r.nextTick(y,e)}try{e._destroy(t||null,o)}catch(s){o(s)}}function m(e,t){v(e,t),y(e)}function y(e){let t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function v(e,t){let r=e._readableState,n=e._writableState;null!=n&&n.errorEmitted||null!=r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function _(e,t,n){let i=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=i&&i.destroyed)return this;null!=i&&i.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),i&&!i.errored&&(i.errored=t),n?r.nextTick(v,e,t):v(e,t))}function b(e){let t=!1;function n(n){if(t)return void _(e,null!==n&&void 0!==n?n:new i);t=!0;let o=e._readableState,a=e._writableState,s=a||o;o&&(o.constructed=!0),a&&(a.constructed=!0),s.destroyed?e.emit(d,n):n?_(e,n,!0):r.nextTick(E,e)}try{e._construct(e=>{r.nextTick(n,e)})}catch(o){r.nextTick(n,o)}}function E(e){e.emit(h)}function w(e){return(null===e||void 0===e?void 0:e.setHeader)&&"function"==typeof e.abort}function S(e){e.emit("close")}function T(e,t){e.emit("error",t),r.nextTick(S,e)}t.exports={construct:function(e,t){if("function"!=typeof e._construct)return;let n=e._readableState,i=e._writableState;n&&(n.constructed=!1),i&&(i.constructed=!1),e.once(h,t),!(e.listenerCount(h)>1)&&r.nextTick(b,e)},destroyer:function(e,t){!e||u(e)||(!t&&!c(e)&&(t=new o),f(e)?(e.socket=null,e.destroy(t)):w(e)?e.abort():w(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?r.nextTick(T,e,t):r.nextTick(S,e),e.destroyed||(e[l]=!0))},destroy:function(e,t){let r=this._readableState,i=this._writableState,o=i||r;return null!=i&&i.destroyed||null!=r&&r.destroyed?("function"==typeof t&&t(),this):(p(e,i,r),i&&(i.destroyed=!0),r&&(r.destroyed=!0),o.constructed?g(this,e,t):this.once(d,function(r){g(this,n(r,e),t)}),this)},undestroy:function(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:_}}),ia=Un((e,t)=>{Zn(),Mo(),bo();var{ArrayIsArray:r,ObjectSetPrototypeOf:n}=Lo(),{EventEmitter:i}=(Xo(),jn(jo));function o(e){i.call(this,e)}function a(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}n(o.prototype,i.prototype),n(o,i),o.prototype.pipe=function(e,t){let r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",o),!e._isStdio&&(!t||!1!==t.end)&&(r.on("end",l),r.on("close",u));let s=!1;function l(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){f(),0===i.listenerCount(this,"error")&&this.emit("error",e)}function f(){r.removeListener("data",n),e.removeListener("drain",o),r.removeListener("end",l),r.removeListener("close",u),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",f),r.removeListener("close",f),e.removeListener("close",f)}return a(r,"error",c),a(e,"error",c),r.on("end",f),r.on("close",f),e.on("close",f),e.emit("pipe",r),e},t.exports={Stream:o,prependListener:a}}),oa=Un((e,t)=>{Zn(),Mo(),bo();var r,{SymbolDispose:n}=Lo(),{AbortError:i,codes:o}=Uo(),{isNodeStream:a,isWebStream:s,kControllerErrorFunction:l}=ta(),u=ra(),{ERR_INVALID_ARG_TYPE:c}=o;t.exports.addAbortSignal=function(e,r){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new c(t,"AbortSignal",e)})(e,"signal"),!a(r)&&!s(r))throw new c("stream",["ReadableStream","WritableStream","Stream"],r);return t.exports.addAbortSignalNoValidate(e,r)},t.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;let o=a(t)?()=>{t.destroy(new i(void 0,{cause:e.reason}))}:()=>{t[l](new i(void 0,{cause:e.reason}))};if(e.aborted)o();else{let i=(r=r||$o().addAbortListener)(e,o);u(t,i[n])}return t}}),aa=Un((e,t)=>{Zn(),Mo(),bo();var{StringPrototypeSlice:r,SymbolIterator:n,TypedArrayPrototypeSet:i,Uint8Array:o}=Lo(),{Buffer:a}=(ko(),jn(Co)),{inspect:s}=$o();t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){let t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;let e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return a.alloc(0);let t=a.allocUnsafe(e>>>0),r=this.head,n=0;for(;r;)i(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){let r=this.head.data;if(e<r.length){let t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[n](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",n=this.head,i=0;do{let o=n.data;if(!(e>o.length)){e===o.length?(t+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(t+=r(o,0,e),this.head=n,n.data=r(o,e));break}t+=o,e-=o.length,++i}while(null!==(n=n.next));return this.length-=i,t}_getBuffer(e){let t=a.allocUnsafe(e),r=e,n=this.head,s=0;do{let a=n.data;if(!(e>a.length)){e===a.length?(i(t,a,r-e),++s,n.next?this.head=n.next:this.head=this.tail=null):(i(t,new o(a.buffer,a.byteOffset,e),r-e),this.head=n,n.data=a.slice(e));break}i(t,a,r-e),e-=a.length,++s}while(null!==(n=n.next));return this.length-=s,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return s(this,c(c({},t),{},{depth:0,customInspect:!1}))}}}),sa=Un((e,t)=>{Zn(),Mo(),bo();var{MathFloor:r,NumberIsInteger:n}=Lo(),{validateInteger:i}=Jo(),{ERR_INVALID_ARG_VALUE:o}=Uo().codes,a=16384,s=16;function l(e){return e?s:a}t.exports={getHighWaterMark:function(e,t,i,a){let s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,a,i);if(null!=s){if(!n(s)||s<0){let e=a?"options.".concat(i):"options.highWaterMark";throw new o(e,s)}return r(s)}return l(e.objectMode)},getDefaultHighWaterMark:l,setDefaultHighWaterMark:function(e,t){i(t,"value",0),e?s=t:a=t}}}),la=Un((e,t)=>{Zn(),Mo(),bo();var r=(ko(),jn(Co)),n=r.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}),ua=Un(e=>{Zn(),Mo(),bo();var t=la().Buffer,r=t.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(e){var n;switch(this.encoding=function(e){var n=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof n&&(t.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return n||e}(e),this.encoding){case"utf16le":this.text=a,this.end=s,n=4;break;case"utf8":this.fillLast=o,n=4;break;case"base64":this.text=l,this.end=u,n=3;break;default:return this.write=c,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(n)}function i(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function a(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function s(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function c(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}e.StringDecoder=n,n.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},n.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},n.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=i(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r||-2===o?0:(o=i(t[n]),o>=0?(o>0&&(e.lastNeed=o-2),o):--n<r||-2===o?0:(o=i(t[n]),o>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0))}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},n.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}}),ca=Un((e,t)=>{Zn(),Mo(),bo();var r=ea(),{PromisePrototypeThen:n,SymbolAsyncIterator:i,SymbolIterator:o}=Lo(),{Buffer:a}=(ko(),jn(Co)),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:l}=Uo().codes;t.exports=function(e,t,u){let f,d;if("string"==typeof t||t instanceof a)return new e(c(c({objectMode:!0},u),{},{read(){this.push(t),this.push(null)}}));if(t&&t[i])d=!0,f=t[i]();else{if(!t||!t[o])throw new s("iterable",["Iterable"],t);d=!1,f=t[o]()}let h=new e(c({objectMode:!0,highWaterMark:1},u)),p=!1;return h._read=function(){p||(p=!0,async function(){for(;;){try{let{value:e,done:t}=d?await f.next():f.next();if(t)h.push(null);else{let t=e&&"function"==typeof e.then?await e:e;if(null===t)throw p=!1,new l;if(h.push(t))continue;p=!1}}catch(e){h.destroy(e)}break}}())},h._destroy=function(e,t){n(async function(e){let t=null!=e,r="function"==typeof f.throw;if(t&&r){let{value:t,done:r}=await f.throw(e);if(await t,r)return}if("function"==typeof f.return){let{value:e}=await f.return();await e}}(e),()=>r.nextTick(t,e),n=>r.nextTick(t,n||e))},h}}),fa=Un((e,t)=>{Zn(),Mo(),bo();var r=ea(),{ArrayPrototypeIndexOf:n,NumberIsInteger:i,NumberIsNaN:o,NumberParseInt:a,ObjectDefineProperties:l,ObjectKeys:u,ObjectSetPrototypeOf:f,Promise:d,SafeSet:h,SymbolAsyncDispose:p,SymbolAsyncIterator:g,Symbol:m}=Lo();t.exports=Y,Y.ReadableState=W;var{EventEmitter:y}=(Xo(),jn(jo)),{Stream:v,prependListener:_}=ia(),{Buffer:b}=(ko(),jn(Co)),{addAbortSignal:E}=oa(),w=ra(),S=$o().debuglog("stream",e=>{S=e}),T=aa(),A=na(),{getHighWaterMark:I,getDefaultHighWaterMark:R}=sa(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:C,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_OUT_OF_RANGE:P,ERR_STREAM_PUSH_AFTER_EOF:x,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:D},AbortError:k}=Uo(),{validateObject:M}=Jo(),L=m("kPaused"),{StringDecoder:F}=ua(),U=ca();f(Y.prototype,v.prototype),f(Y,v);var B=()=>{},{errorOrDestroy:j}=A,Z=1,q=16,G=32,z=2048,H=4096;function V(e){return{enumerable:!1,get(){return 0!==(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function W(e,t,r){"boolean"!=typeof r&&(r=t instanceof pa()),this.state=z|H|q|G,e&&e.objectMode&&(this.state|=Z),r&&e&&e.readableObjectMode&&(this.state|=Z),this.highWaterMark=e?I(this,e,"readableHighWaterMark",r):R(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this[L]=null,e&&!1===e.emitClose&&(this.state&=~z),e&&!1===e.autoDestroy&&(this.state&=~H),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new F(e.encoding),this.encoding=e.encoding)}function Y(e){if(!(this instanceof Y))return new Y(e);let t=this instanceof pa();this._readableState=new W(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&E(e.signal,this)),v.call(this,e),A.construct(this,()=>{this._readableState.needReadable&&te(this,this._readableState)})}function K(e,t,r,n){S("readableAddChunk",t);let i,o=e._readableState;if(0===(o.state&Z)&&("string"==typeof t?(r=r||o.defaultEncoding,o.encoding!==r&&(n&&o.encoding?t=b.from(t,r).toString(o.encoding):(t=b.from(t,r),r=""))):t instanceof b?r="":v._isUint8Array(t)?(t=v._uint8ArrayToBuffer(t),r=""):null!=t&&(i=new C("chunk",["string","Buffer","Uint8Array"],t))),i)j(e,i);else if(null===t)o.state&=-9,function(e,t){if(S("onEofChunk"),!t.ended){if(t.decoder){let e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?J(e):(t.needReadable=!1,t.emittedReadable=!0,ee(e))}}(e,o);else if(0!==(o.state&Z)||t&&t.length>0)if(n)if(0!==(4&o.state))j(e,new D);else{if(o.destroyed||o.errored)return!1;Q(e,o,t,!0)}else if(o.ended)j(e,new x);else{if(o.destroyed||o.errored)return!1;o.state&=-9,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?Q(e,o,t,!1):te(e,o)):Q(e,o,t,!1)}else n||(o.state&=-9,te(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function Q(e,t,r,n){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(0!==(65536&t.state)?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),0!==(64&t.state)&&J(e)),te(e,t)}l(W.prototype,{objectMode:V(Z),ended:V(2),endEmitted:V(4),reading:V(8),constructed:V(q),sync:V(G),needReadable:V(64),emittedReadable:V(128),readableListening:V(256),resumeScheduled:V(512),errorEmitted:V(1024),emitClose:V(z),autoDestroy:V(H),destroyed:V(8192),closed:V(16384),closeEmitted:V(32768),multiAwaitDrain:V(65536),readingMore:V(1<<17),dataEmitted:V(1<<18)}),Y.prototype.destroy=A.destroy,Y.prototype._undestroy=A.undestroy,Y.prototype._destroy=function(e,t){t(e)},Y.prototype[y.captureRejectionSymbol]=function(e){this.destroy(e)},Y.prototype[p]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new k,this.destroy(e)),new d((t,r)=>w(this,n=>n&&n!==e?r(n):t(null)))},Y.prototype.push=function(e,t){return K(this,e,t,!1)},Y.prototype.unshift=function(e,t){return K(this,e,t,!0)},Y.prototype.isPaused=function(){let e=this._readableState;return!0===e[L]||!1===e.flowing},Y.prototype.setEncoding=function(e){let t=new F(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=t.write(i);return r.clear(),""!==n&&r.push(n),this._readableState.length=n.length,this};var X;function $(e,t){return e<=0||0===t.length&&t.ended?0:0!==(t.state&Z)?1:o(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function J(e){let t=e._readableState;S("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(S("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(ee,e))}function ee(e){let t=e._readableState;S("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ae(e)}function te(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,r.nextTick(re,e,t))}function re(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){let r=t.length;if(S("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function ne(e){let t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[L]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function ie(e){S("readable nexttick read 0"),e.read(0)}function oe(e,t){S("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ae(e),t.flowing&&!t.reading&&e.read(0)}function ae(e){let t=e._readableState;for(S("flow",t.flowing);t.flowing&&null!==e.read(););}function se(e,t){"function"!=typeof e.read&&(e=Y.wrap(e,{objectMode:!0}));let r=function(e,t){return le.apply(this,arguments)}(e,t);return r.stream=e,r}function le(){return(le=Or(function*(e,t){let r=B;function n(t){this===e?(r(),r=B):r=t}e.on("readable",n);let i,o=w(e,{writable:!1},e=>{i=e?N(i,e):null,r(),r=B});try{for(;;){let t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(i)throw i;if(null===i)return;yield xr(new d(n))}}}catch(a){throw i=N(i,a),i}finally{!i&&!1===(null===t||void 0===t?void 0:t.destroyOnReturn)||void 0!==i&&!e._readableState.autoDestroy?(e.off("readable",n),o()):A.destroyer(e,null)}})).apply(this,arguments)}function ue(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function ce(e){let t=e._readableState;S("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(fe,t,e))}function fe(e,t){if(S("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)r.nextTick(de,t);else if(e.autoDestroy){let e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function de(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}function he(){return void 0===X&&(X={}),X}Y.prototype.read=function(e){S("read",e),void 0===e?e=NaN:i(e)||(e=a(e,10));let t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new P("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return S("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?ce(this):J(this),null;if(0===(e=$(e,t))&&t.ended)return 0===t.length&&ce(this),null;let n,o=0!==(64&t.state);if(S("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&(o=!0,S("length less than watermark",o)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)o=!1,S("reading, ended or constructing",o);else if(o){S("do read"),t.state|=8|G,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(s){j(this,s)}t.state&=~G,t.reading||(e=$(r,t))}return n=e>0?ue(e,t):null,null===n?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&ce(this)),null!==n&&!t.errorEmitted&&!t.closeEmitted&&(t.dataEmitted=!0,this.emit("data",n)),n},Y.prototype._read=function(e){throw new O("_read()")},Y.prototype.pipe=function(e,t){let n=this,i=this._readableState;1===i.pipes.length&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new h(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(e),S("pipe count=%d opts=%j",i.pipes.length,t);let o=t&&!1===t.end||e===r.stdout||e===r.stderr?m:s;function a(t,r){S("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,S("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),l&&e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",a),n.removeListener("end",s),n.removeListener("end",m),n.removeListener("data",f),u=!0,l&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&l())}function s(){S("onend"),e.end()}i.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",a);let l,u=!1;function c(){u||(1===i.pipes.length&&i.pipes[0]===e?(S("false write response, pause",0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(e)&&(S("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),n.pause()),l||(l=function(e,t){return function(){let r=e._readableState;r.awaitDrainWriters===t?(S("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(S("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),(!r.awaitDrainWriters||0===r.awaitDrainWriters.size)&&e.listenerCount("data")&&e.resume()}}(n,e),e.on("drain",l))}function f(t){S("ondata");let r=e.write(t);S("dest.write",r),!1===r&&c()}function d(t){if(S("onerror",t),m(),e.removeListener("error",d),0===e.listenerCount("error")){let r=e._writableState||e._readableState;r&&!r.errorEmitted?j(e,t):e.emit("error",t)}}function p(){e.removeListener("finish",g),m()}function g(){S("onfinish"),e.removeListener("close",p),m()}function m(){S("unpipe"),n.unpipe(e)}return n.on("data",f),_(e,"error",d),e.once("close",p),e.once("finish",g),e.emit("pipe",n),!0===e.writableNeedDrain?c():i.flowing||(S("pipe resume"),n.resume()),e},Y.prototype.unpipe=function(e){let t=this._readableState;if(0===t.pipes.length)return this;if(!e){let e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}let r=n(t.pipes,e);return-1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},Y.prototype.on=function(e,t){let n=v.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,S("on readable",i.length,i.reading),i.length?J(this):i.reading||r.nextTick(ie,this)),n},Y.prototype.addListener=Y.prototype.on,Y.prototype.removeListener=function(e,t){let n=v.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(ne,this),n},Y.prototype.off=Y.prototype.removeListener,Y.prototype.removeAllListeners=function(e){let t=v.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&r.nextTick(ne,this),t},Y.prototype.resume=function(){let e=this._readableState;return e.flowing||(S("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(oe,e,t))}(this,e)),e[L]=!1,this},Y.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[L]=!0,this},Y.prototype.wrap=function(e){let t=!1;e.on("data",r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{j(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};let r=u(e);for(let n=1;n<r.length;n++){let t=r[n];void 0===this[t]&&"function"==typeof e[t]&&(this[t]=e[t].bind(e))}return this},Y.prototype[g]=function(){return se(this)},Y.prototype.iterator=function(e){return void 0!==e&&M(e,"options"),se(this,e)},l(Y.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return!!e&&!1!==e.readable&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),l(W.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[L]},set(e){this[L]=!!e}}}),Y._fromList=ue,Y.from=function(e,t){return U(Y,e,t)},Y.fromWeb=function(e,t){return he().newStreamReadableFromReadableStream(e,t)},Y.toWeb=function(e,t){return he().newReadableStreamFromStreamReadable(e,t)},Y.wrap=function(e,t){var r,n;return new Y(c(c({objectMode:null===(r=null!==(n=e.readableObjectMode)&&void 0!==n?n:e.objectMode)||void 0===r||r},t),{},{destroy(t,r){A.destroyer(e,t),r(t)}})).wrap(e)}}),da=Un((e,t)=>{Zn(),Mo(),bo();var r=ea(),{ArrayPrototypeSlice:n,Error:i,FunctionPrototypeSymbolHasInstance:o,ObjectDefineProperty:a,ObjectDefineProperties:s,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:u,Symbol:c,SymbolHasInstance:f}=Lo();t.exports=D,D.WritableState=P;var{EventEmitter:d}=(Xo(),jn(jo)),h=ia().Stream,{Buffer:p}=(ko(),jn(Co)),g=na(),{addAbortSignal:m}=oa(),{getHighWaterMark:y,getDefaultHighWaterMark:v}=sa(),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:w,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:T,ERR_STREAM_NULL_VALUES:A,ERR_STREAM_WRITE_AFTER_END:I,ERR_UNKNOWN_ENCODING:R}=Uo().codes,{errorOrDestroy:N}=g;function C(){}l(D.prototype,h.prototype),l(D,h);var O=c("kOnFinished");function P(e,t,r){"boolean"!=typeof r&&(r=t instanceof pa()),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?y(this,e,"writableHighWaterMark",r):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!(!e||!1!==e.decodeStrings);this.decodeStrings=!n,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=F.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,x(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[O]=[]}function x(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function D(e){let t=this instanceof pa();if(!t&&!o(D,this))return new D(e);this._writableState=new P(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&m(e.signal,this)),h.call(this,e),g.construct(this,()=>{let e=this._writableState;e.writing||Z(this,e),z(this,e)})}function k(e,t,n,i){let o,a=e._writableState;if("function"==typeof n)i=n,n=a.defaultEncoding;else{if(n){if("buffer"!==n&&!p.isEncoding(n))throw new R(n)}else n=a.defaultEncoding;"function"!=typeof i&&(i=C)}if(null===t)throw new A;if(!a.objectMode)if("string"==typeof t)!1!==a.decodeStrings&&(t=p.from(t,n),n="buffer");else if(t instanceof p)n="buffer";else{if(!h._isUint8Array(t))throw new _("chunk",["string","Buffer","Uint8Array"],t);t=h._uint8ArrayToBuffer(t),n="buffer"}return a.ending?o=new I:a.destroyed&&(o=new S("write")),o?(r.nextTick(i,o),N(e,o,!0),o):(a.pendingcb++,function(e,t,r,n,i){let o=t.objectMode?1:r.length;t.length+=o;let a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:i}),t.allBuffers&&"buffer"!==n&&(t.allBuffers=!1),t.allNoop&&i!==C&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1),a&&!t.errored&&!t.destroyed}(e,a,t,n,i))}function M(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new S("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function L(e,t,r,n){--t.pendingcb,n(r),j(t),N(e,r)}function F(e,t){let n=e._writableState,i=n.sync,o=n.writecb;"function"==typeof o?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t?(t.stack,n.errored||(n.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?r.nextTick(L,e,n,t,o):L(e,n,t,o)):(n.buffered.length>n.bufferedIndex&&Z(e,n),i?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===o?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:o,stream:e,state:n},r.nextTick(U,n.afterWriteTickInfo)):B(e,n,1,o))):N(e,new E)}function U(e){let{stream:t,state:r,count:n,cb:i}=e;return r.afterWriteTickInfo=null,B(t,r,n,i)}function B(e,t,r,n){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&j(t),z(e,t)}function j(e){if(e.writing)return;for(let i=e.bufferedIndex;i<e.buffered.length;++i){var t;let{chunk:r,callback:n}=e.buffered[i],o=e.objectMode?1:r.length;e.length-=o,n(null!==(t=e.errored)&&void 0!==t?t:new S("write"))}let r=e[O].splice(0);for(let i=0;i<r.length;i++){var n;r[i](null!==(n=e.errored)&&void 0!==n?n:new S("end"))}x(e)}function Z(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:r,bufferedIndex:i,objectMode:o}=t,a=r.length-i;if(!a)return;let s=i;if(t.bufferProcessing=!0,a>1&&e._writev){t.pendingcb-=a-1;let i=t.allNoop?C:e=>{for(let t=s;t<r.length;++t)r[t].callback(e)},o=t.allNoop&&0===s?r:n(r,s);o.allBuffers=t.allBuffers,M(e,t,!0,t.length,o,"",i),x(t)}else{do{let{chunk:n,encoding:i,callback:a}=r[s];r[s++]=null,M(e,t,!1,o?1:n.length,n,i,a)}while(s<r.length&&!t.writing);s===r.length?x(t):s>256?(r.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}function q(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function G(e,t){!t.prefinished&&!t.finalCalled&&("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let n=!1;function i(i){if(n)N(e,null!==i&&void 0!==i?i:E());else if(n=!0,t.pendingcb--,i){let r=t[O].splice(0);for(let e=0;e<r.length;e++)r[e](i);N(e,i,t.sync)}else q(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,r.nextTick(H,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(o){i(o)}t.sync=!1}(e,t)))}function z(e,t,n){q(t)&&(G(e,t),0===t.pendingcb&&(n?(t.pendingcb++,r.nextTick((e,t)=>{q(t)?H(e,t):t.pendingcb--},e,t)):q(t)&&(t.pendingcb++,H(e,t))))}function H(e,t){t.pendingcb--,t.finished=!0;let r=t[O].splice(0);for(let n=0;n<r.length;n++)r[n]();if(e.emit("finish"),t.autoDestroy){let t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}P.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},a(P.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),a(D,f,{__proto__:null,value:function(e){return!!o(this,e)||this===D&&(e&&e._writableState instanceof P)}}),D.prototype.pipe=function(){N(this,new w)},D.prototype.write=function(e,t,r){return!0===k(this,e,t,r)},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||Z(this,e))},D.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=u(e)),!p.isEncoding(e))throw new R(e);return this._writableState.defaultEncoding=e,this},D.prototype._write=function(e,t,r){if(!this._writev)throw new b("_write()");this._writev([{chunk:e,encoding:t}],r)},D.prototype._writev=null,D.prototype.end=function(e,t,n){let o,a=this._writableState;if("function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e){let r=k(this,e,t);r instanceof i&&(o=r)}return a.corked&&(a.corked=1,this.uncork()),o||(a.errored||a.ending?a.finished?o=new T("end"):a.destroyed&&(o=new S("end")):(a.ending=!0,z(this,a,!0),a.ended=!0)),"function"==typeof n&&(o||a.finished?r.nextTick(n,o):a[O].push(n)),this},s(D.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){let e=this._writableState;return!!e&&!1!==e.writable&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});var V,W=g.destroy;function Y(){return void 0===V&&(V={}),V}D.prototype.destroy=function(e,t){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[O].length)&&r.nextTick(j,n),W.call(this,e,t),this},D.prototype._undestroy=g.undestroy,D.prototype._destroy=function(e,t){t(e)},D.prototype[d.captureRejectionSymbol]=function(e){this.destroy(e)},D.fromWeb=function(e,t){return Y().newStreamWritableFromWritableStream(e,t)},D.toWeb=function(e){return Y().newWritableStreamFromStreamWritable(e)}}),ha=Un((e,t)=>{Zn(),Mo(),bo();var r=ea(),n=(ko(),jn(Co)),{isReadable:i,isWritable:o,isIterable:a,isNodeStream:s,isReadableNodeStream:l,isWritableNodeStream:u,isDuplexNodeStream:c,isReadableStream:f,isWritableStream:d}=ta(),h=ra(),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:m}}=Uo(),{destroyer:y}=na(),v=pa(),_=fa(),b=da(),{createDeferredPromise:E}=$o(),w=ca(),S=globalThis.Blob||n.Blob,T=typeof S<"u"?function(e){return e instanceof S}:function(e){return!1},A=globalThis.AbortController||Bo().AbortController,{FunctionPrototypeCall:I}=Lo(),R=class extends v{constructor(e){super(e),!1===(null===e||void 0===e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null===e||void 0===e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};function N(e){let t,r,n,a,s,l=e.readable&&"function"!=typeof e.readable.read?_.wrap(e.readable):e.readable,u=e.writable,c=!!i(l),f=!!o(u);function d(e){let t=a;a=null,t?t(e):e&&s.destroy(e)}return s=new R({readableObjectMode:!(null==l||!l.readableObjectMode),writableObjectMode:!(null==u||!u.writableObjectMode),readable:c,writable:f}),f&&(h(u,e=>{f=!1,e&&y(l,e),d(e)}),s._write=function(e,r,n){u.write(e,r)?n():t=n},s._final=function(e){u.end(),r=e},u.on("drain",function(){if(t){let e=t;t=null,e()}}),u.on("finish",function(){if(r){let e=r;r=null,e()}})),c&&(h(l,e=>{c=!1,e&&y(l,e),d(e)}),l.on("readable",function(){if(n){let e=n;n=null,e()}}),l.on("end",function(){s.push(null)}),s._read=function(){for(;;){let e=l.read();if(null===e)return void(n=s._read);if(!s.push(e))return}}),s._destroy=function(e,i){!e&&null!==a&&(e=new p),n=null,t=null,r=null,null===a?i(e):(a=i,y(u,e),y(l,e))},s}t.exports=function e(t,n){if(c(t))return t;if(l(t))return N({readable:t});if(u(t))return N({writable:t});if(s(t))return N({writable:!1,readable:!1});if(f(t))return N({readable:_.fromWeb(t)});if(d(t))return N({writable:b.fromWeb(t)});if("function"==typeof t){let{value:e,write:i,final:o,destroy:s}=function(e){let{promise:t,resolve:n}=E(),i=new A,o=i.signal;return{value:e(Or(function*(){for(;;){let e=t;t=null;let{chunk:i,done:a,cb:s}=yield xr(e);if(r.nextTick(s),a)return;if(o.aborted)throw new p(void 0,{cause:o.reason});({promise:t,resolve:n}=E()),yield i}})(),{signal:o}),write(e,t,r){let i=n;n=null,i({chunk:e,done:!1,cb:r})},final(e){let t=n;n=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(a(e))return w(R,e,{objectMode:!0,write:i,final:o,destroy:s});let l=null===e||void 0===e?void 0:e.then;if("function"==typeof l){let t,n=I(l,e,e=>{if(null!=e)throw new m("nully","body",e)},e=>{y(t,e)});return t=new R({objectMode:!0,readable:!1,write:i,final(e){o(async()=>{try{await n,r.nextTick(e,null)}catch(t){r.nextTick(e,t)}})},destroy:s})}throw new m("Iterable, AsyncIterable or AsyncFunction",n,e)}if(T(t))return e(t.arrayBuffer());if(a(t))return w(R,t,{objectMode:!0,writable:!1});if(f(null===t||void 0===t?void 0:t.readable)&&d(null===t||void 0===t?void 0:t.writable))return R.fromWeb(t);if("object"==typeof(null===t||void 0===t?void 0:t.writable)||"object"==typeof(null===t||void 0===t?void 0:t.readable)){return N({readable:null!=t&&t.readable?l(null===t||void 0===t?void 0:t.readable)?null===t||void 0===t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?u(null===t||void 0===t?void 0:t.writable)?null===t||void 0===t?void 0:t.writable:e(t.writable):void 0})}let i=null===t||void 0===t?void 0:t.then;if("function"==typeof i){let e;return I(i,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{y(e,t)}),e=new R({objectMode:!0,writable:!1,read(){}})}throw new g(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}}),pa=Un((e,t)=>{Zn(),Mo(),bo();var{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:i,ObjectSetPrototypeOf:o}=Lo();t.exports=f;var a,s,l=fa(),u=da();o(f.prototype,l.prototype),o(f,l);{let e=i(u.prototype);for(let t=0;t<e.length;t++){let r=e[t];f.prototype[r]||(f.prototype[r]=u.prototype[r])}}function f(e){if(!(this instanceof f))return new f(e);l.call(this,e),u.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function d(){return void 0===a&&(a={}),a}r(f.prototype,{writable:c({__proto__:null},n(u.prototype,"writable")),writableHighWaterMark:c({__proto__:null},n(u.prototype,"writableHighWaterMark")),writableObjectMode:c({__proto__:null},n(u.prototype,"writableObjectMode")),writableBuffer:c({__proto__:null},n(u.prototype,"writableBuffer")),writableLength:c({__proto__:null},n(u.prototype,"writableLength")),writableFinished:c({__proto__:null},n(u.prototype,"writableFinished")),writableCorked:c({__proto__:null},n(u.prototype,"writableCorked")),writableEnded:c({__proto__:null},n(u.prototype,"writableEnded")),writableNeedDrain:c({__proto__:null},n(u.prototype,"writableNeedDrain")),destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),f.fromWeb=function(e,t){return d().newStreamDuplexFromReadableWritablePair(e,t)},f.toWeb=function(e){return d().newReadableWritablePairFromDuplex(e)},f.from=function(e){return s||(s=ha()),s(e,"body")}}),ga=Un((e,t)=>{Zn(),Mo(),bo();var{ObjectSetPrototypeOf:r,Symbol:n}=Lo();t.exports=l;var{ERR_METHOD_NOT_IMPLEMENTED:i}=Uo().codes,o=pa(),{getHighWaterMark:a}=sa();r(l.prototype,o.prototype),r(l,o);var s=n("kCallback");function l(e){if(!(this instanceof l))return new l(e);let t=e?a(this,e,"readableHighWaterMark",!0):null;0===t&&(e=c(c({},e),{},{highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0})),o.call(this,e),this._readableState.sync=!1,this[s]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function u(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())})}function f(){this._final!==u&&u.call(this)}l.prototype._final=u,l.prototype._transform=function(e,t,r){throw new i("_transform()")},l.prototype._write=function(e,t,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,(e,t)=>{e?r(e):(null!=t&&this.push(t),i.ended||o===n.length||n.length<n.highWaterMark?r():this[s]=r)})},l.prototype._read=function(){if(this[s]){let e=this[s];this[s]=null,e()}}}),ma=Un((e,t)=>{Zn(),Mo(),bo();var{ObjectSetPrototypeOf:r}=Lo();t.exports=i;var n=ga();function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(i.prototype,n.prototype),r(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}),ya=Un((e,t)=>{Zn(),Mo(),bo();var r,n,i,o=ea(),{ArrayIsArray:a,Promise:l,SymbolAsyncIterator:u,SymbolDispose:c}=Lo(),f=ra(),{once:d}=$o(),h=na(),p=pa(),{aggregateTwoErrors:g,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:y,ERR_MISSING_ARGS:v,ERR_STREAM_DESTROYED:_,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:E}=Uo(),{validateFunction:w,validateAbortSignal:S}=Jo(),{isIterable:T,isReadable:A,isReadableNodeStream:I,isNodeStream:R,isTransformStream:N,isWebStream:C,isReadableStream:O,isReadableFinished:P}=ta(),x=globalThis.AbortController||Bo().AbortController;function D(e,t,r){let n=!1;return e.on("close",()=>{n=!0}),{destroy:t=>{n||(n=!0,h.destroyer(e,t||new _("pipe")))},cleanup:f(e,{readable:t,writable:r},e=>{n=!e})}}function k(e){if(T(e))return e;if(I(e))return function(e){return M.apply(this,arguments)}(e);throw new m("val",["Readable","Iterable","AsyncIterable"],e)}function M(){return(M=Or(function*(e){n||(n=fa()),yield*Dr(kr(n.prototype[u].call(e)))})).apply(this,arguments)}async function L(e,t,r,n){let i,{end:o}=n,a=null,s=e=>{if(e&&(i=e),a){let e=a;a=null,e()}},u=()=>new l((e,t)=>{i?t(i):a=()=>{i?t(i):e()}});t.on("drain",s);let c=f(t,{readable:!1},s);try{t.writableNeedDrain&&await u();var d,h=!1,p=!1;try{for(var m,y=kr(e);h=!(m=await y.next()).done;h=!1){let e=m.value;t.write(e)||await u()}}catch(v){p=!0,d=v}finally{try{h&&null!=y.return&&await y.return()}finally{if(p)throw d}}o&&(t.end(),await u()),r()}catch(_){r(i!==_?g(i,_):_)}finally{c(),t.off("drain",s)}}async function F(e,t,r,n){let{end:i}=n;N(t)&&(t=t.writable);let o=t.getWriter();try{var a,l=!1,u=!1;try{for(var c,f=kr(e);l=!(c=await f.next()).done;l=!1){let e=c.value;await o.ready,o.write(e).catch(()=>{})}}catch(d){u=!0,a=d}finally{try{l&&null!=f.return&&await f.return()}finally{if(u)throw a}}await o.ready,i&&await o.close(),r()}catch(s){try{await o.abort(s),r(s)}catch(h){r(h)}}}function U(e,t,n){if(1===e.length&&a(e[0])&&(e=e[0]),e.length<2)throw new v("streams");let s,l=new x,u=l.signal,f=null===n||void 0===n?void 0:n.signal,d=[];function h(){U(new E)}S(f,"options.signal"),i=i||$o().addAbortListener,f&&(s=i(f,h));let g,_,b,w=[],P=0;function M(e){U(e,0===--P)}function U(e,r){var n;if(e&&(!g||"ERR_STREAM_PREMATURE_CLOSE"===g.code)&&(g=e),g||r){for(;w.length;)w.shift()(g);null===(n=s)||void 0===n||n[c](),l.abort(),r&&(g||d.forEach(e=>e()),o.nextTick(t,g,_))}}for(let i=0;i<e.length;i++){let t=e[i],a=i<e.length-1,s=i>0,l=a||!1!==(null===n||void 0===n?void 0:n.end),c=i===e.length-1;if(R(t)){let e=function(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&M(e)};if(l){let{destroy:e,cleanup:r}=D(t,a,s);w.push(e),A(t)&&c&&d.push(r)}t.on("error",e),A(t)&&c&&d.push(()=>{t.removeListener("error",e)})}if(0===i)if("function"==typeof t){if(b=t({signal:u}),!T(b))throw new y("Iterable, AsyncIterable or Stream","source",b)}else b=T(t)||I(t)||N(t)?t:p.from(t);else if("function"==typeof t){var j;if(N(b))b=k(null===(j=b)||void 0===j?void 0:j.readable);else b=k(b);if(b=t(b,{signal:u}),a){if(!T(b,!0))throw new y("AsyncIterable","transform[".concat(i-1,"]"),b)}else{var Z;r||(r=ma());let e=new r({objectMode:!0}),t=null===(Z=b)||void 0===Z?void 0:Z.then;if("function"==typeof t)P++,t.call(b,t=>{_=t,null!=t&&e.write(t),l&&e.end(),o.nextTick(M)},t=>{e.destroy(t),o.nextTick(M,t)});else if(T(b,!0))P++,L(b,e,M,{end:l});else{if(!O(b)&&!N(b))throw new y("AsyncIterable or Promise","destination",b);{let t=b.readable||b;P++,L(t,e,M,{end:l})}}b=e;let{destroy:n,cleanup:i}=D(b,!1,!0);w.push(n),c&&d.push(i)}}else if(R(t)){if(I(b)){P+=2;let e=B(b,t,M,{end:l});A(t)&&c&&d.push(e)}else if(N(b)||O(b)){let e=b.readable||b;P++,L(e,t,M,{end:l})}else{if(!T(b))throw new m("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);P++,L(b,t,M,{end:l})}b=t}else if(C(t)){if(I(b))P++,F(k(b),t,M,{end:l});else if(O(b)||T(b))P++,F(b,t,M,{end:l});else{if(!N(b))throw new m("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);P++,F(b.readable,t,M,{end:l})}b=t}else b=p.from(t)}return(null!=u&&u.aborted||null!=f&&f.aborted)&&o.nextTick(h),b}function B(e,t,r,n){let{end:i}=n,a=!1;if(t.on("close",()=>{a||r(new b)}),e.pipe(t,{end:!1}),i){let r=function(){a=!0,t.end()};P(e)?o.nextTick(r):e.once("end",r)}else r();return f(e,{readable:!0,writable:!1},t=>{let n=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once("end",r).once("error",r):r(t)}),f(t,{readable:!1,writable:!0},r)}t.exports={pipelineImpl:U,pipeline:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return U(t,d(function(e){return w(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(t)))}}}),va=Un((e,t)=>{Zn(),Mo(),bo();var{pipeline:r}=ya(),n=pa(),{destroyer:i}=na(),{isNodeStream:o,isReadable:a,isWritable:s,isWebStream:l,isTransformStream:u,isWritableStream:c,isReadableStream:f}=ta(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:p}}=Uo(),g=ra();t.exports=function(){for(var e=arguments.length,t=new Array(e),m=0;m<e;m++)t[m]=arguments[m];if(0===t.length)throw new p("streams");if(1===t.length)return n.from(t[0]);let y,v,_,b,E,w=[...t];if("function"==typeof t[0]&&(t[0]=n.from(t[0])),"function"==typeof t[t.length-1]){let e=t.length-1;t[e]=n.from(t[e])}for(let r=0;r<t.length;++r)if(o(t[r])||l(t[r])){if(r<t.length-1&&!(a(t[r])||f(t[r])||u(t[r])))throw new h("streams[".concat(r,"]"),w[r],"must be readable");if(r>0&&!(s(t[r])||c(t[r])||u(t[r])))throw new h("streams[".concat(r,"]"),w[r],"must be writable")}let S=t[0],T=r(t,function(e){let t=b;b=null,t?t(e):e?E.destroy(e):!I&&!A&&E.destroy()}),A=!!(s(S)||c(S)||u(S)),I=!!(a(T)||f(T)||u(T));if(E=new n({writableObjectMode:!(null==S||!S.writableObjectMode),readableObjectMode:!(null==T||!T.readableObjectMode),writable:A,readable:I}),A){if(o(S))E._write=function(e,t,r){S.write(e,t)?r():y=r},E._final=function(e){S.end(),v=e},S.on("drain",function(){if(y){let e=y;y=null,e()}});else if(l(S)){let e=(u(S)?S.writable:S).getWriter();E._write=async function(t,r,n){try{await e.ready,e.write(t).catch(()=>{}),n()}catch(i){n(i)}},E._final=async function(t){try{await e.ready,e.close().catch(()=>{}),v=t}catch(r){t(r)}}}let e=u(T)?T.readable:T;g(e,()=>{if(v){let e=v;v=null,e()}})}if(I)if(o(T))T.on("readable",function(){if(_){let e=_;_=null,e()}}),T.on("end",function(){E.push(null)}),E._read=function(){for(;;){let e=T.read();if(null===e)return void(_=E._read);if(!E.push(e))return}};else if(l(T)){let e=(u(T)?T.readable:T).getReader();E._read=async function(){for(;;)try{let{value:t,done:r}=await e.read();if(!E.push(t))return;if(r)return void E.push(null)}catch(t){return}}}return E._destroy=function(e,t){!e&&null!==b&&(e=new d),_=null,y=null,v=null,null===b?t(e):(b=t,o(T)&&i(T,e))},E}}),_a=Un((e,t)=>{Zn(),Mo(),bo();var r=globalThis.AbortController||Bo().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:o,ERR_OUT_OF_RANGE:a},AbortError:s}=Uo(),{validateAbortSignal:l,validateInteger:u,validateObject:c}=Jo(),f=Lo().Symbol("kWeak"),d=Lo().Symbol("kResistStopPropagation"),{finished:h}=ra(),p=va(),{addAbortSignalNoValidate:g}=oa(),{isWritable:m,isNodeStream:y}=ta(),{deprecate:v}=$o(),{ArrayPrototypePush:_,Boolean:b,MathFloor:E,Number:w,NumberIsNaN:S,Promise:T,PromiseReject:A,PromiseResolve:I,PromisePrototypeThen:R,Symbol:N}=Lo(),C=N("kEmpty"),O=N("kEof");function P(e,t){if("function"!=typeof e)throw new i("fn",["Function","AsyncFunction"],e);null!=t&&c(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&l(t.signal,"options.signal");let r=1;null!=(null===t||void 0===t?void 0:t.concurrency)&&(r=E(t.concurrency));let n=r-1;return null!=(null===t||void 0===t?void 0:t.highWaterMark)&&(n=E(t.highWaterMark)),u(r,"options.concurrency",1),u(n,"options.highWaterMark",0),n+=r,Or(function*(){let i,o,a=$o().AbortSignalAny([null===t||void 0===t?void 0:t.signal].filter(b)),l=this,u=[],c={signal:a},f=!1,d=0;function h(){f=!0,p()}function p(){d-=1,g()}function g(){o&&!f&&d<r&&u.length<n&&(o(),o=null)}!async function(){try{var t,g=!1,m=!1;try{for(var y,v=kr(l);g=!(y=await v.next()).done;g=!1){let t=y.value;if(f)return;if(a.aborted)throw new s;try{if(t=e(t,c),t===C)continue;t=I(t)}catch(_){t=A(_)}d+=1,R(t,p,h),u.push(t),i&&(i(),i=null),!f&&(u.length>=n||d>=r)&&await new T(e=>{o=e})}}catch(b){m=!0,t=b}finally{try{g&&null!=v.return&&await v.return()}finally{if(m)throw t}}u.push(O)}catch(E){let e=A(E);R(e,p,h),u.push(e)}finally{f=!0,i&&(i(),i=null)}}();try{for(;;){for(;u.length>0;){let e=yield xr(u[0]);if(e===O)return;if(a.aborted)throw new s;e!==C&&(yield e),u.shift(),g()}yield xr(new T(e=>{i=e}))}}finally{f=!0,o&&(o(),o=null)}}).call(this)}async function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;var r,n=!1,i=!1;try{for(var o,a=kr(D.call(this,e,t));n=!(o=await a.next()).done;n=!1){o.value;return!0}}catch(s){i=!0,r=s}finally{try{n&&null!=a.return&&await a.return()}finally{if(i)throw r}}return!1}function D(e,t){if("function"!=typeof e)throw new i("fn",["Function","AsyncFunction"],e);return P.call(this,async function(t,r){return await e(t,r)?t:C},t)}var k=class extends o{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};function M(e){if(e=w(e),S(e))return 0;if(e<0)throw new a("number",">= 0",e);return e}t.exports.streamReturningOperators={asIndexedPairs:v(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return null!=e&&c(e,"options"),null!=(null===e||void 0===e?void 0:e.signal)&&l(e.signal,"options.signal"),Or(function*(){let t=0;var r,n=!1,i=!1;try{for(var o,a=kr(this);n=!(o=yield xr(a.next())).done;n=!1){let r=o.value;var l;if(null!=e&&null!==(l=e.signal)&&void 0!==l&&l.aborted)throw new s({cause:e.signal.reason});yield[t++,r]}}catch(u){i=!0,r=u}finally{try{n&&null!=a.return&&(yield xr(a.return()))}finally{if(i)throw r}}}).call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return null!=t&&c(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&l(t.signal,"options.signal"),e=M(e),Or(function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new s;var n,i=!1,o=!1;try{for(var a,l=kr(this);i=!(a=yield xr(l.next())).done;i=!1){let r=a.value;var u;if(null!=t&&null!==(u=t.signal)&&void 0!==u&&u.aborted)throw new s;e--<=0&&(yield r)}}catch(c){o=!0,n=c}finally{try{i&&null!=l.return&&(yield xr(l.return()))}finally{if(o)throw n}}}).call(this)},filter:D,flatMap:function(e,t){let r=P.call(this,e,t);return Or(function*(){var e,t=!1,n=!1;try{for(var i,o=kr(r);t=!(i=yield xr(o.next())).done;t=!1){let e=i.value;yield*Dr(kr(e))}}catch(a){n=!0,e=a}finally{try{t&&null!=o.return&&(yield xr(o.return()))}finally{if(n)throw e}}}).call(this)},map:P,take:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return null!=t&&c(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&l(t.signal,"options.signal"),e=M(e),Or(function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new s;var n,i=!1,o=!1;try{for(var a,l=kr(this);i=!(a=yield xr(l.next())).done;i=!1){let r=a.value;var u;if(null!=t&&null!==(u=t.signal)&&void 0!==u&&u.aborted)throw new s;if(e-- >0&&(yield r),e<=0)return}}catch(c){o=!0,n=c}finally{try{i&&null!=l.return&&(yield xr(l.return()))}finally{if(o)throw n}}}).call(this)},compose:function(e,t){if(null!=t&&c(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&l(t.signal,"options.signal"),y(e)&&!m(e))throw new n("stream",e,"must be writable");let r=p(this,e);return null!=t&&t.signal&&g(t.signal,r),r}},t.exports.promiseReturningOperators={every:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if("function"!=typeof e)throw new i("fn",["Function","AsyncFunction"],e);return!await x.call(this,async function(){return!await e(...arguments)},t)},forEach:async function(e,t){if("function"!=typeof e)throw new i("fn",["Function","AsyncFunction"],e);var r,n=!1,o=!1;try{for(var a,s=kr(P.call(this,async function(t,r){return await e(t,r),C},t));n=!(a=await s.next()).done;n=!1){a.value}}catch(l){o=!0,r=l}finally{try{n&&null!=s.return&&await s.return()}finally{if(o)throw r}}},reduce:async function(e,t,n){var o;if("function"!=typeof e)throw new i("reducer",["Function","AsyncFunction"],e);null!=n&&c(n,"options"),null!=(null===n||void 0===n?void 0:n.signal)&&l(n.signal,"options.signal");let a=arguments.length>1;if(null!=n&&null!==(o=n.signal)&&void 0!==o&&o.aborted){let e=new s(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(e)),e}let u=new r,p=u.signal;if(null!=n&&n.signal){let e={once:!0,[f]:this,[d]:!0};n.signal.addEventListener("abort",()=>u.abort(),e)}let g=!1;try{var m,y=!1,v=!1;try{for(var _,b=kr(this);y=!(_=await b.next()).done;y=!1){let r=_.value;var E;if(g=!0,null!=n&&null!==(E=n.signal)&&void 0!==E&&E.aborted)throw new s;a?t=await e(t,r,{signal:p}):(t=r,a=!0)}}catch(w){v=!0,m=w}finally{try{y&&null!=b.return&&await b.return()}finally{if(v)throw m}}if(!g&&!a)throw new k}finally{u.abort()}return t},toArray:async function(e){null!=e&&c(e,"options"),null!=(null===e||void 0===e?void 0:e.signal)&&l(e.signal,"options.signal");let t=[];var r,n=!1,i=!1;try{for(var o,a=kr(this);n=!(o=await a.next()).done;n=!1){let r=o.value;var u;if(null!=e&&null!==(u=e.signal)&&void 0!==u&&u.aborted)throw new s(void 0,{cause:e.signal.reason});_(t,r)}}catch(f){i=!0,r=f}finally{try{n&&null!=a.return&&await a.return()}finally{if(i)throw r}}return t},some:x,find:async function(e,t){var r,n=!1,i=!1;try{for(var o,a=kr(D.call(this,e,t));n=!(o=await a.next()).done;n=!1){return o.value}}catch(s){i=!0,r=s}finally{try{n&&null!=a.return&&await a.return()}finally{if(i)throw r}}}}}),ba=Un((e,t)=>{Zn(),Mo(),bo();var{ArrayPrototypePop:r,Promise:n}=Lo(),{isIterable:i,isNodeStream:o,isWebStream:a}=ta(),{pipelineImpl:s}=ya(),{finished:l}=ra();Ea(),t.exports={finished:l,pipeline:function(){for(var e=arguments.length,t=new Array(e),l=0;l<e;l++)t[l]=arguments[l];return new n((e,n)=>{let l,u,c=t[t.length-1];if(c&&"object"==typeof c&&!o(c)&&!i(c)&&!a(c)){let e=r(t);l=e.signal,u=e.end}s(t,(t,r)=>{t?n(t):e(r)},{signal:l,end:u})})}}}),Ea=Un((e,t)=>{Zn(),Mo(),bo();var{Buffer:r}=(ko(),jn(Co)),{ObjectDefineProperty:n,ObjectKeys:i,ReflectApply:o}=Lo(),{promisify:{custom:a}}=$o(),{streamReturningOperators:s,promiseReturningOperators:l}=_a(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=Uo(),c=va(),{setDefaultHighWaterMark:f,getDefaultHighWaterMark:d}=sa(),{pipeline:h}=ya(),{destroyer:p}=na(),g=ra(),m=ba(),y=ta(),v=t.exports=ia().Stream;v.isDestroyed=y.isDestroyed,v.isDisturbed=y.isDisturbed,v.isErrored=y.isErrored,v.isReadable=y.isReadable,v.isWritable=y.isWritable,v.Readable=fa();for(let b of i(s)){let e=function(){if(new.target)throw u();for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return v.Readable.from(o(t,this,r))},t=s[b];n(e,"name",{__proto__:null,value:t.name}),n(e,"length",{__proto__:null,value:t.length}),n(v.Readable.prototype,b,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}for(let b of i(l)){let e=function(){if(new.target)throw u();for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return o(t,this,r)},t=l[b];n(e,"name",{__proto__:null,value:t.name}),n(e,"length",{__proto__:null,value:t.length}),n(v.Readable.prototype,b,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}v.Writable=da(),v.Duplex=pa(),v.Transform=ga(),v.PassThrough=ma(),v.pipeline=h;var{addAbortSignal:_}=oa();v.addAbortSignal=_,v.finished=g,v.destroy=p,v.compose=c,v.setDefaultHighWaterMark=f,v.getDefaultHighWaterMark=d,n(v,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>m}),n(h,a,{__proto__:null,enumerable:!0,get:()=>m.pipeline}),n(g,a,{__proto__:null,enumerable:!0,get:()=>m.finished}),v.Stream=v,v._isUint8Array=function(e){return e instanceof Uint8Array},v._uint8ArrayToBuffer=function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)}}),wa=Un((e,t)=>{Zn(),Mo(),bo();var r=Ea(),n=ba(),i=r.Readable.destroy;t.exports=r.Readable,t.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,t.exports._isUint8Array=r._isUint8Array,t.exports.isDisturbed=r.isDisturbed,t.exports.isErrored=r.isErrored,t.exports.isReadable=r.isReadable,t.exports.Readable=r.Readable,t.exports.Writable=r.Writable,t.exports.Duplex=r.Duplex,t.exports.Transform=r.Transform,t.exports.PassThrough=r.PassThrough,t.exports.addAbortSignal=r.addAbortSignal,t.exports.finished=r.finished,t.exports.destroy=r.destroy,t.exports.destroy=i,t.exports.pipeline=r.pipeline,t.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>n}),t.exports.Stream=r.Stream,t.exports.default=t.exports}),Sa=Un((e,t)=>{Zn(),Mo(),bo(),"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),Ta=Un((e,t)=>{Zn(),Mo(),bo();var{Buffer:r}=(ko(),jn(Co)),n=Symbol.for("BufferList");function i(e){if(!(this instanceof i))return new i(e);i._init.call(this,e)}i._init=function(e){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},i.prototype._new=function(e){return new i(e)},i.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){let n=t+this._bufs[r].length;if(e<n||r===this._bufs.length-1)return[r,e-t];t=n}},i.prototype._reverseOffset=function(e){let t=e[0],r=e[1];for(let n=0;n<t;n++)r+=this._bufs[n].length;return r},i.prototype.getBuffers=function(){return this._bufs},i.prototype.get=function(e){if(e>this.length||e<0)return;let t=this._offset(e);return this._bufs[t[0]][t[1]]},i.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},i.prototype.copy=function(e,t,n,i){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof i||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||r.alloc(0);let o=!!e,a=this._offset(n),s=i-n,l=s,u=o&&t||0,c=a[1];if(0===n&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:r.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,u),u+=this._bufs[t].length;return e}if(l<=this._bufs[a[0]].length-c)return o?this._bufs[a[0]].copy(e,t,c,c+l):this._bufs[a[0]].slice(c,c+l);o||(e=r.allocUnsafe(s));for(let r=a[0];r<this._bufs.length;r++){let t=this._bufs[r].length-c;if(!(l>t)){this._bufs[r].copy(e,u,c,c+l),u+=t;break}this._bufs[r].copy(e,u,c),u+=t,l-=t,c&&(c=0)}return e.length>u?e.slice(0,u):e},i.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();let r=this._offset(e),n=this._offset(t),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},i.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},i.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},i.prototype.duplicate=function(){let e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},i.prototype.append=function(e){return this._attach(e,i.prototype._appendBuffer)},i.prototype.prepend=function(e){return this._attach(e,i.prototype._prependBuffer,!0)},i.prototype._attach=function(e,t,n){if(null==e)return this;if(e.buffer)t.call(this,r.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e)){let[r,i]=n?[e.length-1,-1]:[0,1];for(let o=r;o>=0&&o<e.length;o+=i)this._attach(e[o],t,n)}else if(this._isBufferList(e)){let[r,i]=n?[e._bufs.length-1,-1]:[0,1];for(let o=r;o>=0&&o<e._bufs.length;o+=i)this._attach(e._bufs[o],t,n)}else"number"==typeof e&&(e=e.toString()),t.call(this,r.from(e));return this},i.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},i.prototype._prependBuffer=function(e){this._bufs.unshift(e),this.length+=e.length},i.prototype.indexOf=function(e,t,n){if(void 0===n&&"string"==typeof t&&(n=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=r.from([e]):"string"==typeof e?e=r.from(e,n):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=r.from(e.buffer,e.byteOffset,e.byteLength):r.isBuffer(e)||(e=r.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;let i=this._offset(t),o=i[0],a=i[1];for(;o<this._bufs.length;o++){let t=this._bufs[o];for(;a<t.length;)if(t.length-a>=e.length){let r=t.indexOf(e,a);if(-1!==r)return this._reverseOffset([o,r]);a=t.length-e.length+1}else{let t=this._reverseOffset([o,a]);if(this._match(t,e))return t;a++}a=0}return-1},i.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){let e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let t in e)(function(t){i.prototype[t]=null===e[t]?function(e,r){return this.slice(e,e+r)[t](0,r)}:function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.slice(r,r+e[t])[t](0)}})(t)}(),i.prototype._isBufferList=function(e){return e instanceof i||i.isBufferList(e)},i.isBufferList=function(e){return null!=e&&e[n]},t.exports=i}),Aa=Un((e,t)=>{Zn(),Mo(),bo();var r=wa().Duplex,n=Sa(),i=Ta();function o(e){if(!(this instanceof o))return new o(e);if("function"==typeof e){this._callback=e;let t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),e=null}i._init.call(this,e),r.call(this)}n(o,r),Object.assign(o.prototype,i.prototype),o.prototype._new=function(e){return new o(e)},o.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},o.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},o.prototype.end=function(e){r.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},o.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},o.prototype._isBufferList=function(e){return e instanceof o||e instanceof i||o.isBufferList(e)},o.isBufferList=i.isBufferList,t.exports=o,t.exports.BufferListStream=o,t.exports.BufferList=i}),Ia=Un((e,t)=>{Zn(),Mo(),bo();t.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}}),Ra=Un((e,t)=>{Zn(),Mo(),bo();var r=t.exports,{Buffer:n}=(ko(),jn(Co));r.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},r.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},r.requiredHeaderFlagsErrors={};for(let o in r.requiredHeaderFlags){let e=r.requiredHeaderFlags[o];r.requiredHeaderFlagsErrors[o]="Invalid header flag bits, must be 0x"+e.toString(16)+" for "+r.types[o]+" packet"}r.codes={};for(let o in r.types){let e=r.types[o];r.codes[e]=o}r.CMD_SHIFT=4,r.CMD_MASK=240,r.DUP_MASK=8,r.QOS_MASK=3,r.QOS_SHIFT=1,r.RETAIN_MASK=1,r.VARBYTEINT_MASK=127,r.VARBYTEINT_FIN_MASK=128,r.VARBYTEINT_MAX=268435455,r.SESSIONPRESENT_MASK=1,r.SESSIONPRESENT_HEADER=n.from([r.SESSIONPRESENT_MASK]),r.CONNACK_HEADER=n.from([r.codes.connack<<r.CMD_SHIFT]),r.USERNAME_MASK=128,r.PASSWORD_MASK=64,r.WILL_RETAIN_MASK=32,r.WILL_QOS_MASK=24,r.WILL_QOS_SHIFT=3,r.WILL_FLAG_MASK=4,r.CLEAN_SESSION_MASK=2,r.CONNECT_HEADER=n.from([r.codes.connect<<r.CMD_SHIFT]),r.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},r.propertiesCodes={};for(let o in r.properties){let e=r.properties[o];r.propertiesCodes[e]=o}function i(e){return[0,1,2].map(t=>[0,1].map(i=>[0,1].map(o=>{let a=n.alloc(1);return a.writeUInt8(r.codes[e]<<r.CMD_SHIFT|(i?r.DUP_MASK:0)|t<<r.QOS_SHIFT|o,0,!0),a})))}r.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},r.PUBLISH_HEADER=i("publish"),r.SUBSCRIBE_HEADER=i("subscribe"),r.SUBSCRIBE_OPTIONS_QOS_MASK=3,r.SUBSCRIBE_OPTIONS_NL_MASK=1,r.SUBSCRIBE_OPTIONS_NL_SHIFT=2,r.SUBSCRIBE_OPTIONS_RAP_MASK=1,r.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,r.SUBSCRIBE_OPTIONS_RH_MASK=3,r.SUBSCRIBE_OPTIONS_RH_SHIFT=4,r.SUBSCRIBE_OPTIONS_RH=[0,16,32],r.SUBSCRIBE_OPTIONS_NL=4,r.SUBSCRIBE_OPTIONS_RAP=8,r.SUBSCRIBE_OPTIONS_QOS=[0,1,2],r.UNSUBSCRIBE_HEADER=i("unsubscribe"),r.ACKS={unsuback:i("unsuback"),puback:i("puback"),pubcomp:i("pubcomp"),pubrel:i("pubrel"),pubrec:i("pubrec")},r.SUBACK_HEADER=n.from([r.codes.suback<<r.CMD_SHIFT]),r.VERSION3=n.from([3]),r.VERSION4=n.from([4]),r.VERSION5=n.from([5]),r.VERSION131=n.from([131]),r.VERSION132=n.from([132]),r.QOS=[0,1,2].map(e=>n.from([e])),r.EMPTY={pingreq:n.from([r.codes.pingreq<<4,0]),pingresp:n.from([r.codes.pingresp<<4,0]),disconnect:n.from([r.codes.disconnect<<4,0])},r.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},r.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},r.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},r.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Na=Un((e,t)=>{Zn(),Mo(),bo();var r=1e3,n=6e4,i=60*n,o=24*i,a=7*o,s=365.25*o;function l(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}t.exports=function(e,t){t=t||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var l=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*s;case"weeks":case"week":case"w":return l*a;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*i;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}(e);if("number"===u&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=o?l(e,t,o,"day"):t>=i?l(e,t,i,"hour"):t>=n?l(e,t,n,"minute"):t>=r?l(e,t,r,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=o?Math.round(e/o)+"d":t>=i?Math.round(e/i)+"h":t>=n?Math.round(e/n)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}),Ca=Un((e,t)=>{Zn(),Mo(),bo(),t.exports=function(e){function t(e){let n,i,o,a=null;function s(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(!s.enabled)return;let o=s,a=Number(new Date),l=a-(n||a);o.diff=l,o.prev=n,o.curr=a,n=a,r[0]=t.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");let u=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(e,n)=>{if("%%"===e)return"%";u++;let i=t.formatters[n];if("function"==typeof i){let t=r[u];e=i.call(o,t),r.splice(u,1),u--}return e}),t.formatArgs.call(o,r),(o.log||t.log).apply(o,r)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function r(e,r){let n=t(this.namespace+(typeof r>"u"?":":r)+e);return n.log=this.log,n}function n(e,t){let r=0,n=0,i=-1,o=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(i=n,o=r,n++):(r++,n++);else{if(-1===i)return!1;n=i+1,o++,r=o}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];let r=("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let n of r)"-"===n[0]?t.skips.push(n.slice(1)):t.names.push(n)},t.enabled=function(e){for(let r of t.skips)if(n(e,r))return!1;for(let r of t.names)if(n(e,r))return!0;return!1},t.humanize=Na(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}}),Oa=Un((e,t)=>{Zn(),Mo(),bo(),e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),e.splice(i,0,r)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(r){}},e.load=function(){let t;try{t=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch(r){}return!t&&typeof qn<"u"&&"env"in qn&&(t=qn.env.DEBUG),t},e.useColors=function(){if(typeof window<"u"&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(e){}}(),e.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=Ca()(e);var{formatters:r}=t.exports;r.j=function(e){try{return JSON.stringify(e)}catch(kf){return"[UnexpectedJSONParseError]: "+kf.message}}}),Pa=Un((e,t)=>{Zn(),Mo(),bo();var r=Aa(),{EventEmitter:n}=(Xo(),jn(jo)),i=Ia(),o=Ra(),a=Oa()("mqtt-packet:parser");t.exports=class e extends n{constructor(){super(),this.parser=this.constructor.parser}static parser(t){return this instanceof e?(this.settings=t||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new e).parser(t)}_resetState(){a("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new i,this.error=null,this._list=r(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),a("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,a("parse: state complete. _stateCounter is now: %d",this._stateCounter),a("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return a("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let e=this._list.readUInt8(0),t=e>>o.CMD_SHIFT;this.packet.cmd=o.types[t];let r=15&e,n=o.requiredHeaderFlags[t];return null!=n&&r!==n?this._emitError(new Error(o.requiredHeaderFlagsErrors[t])):(this.packet.retain=0!==(e&o.RETAIN_MASK),this.packet.qos=e>>o.QOS_SHIFT&o.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=0!==(e&o.DUP_MASK),a("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),a("_parseLength %d",e.value),!!e}_parsePayload(){a("_parsePayload: payload %O",this._list);let e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return a("_parsePayload complete result: %s",e),e}_parseConnect(){a("_parseConnect");let e,t,r,n,i={},s=this.packet,l=this._parseString();if(null===l)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==l&&"MQIsdp"!==l)return this._emitError(new Error("Invalid protocolId"));if(s.protocolId=l,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(s.protocolVersion=this._list.readUInt8(this._pos),s.protocolVersion>=128&&(s.bridgeMode=!0,s.protocolVersion=s.protocolVersion-128),3!==s.protocolVersion&&4!==s.protocolVersion&&5!==s.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(1&this._list.readUInt8(this._pos))return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));i.username=this._list.readUInt8(this._pos)&o.USERNAME_MASK,i.password=this._list.readUInt8(this._pos)&o.PASSWORD_MASK,i.will=this._list.readUInt8(this._pos)&o.WILL_FLAG_MASK;let u=!!(this._list.readUInt8(this._pos)&o.WILL_RETAIN_MASK),c=(this._list.readUInt8(this._pos)&o.WILL_QOS_MASK)>>o.WILL_QOS_SHIFT;if(i.will)s.will={},s.will.retain=u,s.will.qos=c;else{if(u)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(c)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(s.clean=0!==(this._list.readUInt8(this._pos)&o.CLEAN_SESSION_MASK),this._pos++,s.keepalive=this._parseNum(),-1===s.keepalive)return this._emitError(new Error("Packet too short"));if(5===s.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(s.properties=e)}let f=this._parseString();if(null===f)return this._emitError(new Error("Packet too short"));if(s.clientId=f,a("_parseConnect: packet.clientId: %s",s.clientId),i.will){if(5===s.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(s.will.properties=e)}if(e=this._parseString(),null===e)return this._emitError(new Error("Cannot parse will topic"));if(s.will.topic=e,a("_parseConnect: packet.will.topic: %s",s.will.topic),t=this._parseBuffer(),null===t)return this._emitError(new Error("Cannot parse will payload"));s.will.payload=t,a("_parseConnect: packet.will.paylaod: %s",s.will.payload)}if(i.username){if(n=this._parseString(),null===n)return this._emitError(new Error("Cannot parse username"));s.username=n,a("_parseConnect: packet.username: %s",s.username)}if(i.password){if(r=this._parseBuffer(),null===r)return this._emitError(new Error("Cannot parse password"));s.password=r}return this.settings=s,a("_parseConnect: complete"),s}_parseConnack(){a("_parseConnack");let e=this.packet;if(this._list.length<1)return null;let t=this._list.readUInt8(this._pos++);if(t>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(e.sessionPresent=!!(t&o.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(-1===e.returnCode||-1===e.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}a("_parseConnack: complete")}_parsePublish(){a("_parsePublish");let e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}e.payload=this._list.slice(this._pos,e.length),a("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){a("_parseSubscribe");let e,t,r,n,i,s,l,u=this.packet;if(u.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(u.properties=e)}if(u.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<u.length;){if(e=this._parseString(),null===e)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=u.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(t=this._parseByte(),5===this.settings.protocolVersion){if(192&t)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(252&t)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(r=t&o.SUBSCRIBE_OPTIONS_QOS_MASK,r>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(s=0!==(t>>o.SUBSCRIBE_OPTIONS_NL_SHIFT&o.SUBSCRIBE_OPTIONS_NL_MASK),i=0!==(t>>o.SUBSCRIBE_OPTIONS_RAP_SHIFT&o.SUBSCRIBE_OPTIONS_RAP_MASK),n=t>>o.SUBSCRIBE_OPTIONS_RH_SHIFT&o.SUBSCRIBE_OPTIONS_RH_MASK,n>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));l={topic:e,qos:r},5===this.settings.protocolVersion?(l.nl=s,l.rap=i,l.rh=n):this.settings.bridgeMode&&(l.rh=0,l.rap=!0,l.nl=!0),a("_parseSubscribe: push subscription `%s` to subscription",l),u.subscriptions.push(l)}}}_parseSuback(){a("_parseSuback");let e=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let e=this._list.readUInt8(this._pos++);if(5===this.settings.protocolVersion){if(!o.MQTT5_SUBACK_CODES[e])return this._emitError(new Error("Invalid suback code"))}else if(e>2&&128!==e)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(e)}}}_parseUnsubscribe(){a("_parseUnsubscribe");let e=this.packet;if(e.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<e.length;){let t=this._parseString();if(null===t)return this._emitError(new Error("Cannot parse topic"));a("_parseUnsubscribe: push topic `%s` to unsubscriptions",t),e.unsubscriptions.push(t)}}}_parseUnsuback(){a("_parseUnsuback");let e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((3===this.settings.protocolVersion||4===this.settings.protocolVersion)&&2!==e.length)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(e.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(5===this.settings.protocolVersion){let t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;){let e=this._list.readUInt8(this._pos++);if(!o.MQTT5_UNSUBACK_CODES[e])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(e)}}}_parseConfirmation(){a("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let e=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion){if(e.length>2){switch(e.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!o.MQTT5_PUBACK_PUBREC_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!o.MQTT5_PUBREL_PUBCOMP_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"))}a("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)}else e.reasonCode=0;if(e.length>3){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}}return!0}_parseDisconnect(){let e=this.packet;if(a("_parseDisconnect"),5===this.settings.protocolVersion){this._list.length>0?(e.reasonCode=this._parseByte(),o.MQTT5_DISCONNECT_CODES[e.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):e.reasonCode=0;let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}return a("_parseDisconnect result: true"),!0}_parseAuth(){a("_parseAuth");let e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(e.reasonCode=this._parseByte(),!o.MQTT5_AUTH_CODES[e.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),a("_parseAuth: result: true"),!0}_parseMessageId(){let e=this.packet;return e.messageId=this._parseNum(),null===e.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(a("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){let t=this._parseNum(),r=t+this._pos;if(-1===t||r>this._list.length||r>this.packet.length)return null;let n=this._list.toString("utf8",this._pos,r);return this._pos+=t,a("_parseString: result: %s",n),n}_parseStringPair(){return a("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let e=this._parseNum(),t=e+this._pos;if(-1===e||t>this._list.length||t>this.packet.length)return null;let r=this._list.slice(this._pos,t);return this._pos+=e,a("_parseBuffer: result: %o",r),r}_parseNum(){if(this._list.length-this._pos<2)return-1;let e=this._list.readUInt16BE(this._pos);return this._pos+=2,a("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let e=this._list.readUInt32BE(this._pos);return this._pos+=4,a("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){a("_parseVarByteNum");let t,r=0,n=1,i=0,s=!1,l=this._pos?this._pos:0;for(;r<4&&l+r<this._list.length;){if(t=this._list.readUInt8(l+r++),i+=n*(t&o.VARBYTEINT_MASK),n*=128,0===(t&o.VARBYTEINT_FIN_MASK)){s=!0;break}if(this._list.length<=r)break}return!s&&4===r&&this._list.length>=r&&this._emitError(new Error("Invalid variable byte integer")),l&&(this._pos+=r),s=!!s&&(e?{bytes:r,value:i}:i),a("_parseVarByteNum: result: %o",s),s}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),a("_parseByte: result: %o",e),e}_parseByType(e){switch(a("_parseByType: type: %s",e),e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){a("_parseProperties");let e=this._parseVarByteNum(),t=this._pos+e,r={};for(;this._pos<t;){let e=this._parseByte();if(!e)return this._emitError(new Error("Cannot parse property code type")),!1;let t=o.propertiesCodes[e];if(!t)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==t)r[t]?(Array.isArray(r[t])||(r[t]=[r[t]]),r[t].push(this._parseByType(o.propertiesTypes[t]))):r[t]=this._parseByType(o.propertiesTypes[t]);else{r[t]||(r[t]=Object.create(null));let e=this._parseByType(o.propertiesTypes[t]);if(r[t][e.name])if(Array.isArray(r[t][e.name]))r[t][e.name].push(e.value);else{let n=r[t][e.name];r[t][e.name]=[n],r[t][e.name].push(e.value)}else r[t][e.name]=e.value}}return r}_newPacket(){return a("_newPacket"),this.packet&&(this._list.consume(this.packet.length),a("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),a("_newPacket: new packet"),this.packet=new i,this._pos=0,!0}_emitError(e){a("_emitError",e),this.error=e,this.emit("error",e)}}}),xa=Un((e,t)=>{Zn(),Mo(),bo();var{Buffer:r}=(ko(),jn(Co)),n={},i=r.isBuffer(r.from([1,2]).subarray(0,1));function o(e){let t=r.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}t.exports={cache:n,generateCache:function(){for(let e=0;e<65536;e++)n[e]=o(e)},generateNumber:o,genBufVariableByteInt:function(e){let t=0,n=0,o=r.allocUnsafe(4);do{t=e%128|0,(e=e/128|0)>0&&(t|=128),o.writeUInt8(t,n++)}while(e>0&&n<4);return e>0&&(n=0),i?o.subarray(0,n):o.slice(0,n)},generate4ByteBuffer:function(e){let t=r.allocUnsafe(4);return t.writeUInt32BE(e,0),t}}}),Da=Un((e,t)=>{Zn(),Mo(),bo(),typeof qn>"u"||!qn.version||0===qn.version.indexOf("v0.")||0===qn.version.indexOf("v1.")&&0!==qn.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,a=arguments.length;switch(a){case 0:case 1:return qn.nextTick(e);case 2:return qn.nextTick(function(){e.call(null,t)});case 3:return qn.nextTick(function(){e.call(null,t,r)});case 4:return qn.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(a-1),o=0;o<i.length;)i[o++]=arguments[o];return qn.nextTick(function(){e.apply(null,i)})}}}:t.exports=qn}),ka=Un((e,t)=>{Zn(),Mo(),bo();var r=Ra(),{Buffer:n}=(ko(),jn(Co)),i=n.allocUnsafe(0),o=n.from([0]),a=xa(),s=Da().nextTick,l=Oa()("mqtt-packet:writeToStream"),u=a.cache,c=a.generateNumber,f=a.generateCache,d=a.genBufVariableByteInt,h=a.generate4ByteBuffer,p=w,g=!0;function m(e,t,a){switch(l("generate called"),t.cork&&(t.cork(),s(y,t)),g&&(g=!1,f()),l("generate: packet.cmd: %s",e.cmd),e.cmd){case"connect":return function(e,t){let i=e||{},o=i.protocolId||"MQTT",a=i.protocolVersion||4,s=i.will,l=i.clean,u=i.keepalive||0,c=i.clientId||"",f=i.username,d=i.password,h=i.properties;void 0===l&&(l=!0);let g,m,y=0;if(!o||"string"!=typeof o&&!n.isBuffer(o))return t.destroy(new Error("Invalid protocolId")),!1;if(y+=o.length+2,3!==a&&4!==a&&5!==a)return t.destroy(new Error("Invalid protocol version")),!1;if(y+=1,("string"==typeof c||n.isBuffer(c))&&(c||a>=4)&&(c||l))y+=n.byteLength(c)+2;else{if(a<4)return t.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(1*l===0)return t.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof u||u<0||u>65535||u%1!==0)return t.destroy(new Error("Invalid keepalive")),!1;if(y+=2,y+=1,5===a){if(g=A(t,h),!g)return!1;y+=g.length}if(s){if("object"!=typeof s)return t.destroy(new Error("Invalid will")),!1;if(!s.topic||"string"!=typeof s.topic)return t.destroy(new Error("Invalid will topic")),!1;if(y+=n.byteLength(s.topic)+2,y+=2,s.payload){if(!(s.payload.length>=0))return t.destroy(new Error("Invalid will payload")),!1;"string"==typeof s.payload?y+=n.byteLength(s.payload):y+=s.payload.length}if(m={},5===a){if(m=A(t,s.properties),!m)return!1;y+=m.length}}let v=!1;if(null!=f){if(!O(f))return t.destroy(new Error("Invalid username")),!1;v=!0,y+=n.byteLength(f)+2}if(null!=d){if(!v)return t.destroy(new Error("Username is required to use password")),!1;if(!O(d))return t.destroy(new Error("Invalid password")),!1;y+=C(d)+2}t.write(r.CONNECT_HEADER),_(t,y),T(t,o),i.bridgeMode&&(a+=128),t.write(131===a?r.VERSION131:132===a?r.VERSION132:4===a?r.VERSION4:5===a?r.VERSION5:r.VERSION3);let E=0;return E|=null!=f?r.USERNAME_MASK:0,E|=null!=d?r.PASSWORD_MASK:0,E|=s&&s.retain?r.WILL_RETAIN_MASK:0,E|=s&&s.qos?s.qos<<r.WILL_QOS_SHIFT:0,E|=s?r.WILL_FLAG_MASK:0,E|=l?r.CLEAN_SESSION_MASK:0,t.write(n.from([E])),p(t,u),5===a&&g.write(),T(t,c),s&&(5===a&&m.write(),b(t,s.topic),T(t,s.payload)),null!=f&&T(t,f),null!=d&&T(t,d),!0}(e,t);case"connack":return function(e,t,i){var a;let s=i?i.protocolVersion:4,l=e||{},u=5===s?l.reasonCode:l.returnCode,c=l.properties,f=2;if("number"!=typeof u)return t.destroy(new Error("Invalid return code")),!1;let d=null;if(5===s){if(d=A(t,c),!d)return!1;f+=d.length}return t.write(r.CONNACK_HEADER),_(t,f),t.write(l.sessionPresent?r.SESSIONPRESENT_HEADER:o),t.write(n.from([u])),null!==(a=d)&&void 0!==a&&a.write(),!0}(e,t,a);case"publish":return function(e,t,o){var a;l("publish: packet: %o",e);let s=o?o.protocolVersion:4,u=e||{},c=u.qos||0,f=u.retain?r.RETAIN_MASK:0,d=u.topic,h=u.payload||i,g=u.messageId,m=u.properties,y=0;if("string"==typeof d)y+=n.byteLength(d)+2;else{if(!n.isBuffer(d))return t.destroy(new Error("Invalid topic")),!1;y+=d.length+2}if(n.isBuffer(h)?y+=h.length:y+=n.byteLength(h),c&&"number"!=typeof g)return t.destroy(new Error("Invalid messageId")),!1;c&&(y+=2);let v=null;if(5===s){if(v=A(t,m),!v)return!1;y+=v.length}return t.write(r.PUBLISH_HEADER[c][u.dup?1:0][f?1:0]),_(t,y),p(t,C(d)),t.write(d),c>0&&p(t,g),null!==(a=v)&&void 0!==a&&a.write(),l("publish: payload: %o",h),t.write(h)}(e,t,a);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(e,t,i){let o=i?i.protocolVersion:4,a=e||{},s=a.cmd||"puback",l=a.messageId,u=a.dup&&"pubrel"===s?r.DUP_MASK:0,c=0,f=a.reasonCode,d=a.properties,h=5===o?3:2;if("pubrel"===s&&(c=1),"number"!=typeof l)return t.destroy(new Error("Invalid messageId")),!1;let g=null;if(5===o&&"object"==typeof d){if(g=I(t,d,i,h),!g)return!1;h+=g.length}return t.write(r.ACKS[s][c][u][0]),3===h&&(h+=0!==f?1:-1),_(t,h),p(t,l),5===o&&2!==h&&t.write(n.from([f])),null!==g?g.write():4===h&&t.write(n.from([0])),!0}(e,t,a);case"subscribe":return function(e,t,i){l("subscribe: packet: ");let o=i?i.protocolVersion:4,a=e||{},s=a.dup?r.DUP_MASK:0,u=a.messageId,c=a.subscriptions,f=a.properties,d=0;if("number"!=typeof u)return t.destroy(new Error("Invalid messageId")),!1;d+=2;let h=null;if(5===o){if(h=A(t,f),!h)return!1;d+=h.length}if("object"!=typeof c||!c.length)return t.destroy(new Error("Invalid subscriptions")),!1;for(let r=0;r<c.length;r+=1){let e=c[r].topic,i=c[r].qos;if("string"!=typeof e)return t.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof i)return t.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(5===o){if("boolean"!=typeof(c[r].nl||!1))return t.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(c[r].rap||!1))return t.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let e=c[r].rh||0;if("number"!=typeof e||e>2)return t.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}d+=n.byteLength(e)+2+1}l("subscribe: writing to stream: %o",r.SUBSCRIBE_HEADER),t.write(r.SUBSCRIBE_HEADER[1][s?1:0][0]),_(t,d),p(t,u),null!==h&&h.write();let g=!0;for(let l of c){let e,i=l.topic,a=l.qos,s=+l.nl,u=+l.rap,c=l.rh;b(t,i),e=r.SUBSCRIBE_OPTIONS_QOS[a],5===o&&(e|=s?r.SUBSCRIBE_OPTIONS_NL:0,e|=u?r.SUBSCRIBE_OPTIONS_RAP:0,e|=c?r.SUBSCRIBE_OPTIONS_RH[c]:0),g=t.write(n.from([e]))}return g}(e,t,a);case"suback":return function(e,t,i){let o=i?i.protocolVersion:4,a=e||{},s=a.messageId,l=a.granted,u=a.properties,c=0;if("number"!=typeof s)return t.destroy(new Error("Invalid messageId")),!1;if(c+=2,"object"!=typeof l||!l.length)return t.destroy(new Error("Invalid qos vector")),!1;for(let r=0;r<l.length;r+=1){if("number"!=typeof l[r])return t.destroy(new Error("Invalid qos vector")),!1;c+=1}let f=null;if(5===o){if(f=I(t,u,i,c),!f)return!1;c+=f.length}return t.write(r.SUBACK_HEADER),_(t,c),p(t,s),null!==f&&f.write(),t.write(n.from(l))}(e,t,a);case"unsubscribe":return function(e,t,i){let o=i?i.protocolVersion:4,a=e||{},s=a.messageId,l=a.dup?r.DUP_MASK:0,u=a.unsubscriptions,c=a.properties,f=0;if("number"!=typeof s)return t.destroy(new Error("Invalid messageId")),!1;if(f+=2,"object"!=typeof u||!u.length)return t.destroy(new Error("Invalid unsubscriptions")),!1;for(let r=0;r<u.length;r+=1){if("string"!=typeof u[r])return t.destroy(new Error("Invalid unsubscriptions")),!1;f+=n.byteLength(u[r])+2}let d=null;if(5===o){if(d=A(t,c),!d)return!1;f+=d.length}t.write(r.UNSUBSCRIBE_HEADER[1][l?1:0][0]),_(t,f),p(t,s),null!==d&&d.write();let h=!0;for(let r=0;r<u.length;r++)h=b(t,u[r]);return h}(e,t,a);case"unsuback":return function(e,t,i){let o=i?i.protocolVersion:4,a=e||{},s=a.messageId,l=a.dup?r.DUP_MASK:0,u=a.granted,c=a.properties,f=a.cmd,d=0,h=2;if("number"!=typeof s)return t.destroy(new Error("Invalid messageId")),!1;if(5===o){if("object"!=typeof u||!u.length)return t.destroy(new Error("Invalid qos vector")),!1;for(let e=0;e<u.length;e+=1){if("number"!=typeof u[e])return t.destroy(new Error("Invalid qos vector")),!1;h+=1}}let g=null;if(5===o){if(g=I(t,c,i,h),!g)return!1;h+=g.length}return t.write(r.ACKS[f][d][l][0]),_(t,h),p(t,s),null!==g&&g.write(),5===o&&t.write(n.from(u)),!0}(e,t,a);case"pingreq":case"pingresp":return function(e,t){return t.write(r.EMPTY[e.cmd])}(e,t);case"disconnect":return function(e,t,i){let o=i?i.protocolVersion:4,a=e||{},s=a.reasonCode,l=a.properties,u=5===o?1:0,c=null;if(5===o){if(c=I(t,l,i,u),!c)return!1;u+=c.length}return t.write(n.from([r.codes.disconnect<<4])),_(t,u),5===o&&t.write(n.from([s])),null!==c&&c.write(),!0}(e,t,a);case"auth":return function(e,t,i){let o=i?i.protocolVersion:4,a=e||{},s=a.reasonCode,l=a.properties,u=5===o?1:0;5!==o&&t.destroy(new Error("Invalid mqtt version for auth packet"));let c=I(t,l,i,u);return!!c&&(u+=c.length,t.write(n.from([r.codes.auth<<4])),_(t,u),t.write(n.from([s])),null!==c&&c.write(),!0)}(e,t,a);default:return t.destroy(new Error("Unknown command")),!1}}function y(e){e.uncork()}Object.defineProperty(m,"cacheNumbers",{get:()=>p===w,set(e){e?((!u||0===Object.keys(u).length)&&(g=!0),p=w):(g=!1,p=S)}});var v={};function _(e,t){if(t>r.VARBYTEINT_MAX)return e.destroy(new Error("Invalid variable byte integer: ".concat(t))),!1;let n=v[t];return n||(n=d(t),t<16384&&(v[t]=n)),l("writeVarByteInt: writing to stream: %o",n),e.write(n)}function b(e,t){let r=n.byteLength(t);return p(e,r),l("writeString: %s",t),e.write(t,"utf8")}function E(e,t,r){b(e,t),b(e,r)}function w(e,t){return l("writeNumberCached: number: %d",t),l("writeNumberCached: %o",u[t]),e.write(u[t])}function S(e,t){let r=c(t);return l("writeNumberGenerated: %o",r),e.write(r)}function T(e,t){"string"==typeof t?b(e,t):t?(p(e,t.length),e.write(t)):p(e,0)}function A(e,t){if("object"!=typeof t||null!=t.length)return{length:1,write(){N(e,{},0)}};let i=0;function o(t,i){let o=0;switch(r.propertiesTypes[t]){case"byte":if("boolean"!=typeof i)return e.destroy(new Error("Invalid ".concat(t,": ").concat(i))),!1;o+=2;break;case"int8":if("number"!=typeof i||i<0||i>255)return e.destroy(new Error("Invalid ".concat(t,": ").concat(i))),!1;o+=2;break;case"binary":if(i&&null===i)return e.destroy(new Error("Invalid ".concat(t,": ").concat(i))),!1;o+=1+n.byteLength(i)+2;break;case"int16":if("number"!=typeof i||i<0||i>65535)return e.destroy(new Error("Invalid ".concat(t,": ").concat(i))),!1;o+=3;break;case"int32":if("number"!=typeof i||i<0||i>4294967295)return e.destroy(new Error("Invalid ".concat(t,": ").concat(i))),!1;o+=5;break;case"var":if("number"!=typeof i||i<0||i>268435455)return e.destroy(new Error("Invalid ".concat(t,": ").concat(i))),!1;o+=1+n.byteLength(d(i));break;case"string":if("string"!=typeof i)return e.destroy(new Error("Invalid ".concat(t,": ").concat(i))),!1;o+=3+n.byteLength(i.toString());break;case"pair":if("object"!=typeof i)return e.destroy(new Error("Invalid ".concat(t,": ").concat(i))),!1;o+=Object.getOwnPropertyNames(i).reduce((e,t)=>{let r=i[t];return Array.isArray(r)?e+=r.reduce((e,r)=>e+=3+n.byteLength(t.toString())+2+n.byteLength(r.toString()),0):e+=3+n.byteLength(t.toString())+2+n.byteLength(i[t].toString()),e},0);break;default:return e.destroy(new Error("Invalid property ".concat(t,": ").concat(i))),!1}return o}if(t)for(let r in t){let e=0,n=0,a=t[r];if(void 0!==a){if(Array.isArray(a))for(let t=0;t<a.length;t++){if(n=o(r,a[t]),!n)return!1;e+=n}else{if(n=o(r,a),!n)return!1;e=n}if(!e)return!1;i+=e}}return{length:n.byteLength(d(i))+i,write(){N(e,t,i)}}}function I(e,t,r,n){let i=["reasonString","userProperties"],o=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0,a=A(e,t);if(o)for(;n+a.length>o;){let r=i.shift();if(!r||!t[r])return!1;delete t[r],a=A(e,t)}return a}function R(e,t,i){switch(r.propertiesTypes[t]){case"byte":e.write(n.from([r.properties[t]])),e.write(n.from([+i]));break;case"int8":e.write(n.from([r.properties[t]])),e.write(n.from([i]));break;case"binary":e.write(n.from([r.properties[t]])),T(e,i);break;case"int16":e.write(n.from([r.properties[t]])),p(e,i);break;case"int32":e.write(n.from([r.properties[t]])),function(e,t){let r=h(t);l("write4ByteNumber: %o",r),e.write(r)}(e,i);break;case"var":e.write(n.from([r.properties[t]])),_(e,i);break;case"string":e.write(n.from([r.properties[t]])),b(e,i);break;case"pair":Object.getOwnPropertyNames(i).forEach(o=>{let a=i[o];Array.isArray(a)?a.forEach(i=>{e.write(n.from([r.properties[t]])),E(e,o.toString(),i.toString())}):(e.write(n.from([r.properties[t]])),E(e,o.toString(),a.toString()))});break;default:return e.destroy(new Error("Invalid property ".concat(t," value: ").concat(i))),!1}}function N(e,t,r){_(e,r);for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&null!=t[n]){let r=t[n];if(Array.isArray(r))for(let t=0;t<r.length;t++)R(e,n,r[t]);else R(e,n,r)}}function C(e){return e?e instanceof n?e.length:n.byteLength(e):0}function O(e){return"string"==typeof e||e instanceof n}t.exports=m}),Ma=Un((e,t)=>{Zn(),Mo(),bo();var r=ka(),{EventEmitter:n}=(Xo(),jn(jo)),{Buffer:i}=(ko(),jn(Co));var o=class extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e,t=0,r=new Array(this._array.length),n=this._array,o=0;for(e=0;e<n.length&&void 0!==n[e];e++)"string"!=typeof n[e]?r[e]=n[e].length:r[e]=i.byteLength(n[e]),t+=r[e];let a=i.allocUnsafe(t);for(e=0;e<n.length&&void 0!==n[e];e++)"string"!=typeof n[e]?(n[e].copy(a,o),o+=r[e]):(a.write(n[e],o),o+=r[e]);return a}destroy(e){e&&this.emit("error",e)}};t.exports=function(e,t){let n=new o;return r(e,n,t),n.concat()}}),La=Un(e=>{Zn(),Mo(),bo(),e.parser=Pa().parser,e.generate=Ma(),e.writeToStream=ka()}),Fa=Un((e,t)=>{function r(e){return e instanceof Po?Po.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}Zn(),Mo(),bo(),t.exports=function(e){if((e=e||{}).circles)return function(e){let t=[],n=[],i=new Map;if(i.set(Date,e=>new Date(e)),i.set(Map,(e,t)=>new Map(a(Array.from(e),t))),i.set(Set,(e,t)=>new Set(a(Array.from(e),t))),e.constructorHandlers)for(let r of e.constructorHandlers)i.set(r[0],r[1]);let o=null;return e.proto?l:s;function a(e,a){let s=Object.keys(e),l=new Array(s.length);for(let u=0;u<s.length;u++){let c=s[u],f=e[c];if("object"!=typeof f||null===f)l[c]=f;else if(f.constructor!==Object&&(o=i.get(f.constructor)))l[c]=o(f,a);else if(ArrayBuffer.isView(f))l[c]=r(f);else{let e=t.indexOf(f);l[c]=-1!==e?n[e]:a(f)}}return l}function s(e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e))return a(e,s);if(e.constructor!==Object&&(o=i.get(e.constructor)))return o(e,s);let l={};t.push(e),n.push(l);for(let a in e){if(!1===Object.hasOwnProperty.call(e,a))continue;let u=e[a];if("object"!=typeof u||null===u)l[a]=u;else if(u.constructor!==Object&&(o=i.get(u.constructor)))l[a]=o(u,s);else if(ArrayBuffer.isView(u))l[a]=r(u);else{let e=t.indexOf(u);l[a]=-1!==e?n[e]:s(u)}}return t.pop(),n.pop(),l}function l(e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e))return a(e,l);if(e.constructor!==Object&&(o=i.get(e.constructor)))return o(e,l);let s={};t.push(e),n.push(s);for(let a in e){let u=e[a];if("object"!=typeof u||null===u)s[a]=u;else if(u.constructor!==Object&&(o=i.get(u.constructor)))s[a]=o(u,l);else if(ArrayBuffer.isView(u))s[a]=r(u);else{let e=t.indexOf(u);s[a]=-1!==e?n[e]:l(u)}}return t.pop(),n.pop(),s}}(e);let t=new Map;if(t.set(Date,e=>new Date(e)),t.set(Map,(e,t)=>new Map(i(Array.from(e),t))),t.set(Set,(e,t)=>new Set(i(Array.from(e),t))),e.constructorHandlers)for(let r of e.constructorHandlers)t.set(r[0],r[1]);let n=null;return e.proto?function e(o){if("object"!=typeof o||null===o)return o;if(Array.isArray(o))return i(o,e);if(o.constructor!==Object&&(n=t.get(o.constructor)))return n(o,e);let a={};for(let i in o){let s=o[i];"object"!=typeof s||null===s?a[i]=s:s.constructor!==Object&&(n=t.get(s.constructor))?a[i]=n(s,e):ArrayBuffer.isView(s)?a[i]=r(s):a[i]=e(s)}return a}:function e(o){if("object"!=typeof o||null===o)return o;if(Array.isArray(o))return i(o,e);if(o.constructor!==Object&&(n=t.get(o.constructor)))return n(o,e);let a={};for(let i in o){if(!1===Object.hasOwnProperty.call(o,i))continue;let s=o[i];"object"!=typeof s||null===s?a[i]=s:s.constructor!==Object&&(n=t.get(s.constructor))?a[i]=n(s,e):ArrayBuffer.isView(s)?a[i]=r(s):a[i]=e(s)}return a};function i(e,i){let o=Object.keys(e),a=new Array(o.length);for(let s=0;s<o.length;s++){let l=o[s],u=e[l];"object"!=typeof u||null===u?a[l]=u:u.constructor!==Object&&(n=t.get(u.constructor))?a[l]=n(u,i):ArrayBuffer.isView(u)?a[l]=r(u):a[l]=i(u)}return a}}}),Ua=Un((e,t)=>{Zn(),Mo(),bo(),t.exports=Fa()()}),Ba=Un(e=>{function t(e){let t=e.split("/");for(let r=0;r<t.length;r++)if("+"!==t[r]){if("#"===t[r])return r===t.length-1;if(-1!==t[r].indexOf("+")||-1!==t[r].indexOf("#"))return!1}return!0}Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopic=t,e.validateTopics=function(e){if(0===e.length)return"empty_topic_list";for(let r=0;r<e.length;r++)if(!t(e[r]))return e[r];return null}}),ja=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0});var t=wa(),r={objectMode:!0},n={clean:!0};e.default=class{constructor(e){l(this,"options",void 0),l(this,"_inflights",void 0),this.options=e||{},this.options=c(c({},n),e),this._inflights=new Map}put(e,t){return this._inflights.set(e.messageId,e),t&&t(),this}createStream(){let e=new t.Readable(r),n=[],i=!1,o=0;return this._inflights.forEach((e,t)=>{n.push(e)}),e._read=()=>{!i&&o<n.length?e.push(n[o++]):e.push(null)},e.destroy=t=>{if(!i)return i=!0,setTimeout(()=>{e.emit("close")},0),e},e}del(e,t){let r=this._inflights.get(e.messageId);return r?(this._inflights.delete(e.messageId),t(null,r)):t&&t(new Error("missing packet")),this}get(e,t){let r=this._inflights.get(e.messageId);return r?t(null,r):t&&t(new Error("missing packet")),this}close(e){this.options.clean&&(this._inflights=null),e&&e()}}}),Za=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0});var t=[0,16,128,131,135,144,145,151,153];e.default=(e,r,n)=>{e.log("handlePublish: packet %o",r),n=typeof n<"u"?n:e.noop;let i=r.topic.toString(),o=r.payload,{qos:a}=r,{messageId:s}=r,{options:l}=e;if(5===e.options.protocolVersion){let t;if(r.properties&&(t=r.properties.topicAlias),typeof t<"u")if(0===i.length){if(!(t>0&&t<=65535))return e.log("handlePublish :: topic alias out of range. alias: %d",t),void e.emit("error",new Error("Received Topic Alias is out of range"));{let r=e.topicAliasRecv.getTopicByAlias(t);if(!r)return e.log("handlePublish :: unregistered topic alias. alias: %d",t),void e.emit("error",new Error("Received unregistered Topic Alias"));i=r,e.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,t)}}else{if(!e.topicAliasRecv.put(i,t))return e.log("handlePublish :: topic alias out of range. alias: %d",t),void e.emit("error",new Error("Received Topic Alias is out of range"));e.log("handlePublish :: registered topic: %s - alias: %d",i,t)}}switch(e.log("handlePublish: qos %d",a),a){case 2:l.customHandleAcks(i,o,r,(i,o)=>("number"==typeof i&&(o=i,i=null),i?e.emit("error",i):-1===t.indexOf(o)?e.emit("error",new Error("Wrong reason code for pubrec")):void(o?e._sendPacket({cmd:"pubrec",messageId:s,reasonCode:o},n):e.incomingStore.put(r,()=>{e._sendPacket({cmd:"pubrec",messageId:s},n)}))));break;case 1:l.customHandleAcks(i,o,r,(a,l)=>("number"==typeof a&&(l=a,a=null),a?e.emit("error",a):-1===t.indexOf(l)?e.emit("error",new Error("Wrong reason code for puback")):(l||e.emit("message",i,o,r),void e.handleMessage(r,t=>{if(t)return n&&n(t);e._sendPacket({cmd:"puback",messageId:s,reasonCode:l},n)}))));break;case 0:e.emit("message",i,o,r),e.handleMessage(r,n);break;default:e.log("handlePublish: unknown QoS. Doing nothing.")}}}),qa=Un((e,t)=>{t.exports={version:"5.14.0"}}),Ga=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.ErrorWithSubackPacket=e.ErrorWithReasonCode=void 0,e.applyMixin=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[t];for(;;){let e=n[0],t=Object.getPrototypeOf(e);if(null===t||void 0===t||!t.prototype)break;n.unshift(t)}for(let o of n)for(let t of Object.getOwnPropertyNames(o.prototype)){var i;(r||"constructor"!==t)&&Object.defineProperty(e.prototype,t,null!==(i=Object.getOwnPropertyDescriptor(o.prototype,t))&&void 0!==i?i:Object.create(null))}};var t=class e extends Error{constructor(t,r){super(t),l(this,"code",void 0),this.code=r,Object.setPrototypeOf(this,e.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=t;var r=class e extends Error{constructor(t,r){super(t),l(this,"packet",void 0),this.packet=r,Object.setPrototypeOf(this,e.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};e.ErrorWithSubackPacket=r,e.nextTick="function"==typeof(null===qn||void 0===qn?void 0:qn.nextTick)?qn.nextTick:e=>{setTimeout(e,0)},e.MQTTJS_VERSION=qa().version}),za=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0;var t=Ga();e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};e.default=(r,n)=>{let{messageId:i}=n,o=n.cmd,a=null,s=r.outgoing[i]?r.outgoing[i].cb:null,l=null;if(s){switch(r.log("_handleAck :: packet type",o),o){case"pubcomp":case"puback":{let o=n.reasonCode;o&&o>0&&16!==o?(l=new t.ErrorWithReasonCode("Publish error: ".concat(e.ReasonCodes[o]),o),r._removeOutgoingAndStoreMessage(i,()=>{s(l,n)})):r._removeOutgoingAndStoreMessage(i,s);break}case"pubrec":{a={cmd:"pubrel",qos:2,messageId:i};let o=n.reasonCode;o&&o>0&&16!==o?(l=new t.ErrorWithReasonCode("Publish error: ".concat(e.ReasonCodes[o]),o),r._removeOutgoingAndStoreMessage(i,()=>{s(l,n)})):r._sendPacket(a);break}case"suback":{delete r.outgoing[i],r.messageIdProvider.deallocate(i);let t=n.granted;for(let n=0;n<t.length;n++){let o=t[n];if(0!==(128&o)){l=new Error("Subscribe error: ".concat(e.ReasonCodes[o])),l.code=o;let t=r.messageIdToTopic[i];t&&t.forEach(e=>{delete r._resubscribeTopics[e]})}}delete r.messageIdToTopic[i],r._invokeStoreProcessingQueue(),s(l,n);break}case"unsuback":delete r.outgoing[i],r.messageIdProvider.deallocate(i),r._invokeStoreProcessingQueue(),s(null,n);break;default:r.emit("error",new Error("unrecognized packet type"))}r.disconnecting&&0===Object.keys(r.outgoing).length&&r.emit("outgoingEmpty")}else r.log("_handleAck :: Server sent an ack in error. Ignoring.")}}),Ha=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ga(),r=za();e.default=(e,n)=>{let{options:i}=e,o=i.protocolVersion,a=5===o?n.reasonCode:n.returnCode;if(5===o)e.handleAuth(n,(n,i)=>{if(n)e.emit("error",n);else if(24===a)e.reconnecting=!1,e._sendPacket(i);else{let n=new t.ErrorWithReasonCode("Connection refused: ".concat(r.ReasonCodes[a]),a);e.emit("error",n)}});else{let r=new t.ErrorWithReasonCode("Protocol error: Auth packets are only supported in MQTT 5. Your version:".concat(o),a);e.emit("error",r)}}}),Va=Un(e=>{var t,r,n,i,o,a,s,u,f,d,h,p,g,m,y,v,_,b,E,w,S,T,A,I,R,N,C,O,P,x,D,k,M;Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var L="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,F=new Set,U="object"==typeof qn&&qn?qn:{},B=(e,t,r,n)=>{"function"==typeof U.emitWarning?U.emitWarning(e,t,r,n):console.error("[".concat(r,"] ").concat(t,": ").concat(e))},j=globalThis.AbortController,Z=globalThis.AbortSignal;if(typeof j>"u"){var q;Z=class{constructor(){l(this,"onabort",void 0),l(this,"_onabort",[]),l(this,"reason",void 0),l(this,"aborted",!1)}addEventListener(e,t){this._onabort.push(t)}},j=class{constructor(){l(this,"signal",new Z),t()}abort(e){if(!this.signal.aborted){var t,r;this.signal.reason=e,this.signal.aborted=!0;for(let t of this.signal._onabort)t(e);null===(t=(r=this.signal).onabort)||void 0===t||t.call(r,e)}}};let e="1"!==(null===(q=U.env)||void 0===q?void 0:q.LRU_CACHE_IGNORE_AC_WARNING),t=()=>{e&&(e=!1,B("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");var G=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),z=e=>G(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?H:null:null,H=class extends Array{constructor(e){super(e),this.fill(0)}},V=(t=class e{static create(n){let i=z(n);if(!i)return[];r._=Nn(t,e,!0);let o=new e(n,i);return r._=Nn(t,e,!1),o}constructor(n,i){if(l(this,"heap",void 0),l(this,"length",void 0),!Nn(t,e,r)._)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new i(n),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},r={_:!1},t),W=(n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,u=new WeakMap,f=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,y=new WeakMap,v=new WeakMap,_=new WeakMap,b=new WeakMap,E=new WeakMap,w=new WeakMap,S=new WeakMap,T=new WeakMap,A=new WeakMap,I=new WeakMap,R=new WeakMap,N=new WeakSet,C=new WeakMap,O=new WeakMap,P=new WeakMap,x=new WeakMap,D=new WeakMap,k=new WeakMap,M=new WeakMap,class e{static unsafeExposeInternals(e){return{starts:On(S,e),ttls:On(T,e),sizes:On(w,e),keyMap:On(h,e),keyList:On(p,e),valList:On(g,e),next:On(m,e),prev:On(y,e),get head(){return On(v,e)},get tail(){return On(_,e)},free:On(b,e),isBackgroundFetch:t=>Nn(N,e,te).call(e,t),backgroundFetch:(t,r,n,i)=>Nn(N,e,ee).call(e,t,r,n,i),moveToTail:t=>Nn(N,e,ne).call(e,t),indexes:t=>Nn(N,e,Q).call(e,t),rindexes:t=>Nn(N,e,X).call(e,t),isStale:t=>On(x,e).call(e,t)}}get max(){return On(n,this)}get maxSize(){return On(i,this)}get calculatedSize(){return On(d,this)}get size(){return On(f,this)}get fetchMethod(){return On(s,this)}get memoMethod(){return On(u,this)}get dispose(){return On(o,this)}get disposeAfter(){return On(a,this)}constructor(t){!function(e,t){In(e,t),t.add(e)}(this,N),Rn(this,n,void 0),Rn(this,i,void 0),Rn(this,o,void 0),Rn(this,a,void 0),Rn(this,s,void 0),Rn(this,u,void 0),l(this,"ttl",void 0),l(this,"ttlResolution",void 0),l(this,"ttlAutopurge",void 0),l(this,"updateAgeOnGet",void 0),l(this,"updateAgeOnHas",void 0),l(this,"allowStale",void 0),l(this,"noDisposeOnSet",void 0),l(this,"noUpdateTTL",void 0),l(this,"maxEntrySize",void 0),l(this,"sizeCalculation",void 0),l(this,"noDeleteOnFetchRejection",void 0),l(this,"noDeleteOnStaleGet",void 0),l(this,"allowStaleOnFetchAbort",void 0),l(this,"allowStaleOnFetchRejection",void 0),l(this,"ignoreFetchAbort",void 0),Rn(this,f,void 0),Rn(this,d,void 0),Rn(this,h,void 0),Rn(this,p,void 0),Rn(this,g,void 0),Rn(this,m,void 0),Rn(this,y,void 0),Rn(this,v,void 0),Rn(this,_,void 0),Rn(this,b,void 0),Rn(this,E,void 0),Rn(this,w,void 0),Rn(this,S,void 0),Rn(this,T,void 0),Rn(this,A,void 0),Rn(this,I,void 0),Rn(this,R,void 0),Rn(this,C,()=>{}),Rn(this,O,()=>{}),Rn(this,P,()=>{}),Rn(this,x,()=>!1),Rn(this,D,e=>{}),Rn(this,k,(e,t,r)=>{}),Rn(this,M,(e,t,r,n)=>{if(r||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0}),l(this,Symbol.toStringTag,"LRUCache");let{max:r=0,ttl:c,ttlResolution:L=1,ttlAutopurge:U,updateAgeOnGet:j,updateAgeOnHas:Z,allowStale:q,dispose:H,disposeAfter:W,noDisposeOnSet:Q,noUpdateTTL:X,maxSize:$=0,maxEntrySize:J=0,sizeCalculation:ee,fetchMethod:te,memoMethod:re,noDeleteOnFetchRejection:ne,noDeleteOnStaleGet:ie,allowStaleOnFetchRejection:oe,allowStaleOnFetchAbort:ae,ignoreFetchAbort:se}=t;if(0!==r&&!G(r))throw new TypeError("max option must be a nonnegative integer");let le=r?z(r):Array;if(!le)throw new Error("invalid max value: "+r);if(Cn(n,this,r),Cn(i,this,$),this.maxEntrySize=J||On(i,this),this.sizeCalculation=ee,this.sizeCalculation){if(!On(i,this)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==re&&"function"!=typeof re)throw new TypeError("memoMethod must be a function if defined");if(Cn(u,this,re),void 0!==te&&"function"!=typeof te)throw new TypeError("fetchMethod must be a function if specified");if(Cn(s,this,te),Cn(I,this,!!te),Cn(h,this,new Map),Cn(p,this,new Array(r).fill(void 0)),Cn(g,this,new Array(r).fill(void 0)),Cn(m,this,new le(r)),Cn(y,this,new le(r)),Cn(v,this,0),Cn(_,this,0),Cn(b,this,V.create(r)),Cn(f,this,0),Cn(d,this,0),"function"==typeof H&&Cn(o,this,H),"function"==typeof W?(Cn(a,this,W),Cn(E,this,[])):(Cn(a,this,void 0),Cn(E,this,void 0)),Cn(A,this,!!On(o,this)),Cn(R,this,!!On(a,this)),this.noDisposeOnSet=!!Q,this.noUpdateTTL=!!X,this.noDeleteOnFetchRejection=!!ne,this.allowStaleOnFetchRejection=!!oe,this.allowStaleOnFetchAbort=!!ae,this.ignoreFetchAbort=!!se,0!==this.maxEntrySize){if(0!==On(i,this)&&!G(On(i,this)))throw new TypeError("maxSize must be a positive integer if specified");if(!G(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Nn(N,this,K).call(this)}if(this.allowStale=!!q,this.noDeleteOnStaleGet=!!ie,this.updateAgeOnGet=!!j,this.updateAgeOnHas=!!Z,this.ttlResolution=G(L)||0===L?L:1,this.ttlAutopurge=!!U,this.ttl=c||0,this.ttl){if(!G(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Nn(N,this,Y).call(this)}if(0===On(n,this)&&0===this.ttl&&0===On(i,this))throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!On(n,this)&&!On(i,this)){let t="LRU_CACHE_UNBOUNDED";(e=>!F.has(e))(t)&&(F.add(t),B("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,e))}}getRemainingTTL(e){return On(h,this).has(e)?1/0:0}*entries(){for(let e of Nn(N,this,Q).call(this))void 0!==On(g,this)[e]&&void 0!==On(p,this)[e]&&!Nn(N,this,te).call(this,On(g,this)[e])&&(yield[On(p,this)[e],On(g,this)[e]])}*rentries(){for(let e of Nn(N,this,X).call(this))void 0!==On(g,this)[e]&&void 0!==On(p,this)[e]&&!Nn(N,this,te).call(this,On(g,this)[e])&&(yield[On(p,this)[e],On(g,this)[e]])}*keys(){for(let e of Nn(N,this,Q).call(this)){let t=On(p,this)[e];void 0!==t&&!Nn(N,this,te).call(this,On(g,this)[e])&&(yield t)}}*rkeys(){for(let e of Nn(N,this,X).call(this)){let t=On(p,this)[e];void 0!==t&&!Nn(N,this,te).call(this,On(g,this)[e])&&(yield t)}}*values(){for(let e of Nn(N,this,Q).call(this))void 0!==On(g,this)[e]&&!Nn(N,this,te).call(this,On(g,this)[e])&&(yield On(g,this)[e])}*rvalues(){for(let e of Nn(N,this,X).call(this))void 0!==On(g,this)[e]&&!Nn(N,this,te).call(this,On(g,this)[e])&&(yield On(g,this)[e])}[Symbol.iterator](){return this.entries()}find(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(let r of Nn(N,this,Q).call(this)){let n=On(g,this)[r],i=Nn(N,this,te).call(this,n)?n.__staleWhileFetching:n;if(void 0!==i&&e(i,On(p,this)[r],this))return this.get(On(p,this)[r],t)}}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;for(let r of Nn(N,this,Q).call(this)){let n=On(g,this)[r],i=Nn(N,this,te).call(this,n)?n.__staleWhileFetching:n;void 0!==i&&e.call(t,i,On(p,this)[r],this)}}rforEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;for(let r of Nn(N,this,X).call(this)){let n=On(g,this)[r],i=Nn(N,this,te).call(this,n)?n.__staleWhileFetching:n;void 0!==i&&e.call(t,i,On(p,this)[r],this)}}purgeStale(){let e=!1;for(let t of Nn(N,this,X).call(this,{allowStale:!0}))On(x,this).call(this,t)&&(Nn(N,this,ie).call(this,On(p,this)[t],"expire"),e=!0);return e}info(e){let t=On(h,this).get(e);if(void 0===t)return;let r=On(g,this)[t],n=Nn(N,this,te).call(this,r)?r.__staleWhileFetching:r;if(void 0===n)return;let i={value:n};if(On(T,this)&&On(S,this)){let e=On(T,this)[t],r=On(S,this)[t];if(e&&r){let t=e-(L.now()-r);i.ttl=t,i.start=Date.now()}}return On(w,this)&&(i.size=On(w,this)[t]),i}dump(){let e=[];for(let t of Nn(N,this,Q).call(this,{allowStale:!0})){let r=On(p,this)[t],n=On(g,this)[t],i=Nn(N,this,te).call(this,n)?n.__staleWhileFetching:n;if(void 0===i||void 0===r)continue;let o={value:i};if(On(T,this)&&On(S,this)){o.ttl=On(T,this)[t];let e=L.now()-On(S,this)[t];o.start=Math.floor(Date.now()-e)}On(w,this)&&(o.size=On(w,this)[t]),e.unshift([r,o])}return e}load(e){this.clear();for(let[t,r]of e){if(r.start){let e=Date.now()-r.start;r.start=L.now()-e}this.set(t,r.value,r)}}set(e,t){var r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===t)return this.delete(e),this;let{ttl:s=this.ttl,start:l,noDisposeOnSet:u=this.noDisposeOnSet,sizeCalculation:c=this.sizeCalculation,status:d}=i,{noUpdateTTL:v=this.noUpdateTTL}=i,w=On(M,this).call(this,e,t,i.size||0,c);if(this.maxEntrySize&&w>this.maxEntrySize)return d&&(d.set="miss",d.maxEntrySizeExceeded=!0),Nn(N,this,ie).call(this,e,"set"),this;let S=0===On(f,this)?void 0:On(h,this).get(e);if(void 0===S)S=0===On(f,this)?On(_,this):0!==On(b,this).length?On(b,this).pop():On(f,this)===On(n,this)?Nn(N,this,J).call(this,!1):On(f,this),On(p,this)[S]=e,On(g,this)[S]=t,On(h,this).set(e,S),On(m,this)[On(_,this)]=S,On(y,this)[S]=On(_,this),Cn(_,this,S),Cn(f,this,(r=On(f,this),r++,r)),On(k,this).call(this,S,w,d),d&&(d.set="add"),v=!1;else{Nn(N,this,ne).call(this,S);let r=On(g,this)[S];if(t!==r){var C,x;if(On(I,this)&&Nn(N,this,te).call(this,r)){var L,F;r.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:t}=r;void 0!==t&&!u&&(On(A,this)&&null!==(L=On(o,this))&&void 0!==L&&L.call(this,t,e,"set"),On(R,this)&&(null===(F=On(E,this))||void 0===F||F.push([t,e,"set"])))}else u||(On(A,this)&&null!==(C=On(o,this))&&void 0!==C&&C.call(this,r,e,"set"),On(R,this)&&(null===(x=On(E,this))||void 0===x||x.push([r,e,"set"])));if(On(D,this).call(this,S),On(k,this).call(this,S,w,d),On(g,this)[S]=t,d){d.set="replace";let e=r&&Nn(N,this,te).call(this,r)?r.__staleWhileFetching:r;void 0!==e&&(d.oldValue=e)}}else d&&(d.set="update")}if(0!==s&&!On(T,this)&&Nn(N,this,Y).call(this),On(T,this)&&(v||On(P,this).call(this,S,s,l),d&&On(O,this).call(this,d,S)),!u&&On(R,this)&&On(E,this)){let e,t=On(E,this);for(;e=null===t||void 0===t?void 0:t.shift();){var U;null===(U=On(a,this))||void 0===U||U.call(this,...e)}}return this}pop(){try{for(;On(f,this);){let e=On(g,this)[On(v,this)];if(Nn(N,this,J).call(this,!0),Nn(N,this,te).call(this,e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(On(R,this)&&On(E,this)){let t,r=On(E,this);for(;t=null===r||void 0===r?void 0:r.shift();){var e;null===(e=On(a,this))||void 0===e||e.call(this,...t)}}}}has(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{updateAgeOnHas:r=this.updateAgeOnHas,status:n}=t,i=On(h,this).get(e);if(void 0!==i){let e=On(g,this)[i];if(Nn(N,this,te).call(this,e)&&void 0===e.__staleWhileFetching)return!1;if(!On(x,this).call(this,i))return r&&On(C,this).call(this,i),n&&(n.has="hit",On(O,this).call(this,n,i)),!0;n&&(n.has="stale",On(O,this).call(this,n,i))}else n&&(n.has="miss");return!1}peek(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{allowStale:r=this.allowStale}=t,n=On(h,this).get(e);if(void 0===n||!r&&On(x,this).call(this,n))return;let i=On(g,this)[n];return Nn(N,this,te).call(this,i)?i.__staleWhileFetching:i}async fetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:s=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:f=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:m,forceRefresh:y=!1,status:v,signal:_}=t;if(!On(I,this))return v&&(v.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,status:v});let b={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:s,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:f,allowStaleOnFetchAbort:p,ignoreFetchAbort:d,status:v,signal:_},E=On(h,this).get(e);if(void 0===E){v&&(v.fetch="miss");let t=Nn(N,this,ee).call(this,e,E,b,m);return t.__returned=t}{let t=On(g,this)[E];if(Nn(N,this,te).call(this,t)){let e=r&&void 0!==t.__staleWhileFetching;return v&&(v.fetch="inflight",e&&(v.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}let i=On(x,this).call(this,E);if(!y&&!i)return v&&(v.fetch="hit"),Nn(N,this,ne).call(this,E),n&&On(C,this).call(this,E),v&&On(O,this).call(this,v,E),t;let o=Nn(N,this,ee).call(this,e,E,b,m),a=void 0!==o.__staleWhileFetching&&r;return v&&(v.fetch=i?"stale":"refresh",a&&i&&(v.returnedStale=!0)),a?o.__staleWhileFetching:o.__returned=o}}async forceFetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=await this.fetch(e,t);if(void 0===r)throw new Error("fetch() returned undefined");return r}memo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=On(u,this);if(!r)throw new Error("no memoMethod provided to constructor");let{context:n,forceRefresh:i}=t,o=An(t,Pn),a=this.get(e,o);if(!i&&void 0!==a)return a;let s=r(e,a,{options:o,context:n});return this.set(e,s,o),s}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:o}=t,a=On(h,this).get(e);if(void 0!==a){let t=On(g,this)[a],s=Nn(N,this,te).call(this,t);return o&&On(O,this).call(this,o,a),On(x,this).call(this,a)?(o&&(o.get="stale"),s?(o&&r&&void 0!==t.__staleWhileFetching&&(o.returnedStale=!0),r?t.__staleWhileFetching:void 0):(i||Nn(N,this,ie).call(this,e,"expire"),o&&r&&(o.returnedStale=!0),r?t:void 0)):(o&&(o.get="hit"),s?t.__staleWhileFetching:(Nn(N,this,ne).call(this,a),n&&On(C,this).call(this,a),t))}o&&(o.get="miss")}delete(e){return Nn(N,this,ie).call(this,e,"delete")}clear(){return Nn(N,this,oe).call(this,"delete")}});function Y(){var e=this;let t=new H(On(n,this)),r=new H(On(n,this));Cn(T,this,t),Cn(S,this,r),Cn(P,this,function(n,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L.now();if(r[n]=0!==i?o:0,t[n]=i,0!==i&&e.ttlAutopurge){let t=setTimeout(()=>{On(x,e).call(e,n)&&Nn(N,e,ie).call(e,On(p,e)[n],"expire")},i+1);t.unref&&t.unref()}}),Cn(C,this,e=>{r[e]=0!==t[e]?L.now():0}),Cn(O,this,(e,n)=>{if(t[n]){let a=t[n],s=r[n];if(!a||!s)return;e.ttl=a,e.start=s,e.now=i||o();let l=e.now-s;e.remainingTTL=a-l}});let i=0,o=()=>{let e=L.now();if(this.ttlResolution>0){i=e;let t=setTimeout(()=>i=0,this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=e=>{let n=On(h,this).get(e);if(void 0===n)return 0;let a=t[n],s=r[n];return a&&s?a-((i||o())-s):1/0},Cn(x,this,e=>{let n=r[e],a=t[e];return!!a&&!!n&&(i||o())-n>a})}function K(){let e=new H(On(n,this));Cn(d,this,0),Cn(w,this,e),Cn(D,this,t=>{Cn(d,this,On(d,this)-e[t]),e[t]=0}),Cn(M,this,(e,t,r,n)=>{if(Nn(N,this,te).call(this,t))return 0;if(!G(r)){if(!n)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof n)throw new TypeError("sizeCalculation must be a function");if(r=n(t,e),!G(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return r}),Cn(k,this,(t,r,n)=>{if(e[t]=r,On(i,this)){let r=On(i,this)-e[t];for(;On(d,this)>r;)Nn(N,this,J).call(this,!0)}Cn(d,this,On(d,this)+e[t]),n&&(n.entrySize=r,n.totalCalculatedSize=On(d,this))})}function Q(){var e=this;let{allowStale:t=this.allowStale}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){if(On(f,e))for(let r=On(_,e);Nn(N,e,$).call(e,r)&&((t||!On(x,e).call(e,r))&&(yield r),r!==On(v,e));)r=On(y,e)[r]}()}function X(){var e=this;let{allowStale:t=this.allowStale}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){if(On(f,e))for(let r=On(v,e);Nn(N,e,$).call(e,r)&&((t||!On(x,e).call(e,r))&&(yield r),r!==On(_,e));)r=On(m,e)[r]}()}function $(e){return void 0!==e&&On(h,this).get(On(p,this)[e])===e}function J(e){var t,r,n;let i=On(v,this),a=On(p,this)[i],s=On(g,this)[i];return On(I,this)&&Nn(N,this,te).call(this,s)?s.__abortController.abort(new Error("evicted")):(On(A,this)||On(R,this))&&(On(A,this)&&null!==(t=On(o,this))&&void 0!==t&&t.call(this,s,a,"evict"),On(R,this)&&(null===(r=On(E,this))||void 0===r||r.push([s,a,"evict"]))),On(D,this).call(this,i),e&&(On(p,this)[i]=void 0,On(g,this)[i]=void 0,On(b,this).push(i)),1===On(f,this)?(Cn(v,this,Cn(_,this,0)),On(b,this).length=0):Cn(v,this,On(m,this)[i]),On(h,this).delete(a),Cn(f,this,(n=On(f,this),n--,n)),i}function ee(e,t,r,n){var i=this;let o=void 0===t?void 0:On(g,this)[t];if(Nn(N,this,te).call(this,o))return o;let a=new j,{signal:l}=r;null===l||void 0===l||l.addEventListener("abort",()=>a.abort(l.reason),{signal:a.signal});let u={signal:a.signal,options:r,context:n},f=function(n){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{aborted:s}=a.signal,l=r.ignoreFetchAbort&&void 0!==n;if(r.status&&(s&&!o?(r.status.fetchAborted=!0,r.status.fetchError=a.signal.reason,l&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),s&&!l&&!o)return d(a.signal.reason);let c=p;return On(g,i)[t]===p&&(void 0===n?c.__staleWhileFetching?On(g,i)[t]=c.__staleWhileFetching:Nn(N,i,ie).call(i,e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),i.set(e,n,u.options))),n},d=n=>{let{aborted:i}=a.signal,o=i&&r.allowStaleOnFetchAbort,s=o||r.allowStaleOnFetchRejection,l=s||r.noDeleteOnFetchRejection,u=p;if(On(g,this)[t]===p&&(l&&void 0!==u.__staleWhileFetching?o||(On(g,this)[t]=u.__staleWhileFetching):Nn(N,this,ie).call(this,e,"fetch")),s)return r.status&&void 0!==u.__staleWhileFetching&&(r.status.returnedStale=!0),u.__staleWhileFetching;if(u.__returned===u)throw n};r.status&&(r.status.fetchDispatched=!0);let p=new Promise((t,n)=>{var i;let l=null===(i=On(s,this))||void 0===i?void 0:i.call(this,e,o,u);l&&l instanceof Promise&&l.then(e=>t(void 0===e?void 0:e),n),a.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(t(void 0),r.allowStaleOnFetchAbort&&(t=e=>f(e,!0)))})}).then(f,e=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=e),d(e))),m=Object.assign(p,{__abortController:a,__staleWhileFetching:o,__returned:void 0});return void 0===t?(this.set(e,m,c(c({},u.options),{},{status:void 0})),t=On(h,this).get(e)):On(g,this)[t]=m,m}function te(e){if(!On(I,this))return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof j}function re(e,t){On(y,this)[t]=e,On(m,this)[e]=t}function ne(e){e!==On(_,this)&&(e===On(v,this)?Cn(v,this,On(m,this)[e]):Nn(N,this,re).call(this,On(y,this)[e],On(m,this)[e]),Nn(N,this,re).call(this,On(_,this),e),Cn(_,this,e))}function ie(e,t){var r;let n=!1;if(0!==On(f,this)){let r=On(h,this).get(e);if(void 0!==r)if(n=!0,1===On(f,this))Nn(N,this,oe).call(this,t);else{var i,s,l;On(D,this).call(this,r);let n=On(g,this)[r];if(Nn(N,this,te).call(this,n)?n.__abortController.abort(new Error("deleted")):(On(A,this)||On(R,this))&&(On(A,this)&&null!==(s=On(o,this))&&void 0!==s&&s.call(this,n,e,t),On(R,this)&&(null===(l=On(E,this))||void 0===l||l.push([n,e,t]))),On(h,this).delete(e),On(p,this)[r]=void 0,On(g,this)[r]=void 0,r===On(_,this))Cn(_,this,On(y,this)[r]);else if(r===On(v,this))Cn(v,this,On(m,this)[r]);else{let e=On(y,this)[r];On(m,this)[e]=On(m,this)[r];let t=On(m,this)[r];On(y,this)[t]=On(y,this)[r]}Cn(f,this,(i=On(f,this),i--,i)),On(b,this).push(r)}}if(On(R,this)&&null!==(r=On(E,this))&&void 0!==r&&r.length){let e,t=On(E,this);for(;e=null===t||void 0===t?void 0:t.shift();){var u;null===(u=On(a,this))||void 0===u||u.call(this,...e)}}return n}function oe(e){for(let i of Nn(N,this,X).call(this,{allowStale:!0})){let n=On(g,this)[i];if(Nn(N,this,te).call(this,n))n.__abortController.abort(new Error("deleted"));else{var t,r;let a=On(p,this)[i];On(A,this)&&null!==(t=On(o,this))&&void 0!==t&&t.call(this,n,a,e),On(R,this)&&(null===(r=On(E,this))||void 0===r||r.push([n,a,e]))}}if(On(h,this).clear(),On(g,this).fill(void 0),On(p,this).fill(void 0),On(T,this)&&On(S,this)&&(On(T,this).fill(0),On(S,this).fill(0)),On(w,this)&&On(w,this).fill(0),Cn(v,this,0),Cn(_,this,0),On(b,this).length=0,Cn(d,this,0),Cn(f,this,0),On(R,this)&&On(E,this)){let e,t=On(E,this);for(;e=null===t||void 0===t?void 0:t.shift();){var n;null===(n=On(a,this))||void 0===n||n.call(this,...e)}}}e.LRUCache=W}),Wa=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;e.ContainerIterator=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.iteratorType=e}equals(e){return this.o===e.o}};var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return 0===this.i}};e.Base=t;e.Container=class extends t{}}),Ya=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Wa(),r=class extends t.Base{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.S=[];let t=this;e.forEach(function(e){t.push(e)})}clear(){this.i=0,this.S=[]}push(e){return this.S.push(e),this.i+=1,this.i}pop(){if(0!==this.i)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}};e.default=r}),Ka=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Wa(),r=class extends t.Base{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.j=0,this.q=[];let t=this;e.forEach(function(e){t.push(e)})}clear(){this.q=[],this.i=this.j=0}push(e){let t=this.q.length;if(this.j/t>.5&&this.j+this.i>=t&&t>4096){let t=this.i;for(let e=0;e<t;++e)this.q[e]=this.q[this.j+e];this.j=0,this.q[this.i]=e}else this.q[this.j+this.i]=e;return++this.i}pop(){if(0===this.i)return;let e=this.q[this.j++];return this.i-=1,e}front(){if(0!==this.i)return this.q[this.j]}};e.default=r}),Qa=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Wa(),r=class extends t.Base{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e>t?-1:e<t?1:0},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(super(),this.v=t,Array.isArray(e))this.C=r?[...e]:e;else{this.C=[];let t=this;e.forEach(function(e){t.C.push(e)})}this.i=this.C.length;let n=this.i>>1;for(let i=this.i-1>>1;i>=0;--i)this.k(i,n)}m(e){let t=this.C[e];for(;e>0;){let r=e-1>>1,n=this.C[r];if(this.v(n,t)<=0)break;this.C[e]=n,e=r}this.C[e]=t}k(e,t){let r=this.C[e];for(;e<t;){let t=e<<1|1,n=t+1,i=this.C[t];if(n<this.i&&this.v(i,this.C[n])>0&&(t=n,i=this.C[n]),this.v(i,r)>=0)break;this.C[e]=i,e=t}this.C[e]=r}clear(){this.i=0,this.C.length=0}push(e){this.C.push(e),this.m(this.i),this.i+=1}pop(){if(0===this.i)return;let e=this.C[0],t=this.C.pop();return this.i-=1,this.i&&(this.C[0]=t,this.k(0,this.i>>1)),e}top(){return this.C[0]}find(e){return this.C.indexOf(e)>=0}remove(e){let t=this.C.indexOf(e);return!(t<0)&&(0===t?this.pop():t===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(t,1,this.C.pop()),this.i-=1,this.m(t),this.k(t,this.i>>1)),!0)}updateItem(e){let t=this.C.indexOf(e);return!(t<0)&&(this.m(t),this.k(t,this.i>>1),!0)}toArray(){return[...this.C]}};e.default=r}),Xa=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Wa(),r=class extends t.Container{};e.default=r}),$a=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=function(){throw new RangeError("Iterator access denied!")}}),Ja=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var t=Wa(),r=$a(),n=class extends t.ContainerIterator{constructor(e,t){super(t),this.o=e,0===this.iteratorType?(this.pre=function(){return 0===this.o&&(0,r.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,r.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,r.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return-1===this.o&&(0,r.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(e){this.container.setElementByPos(this.o,e)}};e.RandomIterator=n}),es=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t,r=(t=Xa())&&t.t?t:{default:t},n=Ja();var i=class e extends n.RandomIterator{constructor(e,t,r){super(e,r),this.container=t}copy(){return new e(this.o,this.container,this.iteratorType)}},o=class extends r.default{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(super(),Array.isArray(e))this.J=t?[...e]:e,this.i=e.length;else{this.J=[];let t=this;e.forEach(function(e){t.pushBack(e)})}}clear(){this.i=0,this.J.length=0}begin(){return new i(0,this)}end(){return new i(this.i,this)}rBegin(){return new i(this.i-1,this,1)}rEnd(){return new i(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J[e]}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J.splice(e,1),this.i-=1,this.i}eraseElementByValue(e){let t=0;for(let r=0;r<this.i;++r)this.J[r]!==e&&(this.J[t++]=this.J[r]);return this.i=this.J.length=t,this.i}eraseElementByIterator(e){let t=e.o;return e=e.next(),this.eraseElementByPos(t),e}pushBack(e){return this.J.push(e),this.i+=1,this.i}popBack(){if(0!==this.i)return this.i-=1,this.J.pop()}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;this.J[e]=t}insert(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e<0||e>this.i)throw new RangeError;return this.J.splice(e,0,...new Array(r).fill(t)),this.i+=r,this.i}find(e){for(let t=0;t<this.i;++t)if(this.J[t]===e)return new i(t,this);return this.end()}reverse(){this.J.reverse()}unique(){let e=1;for(let t=1;t<this.i;++t)this.J[t]!==this.J[t-1]&&(this.J[e++]=this.J[t]);return this.i=this.J.length=e,this.i}sort(e){this.J.sort(e)}forEach(e){for(let t=0;t<this.i;++t)e(this.J[t],t,this)}[Symbol.iterator](){return function*(){yield*this.J}.bind(this)()}};e.default=o}),ts=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t,r=(t=Xa())&&t.t?t:{default:t},n=Wa(),i=$a();var o=class e extends n.ContainerIterator{constructor(e,t,r,n){super(n),this.o=e,this.h=t,this.container=r,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o.l}set pointer(e){this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o.l=e}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},a=class extends r.default{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let t=this;e.forEach(function(e){t.pushBack(e)})}V(e){let{L:t,B:r}=e;t.B=r,r.L=t,e===this.p&&(this.p=r),e===this._&&(this._=t),this.i-=1}G(e,t){let r=t.B,n={l:e,L:t,B:r};t.B=n,r.L=n,t===this.h&&(this.p=n),r===this.h&&(this._=n),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return t.l}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return this.V(t),this.i}eraseElementByValue(e){let t=this.p;for(;t!==this.h;)t.l===e&&this.V(t),t=t.B;return this.i}eraseElementByIterator(e){let t=e.o;return t===this.h&&(0,i.throwIteratorAccessError)(),e=e.next(),this.V(t),e}pushBack(e){return this.G(e,this._),this.i}popBack(){if(0===this.i)return;let e=this._.l;return this.V(this._),e}pushFront(e){return this.G(e,this.h),this.i}popFront(){if(0===this.i)return;let e=this.p.l;return this.V(this.p),e}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;r.l=t}insert(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e<0||e>this.i)throw new RangeError;if(r<=0)return this.i;if(0===e)for(;r--;)this.pushFront(t);else if(e===this.i)for(;r--;)this.pushBack(t);else{let n=this.p;for(let t=1;t<e;++t)n=n.B;let i=n.B;for(this.i+=r;r--;)n.B={l:t,L:n},n.B.L=n,n=n.B;n.B=i,i.L=n}return this.i}find(e){let t=this.p;for(;t!==this.h;){if(t.l===e)return new o(t,this.h,this);t=t.B}return this.end()}reverse(){if(this.i<=1)return;let e=this.p,t=this._,r=0;for(;r<<1<this.i;){let n=e.l;e.l=t.l,t.l=n,e=e.B,t=t.L,r+=1}}unique(){if(this.i<=1)return this.i;let e=this.p;for(;e!==this.h;){let t=e;for(;t.B!==this.h&&t.l===t.B.l;)t=t.B,this.i-=1;e.B=t.B,e.B.L=e,e=e.B}return this.i}sort(e){if(this.i<=1)return;let t=[];this.forEach(function(e){t.push(e)}),t.sort(e);let r=this.p;t.forEach(function(e){r.l=e,r=r.B})}merge(e){let t=this;if(0===this.i)e.forEach(function(e){t.pushBack(e)});else{let r=this.p;e.forEach(function(e){for(;r!==t.h&&r.l<=e;)r=r.B;t.G(e,r.L)})}return this.i}forEach(e){let t=this.p,r=0;for(;t!==this.h;)e(t.l,r++,this),t=t.B}[Symbol.iterator](){return function*(){if(0===this.i)return;let e=this.p;for(;e!==this.h;)yield e.l,e=e.B}.bind(this)()}};e.default=a}),rs=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t,r=(t=Xa())&&t.t?t:{default:t},n=Ja();var i=class e extends n.RandomIterator{constructor(e,t,r){super(e,r),this.container=t}copy(){return new e(this.o,this.container,this.iteratorType)}},o=class extends r.default{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let r=(()=>{if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("function"==typeof e.size)return e.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=t,this.P=Math.max(Math.ceil(r/this.F),1);for(let o=0;o<this.P;++o)this.A.push(new Array(this.F));let n=Math.ceil(r/this.F);this.j=this.R=(this.P>>1)-(n>>1),this.D=this.N=this.F-r%this.F>>1;let i=this;e.forEach(function(e){i.pushBack(e)})}T(){let e=[],t=Math.max(this.P>>1,1);for(let r=0;r<t;++r)e[r]=new Array(this.F);for(let r=this.j;r<this.P;++r)e[e.length]=this.A[r];for(let r=0;r<this.R;++r)e[e.length]=this.A[r];e[e.length]=[...this.A[this.R]],this.j=t,this.R=e.length-1;for(let r=0;r<t;++r)e[e.length]=new Array(this.F);this.A=e,this.P=e.length}O(e){let t=this.D+e+1,r=t%this.F,n=r-1,i=this.j+(t-r)/this.F;return 0===r&&(i-=1),i%=this.P,n<0&&(n+=this.F),{curNodeBucketIndex:i,curNodePointerIndex:n}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new i(0,this)}end(){return new i(this.i,this)}rBegin(){return new i(this.i-1,this,1)}rEnd(){return new i(-1,this,1)}front(){if(0!==this.i)return this.A[this.j][this.D]}back(){if(0!==this.i)return this.A[this.R][this.N]}pushBack(e){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=e,this.i}popBack(){if(0===this.i)return;let e=this.A[this.R][this.N];return 1!==this.i&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,e}pushFront(e){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=e,this.i}popFront(){if(0===this.i)return;let e=this.A[this.j][this.D];return 1!==this.i&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,e}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let{curNodeBucketIndex:t,curNodePointerIndex:r}=this.O(e);return this.A[t][r]}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;let{curNodeBucketIndex:r,curNodePointerIndex:n}=this.O(e);this.A[r][n]=t}insert(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e<0||e>this.i)throw new RangeError;if(0===e)for(;r--;)this.pushFront(t);else if(e===this.i)for(;r--;)this.pushBack(t);else{let n=[];for(let t=e;t<this.i;++t)n.push(this.getElementByPos(t));this.cut(e-1);for(let e=0;e<r;++e)this.pushBack(t);for(let e=0;e<n.length;++e)this.pushBack(n[e])}return this.i}cut(e){if(e<0)return this.clear(),0;let{curNodeBucketIndex:t,curNodePointerIndex:r}=this.O(e);return this.R=t,this.N=r,this.i=e+1,this.i}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;if(0===e)this.popFront();else if(e===this.i-1)this.popBack();else{let t=[];for(let n=e+1;n<this.i;++n)t.push(this.getElementByPos(n));this.cut(e),this.popBack();let r=this;t.forEach(function(e){r.pushBack(e)})}return this.i}eraseElementByValue(e){if(0===this.i)return 0;let t=[];for(let n=0;n<this.i;++n){let r=this.getElementByPos(n);r!==e&&t.push(r)}let r=t.length;for(let n=0;n<r;++n)this.setElementByPos(n,t[n]);return this.cut(r-1)}eraseElementByIterator(e){let t=e.o;return this.eraseElementByPos(t),e=e.next()}find(e){for(let t=0;t<this.i;++t)if(this.getElementByPos(t)===e)return new i(t,this);return this.end()}reverse(){let e=0,t=this.i-1;for(;e<t;){let r=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(t)),this.setElementByPos(t,r),e+=1,t-=1}}unique(){if(this.i<=1)return this.i;let e=1,t=this.getElementByPos(0);for(let r=1;r<this.i;++r){let n=this.getElementByPos(r);n!==t&&(t=n,this.setElementByPos(e++,n))}for(;this.i>e;)this.popBack();return this.i}sort(e){let t=[];for(let r=0;r<this.i;++r)t.push(this.getElementByPos(r));t.sort(e);for(let r=0;r<this.i;++r)this.setElementByPos(r,t[r])}shrinkToFit(){if(0===this.i)return;let e=[];this.forEach(function(t){e.push(t)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let t=0;t<this.P;++t)this.A.push(new Array(this.F));for(let t=0;t<e.length;++t)this.pushBack(e[t])}forEach(e){for(let t=0;t<this.i;++t)e(this.getElementByPos(t),t,this)}[Symbol.iterator](){return function*(){for(let e=0;e<this.i;++e)yield this.getElementByPos(e)}.bind(this)()}};e.default=o}),ns=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var t=class{constructor(e,t){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=e,this.l=t}L(){let e=this;if(1===e.ee&&e.tt.tt===e)e=e.W;else if(e.U)for(e=e.U;e.W;)e=e.W;else{let t=e.tt;for(;t.U===e;)e=t,t=e.tt;e=t}return e}B(){let e=this;if(e.W){for(e=e.W;e.U;)e=e.U;return e}{let t=e.tt;for(;t.W===e;)e=t,t=e.tt;return e.W!==t?t:e}}te(){let e=this.tt,t=this.W,r=t.U;return e.tt===this?e.tt=t:e.U===this?e.U=t:e.W=t,t.tt=e,t.U=this,this.tt=t,this.W=r,r&&(r.tt=this),t}se(){let e=this.tt,t=this.U,r=t.W;return e.tt===this?e.tt=t:e.U===this?e.U=t:e.W=t,t.tt=e,t.W=this,this.tt=t,this.U=r,r&&(r.tt=this),t}};e.TreeNode=t;e.TreeNodeEnableIndex=class extends t{constructor(){super(...arguments),this.rt=1}te(){let e=super.te();return this.ie(),e.ie(),e}se(){let e=super.se();return this.ie(),e.ie(),e}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}}}),is=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=ns(),r=Wa(),n=$a(),i=class extends r.Container{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e<t?-1:e>t?1:0},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.Y=void 0,this.v=e,r?(this.re=t.TreeNodeEnableIndex,this.M=function(e,t,r){let n=this.ne(e,t,r);if(n){let e=n.tt;for(;e!==this.h;)e.rt+=1,e=e.tt;let t=this.he(n);if(t){let{parentNode:e,grandParent:r,curNode:n}=t;e.ie(),r.ie(),n.ie()}}return this.i},this.V=function(e){let t=this.fe(e);for(;t!==this.h;)t.rt-=1,t=t.tt}):(this.re=t.TreeNode,this.M=function(e,t,r){let n=this.ne(e,t,r);return n&&this.he(n),this.i},this.V=this.fe),this.h=new this.re}X(e,t){let r=this.h;for(;e;){let n=this.v(e.u,t);if(n<0)e=e.W;else{if(!(n>0))return e;r=e,e=e.U}}return r}Z(e,t){let r=this.h;for(;e;)this.v(e.u,t)<=0?e=e.W:(r=e,e=e.U);return r}$(e,t){let r=this.h;for(;e;){let n=this.v(e.u,t);if(n<0)r=e,e=e.W;else{if(!(n>0))return e;e=e.U}}return r}rr(e,t){let r=this.h;for(;e;)this.v(e.u,t)<0?(r=e,e=e.W):e=e.U;return r}ue(e){for(;;){let t=e.tt;if(t===this.h)return;if(1===e.ee)return void(e.ee=0);if(e===t.U){let r=t.W;if(1===r.ee)r.ee=0,t.ee=1,t===this.Y?this.Y=t.te():t.te();else{if(r.W&&1===r.W.ee)return r.ee=t.ee,t.ee=0,r.W.ee=0,void(t===this.Y?this.Y=t.te():t.te());r.U&&1===r.U.ee?(r.ee=1,r.U.ee=0,r.se()):(r.ee=1,e=t)}}else{let r=t.U;if(1===r.ee)r.ee=0,t.ee=1,t===this.Y?this.Y=t.se():t.se();else{if(r.U&&1===r.U.ee)return r.ee=t.ee,t.ee=0,r.U.ee=0,void(t===this.Y?this.Y=t.se():t.se());r.W&&1===r.W.ee?(r.ee=1,r.W.ee=0,r.te()):(r.ee=1,e=t)}}}}fe(e){if(1===this.i)return this.clear(),this.h;let t=e;for(;t.U||t.W;){if(t.W)for(t=t.W;t.U;)t=t.U;else t=t.U;[e.u,t.u]=[t.u,e.u],[e.l,t.l]=[t.l,e.l],e=t}this.h.U===t?this.h.U=t.tt:this.h.W===t&&(this.h.W=t.tt),this.ue(t);let r=t.tt;return t===r.U?r.U=void 0:r.W=void 0,this.i-=1,this.Y.ee=0,r}oe(e,t){return void 0!==e&&(!(!this.oe(e.U,t)&&!t(e))||this.oe(e.W,t))}he(e){for(;;){let t=e.tt;if(0===t.ee)return;let r=t.tt;if(t===r.U){let n=r.W;if(n&&1===n.ee){if(n.ee=t.ee=0,r===this.Y)return;r.ee=1,e=r;continue}if(e===t.W){if(e.ee=0,e.U&&(e.U.tt=t),e.W&&(e.W.tt=r),t.W=e.U,r.U=e.W,e.U=t,e.W=r,r===this.Y)this.Y=e,this.h.tt=e;else{let t=r.tt;t.U===r?t.U=e:t.W=e}return e.tt=r.tt,t.tt=e,r.tt=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e}}t.ee=0,r===this.Y?this.Y=r.se():r.se(),r.ee=1}else{let n=r.U;if(n&&1===n.ee){if(n.ee=t.ee=0,r===this.Y)return;r.ee=1,e=r;continue}if(e===t.U){if(e.ee=0,e.U&&(e.U.tt=r),e.W&&(e.W.tt=t),r.W=e.U,t.U=e.W,e.U=r,e.W=t,r===this.Y)this.Y=e,this.h.tt=e;else{let t=r.tt;t.U===r?t.U=e:t.W=e}return e.tt=r.tt,t.tt=e,r.tt=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e}}t.ee=0,r===this.Y?this.Y=r.te():r.te(),r.ee=1}return}}ne(e,t,r){if(void 0===this.Y)return this.i+=1,this.Y=new this.re(e,t),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,void(this.h.W=this.Y);let n,i=this.h.U,o=this.v(i.u,e);if(0!==o){if(o>0)i.U=new this.re(e,t),i.U.tt=i,n=i.U,this.h.U=n;else{let i=this.h.W,o=this.v(i.u,e);if(0===o)return void(i.l=t);if(o<0)i.W=new this.re(e,t),i.W.tt=i,n=i.W,this.h.W=n;else{if(void 0!==r){let i=r.o;if(i!==this.h){let r=this.v(i.u,e);if(0===r)return void(i.l=t);if(r>0){let r=i.L(),o=this.v(r.u,e);if(0===o)return void(r.l=t);o<0&&(n=new this.re(e,t),void 0===r.W?(r.W=n,n.tt=r):(i.U=n,n.tt=i))}}}if(void 0===n)for(n=this.Y;;){let r=this.v(n.u,e);if(r>0){if(void 0===n.U){n.U=new this.re(e,t),n.U.tt=n,n=n.U;break}n=n.U}else{if(!(r<0))return void(n.l=t);if(void 0===n.W){n.W=new this.re(e,t),n.W.tt=n,n=n.W;break}n=n.W}}}}return this.i+=1,n}i.l=t}I(e,t){for(;e;){let r=this.v(e.u,t);if(r<0)e=e.W;else{if(!(r>0))return e;e=e.U}}return e||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(e,t){let r=e.o;if(r===this.h&&(0,n.throwIteratorAccessError)(),1===this.i)return r.u=t,!0;if(r===this.h.U)return this.v(r.B().u,t)>0&&(r.u=t,!0);if(r===this.h.W)return this.v(r.L().u,t)<0&&(r.u=t,!0);let i=r.L().u;if(this.v(i,t)>=0)return!1;let o=r.B().u;return!(this.v(o,t)<=0)&&(r.u=t,!0)}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=0,r=this;return this.oe(this.Y,function(n){return e===t?(r.V(n),!0):(t+=1,!1)}),this.i}eraseElementByKey(e){if(0===this.i)return!1;let t=this.I(this.Y,e);return t!==this.h&&(this.V(t),!0)}eraseElementByIterator(e){let t=e.o;t===this.h&&(0,n.throwIteratorAccessError)();let r=void 0===t.W;return 0===e.iteratorType?r&&e.next():(!r||void 0===t.U)&&e.next(),this.V(t),e}forEach(e){let t=0;for(let r of this)e(r,t++,this)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t,r=0;for(let n of this){if(r===e){t=n;break}r+=1}return t}getHeight(){if(0===this.i)return 0;let e=function(t){return t?Math.max(e(t.U),e(t.W))+1:0};return e(this.Y)}};e.default=i}),os=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Wa(),r=$a(),n=class extends t.ContainerIterator{constructor(e,t,n){super(n),this.o=e,this.h=t,0===this.iteratorType?(this.pre=function(){return this.o===this.h.U&&(0,r.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,r.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let e=this.o,t=this.h.tt;if(e===this.h)return t?t.rt-1:0;let r=0;for(e.U&&(r+=e.U.rt);e!==t;){let t=e.tt;e===t.W&&(r+=1,t.U&&(r+=t.U.rt)),e=t}return r}};e.default=n}),as=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=i(is()),r=i(os()),n=$a();function i(e){return e&&e.t?e:{default:e}}var o=class e extends r.default{constructor(e,t,r,n){super(e,t,n),this.container=r}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.u}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},a=class extends t.default{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(arguments.length>1?arguments[1]:void 0,arguments.length>2?arguments[2]:void 0);let t=this;e.forEach(function(e){t.insert(e)})}*K(e){void 0!==e&&(yield*this.K(e.U),yield e.u,yield*this.K(e.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(e,t){return this.M(e,void 0,t)}find(e){let t=this.I(this.Y,e);return new o(t,this.h,this)}lowerBound(e){let t=this.X(this.Y,e);return new o(t,this.h,this)}upperBound(e){let t=this.Z(this.Y,e);return new o(t,this.h,this)}reverseLowerBound(e){let t=this.$(this.Y,e);return new o(t,this.h,this)}reverseUpperBound(e){let t=this.rr(this.Y,e);return new o(t,this.h,this)}union(e){let t=this;return e.forEach(function(e){t.insert(e)}),this.i}[Symbol.iterator](){return this.K(this.Y)}};e.default=a}),ss=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=i(is()),r=i(os()),n=$a();function i(e){return e&&e.t?e:{default:e}}var o=class e extends r.default{constructor(e,t,r,n){super(e,t,n),this.container=r}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let e=this;return new Proxy([],{get:(t,r)=>"0"===r?e.o.u:"1"===r?e.o.l:void 0,set(t,r,n){if("1"!==r)throw new TypeError("props must be 1");return e.o.l=n,!0}})}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},a=class extends t.default{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(arguments.length>1?arguments[1]:void 0,arguments.length>2?arguments[2]:void 0);let t=this;e.forEach(function(e){t.setElement(e[0],e[1])})}*K(e){void 0!==e&&(yield*this.K(e.U),yield[e.u,e.l],yield*this.K(e.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(0===this.i)return;let e=this.h.U;return[e.u,e.l]}back(){if(0===this.i)return;let e=this.h.W;return[e.u,e.l]}lowerBound(e){let t=this.X(this.Y,e);return new o(t,this.h,this)}upperBound(e){let t=this.Z(this.Y,e);return new o(t,this.h,this)}reverseLowerBound(e){let t=this.$(this.Y,e);return new o(t,this.h,this)}reverseUpperBound(e){let t=this.rr(this.Y,e);return new o(t,this.h,this)}setElement(e,t,r){return this.M(e,t,r)}find(e){let t=this.I(this.Y,e);return new o(t,this.h,this)}getElementByKey(e){return this.I(this.Y,e).l}union(e){let t=this;return e.forEach(function(e){t.setElement(e[0],e[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}};e.default=a}),ls=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=function(e){let t=typeof e;return"object"===t&&null!==e||"function"===t}}),us=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var t,r=Wa(),n=(t=ls())&&t.t?t:{default:t},i=$a();var o=class extends r.ContainerIterator{constructor(e,t,r){super(r),this.o=e,this.h=t,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=o;var a=class extends r.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(e){let{L:t,B:r}=e;t.B=r,r.L=t,e===this.p&&(this.p=r),e===this._&&(this._=t),this.i-=1}M(e,t,r){let i;if(void 0===r&&(r=(0,n.default)(e)),r){let r=e[this.HASH_TAG];if(void 0!==r)return this.H[r].l=t,this.i;Object.defineProperty(e,this.HASH_TAG,{value:this.H.length,configurable:!0}),i={u:e,l:t,L:this._,B:this.h},this.H.push(i)}else{let r=this.g[e];if(r)return r.l=t,this.i;i={u:e,l:t,L:this._,B:this.h},this.g[e]=i}return 0===this.i?(this.p=i,this.h.B=i):this._.B=i,this._=i,this.h.L=i,++this.i}I(e,t){if(void 0===t&&(t=(0,n.default)(e)),t){let t=e[this.HASH_TAG];return void 0===t?this.h:this.H[t]}return this.g[e]||this.h}clear(){let e=this.HASH_TAG;this.H.forEach(function(t){delete t.u[e]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(e,t){let r;if(void 0===t&&(t=(0,n.default)(e)),t){let t=e[this.HASH_TAG];if(void 0===t)return!1;delete e[this.HASH_TAG],r=this.H[t],delete this.H[t]}else{if(r=this.g[e],void 0===r)return!1;delete this.g[e]}return this.V(r),!0}eraseElementByIterator(e){let t=e.o;return t===this.h&&(0,i.throwIteratorAccessError)(),this.V(t),e.next()}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return this.V(t),this.i}};e.HashContainer=a}),cs=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=us(),r=$a(),n=class e extends t.HashContainerIterator{constructor(e,t,r,n){super(e,t,n),this.container=r}get pointer(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o.u}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},i=class extends t.HashContainer{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super();let t=this;e.forEach(function(e){t.insert(e)})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(e,t){return this.M(e,void 0,t)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return t.u}find(e,t){let r=this.I(e,t);return new n(r,this.h,this)}forEach(e){let t=0,r=this.p;for(;r!==this.h;)e(r.u,t++,this),r=r.B}[Symbol.iterator](){return function*(){let e=this.p;for(;e!==this.h;)yield e.u,e=e.B}.bind(this)()}};e.default=i}),fs=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t,r=us(),n=(t=ls())&&t.t?t:{default:t},i=$a();var o=class e extends r.HashContainerIterator{constructor(e,t,r,n){super(e,t,n),this.container=r}get pointer(){this.o===this.h&&(0,i.throwIteratorAccessError)();let e=this;return new Proxy([],{get:(t,r)=>"0"===r?e.o.u:"1"===r?e.o.l:void 0,set(t,r,n){if("1"!==r)throw new TypeError("props must be 1");return e.o.l=n,!0}})}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},a=class extends r.HashContainer{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super();let t=this;e.forEach(function(e){t.setElement(e[0],e[1])})}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(0!==this.i)return[this.p.u,this.p.l]}back(){if(0!==this.i)return[this._.u,this._.l]}setElement(e,t,r){return this.M(e,t,r)}getElementByKey(e,t){if(void 0===t&&(t=(0,n.default)(e)),t){let t=e[this.HASH_TAG];return void 0!==t?this.H[t].l:void 0}let r=this.g[e];return r?r.l:void 0}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return[t.u,t.l]}find(e,t){let r=this.I(e,t);return new o(r,this.h,this)}forEach(e){let t=0,r=this.p;for(;r!==this.h;)e([r.u,r.l],t++,this),r=r.B}[Symbol.iterator](){return function*(){let e=this.p;for(;e!==this.h;)yield[e.u,e.l],e=e.B}.bind(this)()}};e.default=a}),ds=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return i.default}});var t=f(Ya()),r=f(Ka()),n=f(Qa()),i=f(es()),o=f(ts()),a=f(rs()),s=f(as()),l=f(ss()),u=f(cs()),c=f(fs());function f(e){return e&&e.t?e:{default:e}}}),hs=Un((e,t)=>{Zn(),Mo(),bo();var r=ds().OrderedSet,n=Oa()("number-allocator:trace"),i=Oa()("number-allocator:error");function o(e,t){this.low=e,this.high=t}function a(e,t){if(!(this instanceof a))return new a(e,t);this.min=e,this.max=t,this.ss=new r([],(e,t)=>e.compare(t)),n("Create"),this.clear()}o.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},o.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0},a.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},a.prototype.alloc=function(){if(0===this.ss.size())return n("alloc():empty"),null;let e=this.ss.begin(),t=e.pointer.low,r=e.pointer.high,i=t;return i+1<=r?this.ss.updateKeyByIterator(e,new o(t+1,r)):this.ss.eraseElementByPos(0),n("alloc():"+i),i},a.prototype.use=function(e){let t=new o(e,e),r=this.ss.lowerBound(t);if(!r.equals(this.ss.end())){let i=r.pointer.low,a=r.pointer.high;return r.pointer.equals(t)?(this.ss.eraseElementByIterator(r),n("use():"+e),!0):!(i>e)&&(i===e?(this.ss.updateKeyByIterator(r,new o(i+1,a)),n("use():"+e),!0):a===e?(this.ss.updateKeyByIterator(r,new o(i,a-1)),n("use():"+e),!0):(this.ss.updateKeyByIterator(r,new o(e+1,a)),this.ss.insert(new o(i,e-1)),n("use():"+e),!0))}return n("use():failed"),!1},a.prototype.free=function(e){if(e<this.min||e>this.max)return void i("free():"+e+" is out of range");let t=new o(e,e),r=this.ss.upperBound(t);if(r.equals(this.ss.end())){if(r.equals(this.ss.begin()))return void this.ss.insert(t);r.pre();let n=r.pointer.high;r.pointer.high+1===e?this.ss.updateKeyByIterator(r,new o(n,e)):this.ss.insert(t)}else if(r.equals(this.ss.begin()))if(e+1===r.pointer.low){let t=r.pointer.high;this.ss.updateKeyByIterator(r,new o(e,t))}else this.ss.insert(t);else{let n=r.pointer.low,i=r.pointer.high;r.pre();let a=r.pointer.low;r.pointer.high+1===e?e+1===n?(this.ss.eraseElementByIterator(r),this.ss.updateKeyByIterator(r,new o(a,i))):this.ss.updateKeyByIterator(r,new o(a,e)):e+1===n?(this.ss.eraseElementByIterator(r.next()),this.ss.insert(new o(e,i))):this.ss.insert(t)}n("free():"+e)},a.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new o(this.min,this.max))},a.prototype.intervalCount=function(){return this.ss.size()},a.prototype.dump=function(){console.log("length:"+this.ss.size());for(let e of this.ss)console.log(e)},t.exports=a}),ps=Un((e,t)=>{Zn(),Mo(),bo();var r=hs();t.exports.NumberAllocator=r}),gs=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0});var t=Va(),r=ps();e.default=class{constructor(e){l(this,"aliasToTopic",void 0),l(this,"topicToAlias",void 0),l(this,"max",void 0),l(this,"numberAllocator",void 0),l(this,"length",void 0),e>0&&(this.aliasToTopic=new t.LRUCache({max:e}),this.topicToAlias={},this.numberAllocator=new r.NumberAllocator(1,e),this.max=e,this.length=0)}put(e,t){if(0===t||t>this.max)return!1;let r=this.aliasToTopic.get(t);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(t,e),this.topicToAlias[e]=t,this.numberAllocator.use(t),this.length=this.aliasToTopic.size,!0}getTopicByAlias(e){return this.aliasToTopic.get(e)}getAliasByTopic(e){let t=this.topicToAlias[e];return typeof t<"u"&&this.aliasToTopic.get(t),t}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}}}),ms=Un(e=>{Zn(),Mo(),bo();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=za(),n=t(gs()),i=Ga();e.default=(e,t)=>{e.log("_handleConnack");let{options:o}=e,a=5===o.protocolVersion?t.reasonCode:t.returnCode;if(clearTimeout(e.connackTimer),delete e.topicAliasSend,t.properties){if(t.properties.topicAliasMaximum){if(t.properties.topicAliasMaximum>65535)return void e.emit("error",new Error("topicAliasMaximum from broker is out of range"));t.properties.topicAliasMaximum>0&&(e.topicAliasSend=new n.default(t.properties.topicAliasMaximum))}t.properties.serverKeepAlive&&o.keepalive&&(o.keepalive=t.properties.serverKeepAlive),t.properties.maximumPacketSize&&(o.properties||(o.properties={}),o.properties.maximumPacketSize=t.properties.maximumPacketSize)}if(0===a)e.reconnecting=!1,e._onConnect(t);else if(a>0){let t=new i.ErrorWithReasonCode("Connection refused: ".concat(r.ReasonCodes[a]),a);e.emit("error",t),e.options.reconnectOnConnackError&&e._cleanUp(!0)}}}),ys=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0});e.default=(e,t,r)=>{e.log("handling pubrel packet");let n=typeof r<"u"?r:e.noop,{messageId:i}=t,o={cmd:"pubcomp",messageId:i};e.incomingStore.get(t,(t,r)=>{t?e._sendPacket(o,n):(e.emit("message",r.topic,r.payload,r),e.handleMessage(r,t=>{if(t)return n(t);e.incomingStore.del(r,e.noop),e._sendPacket(o,n)}))})}}),vs=Un(e=>{Zn(),Mo(),bo();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=t(Za()),n=t(Ha()),i=t(ms()),o=t(za()),a=t(ys());e.default=(e,t,s)=>{let{options:l}=e;if(5===l.protocolVersion&&l.properties&&l.properties.maximumPacketSize&&l.properties.maximumPacketSize<t.length)return e.emit("error",new Error("exceeding packets size ".concat(t.cmd))),e.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),e;switch(e.log("_handlePacket :: emitting packetreceive"),e.emit("packetreceive",t),t.cmd){case"publish":(0,r.default)(e,t,s);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":e.reschedulePing(),(0,o.default)(e,t),s();break;case"pubrel":e.reschedulePing(),(0,a.default)(e,t,s);break;case"connack":(0,i.default)(e,t),s();break;case"auth":e.reschedulePing(),(0,n.default)(e,t),s();break;case"pingresp":e.log("_handlePacket :: received pingresp"),e.reschedulePing(!0),s();break;case"disconnect":e.emit("disconnect",t),s();break;default:e.log("_handlePacket :: unknown command"),s()}}}),_s=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){l(this,"nextId",void 0),this.nextId=Math.max(1,Math.floor(65535*Math.random()))}allocate(){let e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e}getLastAllocated(){return 1===this.nextId?65535:this.nextId-1}register(e){return!0}deallocate(e){}clear(){}}}),bs=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(e){l(this,"aliasToTopic",void 0),l(this,"max",void 0),l(this,"length",void 0),this.aliasToTopic={},this.max=e}put(e,t){return!(0===t||t>this.max)&&(this.aliasToTopic[t]=e,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(e){return this.aliasToTopic[e]}clear(){this.aliasToTopic={}}}}),Es=Un(e=>{Zn(),Mo(),bo();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var r=t((Xo(),jn(jo))),n=Ga(),i=class{};e.TypedEventEmitter=i,(0,n.applyMixin)(i,r.default)}),ws=Un((e,t)=>{function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}Zn(),Mo(),bo(),t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}),Ss=Un((e,t)=>{Zn(),Mo(),bo();var r=ws().default;t.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports}),Ts=Un((e,t)=>{Zn(),Mo(),bo();var r=ws().default,n=Ss();t.exports=function(e){var t=n(e,"string");return"symbol"==r(t)?t:t+""},t.exports.__esModule=!0,t.exports.default=t.exports}),As=Un((e,t)=>{Zn(),Mo(),bo();var r=Ts();t.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports}),Is=Un((e,t)=>{Zn(),Mo(),bo(),t.exports=function(e){if(Array.isArray(e))return e},t.exports.__esModule=!0,t.exports.default=t.exports}),Rs=Un((e,t)=>{Zn(),Mo(),bo(),t.exports=function(e,t){var r=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports}),Ns=Un((e,t)=>{Zn(),Mo(),bo(),t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},t.exports.__esModule=!0,t.exports.default=t.exports}),Cs=Un((e,t)=>{Zn(),Mo(),bo();var r=Ns();t.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}),Os=Un((e,t)=>{Zn(),Mo(),bo(),t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}),Ps=Un((e,t)=>{Zn(),Mo(),bo();var r=Is(),n=Rs(),i=Cs(),o=Os();t.exports=function(e,t){return r(e)||n(e,t)||i(e,t)||o()},t.exports.__esModule=!0,t.exports.default=t.exports}),xs=Un((e,t)=>{var n,i;Zn(),Mo(),bo(),n=e,i=function(e){var t,r=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,n=536870912,i=2*n,o=new WeakMap,a=function(e,t){return function(o){var a=t.get(o),s=void 0===a?o.size:a<i?a+1:0;if(!o.has(s))return e(o,s);if(o.size<n){for(;o.has(s);)s=Math.floor(Math.random()*i);return e(o,s)}if(o.size>r)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;o.has(s);)s=Math.floor(Math.random()*r);return e(o,s)}}((t=o,function(e,r){return t.set(e,r),r}),o),s=function(e){return function(t){var r=e(t);return t.add(r),r}}(a);e.addUniqueNumber=s,e.generateUniqueNumber=a},"object"==typeof e&&typeof t<"u"?i(e):"function"==typeof define&&r.amdO?define(["exports"],i):i((n=typeof globalThis<"u"?globalThis:n||self).fastUniqueNumbers={})}),Ds=Un((e,t)=>{function r(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void r(u)}s.done?t(l):Promise.resolve(l).then(n,i)}Zn(),Mo(),bo(),t.exports=function(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,l,"next",e)}function l(e){r(a,i,o,s,l,"throw",e)}s(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports}),ks=Un((e,t)=>{Zn(),Mo(),bo(),t.exports=function(e,t){this.v=e,this.k=t},t.exports.__esModule=!0,t.exports.default=t.exports}),Ms=Un((e,t)=>{function r(e,n,i,o){var a=Object.defineProperty;try{a({},"",{})}catch(s){a=0}t.exports=r=function(e,t,n,i){function o(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!i,configurable:!i,writable:!i}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,r(e,n,i,o)}Zn(),Mo(),bo(),t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}),Ls=Un((e,t)=>{Zn(),Mo(),bo();var r=Ms();function n(){var e,i,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.toStringTag||"@@toStringTag";function l(t,n,o,a){var s=n&&n.prototype instanceof c?n:c,l=Object.create(s.prototype);return r(l,"_invoke",function(t,r,n){var o,a,s,l=0,c=n||[],f=!1,d={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return o=t,a=0,s=e,d.n=r,u}};function h(t,r){for(a=t,s=r,i=0;!f&&l&&!n&&i<c.length;i++){var n,o=c[i],h=d.p,p=o[2];t>3?(n=p===r)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=h&&((n=t<2&&h<o[1])?(a=0,d.v=r,d.n=o[1]):h<p&&(n=t<3||o[0]>r||r>p)&&(o[4]=t,o[5]=r,d.n=p,a=0))}if(n||t>1)return u;throw f=!0,r}return function(n,c,p){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,p),a=c,s=p;(i=a<2?e:s)||!f;){o||(a?a<3?(a>1&&(d.n=-1),h(a,s)):d.n=s:d.v=s);try{if(l=2,o){if(a||(n="next"),i=o[n]){if(!(i=i.call(o,s)))throw TypeError("iterator result is not an object");if(!i.done)return i;s=i.value,a<2&&(a=0)}else 1===a&&(i=o.return)&&i.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),a=1);o=e}else if((i=(f=d.n<0)?s:t.call(r,d))!==u)break}catch(g){o=e,a=1,s=g}finally{l=1}}return{value:i,done:f}}}(t,o,a),!0),l}var u={};function c(){}function f(){}function d(){}i=Object.getPrototypeOf;var h=[][a]?i(i([][a]())):(r(i={},a,function(){return this}),i),p=d.prototype=c.prototype=Object.create(h);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,s,"GeneratorFunction")),e.prototype=Object.create(p),e}return f.prototype=d,r(p,"constructor",d),r(d,"constructor",f),f.displayName="GeneratorFunction",r(d,s,"GeneratorFunction"),r(p),r(p,s,"Generator"),r(p,a,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(t.exports=n=function(){return{w:l,m:g}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}),Fs=Un((e,t)=>{Zn(),Mo(),bo();var r=ks(),n=Ms();t.exports=function e(t,i){function o(e,n,a,s){try{var l=t[e](n),u=l.value;return u instanceof r?i.resolve(u.v).then(function(e){o("next",e,a,s)},function(e){o("throw",e,a,s)}):i.resolve(u).then(function(e){l.value=e,a(l)},function(e){return o("throw",e,a,s)})}catch(c){s(c)}}var a;this.next||(n(e.prototype),n(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(e,t,r){function n(){return new i(function(t,n){o(e,r,t,n)})}return a=a?a.then(n,n):n()},!0)},t.exports.__esModule=!0,t.exports.default=t.exports}),Us=Un((e,t)=>{Zn(),Mo(),bo();var r=Ls(),n=Fs();t.exports=function(e,t,i,o,a){return new n(r().w(e,t,i,o),a||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports}),Bs=Un((e,t)=>{Zn(),Mo(),bo();var r=Us();t.exports=function(e,t,n,i,o){var a=r(e,t,n,i,o);return a.next().then(function(e){return e.done?e.value:a.next()})},t.exports.__esModule=!0,t.exports.default=t.exports}),js=Un((e,t)=>{Zn(),Mo(),bo(),t.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.exports.__esModule=!0,t.exports.default=t.exports}),Zs=Un((e,t)=>{Zn(),Mo(),bo();var r=ws().default;t.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(r(e)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports}),qs=Un((e,t)=>{Zn(),Mo(),bo();var r=ks(),n=Ls(),i=Bs(),o=Us(),a=Fs(),s=js(),l=Zs();function u(){var e=n(),c=e.m(u),f=(Object.getPrototypeOf?Object.getPrototypeOf(c):c.__proto__).constructor;function d(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))}var h={throw:1,return:2,break:3,continue:3};function p(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,h[e],t)},delegateYield:function(e,i,o){return t.resultName=i,r(n.d,l(e),o)},finish:function(e){return r(n.f,e)}},r=function(e,r,i){n.p=t.prev,n.n=t.next;try{return e(r,i)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(t.exports=u=function(){return{wrap:function(t,r,n,i){return e.w(p(t),r,n,i&&i.reverse())},isGeneratorFunction:d,mark:e.m,awrap:function(e,t){return new r(e,t)},AsyncIterator:a,async:function(e,t,r,n,a){return(d(t)?o:i)(p(e),t,r,n,a)},keys:s,values:l}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports}),Gs=Un((e,t)=>{Zn(),Mo(),bo();var r=qs()();t.exports=r;try{regeneratorRuntime=r}catch(n){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}),zs=Un((e,t)=>{var n,i;Zn(),Mo(),bo(),n=e,i=function(e,t,r,n,i,o){var a=new WeakMap;function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach(function(r){t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?u(Object(n),!0).forEach(function(r){t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f=new WeakMap;e.createBroker=function(e){var s=function(e){return l(l({},e),{},{connect:function(e){var t=e.call;return i(o.mark(function e(){var r,n,i,s;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new MessageChannel,n=r.port1,i=r.port2,e.next=1,t("connect",{port:n},[n]);case 1:return s=e.sent,a.set(i,s),e.abrupt("return",i);case 2:case"end":return e.stop()}},e)}))},disconnect:function(e){var t=e.call;return function(){var e=i(o.mark(function e(r){var n;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=a.get(r))){e.next=1;break}throw new Error("The given port is not connected.");case 1:return e.next=2,t("disconnect",{portId:n});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},isSupported:function(e){var t=e.call;return function(){return t("isSupported")}}})}(e);return function(e){var i=function(e){if(f.has(e))return f.get(e);var t=new Map;return f.set(e,t),t}(e);e.addEventListener("message",function(e){var t=e.data,r=t.id;if(null!==r&&i.has(r)){var n=i.get(r),o=n.reject,a=n.resolve;i.delete(r),void 0===t.error?a(t.result):o(new Error(t.error.message))}}),function(e){return"function"==typeof e.start}(e)&&e.start();for(var o=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise(function(a,s){var l=n.generateUniqueNumber(i);i.set(l,{reject:s,resolve:a}),null===r?e.postMessage({id:l,method:t},o):e.postMessage({id:l,method:t,params:r},o)})},a=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.postMessage({id:null,method:t,params:r},n)},l={},u=0,d=Object.entries(s);u<d.length;u++){var h=r(d[u],2),p=h[0],g=h[1];l=c(c({},l),{},t({},p,g({call:o,notify:a})))}return c({},l)}}},"object"==typeof e&&typeof t<"u"?i(e,As(),Ps(),xs(),Ds(),Gs()):"function"==typeof define&&r.amdO?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/slicedToArray","fast-unique-numbers","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/regenerator"],i):i((n=typeof globalThis<"u"?globalThis:n||self).brokerFactory={},n._defineProperty,n._slicedToArray,n.fastUniqueNumbers,n._asyncToGenerator,n._regeneratorRuntime)}),Hs=Un((e,t)=>{var n,i;Zn(),Mo(),bo(),n=e,i=function(e,t,r,n){var i=new Map([[0,null]]),o=new Map([[0,null]]),a=r.createBroker({clearInterval:function(e){var r=e.call;return function(e){"symbol"===t(i.get(e))&&(i.set(e,null),r("clear",{timerId:e,timerType:"interval"}).then(function(){i.delete(e)}))}},clearTimeout:function(e){var r=e.call;return function(e){"symbol"===t(o.get(e))&&(o.set(e,null),r("clear",{timerId:e,timerType:"timeout"}).then(function(){o.delete(e)}))}},setInterval:function(e){var t=e.call;return function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];var l=Symbol(),u=n.generateUniqueNumber(i);i.set(u,l);var c=function(){return t("set",{delay:r,now:performance.timeOrigin+performance.now(),timerId:u,timerType:"interval"}).then(function(){var t=i.get(u);if(void 0===t)throw new Error("The timer is in an undefined state.");t===l&&(e.apply(void 0,a),i.get(u)===l&&c())})};return c(),u}},setTimeout:function(e){var t=e.call;return function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];var l=Symbol(),u=n.generateUniqueNumber(o);return o.set(u,l),t("set",{delay:r,now:performance.timeOrigin+performance.now(),timerId:u,timerType:"timeout"}).then(function(){var t=o.get(u);if(void 0===t)throw new Error("The timer is in an undefined state.");t===l&&(o.delete(u),e.apply(void 0,a))}),u}}});e.load=function(e){var t=new Worker(e);return a(t)},e.wrap=a},"object"==typeof e&&typeof t<"u"?i(e,ws(),zs(),xs()):"function"==typeof define&&r.amdO?define(["exports","@babel/runtime/helpers/typeof","broker-factory","fast-unique-numbers"],i):i((n=typeof globalThis<"u"?globalThis:n||self).workerTimersBroker={},n._typeof,n.brokerFactory,n.fastUniqueNumbers)}),Vs=Un((e,t)=>{var n,i;Zn(),Mo(),bo(),n=e,i=function(e,t){var r=function(e,t){var r=null;return function(){if(null!==r)return r;var n=new Blob([t],{type:"application/javascript; charset=utf-8"}),i=URL.createObjectURL(n);return r=e(i),setTimeout(function(){return URL.revokeObjectURL(i)}),r}}(t.load,'(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a(\'The requested method called "\'.concat(e,\'" is not supported.\'),u.METHOD_NOT_FOUND)},s=function(e){return a(\'The handler of the method called "\'.concat(e,\'" returned no required result.\'),u.INTERNAL_ERROR)},c=function(e){return a(\'The handler of the method called "\'.concat(e,\'" returned an unexpected result.\'),u.INTERNAL_ERROR)},f=function(e){return a(\'The specified parameter called "portId" with the given value "\'.concat(e,\'" does not identify a port connected to this worker.\'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a \'"+o+"\' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();');e.clearInterval=function(e){return r().clearInterval(e)},e.clearTimeout=function(e){return r().clearTimeout(e)},e.setInterval=function(){var e;return(e=r()).setInterval.apply(e,arguments)},e.setTimeout=function(){var e;return(e=r()).setTimeout.apply(e,arguments)}},"object"==typeof e&&typeof t<"u"?i(e,Hs()):"function"==typeof define&&r.amdO?define(["exports","worker-timers-broker"],i):i((n=typeof globalThis<"u"?globalThis:n||self).workerTimers={},n.workerTimersBroker)}),Ws=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var t=()=>{var e;return!("object"!=typeof self||null===(e=self)||void 0===e||null===(e=e.constructor)||void 0===e||null===(e=e.name)||void 0===e||!e.includes("WorkerGlobalScope"))},r=()=>typeof navigator<"u"&&"ReactNative"===navigator.product,n=(()=>{var e;return typeof window<"u"&&(typeof navigator<"u"&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.toLowerCase().indexOf(" electron/"))>-1&&null!==qn&&void 0!==qn&&qn.versions?!Object.prototype.hasOwnProperty.call(qn.versions,"electron"):typeof window.document<"u")})()||t()||r();e.isWebWorker=t(),e.isReactNativeBrowser=r(),e.default=n}),Ys=Un(e=>{Zn(),Mo(),bo();var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=e&&e.__importStar||function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(t)};return function(n){if(n&&n.__esModule)return n;var i={};if(null!=n)for(var o=e(n),a=0;a<o.length;a++)"default"!==o[a]&&t(i,n,o[a]);return r(i,n),i}}();Object.defineProperty(e,"__esModule",{value:!0});var i=Vs(),o=n(Ws()),a={set:i.setInterval,clear:i.clearInterval},s={set:(e,t)=>setInterval(e,t),clear:e=>clearInterval(e)};e.default=e=>{switch(e){case"native":return s;case"worker":return a;default:return!o.default||o.isWebWorker||o.isReactNativeBrowser?s:a}}}),Ks=Un(e=>{Zn(),Mo(),bo();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=t(Ys());e.default=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(e,t){l(this,"_keepalive",void 0),l(this,"timerId",void 0),l(this,"timer",void 0),l(this,"destroyed",!1),l(this,"counter",void 0),l(this,"client",void 0),l(this,"_keepaliveTimeoutTimestamp",void 0),l(this,"_intervalEvery",void 0),this.client=e,this.timer="object"==typeof t&&"set"in t&&"clear"in t?t:(0,r.default)(t),this.setKeepalive(e.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(e){if(e*=1e3,isNaN(e)||e<=0||e>2147483647)throw new Error("Keepalive value must be an integer between 0 and 2147483647. Provided value is ".concat(e));this._keepalive=e,this.reschedule(),this.client.log("KeepaliveManager: set keepalive to ".concat(e,"ms"))}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let e=Math.ceil(1.5*this._keepalive);this._keepaliveTimeoutTimestamp=Date.now()+e,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,2===this.counter?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}}}),Qs=Un(e=>{var t;Zn(),Mo(),bo();var r=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(t)};return function(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var o=e(t),a=0;a<o.length;a++)"default"!==o[a]&&r(i,t,o[a]);return n(i,t),i}}(),o=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(La()),s=wa(),u=o(Ua()),f=o(Oa()),d=i(Ba()),h=o(ja()),p=o(vs()),g=o(_s()),m=o(bs()),y=Ga(),v=Es(),_=o(Ks()),b=i(Ws()),E=globalThis.setImmediate||function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=t.shift();(0,y.nextTick)(()=>{n(...t)})},w={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},S=(t=class e extends v.TypedEventEmitter{static defaultId(){return"mqttjs_".concat(Math.random().toString(16).substr(2,8))}constructor(t,r){super(),l(this,"connected",void 0),l(this,"disconnecting",void 0),l(this,"disconnected",void 0),l(this,"reconnecting",void 0),l(this,"incomingStore",void 0),l(this,"outgoingStore",void 0),l(this,"options",void 0),l(this,"queueQoSZero",void 0),l(this,"_reconnectCount",void 0),l(this,"log",void 0),l(this,"messageIdProvider",void 0),l(this,"outgoing",void 0),l(this,"messageIdToTopic",void 0),l(this,"noop",void 0),l(this,"keepaliveManager",void 0),l(this,"stream",void 0),l(this,"queue",void 0),l(this,"streamBuilder",void 0),l(this,"_resubscribeTopics",void 0),l(this,"connackTimer",void 0),l(this,"reconnectTimer",void 0),l(this,"_storeProcessing",void 0),l(this,"_packetIdsDuringStoreProcessing",void 0),l(this,"_storeProcessingQueue",void 0),l(this,"_firstConnection",void 0),l(this,"topicAliasRecv",void 0),l(this,"topicAliasSend",void 0),l(this,"_deferredReconnect",void 0),l(this,"connackPacket",void 0),this.options=r||{};for(let e in w)typeof this.options[e]>"u"?this.options[e]=w[e]:this.options[e]=r[e];this.log=this.options.log||(0,f.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",e.VERSION),b.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",b.default?"browser":"node"),this.log("MqttClient :: options.protocol",r.protocol),this.log("MqttClient :: options.protocolVersion",r.protocolVersion),this.log("MqttClient :: options.username",r.username),this.log("MqttClient :: options.keepalive",r.keepalive),this.log("MqttClient :: options.reconnectPeriod",r.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",r.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",r.properties?r.properties.topicAliasMaximum:void 0),this.options.clientId="string"==typeof r.clientId?r.clientId:e.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===r.protocolVersion&&r.customHandleAcks?r.customHandleAcks:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t[3](null,0)},this.options.writeCache||(a.default.writeToStream.cacheNumbers=!1),this.streamBuilder=t,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new g.default:this.options.messageIdProvider,this.outgoingStore=r.outgoingStore||new h.default,this.incomingStore=r.incomingStore||new h.default,this.queueQoSZero=void 0===r.queueQoSZero||r.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,r.properties&&r.properties.topicAliasMaximum>0&&(r.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new m.default(r.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:e}=this,t=()=>{let r=e.shift();this.log("deliver :: entry %o",r);let n=null;if(!r)return void this._resubscribe();n=r.packet,this.log("deliver :: call _sendPacket for %o",n);let i=!0;n.messageId&&0!==n.messageId&&(this.messageIdProvider.register(n.messageId)||(i=!1)),i?this._sendPacket(n,e=>{r.cb&&r.cb(e),t()}):(this.log("messageId: %d has already used. The message is skipped and removed.",n.messageId),t())};this.log("connect :: sending queued packets"),t()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(e,t){t()}handleMessage(e,t){t()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var e;let t=new s.Writable,r=a.default.parser(this.options),n=null,i=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new h.default,this.outgoingStore=this.options.outgoingStore||new h.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),r.on("packet",e=>{this.log("parser :: on packet push to packets array."),i.push(e)});let o=()=>{this.log("work :: getting next packet in queue");let e=i.shift();if(e)this.log("work :: packet pulled from queue"),(0,p.default)(this,e,l);else{this.log("work :: no packets in queue");let e=n;n=null,this.log("work :: done flag is %s",!!e),e&&e()}},l=()=>{if(i.length)(0,y.nextTick)(o);else{let e=n;n=null,e()}};t._write=(e,t,i)=>{n=i,this.log("writable stream :: parsing buffer"),r.parse(e),o()};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(t),this.stream.on("error",e=>{this.log("streamErrorHandler :: error",e.message),e.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",e)):this.noop(e)}),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let u={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(u.will=c(c({},this.options.will),{},{payload:null===(e=this.options.will)||void 0===e?void 0:e.payload})),this.topicAliasRecv&&(u.properties||(u.properties={}),this.topicAliasRecv&&(u.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(u),r.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket){let e=c({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(e)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(e,t,r,n){this.log("publish :: message `%s` to topic `%s`",t,e);let{options:i}=this;"function"==typeof r&&(n=r,r=null),r=r||{},r=c(c({},{qos:0,retain:!1,dup:!1}),r);let{qos:o,retain:a,dup:s,properties:l,cbStorePut:u}=r;if(this._checkDisconnecting(n))return this;let f=()=>{let r=0;if((1===o||2===o)&&(r=this._nextId(),null===r))return this.log("No messageId left"),!1;let c={cmd:"publish",topic:e,payload:t,qos:o,retain:a,messageId:r,dup:s};switch(5===i.protocolVersion&&(c.properties=l),this.log("publish :: qos",o),o){case 1:case 2:this.outgoing[c.messageId]={volatile:!1,cb:n||this.noop},this.log("MqttClient:publish: packet cmd: %s",c.cmd),this._sendPacket(c,void 0,u);break;default:this.log("MqttClient:publish: packet cmd: %s",c.cmd),this._sendPacket(c,n,u)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!f())&&this._storeProcessingQueue.push({invoke:f,cbStorePut:r.cbStorePut,callback:n}),this}publishAsync(e,t,r){return new Promise((n,i)=>{this.publish(e,t,r,(e,t)=>{e?i(e):n(t)})})}subscribe(e,t,r){let n=this.options.protocolVersion;"function"==typeof t&&(r=t),r=r||this.noop;let i=!1,o=[];"string"==typeof e?o=e=[e]:Array.isArray(e)?o=e:"object"==typeof e&&(i=e.resubscribe,delete e.resubscribe,o=Object.keys(e));let a=d.validateTopics(o);if(null!==a)return E(r,new Error("Invalid topic ".concat(a))),this;if(this._checkDisconnecting(r))return this.log("subscribe: discconecting true"),this;let s={qos:0};5===n&&(s.nl=!1,s.rap=!1,s.rh=0),t=c(c({},s),t);let{properties:l}=t,u=[],f=(e,r)=>{if(r=r||t,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,e)||this._resubscribeTopics[e].qos<r.qos||i){let t={topic:e,qos:r.qos};5===n&&(t.nl=r.nl,t.rap=r.rap,t.rh=r.rh,t.properties=l),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",t.topic,t.qos),u.push(t)}};if(Array.isArray(e)?e.forEach(e=>{this.log("subscribe: array topic %s",e),f(e)}):Object.keys(e).forEach(t=>{this.log("subscribe: object topic %s, %o",t,e[t]),f(t,e[t])}),!u.length)return r(null,[]),this;let h=(e,t)=>{let r={cmd:"subscribe",subscriptions:e,messageId:t};if(l&&(r.properties=l),this.options.resubscribe){this.log("subscribe :: resubscribe true");let t=[];e.forEach(e=>{if(this.options.reconnectPeriod>0){let r={qos:e.qos};5===n&&(r.nl=e.nl||!1,r.rap=e.rap||!1,r.rh=e.rh||0,r.properties=e.properties),this._resubscribeTopics[e.topic]=r,t.push(e.topic)}}),this.messageIdToTopic[r.messageId]=t}let i=new Promise((t,n)=>{this.outgoing[r.messageId]={volatile:!0,cb(r,i){if(!r){let{granted:t}=i;for(let r=0;r<t.length;r+=1)e[r].qos=t[r]}r?n(new y.ErrorWithSubackPacket(r.message,i)):t(i)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(r),i},p=()=>{var e;let t=null!==(e=this.options.subscribeBatchSize)&&void 0!==e?e:u.length,n=[];for(let r=0;r<u.length;r+=t){let e=u.slice(r,r+t),i=this._nextId();if(null===i)return this.log("No messageId left"),!1;n.push(h(e,i))}return Promise.all(n).then(e=>{r(null,u,e.at(-1))}).catch(e=>{r(e,u,e.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!p())&&this._storeProcessingQueue.push({invoke:p,callback:r}),this}subscribeAsync(e,t){return new Promise((r,n)=>{this.subscribe(e,t,(e,t)=>{e?n(e):r(t)})})}unsubscribe(e,t,r){"string"==typeof e&&(e=[e]),"function"==typeof t&&(r=t),r=r||this.noop;let n=d.validateTopics(e);if(null!==n)return E(r,new Error("Invalid topic ".concat(n))),this;if(this._checkDisconnecting(r))return this;let i=()=>{let n=this._nextId();if(null===n)return this.log("No messageId left"),!1;let i={cmd:"unsubscribe",messageId:n,unsubscriptions:[]};return"string"==typeof e?i.unsubscriptions=[e]:Array.isArray(e)&&(i.unsubscriptions=e),this.options.resubscribe&&i.unsubscriptions.forEach(e=>{delete this._resubscribeTopics[e]}),"object"==typeof t&&t.properties&&(i.properties=t.properties),this.outgoing[i.messageId]={volatile:!0,cb:r},this.log("unsubscribe: call _sendPacket"),this._sendPacket(i),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!i())&&this._storeProcessingQueue.push({invoke:i,callback:r}),this}unsubscribeAsync(e,t){return new Promise((r,n)=>{this.unsubscribe(e,t,(e,t)=>{e?n(e):r(t)})})}end(e,t,r){this.log("end :: (%s)",this.options.clientId),(null==e||"boolean"!=typeof e)&&(r=r||t,t=e,e=!1),"object"!=typeof t&&(r=r||t,t=null),this.log("end :: cb? %s",!!r),(!r||"function"!=typeof r)&&(r=this.noop);let n=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(e=>{this.outgoingStore.close(t=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),r){let n=e||t;this.log("end :: closeStores: invoking callback with args"),r(n)}})}),this._deferredReconnect?this._deferredReconnect():(0===this.options.reconnectPeriod||this.options.manualConnect)&&(this.disconnecting=!1)},i=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,e),this._cleanUp(e,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,y.nextTick)(n)},t)};return this.disconnecting?(r(),this):(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,i,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),i()),this)}endAsync(e,t){return new Promise((r,n)=>{this.end(e,t,e=>{e?n(e):r()})})}removeOutgoingMessage(e){if(this.outgoing[e]){let{cb:t}=this.outgoing[e];this._removeOutgoingAndStoreMessage(e,()=>{t(new Error("Message removed"))})}return this}reconnect(e){this.log("client reconnect");let t=()=>{e?(this.options.incomingStore=e.incomingStore,this.options.outgoingStore=e.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new h.default,this.outgoingStore=this.options.outgoingStore||new h.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=t:t(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(e=>{this.outgoing[e].volatile&&"function"==typeof this.outgoing[e].cb&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(e=>{"function"==typeof this.outgoing[e].cb&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])}))}_removeTopicAliasAndRecoverTopicName(e){let t;e.properties&&(t=e.properties.topicAlias);let r=e.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",t,r),0===r.length){if(typeof t>"u")return new Error("Unregistered Topic Alias");if(r=this.topicAliasSend.getTopicByAlias(t),typeof r>"u")return new Error("Unregistered Topic Alias");e.topic=r}t&&delete e.properties.topicAlias}_checkDisconnecting(e){return this.disconnecting&&(e&&e!==this.noop?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",t)),this.log("_cleanUp :: forced? %s",e),e)0===this.options.reconnectPeriod&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let e=c({cmd:"disconnect"},r);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(e,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),E(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),t&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",t),t())}_storeAndSend(e,t,r){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",e.cmd);let n,i=e;if("publish"===i.cmd&&(i=(0,u.default)(e),n=this._removeTopicAliasAndRecoverTopicName(i),n))return t&&t(n);this.outgoingStore.put(i,n=>{if(n)return t&&t(n);r(),this._writePacket(e,t)})}_applyTopicAlias(e){if(5===this.options.protocolVersion&&"publish"===e.cmd){let t;e.properties&&(t=e.properties.topicAlias);let r=e.topic.toString();if(this.topicAliasSend)if(t){if(0!==r.length&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",r,t),!this.topicAliasSend.put(r,t)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,t),new Error("Sending Topic Alias out of range")}else 0!==r.length&&(this.options.autoAssignTopicAlias?(t=this.topicAliasSend.getAliasByTopic(r),t?(e.topic="",e.properties=c(c({},e.properties),{},{topicAlias:t}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",r,t)):(t=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(r,t),e.properties=c(c({},e.properties),{},{topicAlias:t}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",r,t))):this.options.autoUseTopicAlias&&(t=this.topicAliasSend.getAliasByTopic(r),t&&(e.topic="",e.properties=c(c({},e.properties),{},{topicAlias:t}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",r,t))));else if(t)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,t),new Error("Sending Topic Alias out of range")}}_noop(e){this.log("noop ::",e)}_writePacket(e,t){this.log("_writePacket :: packet: %O",e),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",e),this.log("_writePacket :: writing to stream");let r=a.default.writeToStream(e,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",r),!r&&t&&t!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",t)):t&&(this.log("_writePacket :: invoking cb"),t())}_sendPacket(e,t,r,n){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||this.noop,t=t||this.noop;let i=this._applyTopicAlias(e);if(i)t(i);else{if(!this.connected)return"auth"===e.cmd?void this._writePacket(e,t):(this.log("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(e,t,r));if(n)this._writePacket(e,t);else{switch(e.cmd){case"publish":break;case"pubrel":return void this._storeAndSend(e,t,r);default:return void this._writePacket(e,t)}switch(e.qos){case 2:case 1:this._storeAndSend(e,t,r);break;default:this._writePacket(e,t)}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}}}_storePacket(e,t,r){this.log("_storePacket :: packet: %o",e),this.log("_storePacket :: cb? %s",!!t),r=r||this.noop;let n=e;if("publish"===n.cmd){n=(0,u.default)(e);let r=this._removeTopicAliasAndRecoverTopicName(n);if(r)return t&&t(r)}let i=n.qos||0;0===i&&this.queueQoSZero||"publish"!==n.cmd?this.queue.push({packet:n,cb:t}):i>0?(t=this.outgoing[n.messageId]?this.outgoing[n.messageId].cb:null,this.outgoingStore.put(n,e=>{if(e)return t&&t(e);r()})):t&&t(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new _.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.keepaliveManager&&this.options.keepalive&&(e||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let e=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&e.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){this.log("_resubscribe: protocolVersion 5");for(let t=0;t<e.length;t++){let r={};r[e[t]]=this._resubscribeTopics[e[t]],r.resubscribe=!0,this.subscribe(r,{properties:r[e[t]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(e){if(this.disconnected)return void this.emit("connect",e);this.connackPacket=e,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let t=()=>{let r=this.outgoingStore.createStream(),n=()=>{r.destroy(),r=null,this._flushStoreProcessingQueue(),i()},i=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",n),r.on("error",e=>{i(),this._flushStoreProcessingQueue(),this.removeListener("close",n),this.emit("error",e)});let o=()=>{if(!r)return;let e,t=r.read(1);t?(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[t.messageId]?o():this.disconnecting||this.reconnectTimer?r.destroy&&r.destroy():(e=this.outgoing[t.messageId]?this.outgoing[t.messageId].cb:null,this.outgoing[t.messageId]={volatile:!1,cb(t,r){e&&e(t,r),o()}},this._packetIdsDuringStoreProcessing[t.messageId]=!0,this.messageIdProvider.register(t.messageId)?this._sendPacket(t,void 0,void 0,!0):this.log("messageId: %d has already used.",t.messageId))):r.once("readable",o)};r.on("end",()=>{let r=!0;for(let e in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[e]){r=!1;break}this.removeListener("close",n),r?(i(),this._invokeAllStoreProcessingQueue(),this.emit("connect",e)):t()}),o()};t()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let e=this._storeProcessingQueue[0];if(e&&e.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let e of this._storeProcessingQueue)e.cbStorePut&&e.cbStorePut(new Error("Connection closed")),e.callback&&e.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(e,t){delete this.outgoing[e],this.outgoingStore.del({messageId:e},(r,n)=>{t(r,n),this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue()})}},l(t,"VERSION",y.MQTTJS_VERSION),t);e.default=S}),Xs=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0});var t=ps();e.default=class{constructor(){l(this,"numberAllocator",void 0),l(this,"lastId",void 0),this.numberAllocator=new t.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(e){return this.numberAllocator.use(e)}deallocate(e){this.numberAllocator.free(e)}clear(){this.numberAllocator.clear()}}});var $s,Js,el,tl=Fn(()=>{Zn(),Mo(),bo(),$s={},Js=!1,el=function(){if(Js)return $s;Js=!0;let e=2147483647,t=36,r=/^xn--/,n=/[^\0-\x7F]/,i=/[\x2E\u3002\uFF0E\uFF61]/g,o={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},a=Math.floor,s=String.fromCharCode;function l(e){throw new RangeError(o[e])}function u(e,t){let r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);let o=function(e,t){let r=[],n=e.length;for(;n--;)r[n]=t(e[n]);return r}((e=e.replace(i,".")).split("."),t).join(".");return n+o}function c(e){let t=[],r=0,n=e.length;for(;r<n;){let i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){let n=e.charCodeAt(r++);56320==(64512&n)?t.push(((1023&i)<<10)+(1023&n)+65536):(t.push(i),r--)}else t.push(i)}return t}let f=function(e){return e>=48&&e<58?e-48+26:e>=65&&e<91?e-65:e>=97&&e<123?e-97:t},d=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},h=function(e,r,n){let i=0;for(e=n?a(e/700):e>>1,e+=a(e/r);e>455;i+=t)e=a(e/35);return a(i+36*e/(e+38))},p=function(r){let n=[],i=r.length,o=0,s=128,u=72,c=r.lastIndexOf("-");c<0&&(c=0);for(let e=0;e<c;++e)r.charCodeAt(e)>=128&&l("not-basic"),n.push(r.charCodeAt(e));for(let d=c>0?c+1:0;d<i;){let c=o;for(let n=1,s=t;;s+=t){d>=i&&l("invalid-input");let c=f(r.charCodeAt(d++));c>=t&&l("invalid-input"),c>a((e-o)/n)&&l("overflow"),o+=c*n;let h=s<=u?1:s>=u+26?26:s-u;if(c<h)break;let p=t-h;n>a(e/p)&&l("overflow"),n*=p}let p=n.length+1;u=h(o-c,p,0==c),a(o/p)>e-s&&l("overflow"),s+=a(o/p),o%=p,n.splice(o++,0,s)}return String.fromCodePoint(...n)},g=function(r){let n=[],i=(r=c(r)).length,o=128,u=0,f=72;for(let e of r)e<128&&n.push(s(e));let p=n.length,g=p;for(p&&n.push("-");g<i;){let i=e;for(let e of r)e>=o&&e<i&&(i=e);let c=g+1;i-o>a((e-u)/c)&&l("overflow"),u+=(i-o)*c,o=i;for(let m of r)if(m<o&&++u>e&&l("overflow"),m===o){let e=u;for(let r=t;;r+=t){let i=r<=f?1:r>=f+26?26:r-f;if(e<i)break;let o=e-i,l=t-i;n.push(s(d(i+o%l,0))),e=a(o/l)}n.push(s(d(e,0))),f=h(u,c,g===p),u=0,++g}++u,++o}return n.join("")};return $s={version:"2.3.1",ucs2:{decode:c,encode:e=>String.fromCodePoint(...e)},decode:p,encode:g,toASCII:function(e){return u(e,function(e){return n.test(e)?"xn--"+g(e):e})},toUnicode:function(e){return u(e,function(e){return r.test(e)?p(e.slice(4).toLowerCase()):e})}}}(),el.decode,el.encode,el.toASCII,el.toUnicode,el.ucs2,el.version});function rl(){return wl||(wl=!0,El=SyntaxError),El}function nl(){return Tl||(Tl=!0,Sl=TypeError),Sl}function il(){if(Nl)return Rl;Nl=!0;var e=typeof Symbol<"u"&&Symbol,t=(dl||(dl=!0,fl=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}),fl);return Rl=function(){return"function"==typeof e&&"function"==typeof Symbol&&"symbol"==typeof e("foo")&&"symbol"==typeof Symbol("bar")&&t()}}function ol(){if(kl)return Dl;kl=!0;var e=function(){if(xl)return Pl;xl=!0;var e=Object.prototype.toString,t=Math.max,r=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r};return Pl=function(n){var i=this;if("function"!=typeof i||"[object Function]"!==e.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,a=function(e){for(var t=[],r=1,n=0;r<e.length;r+=1,n+=1)t[n]=e[r];return t}(arguments),s=t(0,i.length-a.length),l=[],u=0;u<s;u++)l[u]="$"+u;if(o=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(l,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof o){var e=i.apply(this,r(a,arguments));return Object(e)===e?e:this}return i.apply(n,r(a,arguments))}),i.prototype){var c=function(){};c.prototype=i.prototype,o.prototype=new c,c.prototype=null}return o},Pl}();return Dl=Function.prototype.bind||e}function al(){if(Ul)return Fl;Ul=!0;var e,t=(pl||(pl=!0,hl=Error),hl),r=(ml||(ml=!0,gl=EvalError),gl),n=(vl||(vl=!0,yl=RangeError),yl),i=(bl||(bl=!0,_l=ReferenceError),_l),o=rl(),a=nl(),s=(Il||(Il=!0,Al=URIError),Al),l=Function,u=function(e){try{return l('"use strict"; return ('+e+").constructor;")()}catch(t){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(x){c=null}var f=function(){throw new a},d=c?function(){try{return f}catch(e){try{return c(arguments,"callee").get}catch(t){return f}}}():f,h=il()(),p=function(){if(Ol)return Cl;Ol=!0;var e={__proto__:null,foo:{}},t=Object;return Cl=function(){return{__proto__:e}.foo===e.foo&&!(e instanceof t)}}()(),g=Object.getPrototypeOf||(p?function(e){return e.__proto__}:null),m={},y=typeof Uint8Array>"u"||!g?e:g(Uint8Array),v={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":h&&g?g([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":m,"%AsyncGenerator%":m,"%AsyncGeneratorFunction%":m,"%AsyncIteratorPrototype%":m,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":m,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h&&g?g(g([][Symbol.iterator]())):e,"%JSON%":"object"==typeof JSON?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!h||!g?e:g((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":n,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!h||!g?e:g((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h&&g?g(""[Symbol.iterator]()):e,"%Symbol%":h?Symbol:e,"%SyntaxError%":o,"%ThrowTypeError%":d,"%TypedArray%":y,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":s,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet};if(g)try{null.error}catch(D){var _=g(g(D));v["%Error.prototype%"]=_}var b=function e(t){var r;if("%AsyncFunction%"===t)r=u("async function () {}");else if("%GeneratorFunction%"===t)r=u("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=u("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&g&&(r=g(i.prototype))}return v[t]=r,r},E={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=ol(),S=function(){if(Ll)return Ml;Ll=!0;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=ol();return Ml=r.call(e,t)}(),T=w.call(Function.call,Array.prototype.concat),A=w.call(Function.apply,Array.prototype.splice),I=w.call(Function.call,String.prototype.replace),R=w.call(Function.call,String.prototype.slice),N=w.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,P=function(e,t){var r,n=e;if(S(E,n)&&(n="%"+(r=E[n])[0]+"%"),S(v,n)){var i=v[n];if(i===m&&(i=b(n)),typeof i>"u"&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new o("intrinsic "+e+" does not exist!")};return Fl=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===N(/^%?[^%]*%?$/,e))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=R(e,0,1),r=R(e,-1);if("%"===t&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return I(e,C,function(e,t,r,i){n[n.length]=r?I(i,O,"$1"):t||e}),n}(e),n=r.length>0?r[0]:"",i=P("%"+n+"%",t),s=i.name,l=i.value,u=!1,f=i.alias;f&&(n=f[0],A(r,T([0,1],f)));for(var d=1,h=!0;d<r.length;d+=1){var p=r[d],g=R(p,0,1),m=R(p,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new o("property names with quotes must have matching quotes");if(("constructor"===p||!h)&&(u=!0),S(v,s="%"+(n+="."+p)+"%"))l=v[s];else if(null!=l){if(!(p in l)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&d+1>=r.length){var y=c(l,p);l=(h=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:l[p]}else h=S(l,p),l=l[p];h&&!u&&(v[s]=l)}}return l},Fl}function sl(){if(jl)return Bl;jl=!0;var e=al()("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch(t){e=!1}return Bl=e}function ll(){if(ql)return Zl;ql=!0;var e=al()("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch(t){e=null}return Zl=e}function ul(){if(Yl)return Wl;Yl=!0;var e=al(),t=function(){if(zl)return Gl;zl=!0;var e=sl(),t=rl(),r=nl(),n=ll();return Gl=function(i,o,a){if(!i||"object"!=typeof i&&"function"!=typeof i)throw new r("`obj` must be an object or a function`");if("string"!=typeof o&&"symbol"!=typeof o)throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new r("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],f=!!n&&n(i,o);if(e)e(i,o,{configurable:null===u&&f?f.configurable:!u,enumerable:null===s&&f?f.enumerable:!s,value:a,writable:null===l&&f?f.writable:!l});else{if(!c&&(s||l||u))throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");i[o]=a}},Gl}(),r=function(){if(Vl)return Hl;Vl=!0;var e=sl(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return 1!==e([],"length",{value:1}).length}catch(t){return!0}},Hl=t}()(),n=ll(),i=nl(),o=e("%Math.floor%");return Wl=function(e,a){if("function"!=typeof e)throw new i("`fn` is not a function");if("number"!=typeof a||a<0||a>4294967295||o(a)!==a)throw new i("`length` must be a positive 32-bit integer");var s=arguments.length>2&&!!arguments[2],l=!0,u=!0;if("length"in e&&n){var c=n(e,"length");c&&!c.configurable&&(l=!1),c&&!c.writable&&(u=!1)}return(l||u||!s)&&(r?t(e,"length",a,!0,!0):t(e,"length",a)),e},Wl}function cl(){if($l)return Xl;$l=!0;var e=al(),t=function(){if(Ql)return Kl;Ql=!0;var e=ol(),t=al(),r=ul(),n=nl(),i=t("%Function.prototype.apply%"),o=t("%Function.prototype.call%"),a=t("%Reflect.apply%",!0)||e.call(o,i),s=sl(),l=t("%Math.max%");Kl=function(t){if("function"!=typeof t)throw new n("a function is required");var i=a(e,o,arguments);return r(i,1+l(0,t.length-(arguments.length-1)),!0)};var u=function(){return a(e,i,arguments)};return s?s(Kl,"apply",{value:u}):Kl.apply=u,Kl}(),r=t(e("String.prototype.indexOf"));return Xl=function(n,i){var o=e(n,!!i);return"function"==typeof o&&r(n,".prototype.")>-1?t(o):o}}var fl,dl,hl,pl,gl,ml,yl,vl,_l,bl,El,wl,Sl,Tl,Al,Il,Rl,Nl,Cl,Ol,Pl,xl,Dl,kl,Ml,Ll,Fl,Ul,Bl,jl,Zl,ql,Gl,zl,Hl,Vl,Wl,Yl,Kl,Ql,Xl,$l,Jl=Fn(()=>{Zn(),Mo(),bo(),fl={},dl=!1,hl={},pl=!1,gl={},ml=!1,yl={},vl=!1,_l={},bl=!1,El={},wl=!1,Sl={},Tl=!1,Al={},Il=!1,Rl={},Nl=!1,Cl={},Ol=!1,Pl={},xl=!1,Dl={},kl=!1,Ml={},Ll=!1,Fl={},Ul=!1,Bl={},jl=!1,Zl={},ql=!1,Gl={},zl=!1,Hl={},Vl=!1,Wl={},Yl=!1,Kl={},Ql=!1,Xl={},$l=!1});function eu(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function tu(){!yu||!vu||(yu=!1,vu.length?mu=vu.concat(mu):_u=-1,mu.length&&ru())}function ru(){if(!yu){var e=setTimeout(tu,0);yu=!0;for(var t=mu.length;t;){for(vu=mu,mu=[];++_u<t;)vu&&vu[_u].run();_u=-1,t=mu.length}vu=null,yu=!1,clearTimeout(e)}}function nu(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];mu.push(new iu(e,t)),1===mu.length&&!yu&&setTimeout(ru,0)}function iu(e,t){this.fun=e,this.array=t}function ou(){}function au(e){eu("_linkedBinding")}function su(e){eu("dlopen")}function lu(){return[]}function uu(){return[]}function cu(e,t){if(!e)throw new Error(t||"assertion error")}function fu(){return!1}function du(){return ec.now()/1e3}function hu(e){var t=Math.floor(.001*(Date.now()-ec.now())),r=.001*ec.now(),n=Math.floor(r)+t,i=Math.floor(r%1*1e9);return e&&(n-=e[0],(i-=e[1])<0&&(n--,i+=rc)),[n,i]}function pu(){return nc}function gu(e){return[]}var mu,yu,vu,_u,bu,Eu,wu,Su,Tu,Au,Iu,Ru,Nu,Cu,Ou,Pu,xu,Du,ku,Mu,Lu,Fu,Uu,Bu,ju,Zu,qu,Gu,zu,Hu,Vu,Wu,Yu,Ku,Qu,Xu,$u,Ju,ec,tc,rc,nc,ic=Fn(()=>{Zn(),Mo(),bo(),mu=[],yu=!1,_u=-1,iu.prototype.run=function(){this.fun.apply(null,this.array)},bu={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Eu=["/usr/bin/node"],wu=[],Su={},Tu=function(e,t){console.warn((t?t+": ":"")+e)},Au=function(e){eu("binding")},Iu=function(e){return 0},Ru=function(){return"/"},Nu=function(e){},Cu={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Ou=ou,Pu=[],xu={},Du={},ku=ou,Mu=ou,Fu=Lu=function(){return{}},Uu=Lu,Bu=ou,ju=ou,Zu=ou,qu={},Gu={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},zu=ou,Hu=ou,Vu=ou,Wu=ou,Yu=ou,Ku=ou,Qu=ou,Xu=ou,$u=[],Ju=ou,void 0===(ec={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0}).now&&(tc=Date.now(),ec.timing&&ec.timing.navigationStart&&(tc=ec.timing.navigationStart),ec.now=()=>Date.now()-tc),rc=1e9,hu.bigint=function(e){var t=hu(e);return typeof BigInt>"u"?t[0]*rc+t[1]:BigInt(t[0]*rc)+BigInt(t[1])},nc={version:"v16.8.0",versions:Su,arch:"x64",platform:"browser",release:Cu,_rawDebug:Ou,moduleLoadList:Pu,binding:Au,_linkedBinding:au,_events:{},_eventsCount:0,_maxListeners:10,on:pu,addListener:pu,once:pu,off:pu,removeListener:pu,removeAllListeners:pu,emit:ou,prependListener:pu,prependOnceListener:pu,listeners:gu,domain:xu,_exiting:false,config:Du,dlopen:su,uptime:du,_getActiveRequests:lu,_getActiveHandles:uu,reallyExit:ku,_kill:Mu,cpuUsage:Lu,resourceUsage:Fu,memoryUsage:Uu,kill:Bu,exit:ju,openStdin:Zu,allowedNodeEnvironmentFlags:qu,assert:cu,features:Gu,_fatalExceptions:zu,setUncaughtExceptionCaptureCallback:Hu,hasUncaughtExceptionCaptureCallback:fu,emitWarning:Tu,nextTick:nu,_tickCallback:Vu,_debugProcess:Wu,_debugEnd:Yu,_startProfilerIdleNotifier:Ku,_stopProfilerIdleNotifier:Qu,stdout:undefined,stdin:undefined,stderr:undefined,abort:Xu,umask:Iu,chdir:Nu,cwd:Ru,env:bu,title:"browser",argv:Eu,execArgv:wu,pid:2,ppid:1,execPath:"/bin/usr/node",debugPort:9229,hrtime:hu,argv0:"node",_preload_modules:$u,setSourceMapsEnabled:Ju}});var oc,ac,sc,lc=Fn(()=>{Zn(),Mo(),bo(),ic(),oc={},ac=!1,sc=function(){if(ac)return oc;ac=!0;var e=nc;function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",i=0,o=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(o!==s-1&&1!==a)if(o!==s-1&&2===a){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",i=0):i=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),o=s,a=0;continue}}else if(2===n.length||1===n.length){n="",i=0,o=s,a=0;continue}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(o+1,s):n=e.slice(o+1,s),i=s-o-1;o=s,a=0}else 46===r&&-1!==a?++a:a=-1}return n}var n={resolve:function(){for(var n,i="",o=!1,a=arguments.length-1;a>=-1&&!o;a--){var s;a>=0?s=arguments[a]:(void 0===n&&(n=e.cwd()),s=n),t(s),0!==s.length&&(i=s+"/"+i,o=47===s.charCodeAt(0))}return i=r(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0===(e=r(e,!n)).length&&!n&&(e="."),e.length>0&&i&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var i=arguments[r];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r||(e=n.resolve(e))===(r=n.resolve(r)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var o=e.length,a=o-i,s=1;s<r.length&&47===r.charCodeAt(s);++s);for(var l=r.length-s,u=a<l?a:l,c=-1,f=0;f<=u;++f){if(f===u){if(l>u){if(47===r.charCodeAt(s+f))return r.slice(s+f+1);if(0===f)return r.slice(s+f)}else a>u&&(47===e.charCodeAt(i+f)?c=f:0===f&&(c=0));break}var d=e.charCodeAt(i+f);if(d!==r.charCodeAt(s+f))break;47===d&&(c=f)}var h="";for(f=i+c+1;f<=o;++f)(f===o||47===e.charCodeAt(f))&&(0===h.length?h+="..":h+="/..");return h.length>0?h+r.slice(s+c):(s+=c,47===r.charCodeAt(s)&&++s,r.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,i=-1,o=!0,a=e.length-1;a>=1;--a)if(47===(r=e.charCodeAt(a))){if(!o){i=a;break}}else o=!1;return-1===i?n?"/":".":n&&1===i?"//":e.slice(0,i)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var n,i=0,o=-1,a=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var s=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!a){i=n+1;break}}else-1===l&&(a=!1,l=n+1),s>=0&&(u===r.charCodeAt(s)?-1===--s&&(o=n):(s=-1,o=l))}return i===o?o=l:-1===o&&(o=e.length),e.slice(i,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!a){i=n+1;break}}else-1===o&&(a=!1,o=n+1);return-1===o?"":e.slice(i,o)},extname:function(e){t(e);for(var r=-1,n=0,i=-1,o=!0,a=0,s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(47!==l)-1===i&&(o=!1,i=s+1),46===l?-1===r?r=s:1!==a&&(a=1):-1!==r&&(a=-1);else if(!o){n=s+1;break}}return-1===r||-1===i||0===a||1===a&&r===i-1&&r===n+1?"":e.slice(r,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+e+n:n}("/",e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n,i=e.charCodeAt(0),o=47===i;o?(r.root="/",n=1):n=0;for(var a=-1,s=0,l=-1,u=!0,c=e.length-1,f=0;c>=n;--c)if(47!==(i=e.charCodeAt(c)))-1===l&&(u=!1,l=c+1),46===i?-1===a?a=c:1!==f&&(f=1):-1!==a&&(f=-1);else if(!u){s=c+1;break}return-1===a||-1===l||0===f||1===f&&a===l-1&&a===s+1?-1!==l&&(r.base=r.name=0===s&&o?e.slice(1,l):e.slice(s,l)):(0===s&&o?(r.name=e.slice(1,a),r.base=e.slice(1,l)):(r.name=e.slice(s,a),r.base=e.slice(s,l)),r.ext=e.slice(a,l)),s>0?r.dir=e.slice(0,s-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};return n.posix=n,oc=n}()}),uc={};function cc(){if(Ec)return bc;Ec=!0;var e="function"==typeof Map&&Map.prototype,t=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=e&&t&&"function"==typeof t.get?t.get:null,n=e&&Map.prototype.forEach,i="function"==typeof Set&&Set.prototype,o=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,a=i&&o&&"function"==typeof o.get?o.get:null,s=i&&Set.prototype.forEach,l="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,u="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,c="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,d=Object.prototype.toString,h=Function.prototype.toString,p=String.prototype.match,g=String.prototype.slice,m=String.prototype.replace,y=String.prototype.toUpperCase,v=String.prototype.toLowerCase,_=RegExp.prototype.test,b=Array.prototype.concat,E=Array.prototype.join,w=Array.prototype.slice,S=Math.floor,T="function"==typeof BigInt?BigInt.prototype.valueOf:null,A=Object.getOwnPropertySymbols,I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,R="function"==typeof Symbol&&"object"==typeof Symbol.iterator,N="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,C=Object.prototype.propertyIsEnumerable,O=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function P(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||_.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-S(-e):S(e);if(n!==e){var i=String(n),o=g.call(t,i.length+1);return m.call(i,r,"$&_")+"."+m.call(m.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return m.call(t,r,"$&_")}var x=_c,D=x.custom,k=B(D)?D:null;function M(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function L(e){return m.call(String(e),/"/g,"&quot;")}function F(e){return"[object Array]"===q(e)&&(!N||!("object"==typeof e&&N in e))}function U(e){return"[object RegExp]"===q(e)&&(!N||!("object"==typeof e&&N in e))}function B(e){if(R)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!I)return!1;try{return I.call(e),!0}catch(t){}return!1}bc=function e(t,i,o,d){var y=i||{};if(Z(y,"quoteStyle")&&"single"!==y.quoteStyle&&"double"!==y.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Z(y,"maxStringLength")&&("number"==typeof y.maxStringLength?y.maxStringLength<0&&y.maxStringLength!==1/0:null!==y.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var _=!Z(y,"customInspect")||y.customInspect;if("boolean"!=typeof _&&"symbol"!==_)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Z(y,"indent")&&null!==y.indent&&"\t"!==y.indent&&!(parseInt(y.indent,10)===y.indent&&y.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Z(y,"numericSeparator")&&"boolean"!=typeof y.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var S=y.numericSeparator;if(typeof t>"u")return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return z(t,y);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var A=String(t);return S?P(t,A):A}if("bigint"==typeof t){var D=String(t)+"n";return S?P(t,D):D}var j=typeof y.depth>"u"?5:y.depth;if(typeof o>"u"&&(o=0),o>=j&&j>0&&"object"==typeof t)return F(t)?"[Array]":"[Object]";var H=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=E.call(Array(e.indent+1)," ")}return{base:r,prev:E.call(Array(t+1),r)}}(y,o);if(typeof d>"u")d=[];else if(G(d,t)>=0)return"[Circular]";function X(t,r,n){if(r&&(d=w.call(d)).push(r),n){var i={depth:y.depth};return Z(y,"quoteStyle")&&(i.quoteStyle=y.quoteStyle),e(t,i,o+1,d)}return e(t,y,o+1,d)}if("function"==typeof t&&!U(t)){var $=function(e){if(e.name)return e.name;var t=p.call(h.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),J=Q(t,X);return"[Function"+($?": "+$:" (anonymous)")+"]"+(J.length>0?" { "+E.call(J,", ")+" }":"")}if(B(t)){var ee=R?m.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):I.call(t);return"object"!=typeof t||R?ee:V(ee)}if(function(e){return!(!e||"object"!=typeof e)&&(typeof HTMLElement<"u"&&e instanceof HTMLElement||"string"==typeof e.nodeName&&"function"==typeof e.getAttribute)}(t)){for(var te="<"+v.call(String(t.nodeName)),re=t.attributes||[],ne=0;ne<re.length;ne++)te+=" "+re[ne].name+"="+M(L(re[ne].value),"double",y);return te+=">",t.childNodes&&t.childNodes.length&&(te+="..."),te+="</"+v.call(String(t.nodeName))+">"}if(F(t)){if(0===t.length)return"[]";var ie=Q(t,X);return H&&!function(e){for(var t=0;t<e.length;t++)if(G(e[t],"\n")>=0)return!1;return!0}(ie)?"["+K(ie,H)+"]":"[ "+E.call(ie,", ")+" ]"}if(function(e){return"[object Error]"===q(e)&&(!N||!("object"==typeof e&&N in e))}(t)){var oe=Q(t,X);return"cause"in Error.prototype||!("cause"in t)||C.call(t,"cause")?0===oe.length?"["+String(t)+"]":"{ ["+String(t)+"] "+E.call(oe,", ")+" }":"{ ["+String(t)+"] "+E.call(b.call("[cause]: "+X(t.cause),oe),", ")+" }"}if("object"==typeof t&&_){if(k&&"function"==typeof t[k]&&x)return x(t,{depth:j-o});if("symbol"!==_&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!r||!e||"object"!=typeof e)return!1;try{r.call(e);try{a.call(e)}catch(t){return!0}return e instanceof Map}catch(n){}return!1}(t)){var ae=[];return n&&n.call(t,function(e,r){ae.push(X(r,t,!0)+" => "+X(e,t))}),Y("Map",r.call(t),ae,H)}if(function(e){if(!a||!e||"object"!=typeof e)return!1;try{a.call(e);try{r.call(e)}catch(t){return!0}return e instanceof Set}catch(n){}return!1}(t)){var se=[];return s&&s.call(t,function(e){se.push(X(e,t))}),Y("Set",a.call(t),se,H)}if(function(e){if(!l||!e||"object"!=typeof e)return!1;try{l.call(e,l);try{u.call(e,u)}catch(t){return!0}return e instanceof WeakMap}catch(r){}return!1}(t))return W("WeakMap");if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e,u);try{l.call(e,l)}catch(t){return!0}return e instanceof WeakSet}catch(r){}return!1}(t))return W("WeakSet");if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{return c.call(e),!0}catch(t){}return!1}(t))return W("WeakRef");if(function(e){return"[object Number]"===q(e)&&(!N||!("object"==typeof e&&N in e))}(t))return V(X(Number(t)));if(function(e){if(!e||"object"!=typeof e||!T)return!1;try{return T.call(e),!0}catch(t){}return!1}(t))return V(X(T.call(t)));if(function(e){return"[object Boolean]"===q(e)&&(!N||!("object"==typeof e&&N in e))}(t))return V(f.call(t));if(function(e){return"[object String]"===q(e)&&(!N||!("object"==typeof e&&N in e))}(t))return V(X(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof wc<"u"&&t===wc)return"{ [object globalThis] }";if(!function(e){return"[object Date]"===q(e)&&(!N||!("object"==typeof e&&N in e))}(t)&&!U(t)){var le=Q(t,X),ue=O?O(t)===Object.prototype:t instanceof Object||t.constructor===Object,ce=t instanceof Object?"":"null prototype",fe=!ue&&N&&Object(t)===t&&N in t?g.call(q(t),8,-1):ce?"Object":"",de=(ue||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(fe||ce?"["+E.call(b.call([],fe||[],ce||[]),": ")+"] ":"");return 0===le.length?de+"{}":H?de+"{"+K(le,H)+"}":de+"{ "+E.call(le,", ")+" }"}return String(t)};var j=Object.prototype.hasOwnProperty||function(e){return e in(this||wc)};function Z(e,t){return j.call(e,t)}function q(e){return d.call(e)}function G(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function z(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return z(g.call(e,0,t.maxStringLength),t)+n}return M(m.call(m.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,H),"single",t)}function H(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+y.call(t.toString(16))}function V(e){return"Object("+e+")"}function W(e){return e+" { ? }"}function Y(e,t,r,n){return e+" ("+t+") {"+(n?K(r,n):E.call(r,", "))+"}"}function K(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+E.call(e,","+r)+"\n"+t.prev}function Q(e,t){var r=F(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=Z(e,i)?t(e[i],e):""}var o,a="function"==typeof A?A(e):[];if(R){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var l in e)Z(e,l)&&(r&&String(Number(l))===l&&l<e.length||R&&o["$"+l]instanceof Symbol||(_.call(/[^\w$]/,l)?n.push(t(l,e)+": "+t(e[l],e)):n.push(l+": "+t(e[l],e))));if("function"==typeof A)for(var u=0;u<a.length;u++)C.call(e,a[u])&&n.push("["+t(a[u])+"]: "+t(e[a[u]],e));return n}return bc}function fc(){if(Tc)return Sc;Tc=!0;var e=al(),t=cl(),r=cc(),n=nl(),i=e("%WeakMap%",!0),o=e("%Map%",!0),a=t("WeakMap.prototype.get",!0),s=t("WeakMap.prototype.set",!0),l=t("WeakMap.prototype.has",!0),u=t("Map.prototype.get",!0),c=t("Map.prototype.set",!0),f=t("Map.prototype.has",!0),d=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};return Sc=function(){var e,t,h,p={assert:function(e){if(!p.has(e))throw new n("Side channel does not contain "+r(e))},get:function(r){if(i&&r&&("object"==typeof r||"function"==typeof r)){if(e)return a(e,r)}else if(o){if(t)return u(t,r)}else if(h)return function(e,t){var r=d(e,t);return r&&r.value}(h,r)},has:function(r){if(i&&r&&("object"==typeof r||"function"==typeof r)){if(e)return l(e,r)}else if(o){if(t)return f(t,r)}else if(h)return function(e,t){return!!d(e,t)}(h,r);return!1},set:function(r,n){i&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new i),s(e,r,n)):o?(t||(t=new o),c(t,r,n)):(h||(h={key:{},next:null}),function(e,t,r){var n=d(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(h,r,n))}};return p}}function dc(){if(Ic)return Ac;Ic=!0;var e=String.prototype.replace,t=/%20/g,r="RFC3986";return Ac={default:r,formatters:{RFC1738:function(r){return e.call(r,t,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:r}}function hc(){if(Nc)return Rc;Nc=!0;var e=dc(),t=Object.prototype.hasOwnProperty,r=Array.isArray,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),i=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)typeof e[n]<"u"&&(r[n]=e[n]);return r},o=1024;return Rc={arrayToObject:i,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],i=0;i<t.length;++i)for(var o=t[i],a=o.obj[o.prop],s=Object.keys(a),l=0;l<s.length;++l){var u=s[l],c=a[u];"object"==typeof c&&null!==c&&-1===n.indexOf(c)&&(t.push({obj:a,prop:u}),n.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(r(n)){for(var i=[],o=0;o<n.length;++o)typeof n[o]<"u"&&i.push(n[o]);t.obj[t.prop]=i}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(i){return n}},encode:function(t,r,i,a,s){if(0===t.length)return t;var l=t;if("symbol"==typeof t?l=Symbol.prototype.toString.call(t):"string"!=typeof t&&(l=String(t)),"iso-8859-1"===i)return escape(l).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var u="",c=0;c<l.length;c+=o){for(var f=l.length>=o?l.slice(c,c+o):l,d=[],h=0;h<f.length;++h){var p=f.charCodeAt(h);45===p||46===p||95===p||126===p||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===e.RFC1738&&(40===p||41===p)?d[d.length]=f.charAt(h):p<128?d[d.length]=n[p]:p<2048?d[d.length]=n[192|p>>6]+n[128|63&p]:p<55296||p>=57344?d[d.length]=n[224|p>>12]+n[128|p>>6&63]+n[128|63&p]:(h+=1,p=65536+((1023&p)<<10|1023&f.charCodeAt(h)),d[d.length]=n[240|p>>18]+n[128|p>>12&63]+n[128|p>>6&63]+n[128|63&p])}u+=d.join("")}return u},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(r(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n}return t(e)},merge:function e(n,o,a){if(!o)return n;if("object"!=typeof o){if(r(n))n.push(o);else{if(!n||"object"!=typeof n)return[n,o];(a&&(a.plainObjects||a.allowPrototypes)||!t.call(Object.prototype,o))&&(n[o]=!0)}return n}if(!n||"object"!=typeof n)return[n].concat(o);var s=n;return r(n)&&!r(o)&&(s=i(n,a)),r(n)&&r(o)?(o.forEach(function(r,i){if(t.call(n,i)){var o=n[i];o&&"object"==typeof o&&r&&"object"==typeof r?n[i]=e(o,r,a):n.push(r)}else n[i]=r}),n):Object.keys(o).reduce(function(r,n){var i=o[n];return t.call(r,n)?r[n]=e(r[n],i,a):r[n]=i,r},s)}}}function pc(){if(Oc)return Cc;Oc=!0;var e=fc(),t=hc(),r=dc(),n=Object.prototype.hasOwnProperty,i={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Array.isArray,a=Array.prototype.push,s=function(e,t){a.apply(e,o(t)?t:[t])},l=Date.prototype.toISOString,u=r.default,c={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,format:u,formatter:r.formatters[u],indices:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},f={},d=function r(n,i,a,l,u,d,h,p,g,m,y,v,_,b,E,w,S,T){for(var A=n,I=T,R=0,N=!1;void 0!==(I=I.get(f))&&!N;){var C=I.get(n);if(R+=1,typeof C<"u"){if(C===R)throw new RangeError("Cyclic object value");N=!0}typeof I.get(f)>"u"&&(R=0)}if("function"==typeof m?A=m(i,A):A instanceof Date?A=_(A):"comma"===a&&o(A)&&(A=t.maybeMap(A,function(e){return e instanceof Date?_(e):e})),null===A){if(d)return g&&!w?g(i,c.encoder,S,"key",b):i;A=""}if(function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e}(A)||t.isBuffer(A))return g?[E(w?i:g(i,c.encoder,S,"key",b))+"="+E(g(A,c.encoder,S,"value",b))]:[E(i)+"="+E(String(A))];var O,P=[];if(typeof A>"u")return P;if("comma"===a&&o(A))w&&g&&(A=t.maybeMap(A,g)),O=[{value:A.length>0?A.join(",")||null:void 0}];else if(o(m))O=m;else{var x=Object.keys(A);O=y?x.sort(y):x}var D=p?i.replace(/\./g,"%2E"):i,k=l&&o(A)&&1===A.length?D+"[]":D;if(u&&o(A)&&0===A.length)return k+"[]";for(var M=0;M<O.length;++M){var L=O[M],F="object"==typeof L&&typeof L.value<"u"?L.value:A[L];if(!h||null!==F){var U=v&&p?L.replace(/\./g,"%2E"):L,B=o(A)?"function"==typeof a?a(k,U):k:k+(v?"."+U:"["+U+"]");T.set(n,R);var j=e();j.set(f,T),s(P,r(F,B,a,l,u,d,h,p,"comma"===a&&w&&o(A)?null:g,m,y,v,_,b,E,w,S,j))}}return P};return Cc=function(t,a){var l,u=t,f=function(e){if(!e)return c;if(typeof e.allowEmptyArrays<"u"&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&typeof e.encoder<"u"&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||c.charset;if(typeof e.charset<"u"&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var a=r.default;if(typeof e.format<"u"){if(!n.call(r.formatters,e.format))throw new TypeError("Unknown format option provided.");a=e.format}var s,l=r.formatters[a],u=c.filter;if(("function"==typeof e.filter||o(e.filter))&&(u=e.filter),s=e.arrayFormat in i?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":c.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var f=typeof e.allowDots>"u"?!0===e.encodeDotInKeys||c.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:c.addQueryPrefix,allowDots:f,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:c.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:c.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?c.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:c.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:c.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:c.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:c.encodeValuesOnly,filter:u,format:a,formatter:l,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:c.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:c.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:c.strictNullHandling}}(a);"function"==typeof f.filter?u=(0,f.filter)("",u):o(f.filter)&&(l=f.filter);var h=[];if("object"!=typeof u||null===u)return"";var p=i[f.arrayFormat],g="comma"===p&&f.commaRoundTrip;l||(l=Object.keys(u)),f.sort&&l.sort(f.sort);for(var m=e(),y=0;y<l.length;++y){var v=l[y];f.skipNulls&&null===u[v]||s(h,d(u[v],v,p,g,f.allowEmptyArrays,f.strictNullHandling,f.skipNulls,f.encodeDotInKeys,f.encode?f.encoder:null,f.filter,f.sort,f.allowDots,f.serializeDate,f.format,f.formatter,f.encodeValuesOnly,f.charset,m))}var _=h.join(f.delimiter),b=!0===f.addQueryPrefix?"?":"";return f.charsetSentinel&&("iso-8859-1"===f.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),_.length>0?b+_:""}}function gc(){if(xc)return Pc;xc=!0;var e=hc(),t=Object.prototype.hasOwnProperty,r=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:e.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},o=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},a=function(e,r,n,i){if(e){var a=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,l=n.depth>0&&/(\[[^[\]]*])/.exec(a),u=l?a.slice(0,l.index):a,c=[];if(u){if(!n.plainObjects&&t.call(Object.prototype,u)&&!n.allowPrototypes)return;c.push(u)}for(var f=0;n.depth>0&&null!==(l=s.exec(a))&&f<n.depth;){if(f+=1,!n.plainObjects&&t.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(l[1])}if(l){if(!0===n.strictDepth)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");c.push("["+a.slice(l.index)+"]")}return function(e,t,r,n){for(var i=n?t:o(t,r),a=e.length-1;a>=0;--a){var s,l=e[a];if("[]"===l&&r.parseArrays)s=r.allowEmptyArrays&&(""===i||r.strictNullHandling&&null===i)?[]:[].concat(i);else{s=r.plainObjects?Object.create(null):{};var u="["===l.charAt(0)&&"]"===l.charAt(l.length-1)?l.slice(1,-1):l,c=r.decodeDotInKeys?u.replace(/%2E/g,"."):u,f=parseInt(c,10);r.parseArrays||""!==c?!isNaN(f)&&l!==c&&String(f)===c&&f>=0&&r.parseArrays&&f<=r.arrayLimit?(s=[])[f]=i:"__proto__"!==c&&(s[c]=i):s={0:i}}i=s}return i}(c,r,n,i)}};return Pc=function(s,l){var u=function(t){if(!t)return n;if(typeof t.allowEmptyArrays<"u"&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&"boolean"!=typeof t.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.decoder&&typeof t.decoder<"u"&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof t.charset>"u"?n.charset:t.charset,i=typeof t.duplicates>"u"?n.duplicates:t.duplicates;if("combine"!==i&&"first"!==i&&"last"!==i)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:typeof t.allowDots>"u"?!0===t.decodeDotInKeys||n.allowDots:!!t.allowDots,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:n.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:n.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:n.arrayLimit,charset:r,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:n.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:n.comma,decodeDotInKeys:"boolean"==typeof t.decodeDotInKeys?t.decodeDotInKeys:n.decodeDotInKeys,decoder:"function"==typeof t.decoder?t.decoder:n.decoder,delimiter:"string"==typeof t.delimiter||e.isRegExp(t.delimiter)?t.delimiter:n.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:n.depth,duplicates:i,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:n.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:n.plainObjects,strictDepth:"boolean"==typeof t.strictDepth?!!t.strictDepth:n.strictDepth,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:n.strictNullHandling}}(l);if(""===s||null===s||typeof s>"u")return u.plainObjects?Object.create(null):{};for(var c="string"==typeof s?function(a,s){var l={__proto__:null},u=s.ignoreQueryPrefix?a.replace(/^\?/,""):a;u=u.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var c,f=s.parameterLimit===1/0?void 0:s.parameterLimit,d=u.split(s.delimiter,f),h=-1,p=s.charset;if(s.charsetSentinel)for(c=0;c<d.length;++c)0===d[c].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[c]?p="utf-8":"utf8=%26%2310003%3B"===d[c]&&(p="iso-8859-1"),h=c,c=d.length);for(c=0;c<d.length;++c)if(c!==h){var g,m,y=d[c],v=y.indexOf("]="),_=-1===v?y.indexOf("="):v+1;-1===_?(g=s.decoder(y,n.decoder,p,"key"),m=s.strictNullHandling?null:""):(g=s.decoder(y.slice(0,_),n.decoder,p,"key"),m=e.maybeMap(o(y.slice(_+1),s),function(e){return s.decoder(e,n.decoder,p,"value")})),m&&s.interpretNumericEntities&&"iso-8859-1"===p&&(m=i(m)),y.indexOf("[]=")>-1&&(m=r(m)?[m]:m);var b=t.call(l,g);b&&"combine"===s.duplicates?l[g]=e.combine(l[g],m):(!b||"last"===s.duplicates)&&(l[g]=m)}return l}(s,u):s,f=u.plainObjects?Object.create(null):{},d=Object.keys(c),h=0;h<d.length;++h){var p=d[h],g=a(p,c[p],u,"string"==typeof s);f=e.merge(f,g,u)}return!0===u.allowSparse?f:e.compact(f)}}function mc(){if(Lc)return Mc;Lc=!0;var e=el;function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var r=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),a=["'"].concat(o),s=["%","/","?",";","#"].concat(a),l=["/","?","#"],u=/^[+a-z0-9A-Z_-]{0,63}$/,c=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},d={javascript:!0,"javascript:":!0},h={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},p=function(){if(kc)return Dc;kc=!0;var e=pc(),t=gc(),r=dc();return Dc={formats:r,parse:t,stringify:e}}();function g(e,r,n){if(e&&"object"==typeof e&&e instanceof t)return e;var i=new t;return i.parse(e,r,n),i}return t.prototype.parse=function(t,n,o){if("string"!=typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var g=t.indexOf("?"),m=-1!==g&&g<t.indexOf("#")?"?":"#",y=t.split(m);y[0]=y[0].replace(/\\/g,"/");var v=t=y.join(m);if(v=v.trim(),!o&&1===t.split("#").length){var _=i.exec(v);if(_)return this.path=v,this.href=v,this.pathname=_[1],_[2]?(this.search=_[2],this.query=n?p.parse(this.search.substr(1)):this.search.substr(1)):n&&(this.search="",this.query={}),this}var b=r.exec(v);if(b){var E=(b=b[0]).toLowerCase();this.protocol=E,v=v.substr(b.length)}if(o||b||v.match(/^\/\/[^@/]+@[^@/]+/)){var w="//"===v.substr(0,2);w&&(!b||!d[b])&&(v=v.substr(2),this.slashes=!0)}if(!d[b]&&(w||b&&!h[b])){for(var S=-1,T=0;T<l.length;T++){-1!==(R=v.indexOf(l[T]))&&(-1===S||R<S)&&(S=R)}var A,I;-1!==(I=-1===S?v.lastIndexOf("@"):v.lastIndexOf("@",S))&&(A=v.slice(0,I),v=v.slice(I+1),this.auth=decodeURIComponent(A)),S=-1;for(T=0;T<s.length;T++){var R;-1!==(R=v.indexOf(s[T]))&&(-1===S||R<S)&&(S=R)}-1===S&&(S=v.length),this.host=v.slice(0,S),v=v.slice(S),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var C=this.hostname.split(/\./),O=(T=0,C.length);T<O;T++){var P=C[T];if(P&&!P.match(u)){for(var x="",D=0,k=P.length;D<k;D++)P.charCodeAt(D)>127?x+="x":x+=P[D];if(!x.match(u)){var M=C.slice(0,T),L=C.slice(T+1),F=P.match(c);F&&(M.push(F[1]),L.unshift(F[2])),L.length&&(v="/"+L.join(".")+v),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=e.toASCII(this.hostname));var U=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+U,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!f[E])for(T=0,O=a.length;T<O;T++){var j=a[T];if(-1!==v.indexOf(j)){var Z=encodeURIComponent(j);Z===j&&(Z=escape(j)),v=v.split(j).join(Z)}}var q=v.indexOf("#");-1!==q&&(this.hash=v.substr(q),v=v.slice(0,q));var G=v.indexOf("?");if(-1!==G?(this.search=v.substr(G),this.query=v.substr(G+1),n&&(this.query=p.parse(this.query)),v=v.slice(0,G)):n&&(this.search="",this.query={}),v&&(this.pathname=v),h[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var z=this.search||"";this.path=U+z}return this.href=this.format(),this},t.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(o=p.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||h[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+n},t.prototype.resolve=function(e){return this.resolveObject(g(e,!1,!0)).format()},t.prototype.resolveObject=function(e){if("string"==typeof e){var r=new t;r.parse(e,!1,!0),e=r}for(var n=new t,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;l<s.length;l++){var u=s[l];"protocol"!==u&&(n[u]=e[u])}return h[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!h[e.protocol]){for(var c=Object.keys(e),f=0;f<c.length;f++){var p=c[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||d[e.protocol])n.pathname=e.pathname;else{for(var g=(e.pathname||"").split("/");g.length&&!(e.host=g.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==g[0]&&g.unshift(""),g.length<2&&g.unshift(""),n.pathname=g.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",y=n.search||"";n.path=m+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=_||v||n.host&&e.pathname,E=b,w=n.pathname&&n.pathname.split("/")||[],S=(g=e.pathname&&e.pathname.split("/")||[],n.protocol&&!h[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===g[0]?g[0]=e.host:g.unshift(e.host)),e.host=null),b=b&&(""===g[0]||""===w[0])),_)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=g;else if(g.length)w||(w=[]),w.pop(),w=w.concat(g),n.search=e.search,n.query=e.query;else if(null!=e.search){if(S)n.host=w.shift(),n.hostname=n.host,(N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=N.shift(),n.hostname=N.shift(),n.host=n.hostname);return n.search=e.search,n.query=e.query,(null!==n.pathname||null!==n.search)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=w.slice(-1)[0],A=(n.host||e.host||w.length>1)&&("."===T||".."===T)||""===T,I=0,R=w.length;R>=0;R--)"."===(T=w[R])?w.splice(R,1):".."===T?(w.splice(R,1),I++):I&&(w.splice(R,1),I--);if(!b&&!E)for(;I--;I)w.unshift("..");b&&""!==w[0]&&(!w[0]||"/"!==w[0].charAt(0))&&w.unshift(""),A&&"/"!==w.join("/").substr(-1)&&w.push("");var N,C=""===w[0]||w[0]&&"/"===w[0].charAt(0);S&&(n.hostname=C?"":w.length?w.shift():"",n.host=n.hostname,(N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=N.shift(),n.hostname=N.shift(),n.host=n.hostname));return(b=b||n.host&&w.length)&&!C&&w.unshift(""),w.length>0?n.pathname=w.join("/"):(n.pathname=null,n.path=null),(null!==n.pathname||null!==n.search)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},t.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},Mc.parse=g,Mc.resolve=function(e,t){return g(e,!1,!0).resolve(t)},Mc.resolveObject=function(e,t){return e?g(e,!1,!0).resolveObject(t):t},Mc.format=function(e){return"string"==typeof e&&(e=g(e)),e instanceof t?e.format():t.prototype.format.call(e)},Mc.Url=t,Mc}function yc(e){if("string"==typeof e)e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if("file:"!==e.protocol)throw new Deno.errors.InvalidData("invalid url scheme");return Kc?function(e){let t=e.hostname,r=e.pathname;for(let n=0;n<r.length;n++)if("%"===r[n]){let e=r.codePointAt(n+2)||32;if("2"===r[n+1]&&102===e||"5"===r[n+1]&&99===e)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(r=r.replace(Qc,"\\"),r=decodeURIComponent(r),""!==t)return"\\\\".concat(t).concat(r);{let e=32|r.codePointAt(1),t=r[2];if(e<Wc||e>Yc||":"!==t)throw new Deno.errors.InvalidData("file url path must be absolute");return r.slice(1)}}(e):function(e){if(""!==e.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");let t=e.pathname;for(let r=0;r<t.length;r++)if("%"===t[r]){let e=t.codePointAt(r+2)||32;if("2"===t[r+1]&&102===e)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}(e)}function vc(e){let t=sc.resolve(e),r=e.charCodeAt(e.length-1);(r===Vc||Kc&&r===Hc)&&t[t.length-1]!==sc.sep&&(t+="/");let n=new URL("file://");return t.includes("%")&&(t=t.replace(Xc,"%25")),!Kc&&t.includes("\\")&&(t=t.replace($c,"%5C")),t.includes("\n")&&(t=t.replace(Jc,"%0A")),t.includes("\r")&&(t=t.replace(ef,"%0D")),t.includes("\t")&&(t=t.replace(tf,"%09")),n.pathname=t,n}Bn(uc,{URL:()=>zc,Url:()=>Bc,default:()=>Fc,fileURLToPath:()=>yc,format:()=>jc,parse:()=>Gc,pathToFileURL:()=>vc,resolve:()=>Zc,resolveObject:()=>qc});var _c,bc,Ec,wc,Sc,Tc,Ac,Ic,Rc,Nc,Cc,Oc,Pc,xc,Dc,kc,Mc,Lc,Fc,Uc,Bc,jc,Zc,qc,Gc,zc,Hc,Vc,Wc,Yc,Kc,Qc,Xc,$c,Jc,ef,tf,rf=Fn(()=>{Zn(),Mo(),bo(),tl(),Jl(),lc(),ic(),_c=Object.freeze(Object.create(null)),bc={},Ec=!1,wc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:r.g,Sc={},Tc=!1,Ac={},Ic=!1,Rc={},Nc=!1,Cc={},Oc=!1,Pc={},xc=!1,Dc={},kc=!1,Mc={},Lc=!1,(Fc=mc()).parse,Fc.resolve,Fc.resolveObject,Fc.format,Fc.Url,Uc=typeof Deno<"u"?"windows"===Deno.build.os?"win32":Deno.build.os:void 0,Fc.URL=typeof URL<"u"?URL:null,Fc.pathToFileURL=vc,Fc.fileURLToPath=yc,Bc=Fc.Url,jc=Fc.format,Zc=Fc.resolve,qc=Fc.resolveObject,Gc=Fc.parse,zc=Fc.URL,Hc=92,Vc=47,Wc=97,Yc=122,Kc="win32"===Uc,Qc=/\//g,Xc=/%/g,$c=/\\/g,Jc=/\n/g,ef=/\r/g,tf=/\t/g}),nf=Un((e,t)=>{Zn(),Mo(),bo(),t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),of=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=void 0,e.writev=n;var t=wa(),r=(ko(),jn(Co));function n(e,t){let n=new Array(e.length);for(let i=0;i<e.length;i++)"string"==typeof e[i].chunk?n[i]=r.Buffer.from(e[i].chunk,"utf8"):n[i]=e[i].chunk;this._write(r.Buffer.concat(n),"binary",t)}var i=class extends t.Duplex{constructor(e,t,r){super({objectMode:!0}),l(this,"socket",void 0),l(this,"proxy",void 0),l(this,"isSocketOpen",void 0),l(this,"writeQueue",void 0),this.proxy=t,this.socket=r,this.writeQueue=[],e.objectMode||(this._writev=n.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",e=>{!this.destroyed&&this.readable&&this.push(e)})}_read(e){this.proxy.read(e)}_write(e,t,r){this.isSocketOpen?this.writeToProxy(e,t,r):this.writeQueue.push({chunk:e,encoding:t,cb:r})}_final(e){this.writeQueue=[],this.proxy.end(e)}_destroy(e,t){this.writeQueue=[],this.proxy.destroy(),t(e)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(e,t,r){!1===this.proxy.write(e,t)?this.proxy.once("drain",r):r()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:e,encoding:t,cb:r}=this.writeQueue.shift();this.writeToProxy(e,t,r)}}};e.BufferedDuplex=i}),af=Un(e=>{Zn(),Mo(),bo();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.streamBuilder=e.browserStreamBuilder=void 0;var r=(ko(),jn(Co)),n=t(nf()),i=t(Oa()),o=wa(),a=t(Ws()),s=of(),l=(0,i.default)("mqttjs:ws"),u=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function c(e,t){let r="".concat(e.protocol,"://").concat(e.hostname,":").concat(e.port).concat(e.path);return"function"==typeof e.transformWsUrl&&(r=e.transformWsUrl(r,e,t)),r}function f(e){let t=e;return e.port||("wss"===e.protocol?t.port=443:t.port=80),e.path||(t.path="/"),e.wsOptions||(t.wsOptions={}),!a.default&&!e.forceNativeWebSocket&&"wss"===e.protocol&&u.forEach(r=>{Object.prototype.hasOwnProperty.call(e,r)&&!Object.prototype.hasOwnProperty.call(e.wsOptions,r)&&(t.wsOptions[r]=e[r])}),t}e.streamBuilder=(e,t)=>{l("streamBuilder");let r=f(t);r.hostname=r.hostname||r.host||"localhost";let i=c(r,e),o=function(e,t,r){l("createWebSocket"),l("protocol: ".concat(r.protocolId," ").concat(r.protocolVersion));let i,o="MQIsdp"===r.protocolId&&3===r.protocolVersion?"mqttv3.1":"mqtt";return l("creating new Websocket for url: ".concat(t," and protocol: ").concat(o)),i=r.createWebsocket?r.createWebsocket(t,[o],r):new n.default(t,[o],r.wsOptions),i}(0,i,r),a=n.default.createWebSocketStream(o,r.wsOptions);return a.url=i,o.on("close",()=>{a.destroy()}),a};e.browserStreamBuilder=(e,t)=>{l("browserStreamBuilder");let n,i=function(e){let t=f(e);if(t.hostname||(t.hostname=t.host),!t.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let e=new URL(document.URL);t.hostname=e.hostname,t.port||(t.port=Number(e.port))}return void 0===t.objectMode&&(t.objectMode=!(!0===t.binary||void 0===t.binary)),t}(t).browserBufferSize||524288,a=t.browserBufferTimeout||1e3,u=!t.objectMode,d=function(e,t){let r,n="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",i=c(t,e);return r=t.createWebsocket?t.createWebsocket(i,[n],t):new WebSocket(i,[n]),r.binaryType="arraybuffer",r}(e,t),h=function(e,t,r){let n=new o.Transform({objectMode:e.objectMode});return n._write=t,n._flush=r,n}(t,function e(t,n,o){if(d.bufferedAmount>i)return void setTimeout(e,a,t,n,o);u&&"string"==typeof t&&(t=r.Buffer.from(t,"utf8"));try{d.send(t)}catch(s){return o(s)}o()},function(e){d.close(),e()});t.objectMode||(h._writev=s.writev.bind(h)),h.on("close",()=>{d.close()});let p=typeof d.addEventListener<"u";function g(){l("WebSocket onOpen"),n instanceof s.BufferedDuplex&&n.socketReady()}function m(e){l("WebSocket onClose",e),n.end(),n.destroy()}function y(e){l("WebSocket onError",e);let t=new Error("WebSocket error");t.event=e,n.destroy(t)}async function v(e){if(!h||h.destroyed||!h.readable)return;let{data:t}=e;t=t instanceof ArrayBuffer?r.Buffer.from(t):t instanceof Blob?r.Buffer.from(await new Response(t).arrayBuffer()):r.Buffer.from(t,"utf8"),h.push(t)}return d.readyState===d.OPEN?(n=h,n.socket=d):(n=new s.BufferedDuplex(t,h,d),p?d.addEventListener("open",g):d.onopen=g),p?(d.addEventListener("close",m),d.addEventListener("error",y),d.addEventListener("message",v)):(d.onclose=m,d.onerror=y,d.onmessage=v),n}}),sf={};function lf(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}Bn(sf,{Server:()=>lf,Socket:()=>lf,Stream:()=>lf,_createServerHandle:()=>lf,_normalizeArgs:()=>lf,_setSimultaneousAccepts:()=>lf,connect:()=>lf,createConnection:()=>lf,createServer:()=>lf,default:()=>uf,isIP:()=>lf,isIPv4:()=>lf,isIPv6:()=>lf});var uf,cf=Fn(()=>{Zn(),Mo(),bo(),uf={_createServerHandle:lf,_normalizeArgs:lf,_setSimultaneousAccepts:lf,connect:lf,createConnection:lf,createServer:lf,isIP:lf,isIPv4:lf,isIPv6:lf,Server:lf,Socket:lf,Stream:lf}}),ff=Un((e,t)=>{Zn(),Mo(),bo(),t.exports={}}),df=Un(e=>{Zn(),Mo(),bo();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=t((cf(),jn(sf))),n=t(Oa()),i=t(ff()),o=(0,n.default)("mqttjs:tcp");e.default=(e,t)=>{if(t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",t.socksProxy)return(0,i.default)(t.hostname,t.port,t.socksProxy,{timeout:t.socksTimeout});let{port:n,path:a}=t,s=t.hostname;return o("port %d and host %s",n,s),r.default.createConnection({port:n,host:s,path:a})}}),hf={};Bn(hf,{default:()=>pf});var pf,gf=Fn(()=>{Zn(),Mo(),bo(),pf={}}),mf=Un(e=>{Zn(),Mo(),bo();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=(gf(),jn(hf)),n=t((cf(),jn(sf))),i=t(Oa()),o=t(ff()),a=(0,i.default)("mqttjs:tls");e.default=(e,t)=>{t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",0===n.default.isIP(t.host)&&(t.servername=t.host),t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,a("port %d host %s rejectUnauthorized %b",t.port,t.host,t.rejectUnauthorized);let i=function(e){let{host:t,port:n,socksProxy:i}=e,a=An(e,xn);if(void 0!==i){let s=(0,o.default)(t,n,i,{timeout:e.socksTimeout});return(0,r.connect)(c(c({},a),{},{socket:s}))}return(0,r.connect)(e)}(t);function s(r){t.rejectUnauthorized&&e.emit("error",r),i.end()}return i.on("secureConnect",()=>{t.rejectUnauthorized&&!i.authorized?i.emit("error",new Error("TLS not authorized")):i.removeListener("error",s)}),i.on("error",s),i}}),yf=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0});var t,r,n,i=(ko(),jn(Co)),o=wa(),a=of();e.default=(e,s)=>{if(s.hostname=s.hostname||s.host,!s.hostname)throw new Error("Could not determine host. Specify host manually.");let l="MQIsdp"===s.protocolId&&3===s.protocolVersion?"mqttv3.1":"mqtt";!function(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}(s);let u=function(e,t){let r="wxs"===e.protocol?"wss":"ws",n="".concat(r,"://").concat(e.hostname).concat(e.path);return e.port&&80!==e.port&&443!==e.port&&(n="".concat(r,"://").concat(e.hostname,":").concat(e.port).concat(e.path)),"function"==typeof e.transformWsUrl&&(n=e.transformWsUrl(n,e,t)),n}(s,e);t=wx.connectSocket({url:u,protocols:[l]}),r=function(){let e=new o.Transform;return e._write=(e,r,n)=>{t.send({data:e.buffer,success(){n()},fail(e){n(new Error(e))}})},e._flush=e=>{t.close({success(){e()}})},e}(),(n=new a.BufferedDuplex(s,r,t))._destroy=(e,r)=>{t.close({success(){r&&r(e)}})};let c=n.destroy;return n.destroy=(e,r)=>(n.destroy=c,setTimeout(()=>{t.close({fail(){n._destroy(e,r)}})},0),n),t.onOpen(()=>{n.socketReady()}),t.onMessage(e=>{let{data:t}=e;t=t instanceof ArrayBuffer?i.Buffer.from(t):i.Buffer.from(t,"utf8"),r.push(t)}),t.onClose(()=>{n.emit("close"),n.end(),n.destroy()}),t.onError(e=>{let t=new Error(e.errMsg);n.destroy(t)}),n}}),vf=Un(e=>{Zn(),Mo(),bo(),Object.defineProperty(e,"__esModule",{value:!0});var t,r,n,i=(ko(),jn(Co)),o=wa(),a=of(),s=!1;e.default=(e,l)=>{if(l.hostname=l.hostname||l.host,!l.hostname)throw new Error("Could not determine host. Specify host manually.");let u="MQIsdp"===l.protocolId&&3===l.protocolVersion?"mqttv3.1":"mqtt";!function(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}(l);let c=function(e,t){let r="alis"===e.protocol?"wss":"ws",n="".concat(r,"://").concat(e.hostname).concat(e.path);return e.port&&80!==e.port&&443!==e.port&&(n="".concat(r,"://").concat(e.hostname,":").concat(e.port).concat(e.path)),"function"==typeof e.transformWsUrl&&(n=e.transformWsUrl(n,e,t)),n}(l,e);return(t=l.my).connectSocket({url:c,protocols:u}),r=function(){let e=new o.Transform;return e._write=(e,r,n)=>{t.sendSocketMessage({data:e.buffer,success(){n()},fail(){n(new Error)}})},e._flush=e=>{t.closeSocket({success(){e()}})},e}(),n=new a.BufferedDuplex(l,r,t),s||(s=!0,t.onSocketOpen(()=>{n.socketReady()}),t.onSocketMessage(e=>{if("string"==typeof e.data){let t=i.Buffer.from(e.data,"base64");r.push(t)}else{let t=new FileReader;t.addEventListener("load",()=>{t.result instanceof ArrayBuffer?r.push(i.Buffer.from(t.result)):r.push(i.Buffer.from(t.result,"utf-8"))}),t.readAsArrayBuffer(e.data)}}),t.onSocketClose(()=>{n.end(),n.destroy()}),t.onSocketError(e=>{n.destroy(e)})),n}}),_f=Un(e=>{Zn(),Mo(),bo();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((n,i)=>{let o=l(e,t),a={connect:e=>{s(),n(o)},end:()=>{s(),n(o)},error:e=>{s(),o.end(),i(e)}};function s(){Object.keys(a).forEach(e=>{o.off(e,a[e])})}!1===r&&(a.close=()=>{a.error(new Error("Couldn't connect to server"))}),Object.keys(a).forEach(e=>{o.on(e,a[e])})})};var r=t(Oa()),n=t((rf(),jn(uc))),i=t(Qs()),o=t(Ws());"function"!=typeof(null===qn||void 0===qn?void 0:qn.nextTick)&&(qn.nextTick=setImmediate);var a=(0,r.default)("mqttjs"),s=null;function l(e,t){var r,l,u;if(a("connecting to an MQTT broker..."),"object"==typeof e&&!t&&(t=e,e=""),t=t||{},e&&"string"==typeof e){let r=n.default.parse(e,!0),i={};if(null!=r.port&&(i.port=Number(r.port)),i.host=r.hostname,i.query=r.query,i.auth=r.auth,i.protocol=r.protocol,i.path=r.path,!(t=c(c({},i),t)).protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}if(t.unixSocket=t.unixSocket||(null===(r=t.protocol)||void 0===r?void 0:r.includes("+unix")),t.unixSocket?t.protocol=t.protocol.replace("+unix",""):!(null!==(l=t.protocol)&&void 0!==l&&l.startsWith("ws"))&&!(null!==(u=t.protocol)&&void 0!==u&&u.startsWith("wx"))&&delete t.path,function(e){let t;if(e.auth)if(t=e.auth.match(/^(.+):(.+)$/),t){let[,r,n]=t;e.username=r,e.password=n}else e.username=e.auth}(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),o.default||t.unixSocket?t.socksProxy=void 0:void 0===t.socksProxy&&typeof qn<"u"&&(t.socksProxy=qn.env.MQTTJS_SOCKS_PROXY),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'.concat(t.protocol,'"!'))}}if(s||(s={},o.default||t.forceNativeWebSocket?(s.ws=af().browserStreamBuilder,s.wss=af().browserStreamBuilder,s.wx=yf().default,s.wxs=yf().default,s.ali=vf().default,s.alis=vf().default):(s.ws=af().streamBuilder,s.wss=af().streamBuilder,s.mqtt=df().default,s.tcp=df().default,s.ssl=mf().default,s.tls=s.ssl,s.mqtts=mf().default)),!s[t.protocol]){let e=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((t,r)=>(!e||r%2!==0)&&"function"==typeof s[t])[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");t.protocol&&(t.defaultProtocol=t.protocol);let f=new i.default(function(e){return t.servers&&((!e._reconnectCount||e._reconnectCount===t.servers.length)&&(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol?t.servers[e._reconnectCount].protocol:t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),a("calling streambuilder for",t.protocol),s[t.protocol](e,t)},t);return f.on("error",()=>{}),f}e.default=l}),bf=Un(e=>{Zn(),Mo(),bo();var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=e&&e.__importStar||function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(t)};return function(n){if(n&&n.__esModule)return n;var i={};if(null!=n)for(var o=e(n),a=0;a<o.length;a++)"default"!==o[a]&&t(i,n,o[a]);return r(i,n),i}}(),i=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)},o=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var a=o(Qs());e.MqttClient=a.default;var s=o(_s());e.DefaultMessageIdProvider=s.default;var l=o(Xs());e.UniqueMessageIdProvider=l.default;var u=o(ja());e.Store=u.default;var c=n(_f());e.connect=c.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return c.connectAsync}});var f=o(Ks());e.KeepaliveManager=f.default,e.Client=a.default,i(Qs(),e),i(Ga(),e);var d=za();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return d.ReasonCodes}})});const Ef=Un(e=>{Zn(),Mo(),bo();var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=e&&e.__importStar||function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(t)};return function(n){if(n&&n.__esModule)return n;var i={};if(null!=n)for(var o=e(n),a=0;a<o.length;a++)"default"!==o[a]&&t(i,n,o[a]);return r(i,n),i}}(),i=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(bf());e.default=o,i(bf(),e)})(),wf=350,Sf=()=>(0,Le.jsxs)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[(0,Le.jsx)("circle",{cx:"12",cy:"12",r:"9",fill:"none",stroke:"#1976d2",strokeWidth:"2"}),(0,Le.jsx)("polyline",{points:"8,12 11,15 16,9",fill:"none",stroke:"#1976d2",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Tf=e=>{let{title:t,segment:r,flag:n,isAd:i,advertName:o}=e;return(0,Le.jsx)("div",{className:"bg-white/80 backdrop-blur rounded-lg shadow-md ring-1 ring-black/5 px-4 py-3 text-center font-poppins",children:(0,Le.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,Le.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Le.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:[t," & ",r]}),n&&""!==n&&(0,Le.jsx)("img",{src:n,alt:"Flag",className:"w-[50px] h-[25px] object-contain"})]}),(0,Le.jsxs)("label",{className:"text-gray-700",children:["Stream Type:"," ",(0,Le.jsx)("b",{className:"text-gray-900",children:i?":: AD :: ".concat(o):"Content"})]})]})})},Af=e=>{let{labels:t}=e;return(0,Le.jsx)("div",{className:"bg-gray-100/90 rounded-xl shadow-md ring-1 ring-black/5 px-4 py-3 md:px-5 md:py-4",children:(0,Le.jsx)("div",{className:"flex divide-x divide-gray-300",children:[{key:"impression",label:"Impression"},{key:"adstart",label:"ADSTART"},{key:"firstQuartile",label:"25%"},{key:"secondQuartile",label:"50%"},{key:"thirdQuartile",label:"75%"},{key:"completion",label:"ADCOMPL"}].map((e,r)=>{const n=null===t||void 0===t?void 0:t[e.key],i=Boolean(n);return(0,Le.jsxs)("div",{className:"flex-1 px-3 text-center",children:[(0,Le.jsx)("div",{className:"text-gray-700 font-medium",children:e.label}),(0,Le.jsx)("div",{className:"mt-2 flex justify-center",children:i?(0,Le.jsx)(Sf,{className:"w-6 h-6"}):(0,Le.jsx)("span",{className:"text-blue-600 text-xl leading-none",children:"\u2013"})})]},e.key)})})})},If=e=>{let{input_index:r}=e;const[,n]=(0,t.useState)(0),i=(0,t.useRef)(null),o=(0,t.useRef)(null),a=(0,t.useRef)(null),s=(0,t.useRef)(null),l=(0,t.useRef)(null),u=(0,t.useRef)(null),f=(0,t.useRef)(!1),d=(0,t.useRef)(!1),h=(0,t.useRef)(1),p=(0,t.useRef)(!1),g=((0,t.useRef)([]),(0,t.useRef)([]),(0,t.useRef)(""),(0,t.useRef)(""),(0,t.useRef)(""),(0,t.useRef)(""),(0,t.useRef)(!0)),m=(0,t.useRef)(!0),y=(0,t.useRef)("display"),[v,_]=(0,t.useState)(""),[b,E]=(0,t.useState)(""),[w,S]=(0,t.useState)("5%"),[T,A]=(0,t.useState)("5%"),I=(0,t.useRef)(""),R=(0,t.useRef)(""),N=(0,t.useRef)(""),C=(0,t.useRef)(""),O=(0,t.useRef)(""),P=(0,t.useRef)(""),x=(0,t.useRef)(!1),D=(0,t.useRef)(!1),k=(0,t.useRef)(""),M=(0,t.useRef)(""),[L,F]=(0,t.useState)(!1),[U,B]=(0,t.useState)(!1),[j,Z]=(0,t.useState)(!1),[q,G]=(0,t.useState)(!1),[z,H]=(0,t.useState)([]),V=(0,t.useRef)([]),[W,Y]=(0,t.useState)([]),K=(0,t.useRef)([]),[Q,X]=(0,t.useState)(""),[$,J]=(0,t.useState)(!1),[ee,te]=(0,t.useState)(""),[re,ne]=(0,t.useState)(""),[ie,oe]=(0,t.useState)(!1),[ae,se]=(0,t.useState)(!1),[le,ue]=(0,t.useState)(!0),[ce,fe]=(0,t.useState)(0),[de,he]=(0,t.useState)({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),[pe,ge]=(0,t.useState)({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),me=1e3,ye=1e4;let ve=null,_e=null;(0,t.useEffect)(()=>(a.current=setInterval(be,me),s.current=setInterval(Ee,me),()=>{console.log("[Linear_cc] Component unmounting \u2014 tearing down players"),a.current&&(clearInterval(a.current),a.current=null),s.current&&(clearInterval(s.current),s.current=null),i.current&&(i.current.pause(),i.current.removeAttribute("src"),i.current.load()),o.current&&(o.current.pause(),o.current.removeAttribute("src"),o.current.load()),l.current&&(l.current.off(ze().MediaPlayer.events.ERROR),l.current.reset()),u.current&&(u.current.off(ze().MediaPlayer.events.ERROR),u.current.reset())}),[]),(0,t.useEffect)(()=>{V.current=z},[z]),(0,t.useEffect)(()=>{K.current=W},[W]),(0,t.useEffect)(()=>{x.current=j},[j]),(0,t.useEffect)(()=>{D.current=q},[q]),(0,t.useEffect)(()=>{if(x.current&&I.current&&V.current.length>0){const e=V.current.find(e=>e.id===I.current);te((null===e||void 0===e?void 0:e.advert)||"")}else te("")},[z,j,I.current]),(0,t.useEffect)(()=>{if(D.current&&R.current&&K.current.length>0){const e=K.current.find(e=>e.id===R.current);ne((null===e||void 0===e?void 0:e.advert)||"")}else ne("")},[W,q,R.current]),(0,t.useEffect)(()=>{const e=Ef.connect("wss://test.mosquitto.org:8081/mqtt");return e.on("connect",()=>{console.log("[MQTT] Connected"),e.subscribe("linearcc/triggerDAI",e=>{e&&console.error("[MQTT] Subscription error:",e)})}),e.on("message",(e,t)=>{const r=t.toString();if(console.log("[MQTT] ".concat(e,": ").concat(r)),"linearcc/triggerDAI"===e){let e=JSON.parse(r);if("1"===e.type)Me(),Fe();else if("2"===e.type){let e=k.current.replaceAll("p1","p3"),t=M.current.replaceAll("p2","p4");Me(e),Fe(t)}}}),()=>{e.end(!0),console.log("[MQTT] Disconnected")}},[]);const be=()=>{let e=l.current;if(Array.isArray(V.current)&&0!==V.current.length){var t,r;const n=null===(t=e.getActiveStream)||void 0===t?void 0:t.call(e),i=null===n||void 0===n||null===(r=n.getId)||void 0===r?void 0:r.call(n);if(!i)return void console.log("[updateCurrentTime] Could not retrieve manifestId");const o=1e3*e.time(i);Te(V.current,he,o,"l",i)}},Ee=()=>{let e=u.current;if(Array.isArray(K.current)&&0!==K.current.length){var t,r;const n=null===(t=e.getActiveStream)||void 0===t?void 0:t.call(e),i=null===n||void 0===n||null===(r=n.getId)||void 0===r?void 0:r.call(n);if(!i)return void console.log("[updateCurrentTime] Could not retrieve manifestId");const o=1e3*e.time(i);Te(K.current,ge,o,"r",i)}};(0,t.useEffect)(()=>{(()=>{console.log("(LIN) initializePlayers() called."),l.current=ze().MediaPlayer().create(),l.current.updateSettings({debug:{logLevel:ze().Debug.LOG_LEVEL_NONE}}),l.current.initialize(i.current,Se(Be.k[r][["left_playback_url_".concat(h.current)]],"l"),!0,0),i.current.muted=!0,console.log("(LIN) initialize LP"),u.current=ze().MediaPlayer().create(),u.current.updateSettings({streaming:{delay:{liveDelay:5},abr:{initialBitrate:{video:500}}},debug:{logLevel:ze().Debug.LOG_LEVEL_NONE}}),u.current.initialize(o.current,Se(Be.k[r][["right_playback_url_".concat(h.current)]],"r"),!0,0),o.current.muted=!0,console.log("(LIN) initialize RP"),a.current=setInterval(be,me),console.log("setIntervalLeft() "+a.current),s.current=setInterval(Ee,me),console.log("setIntervalRight() "+s.current);const e=e=>{var t,r;const n=null===e||void 0===e||null===(t=e.event)||void 0===t||null===(r=t.response)||void 0===r?void 0:r.status;console.warn("[Dash Error]",n,e),[401,403,404].includes(n)&&(console.warn("[Dash Error] Triggering reinitialization due to HTTP ".concat(n)),Ie())};l.current.on(ze().MediaPlayer.events.ERROR,e),u.current.on(ze().MediaPlayer.events.ERROR,e),l.current.on(ze().MediaPlayer.events.MANIFEST_LOADED,()=>{l.current.on(ze().MediaPlayer.events.PERIOD_SWITCH_STARTED,e=>{}),l.current.on(ze().MediaPlayer.events.STREAM_ACTIVATED,e=>{var t,r;const i=null===(t=e.streamInfo)||void 0===t?void 0:t.id;if(!i)return;const o=I.current;o&&o!==i&&x.current&&Ae("l"),I.current=i;const a=null===(r=l.current.getDashAdapter())||void 0===r?void 0:r.getMpd();if(!a)return;const s=we(a,i);if(s.isAd){H(s.events),Z(!0),n(e=>e+1);const e=s.events.some(e=>"clicktrough"===e.type&&e.ct);f.current=e,n(e=>e+1)}else H([]),Z(!1),Ae("l"),f.current=!1;g.current?g.current=!1:(oe(!0),setTimeout(()=>oe(!1),ye))})}),u.current.on(ze().MediaPlayer.events.MANIFEST_LOADED,()=>{u.current.on(ze().MediaPlayer.events.PERIOD_SWITCH_STARTED,e=>{}),u.current.on(ze().MediaPlayer.events.STREAM_ACTIVATED,e=>{var t,r;const i=null===(t=e.streamInfo)||void 0===t?void 0:t.id;if(!i)return;const o=R.current;o&&o!==i&&D.current&&Ae("r"),R.current=i;const a=null===(r=u.current.getDashAdapter())||void 0===r?void 0:r.getMpd();if(!a)return;const s=we(a,i);if(s.isAd){Y(s.events),G(!0),n(e=>e+1);const e=s.events.some(e=>"clicktrough"===e.type&&e.ct);d.current=e,n(e=>e+1)}else Y([]),G(!1),Ae("r"),d.current=!1;m.current?m.current=!1:(se(!0),setTimeout(()=>se(!1),ye))})})})()},[v,b]),(0,t.useEffect)(()=>{});const we=(e,t)=>{let r=!1,n=[];const i=null===e||void 0===e?void 0:e.manifest,o=((null===i||void 0===i?void 0:i.Period_asArray)||[]).find(e=>(null===e||void 0===e?void 0:e.id)===t);if(!o)return{isAd:!1,events:n};if(!o.EventStream_asArray)return{isAd:!1,events:n};const a=o.EventStream_asArray.find(e=>"com.synamedia.dai.tracking.v2"===(null===e||void 0===e?void 0:e.value)),s=o.EventStream_asArray.find(e=>"com.synamedia.dai.videoclick.v2"===(null===e||void 0===e?void 0:e.value));return a&&(r=!0,((e,t,r,n,i)=>{let o="",a="",s="",l="",u="",c=[],f="";for(let d=0;d<n.Event_asArray.length;d++)a=n.Event_asArray[d].Tracking_asArray[0].__cdata,f=n.Event_asArray[d].Tracking_asArray[0].event,c=new URLSearchParams(a),l=c.get("creativeId"),s=f.includes("impression")?"Impression":f.includes("start")?"Ad Start":f.includes("firstQuartile")?"First Quartile":f.includes("midpoint")?"Second Quartile":f.includes("thirdQuartile")?"Third Quartile":f.includes("complete")?"Fourth Quartile":"Unkknown",o={stream:d,id:r,pt:n.Event_asArray[d].presentationTime,type:s,url:a,reported:!1,advert:l,ct:""},t.push(o);if(i)for(let d=0;d<i.Event_asArray.length;d++)a=i.Event_asArray[d].VideoClicks_asArray[0].ClickTracking_asArray[0],u=i.Event_asArray[d].VideoClicks_asArray[0].ClickThrough_asArray[0],o={stream:r,id:r,pt:0,type:"clicktrough",url:a,reported:!1,advert:l,ct:u},t.push(o)})(0,n,o.id,a,s)),{isAd:r,events:n}};const Se=(e,t)=>{let n="",i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});return n=e+"&sessionId=SYNAIRISDEMO_"+t+"_"+r.toString()+"_"+Math.floor((new Date).getTime()/1e3).toString(),n=n+"&deviceId="+i,n=n+"&transactionId="+Math.floor((new Date).getTime()/1e3).toString(),console.log("buildURL: ",n),n},Te=(e,t,r,n,i)=>{for(let l=0;l<e.length;l++){var o,a,s;if((null===(o=e[l])||void 0===o?void 0:o.id)===i)r>=(null===(a=e[l])||void 0===a?void 0:a.pt)&&(null===(s=e[l])||void 0===s||!s.reported)&&(console.log("HTTP GET: "+n+" - "+e[l].advert+" - "+e[l].type+" - ",e[l].url),Re(e[l].url),e[l].reported=!0,t(t=>{const r=c({},t);switch(e[l].type){case"Impression":r.impression="\u2714";break;case"Ad Start":r.adstart="\u2714";break;case"First Quartile":r.firstQuartile="\u2714";break;case"Second Quartile":r.secondQuartile="\u2714";break;case"Third Quartile":r.thirdQuartile="\u2714";break;case"Fourth Quartile":r.completion="\u2714"}return r}))}},Ae=e=>{"l"===e&&he({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),"r"===e&&ge({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),"rl"===e&&(he({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),ge({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""})),n(e=>e+1)},Ie=()=>{if(l&&u){let e="";l.current.reset(),u.current.reset(),e=Se(v,"l"),l.current.initialize(i.current,e,!1,0),e=Se(b,"r"),u.current.initialize(o.current,e,!1,0)}J(!1),Ae()},Re=async e=>{try{return(await mn.get(e)).status}catch(t){return console.error("Error posting data:",t),-1}},Ne=()=>{console.log("Normal click behavior triggered (left)");const e=V.current,t=I.current,r=e.find(e=>e.id===t&&"clicktrough"===e.type&&e.ct)||e.find(e=>"clicktrough"===e.type&&e.ct);r?(window.open(r.ct,"_blank"),console.log("HTTP GET: L - "+r.advert+" - "+r.type+" - ",r.url),Re(r.url)):console.log("No clickthrough URL found for L")},Ce=()=>{console.log("Normal click behavior triggered (right)");const e=K.current,t=R.current,r=e.find(e=>e.id===t&&"clicktrough"===e.type&&e.ct)||e.find(e=>"clicktrough"===e.type&&e.ct);r?(window.open(r.ct,"_blank"),console.log("HTTP GET: R - "+r.advert+" - "+r.type+" - ",r.url),Re(r.url)):console.log("No clickthrough URL found for R")},Oe=()=>{console.log("Click-and-hold behavior triggered (left)");const e=V.current,t=I.current;let r="";const n=e.find(e=>e.id===t&&"clicktrough"===e.type&&e.ct)||e.find(e=>"clicktrough"===e.type&&e.ct);n?(r="http://localhost:3000/landing?assetId="+n.advert,window.open(r,"_blank"),console.log("HTTP GET: L - "+n.advert+" - "+n.type+" - ",r),Re(n.url)):console.log("No clickthrough URL found for L")},Pe=()=>{console.log("Click-and-hold behavior triggered (right)");const e=K.current,t=R.current;let r="";const n=e.find(e=>e.id===t&&"clicktrough"===e.type&&e.ct)||e.find(e=>"clicktrough"===e.type&&e.ct);n?(r="http://localhost:3000/landing?assetId="+n.advert,window.open(r,"_blank"),console.log("HTTP GET: R - "+n.advert+" - "+n.type+" - ",r),Re(n.url)):console.log("No clickthrough URL found for R")};const xe=(e,t)=>{try{if(200!==e.status)return!1;const r=e.data,n=(new DOMParser).parseFromString(r,"application/xml");if(n.getElementsByTagName("Ad").length<=0)return console.error("Empty Display VAST"),!1;const i=n.getElementsByTagName("Impression");n.getElementsByTagName("Advertiser");for(let e=0;e<i.length;e++){const r=i[e].textContent.trim();r.includes(".jpeg")||r.includes(".jpg")||r.includes(".png")?"l"===t?N.current=r:C.current=r:r.includes("/vod/impression?")&&("l"===t?O.current=r:P.current=r)}const o=n.getElementsByTagName("Advertiser");return o.length>0?X(o[0].textContent.trim()):X("Synamedia Iris"),!0}catch(r){return console.error("Error processing the display VAST: ",t,r),!1}},De=async e=>{try{return await mn.get(e)}catch(t){return console.error("Error posting data:",t),-1}},ke=e=>{try{let t=h.current;h.current="up"===e?t>=Be.k[r].max_channels?1:t+1:t<=1?Be.k[r].max_channels:t-1,_(Be.k[r]["left_playback_url_".concat(h.current)]),E(Be.k[r]["right_playback_url_".concat(h.current)]),le&&(Me(),Fe())}catch(t){console.error("Error handling channel change:",t)}},Me=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{""===k.current&&(k.current=Se(Be.k[r].left_display_ads_url,"l"));let t=""===e?k.current:e,n=await De(t);xe(n,"l")&&(F(!0),oe(!0),setTimeout(()=>{F(!1),oe(!1)},ye),Re(O.current))}catch(t){console.error("Error handling display ad request [l]:",t)}},Fe=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{""===M.current&&(M.current=Se(Be.k[r].right_display_ads_url,"r"));let t=""===e?M.current:e,n=await De(t);xe(n,"r")&&(B(!0),se(!0),setTimeout(()=>{B(!1),se(!1)},ye),Re(P.current))}catch(t){console.error("Error handling display ad request [r]:",t)}};return(0,Le.jsxs)("div",{className:"relative min-h-screen bg-cover bg-center font-poppins",style:{backgroundImage:"url('/SplashScreenBG.png')"},children:[(0,Le.jsx)("div",{className:"absolute inset-0 bg-white/35"}),(0,Le.jsxs)("div",{className:"relative z-10 text-white",children:[(0,Le.jsx)("div",{children:(0,Le.jsx)("h1",{className:"font-poppins font-bold text-center text-3xl",children:Be.k[r].great_title})}),(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)(Tf,{title:Be.k[r].left_title,segment:Be.k[r].left_segment,flag:Be.k[r].left_flag,isAd:j,advertName:ee}),(0,Le.jsx)("div",{children:(0,Le.jsx)(Af,{labels:de})}),(0,Le.jsxs)("div",{className:"w-[750px] h-[420px] flex items-center justify-start bg-black overflow-hidden",children:[(0,Le.jsx)("div",{className:"h-full flex items-center justify-center",style:{width:"".concat(ie?wf:750,"px"),transition:"width 0.5s ease-in-out"},children:(0,Le.jsx)("video",{ref:i,controls:!0,className:"h-full object-contain",style:{width:"100%"}})}),ie&&L&&(0,Le.jsx)("div",{className:"h-full flex items-center justify-center ml-2",style:{width:"".concat(wf,"px"),height:"203px"},children:(0,Le.jsx)("img",{src:N.current,alt:"Display Ad",className:"w-full h-full object-fill"})})]})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)(Tf,{title:Be.k[r].right_title,segment:Be.k[r].right_segment,flag:Be.k[r].right_flag,isAd:q,advertName:re}),(0,Le.jsx)("div",{children:(0,Le.jsx)(Af,{labels:pe})}),(0,Le.jsxs)("div",{className:"w-[750px] h-[420px] flex items-center justify-start bg-black overflow-hidden",children:[(0,Le.jsx)("div",{className:"h-full flex items-center justify-center",style:{width:"".concat(ae?wf:750,"px"),transition:"width 0.5s ease-in-out"},children:(0,Le.jsx)("video",{ref:o,controls:!0,className:"h-full object-contain",style:{width:"100%"}})}),ae&&U&&(0,Le.jsx)("div",{className:"h-full flex items-center justify-center ml-2",style:{width:"".concat(wf,"px"),height:"203px"},children:(0,Le.jsx)("img",{src:C.current,alt:"Display Ad",className:"w-full h-full object-fill"})})]})]})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("button",{onClick:Ie,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Load/Reload"}),(0,Le.jsx)("button",{onClick:()=>{$?(i.current.pause(),o.current.pause(),J(!1),a.current&&(clearInterval(a.current),a.current=null),s.current&&(clearInterval(s.current),s.current=null)):(i.current.play(),o.current.play(),J(!0),a.current||(a.current=setInterval(be,me)),s.current||(s.current=setInterval(Ee,me)))},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:$?"Pause":"Play"}),(0,Le.jsx)("button",{onClick:()=>{a.current&&(clearInterval(a.current),a.current=null),s.current&&(clearInterval(s.current),s.current=null),l&&u&&(l.current.reset(),u.current.reset()),i.current&&o.current&&(i.current.pause(),i.current.removeAttribute("src"),i.current.load(),o.current.pause(),o.current.removeAttribute("src"),o.current.load()),J(!1),Ae()},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Stop"}),(0,Le.jsx)("button",{onMouseDown:()=>{ve=(new Date).getTime()},onMouseUp:()=>{(new Date).getTime()-ve<1e3?Ne():Oe()},disabled:!f.current,className:"bg-blue-600 text-white px-4 py-2 rounded transition hover:bg-blue-700 disabled:bg-gray-400 disabled:text-gray-100 disabled:cursor-not-allowed",children:"Left player clickthrough"}),(0,Le.jsx)("button",{onMouseDown:()=>{_e=(new Date).getTime()},onMouseUp:()=>{(new Date).getTime()-_e<1e3?Ce():Pe()},disabled:!d.current,className:"bg-blue-600 text-white px-4 py-2 rounded transition hover:bg-blue-700 disabled:bg-gray-400 disabled:text-gray-100 disabled:cursor-not-allowed",children:"Right player clickthrough"}),(0,Le.jsxs)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",onClick:()=>{i.current&&("5%"===w?(i.current.volume=.05,i.current.muted=!1,S("0%")):(i.current.volume=0,S("5%")))},children:["L: ",w]}),(0,Le.jsxs)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",onClick:()=>{o.current&&("5%"===T?(o.current.volume=.05,o.current.muted=!1,A("0%")):(o.current.volume=0,A("5%")))},children:["R: ",T]})]}),(0,Le.jsx)("br",{}),(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("label",{children:["Current Channel: ",(0,Le.jsx)("b",{children:h.current})]}),(0,Le.jsx)("br",{}),(0,Le.jsx)("button",{onClick:()=>ke("up"),disabled:p.current,className:"bg-green-700 text-white px-4 py-2 rounded hover:bg-green-800 transition",children:"Ch. Up"}),(0,Le.jsx)("br",{}),(0,Le.jsx)("button",{onClick:()=>ke("down"),disabled:p.current,className:"bg-green-700 text-white px-4 py-2 rounded hover:bg-green-800 transition",children:"Ch. Down"}),(0,Le.jsx)("br",{}),(0,Le.jsx)("button",{onClick:()=>{ue(!0),y.current="display"},className:"px-4 py-2 rounded-full text-white ".concat(le?"bg-green-600":"bg-gray-400"),children:"Display"}),(0,Le.jsx)("button",{onClick:()=>{ue(!1),y.current="video"},className:"px-4 py-2 rounded-full text-white ".concat(le?"bg-gray-400":"bg-green-600"),children:"Video"}),(0,Le.jsx)("br",{}),(0,Le.jsx)("button",{onClick:()=>{fe(0)},className:"px-4 py-2 rounded-full text-white ".concat(0===ce?"bg-green-600":"bg-gray-400"),children:"Side-by-Side"}),(0,Le.jsx)("button",{onClick:()=>{fe(1)},className:"px-4 py-2 rounded-full text-white ".concat(1===ce?"bg-green-600":"bg-gray-400"),children:"L-Shape"}),(0,Le.jsx)("button",{onClick:()=>{fe(2)},className:"px-4 py-2 rounded-full text-white ".concat(2===ce?"bg-green-600":"bg-gray-400"),children:"O-Shape"})]})]})]})},Rf=()=>{const e=oe(),r=new URLSearchParams(e.search).get("assetId")||"unknown",[n,i]=(0,t.useState)(null);return(0,t.useEffect)(()=>{fetch("./specials/index.json").then(e=>e.json()).then(e=>{const t=e.filter(e=>e.endsWith(".jpg")).sort().reverse()[0];i("./specials/".concat(t))}),console.log("Asset ID from URL:",r)},[r]),(0,Le.jsxs)("div",{style:{textAlign:"center",fontFamily:"sans-serif",marginTop:"50px"},children:[(0,Le.jsx)("img",{src:"/iris_logo.png",alt:"Landing Visual",style:{maxWidth:"20%",height:"auto"}}),(0,Le.jsx)("h1",{children:"This is the Synamedia Iris landpage for testing clickable ads."}),(0,Le.jsx)("h2",{children:"Congratulations! You won the SPECIAL prize on Iris Wheel of Fortune!"}),(0,Le.jsxs)("h3",{children:["Asset Clicked: ",(0,Le.jsx)("b",{children:r})]}),n&&(0,Le.jsx)("img",{src:n,alt:"Latest Special",style:{display:"block",margin:"30px auto 0 auto",maxWidth:"60%",filter:"brightness(1.0) contrast(1.0)"}})]})},Nf=()=>(0,Le.jsxs)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[(0,Le.jsx)("circle",{cx:"12",cy:"12",r:"9",fill:"none",stroke:"#1976d2",strokeWidth:"2"}),(0,Le.jsx)("polyline",{points:"8,12 11,15 16,9",fill:"none",stroke:"#1976d2",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Cf=e=>{let{title:t,segment:r,flag:n,isAd:i,advertName:o}=e;return(0,Le.jsx)("div",{className:"bg-white/80 backdrop-blur rounded-lg shadow-md ring-1 ring-black/5 px-4 py-3 text-center font-poppins",children:(0,Le.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,Le.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Le.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:[t," & ",r]}),n&&""!==n&&(0,Le.jsx)("img",{src:n,alt:"Flag",className:"w-[50px] h-[25px] object-contain"})]}),(0,Le.jsxs)("label",{className:"text-gray-700",children:["Stream Type:"," ",(0,Le.jsx)("b",{className:"text-gray-900",children:i?":: AD :: ".concat(o):"Content"})]})]})})},Of=e=>{let{labels:t}=e;return(0,Le.jsx)("div",{className:"bg-gray-100/90 rounded-xl shadow-md ring-1 ring-black/5 px-4 py-3 md:px-5 md:py-4",children:(0,Le.jsx)("div",{className:"flex divide-x divide-gray-300",children:[{key:"impression",label:"Impression"},{key:"adstart",label:"ADSTART"},{key:"firstQuartile",label:"25%"},{key:"secondQuartile",label:"50%"},{key:"thirdQuartile",label:"75%"},{key:"completion",label:"ADCOMPL"}].map((e,r)=>{const n=null===t||void 0===t?void 0:t[e.key],i=Boolean(n);return(0,Le.jsxs)("div",{className:"flex-1 px-3 text-center",children:[(0,Le.jsx)("div",{className:"text-gray-700 font-medium",children:e.label}),(0,Le.jsx)("div",{className:"mt-2 flex justify-center",children:i?(0,Le.jsx)(Nf,{className:"w-6 h-6"}):(0,Le.jsx)("span",{className:"text-blue-600 text-xl leading-none",children:"\u2013"})})]},e.key)})})})},Pf=e=>{let{input_index:r,inSequence:n,inAdOverlay:i}=e;const[,o]=(0,t.useState)(0),a=(0,t.useRef)(null),s=(0,t.useRef)(null),l=(0,t.useRef)(null),u=(0,t.useRef)(null),f=(0,t.useRef)(!1),d=(0,t.useRef)(null),h=(0,t.useRef)(1),[p,g]=(0,t.useState)(!1),m=(0,t.useRef)(null),y=(0,t.useRef)(null),v=(0,t.useRef)([]),_=(0,t.useRef)([]),[b,E]=(0,t.useState)(""),[w,S]=(0,t.useState)(!1),[T,A]=(0,t.useState)(""),[I,R]=(0,t.useState)(""),[N,C]=(0,t.useState)(""),[O,P]=(0,t.useState)(!1),[x,D]=(0,t.useState)("Content"),[k,M]=(0,t.useState)(Be.k[r].left_playback_url),[L,F]=(0,t.useState)("5%"),U=(0,t.useRef)(""),B=(0,t.useRef)(!1),[j,Z]=(0,t.useState)(!1),[q,G]=(0,t.useState)([]),z=(0,t.useRef)([]),[H,V]=(0,t.useState)(!1),W=(0,t.useRef)(!1),Y=(0,t.useRef)(!1),K=(0,t.useRef)(""),Q=(0,t.useRef)(""),[X,$]=(0,t.useState)(!0),[J,ee]=(0,t.useState)(!0),te=(0,t.useRef)(J),re=(0,t.useRef)("start"),ne=((0,t.useRef)("display"),(0,t.useRef)(null)),ie=(0,t.useRef)(null),oe=(0,t.useRef)(0),ae=(0,t.useRef)(!1),[se,le]=(0,t.useState)(""),[ue,ce]=(0,t.useState)(""),[fe,de]=(0,t.useState)({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),he=1e3;(0,t.useEffect)(()=>(s.current=setInterval(pe,1e3),()=>{console.log("[Special] Component unmounting \u2014 tearing down players"),s.current&&(clearInterval(s.current),s.current=null),a.current&&(a.current.pause(),a.current.removeAttribute("src"),a.current.load()),u.current&&(u.current.reset(),u.current=null),d.current&&(clearInterval(d.current),d.current=null),l.current&&(clearInterval(l.current),l.current=null)}),[]),(0,t.useEffect)(()=>{z.current=q},[q]),(0,t.useEffect)(()=>{B.current=j},[j]),(0,t.useEffect)(()=>{te.current=J},[J]),(0,t.useEffect)(()=>{if(B.current&&U.current&&z.current.length>0){const e=z.current.find(e=>e.id===U.current);ce((null===e||void 0===e?void 0:e.advert)||"")}else ce("")},[q,j,U.current]);const pe=()=>{let e=u.current;if(Array.isArray(z.current)&&0!==z.current.length){var t,r;const n=null===(t=e.getActiveStream)||void 0===t?void 0:t.call(e),i=null===n||void 0===n||null===(r=n.getId)||void 0===r?void 0:r.call(n);if(!i)return void console.log("[updateCurrentTime] Could not retrieve manifestId");const o=1e3*e.time(i);we(z.current,de,o,"l",i)}},ge=()=>{console.log("(Special) initializePlayers() called."),u.current=ze().MediaPlayer().create(),u.current.updateSettings({debug:{logLevel:ze().Debug.LOG_LEVEL_NONE}}),u.current.initialize(a.current,"",!1,0),a.current.muted=!0,console.log("(Special) initialize LP"),s.current=setInterval(pe,he),Y.current=J,K.current=n,u.current.on(ze().MediaPlayer.events.MANIFEST_LOADED,()=>{u.current.on(ze().MediaPlayer.events.PERIOD_SWITCH_STARTED,e=>{}),u.current.on(ze().MediaPlayer.events.STREAM_ACTIVATED,e=>{var t,r;const n=null===(t=e.streamInfo)||void 0===t?void 0:t.id;if(!n)return;const a=U.current;a&&a!==n&&B.current&&Se("l"),U.current=n;const s=null===(r=u.current.getDashAdapter())||void 0===r?void 0:r.getMpd();if(!s)return;const l=be(s,n);if(l.isAd){G(l.events),Z(!0),o(e=>e+1);const e=l.events.some(e=>"clicktrough"===e.type&&e.ct);f.current=e,o(e=>e+1);l.events.some(e=>"overlay"===e.type)&&i&&((e=>{try{const t=e.find(e=>"overlay"===e.type&&e.url);t?(C(t.url),console.log("[Overlay] Showing:",t.url)):C("")}catch(t){console.log("handleOverlay failed: ",t)}})(l.events),o(e=>e+1))}else G([]),Z(!1),Se("l"),C(""),f.current=!1})})};(0,t.useEffect)(()=>(console.log("enter cleaning"),u.current&&(u.current.reset(),u.current=null),a.current&&(a.current.pause(),a.current.removeAttribute("src"),a.current.load()),clearInterval(s.current),s.current=null,ge(),()=>{ne.current&&(clearTimeout(ne.current),ne.current=null);try{if(ae.current){const e=document.body;e.style.transform="",e.style.transformOrigin="",e.style.width=""}else null!=ie.current&&(document.body.style.zoom=ie.current)}catch(e){}}),[r,n]);const me=async(e,t)=>{const r=async e=>{try{console.log("handleDisplayAds: ",e);let n="",i="",o=0;const a=await Te(e);if(200===a.status){const e=a.data,s=(new DOMParser).parseFromString(e,"application/xml"),l=s.getElementsByTagName("Impression");for(let a=0;a<l.length;a++){const e=l[a].textContent.trim(),s=new URLSearchParams(new URL(e).search);var t,r;if(e.includes(".jpeg")||e.includes(".jpg")||e.includes(".png")){if(S(!1),setTimeout(()=>{A(se),le(e),S(!0)},500),e.includes("sequence="))i=s.get("sequence"),o=parseInt(null===(t=i)||void 0===t||null===(r=t.match(/\d+/))||void 0===r?void 0:r[0],10),h.current=o,console.log("iseq: ",o),console.log("adOnPauseSequence: ",h.current)}else e.includes("/vod/impression?")&&(n=e)}""!==n&&Ae(n);const u=s.getElementsByTagName("Advertiser");u.length>0?R(u[0].textContent.trim()):R("Synamedia Iris")}}catch(n){console.log("handleDisplayAds failed: ",n)}};if(t){let t=e,n=1;if(d.current)return;n>=0&&(t=e+"&kvp=sequence~seq".concat(n.toString()),await r(t),n=h.current),d.current=setInterval(()=>{a.current&&!a.current.paused?(clearInterval(d.current),d.current=null,console.log("[Specials] Video resumed \u2014 stopping displayAd loop")):(t=e+"&kvp=sequence~seq".concat(h.current.toString()),console.log("&kvp=sequence~seq".concat(h.current.toString())),(async()=>{await r(t)})())},5e3)}else await r(e)};function ye(e){const[t,r="0"]=e.split("."),[n,i,o]=t.split(":").map(Number);return 1e3*(3600*n+60*i+o)+Number(r.padEnd(3,"0"))}const ve=async(e,t)=>{try{const t=await Te(e);let r=[],n={},i="",a=0,s="";if(200===t.status){const e=t.data,l=(new DOMParser).parseFromString(e,"application/xml"),u=l.getElementsByTagName("MediaFile"),c=l.getElementsByTagName("Impression"),f=l.getElementsByTagName("Tracking");s=l.getElementsByTagName("Duration")[0].textContent.trim(),console.log("durationText: ",s);for(let t=0;t<u.length;t++){"application/dash+xml"===u[t].getAttribute("type")&&(E(u[t].textContent.trim()),o(e=>e+1))}for(let t=0;t<c.length;t++)n={pts:0,url:c[t].textContent.trim(),reported:!1},r.push(n);v.current=r,r=[];for(let t=0;t<f.length;t++){switch(i=f[t].getAttribute("event"),i){case"start":a=0;break;case"firstQuartile":a=.25*ye(s);break;case"midpoint":a=.5*ye(s);break;case"thirdQuartile":a=.75*ye(s);break;case"complete":a=ye(s)}n={event:i,pts:a,url:f[t].textContent.trim(),reported:!1},r.push(n)}_.current=r,r=[],g(!0),o(e=>e+1)}else console.log("Problem on video ad decision: ",t.status)}catch(r){console.log("handleVideoAds failed: ",r)}};(0,t.useEffect)(()=>{const e=a.current;if(!e)return;const t=()=>{var e,t;console.log("[Specials] Player paused"),V(!1);let o=(null===(e=window.crypto)||void 0===e||null===(t=e.randomUUID)||void 0===t?void 0:t.call(e))||Math.random().toString(36).substring(2);console.log("did=",o);let a=Date.now(),l="";i||te.current?(!i&&te.current&&P(!0),clearInterval(s.current),s.current=null,te.current&&(l="https://ott-decision-apb.ads.iris.synamedia.com/adServer/op7z4geq/vast/vod?transactionId=".concat(a,"&deviceId=").concat(o,"&sessionId=").concat(a).concat(Be.k[r].left_display_ad_querystring),me(l,""!=n),D("Display Ads on Pause"))):te.current||"start"!==re.current||(l="https://ott-decision-apb.ads.iris.synamedia.com/adServer/op7z4geq/vast/vod?transactionId=".concat(a,"&deviceId=").concat(o,"&sessionId=").concat(a).concat(Be.k[r].left_display_ad_querystring_1),ve(l))},o=()=>{var e,t;let n="",i=(null===(e=window.crypto)||void 0===e||null===(t=e.randomUUID)||void 0===t?void 0:t.call(e))||Math.random().toString(36).substring(2),o=Date.now();console.log("[Specials] Player resumed \u2014 hiding overlay"),S(!1),P(!1),te.current||"resume"!==re.current?D("Content"):(n="https://ott-decision-apb.ads.iris.synamedia.com/adServer/op7z4geq/vast/vod?transactionId=".concat(o,"&deviceId=").concat(i,"&sessionId=").concat(o).concat(Be.k[r].left_display_ad_querystring_2),ve(n))};return e.addEventListener("pause",t),e.addEventListener("play",o),()=>{e.removeEventListener("pause",t),e.removeEventListener("play",o)}},[]);const _e=()=>{try{var e;let t=0,r=1e3*(null===(e=y.current)||void 0===e?void 0:e.time());if(v.current)for(t=0;t<v.current.length;t++)v.current[t].pts<=r&&!v.current[t].reported&&(Ae(v.current[t].url),v.current[t].reported=!0);if(_.current)for(t=0;t<_.current.length;t++)_.current[t].pts<=r&&!_.current[t].reported&&(Ae(_.current[t].url),_.current[t].reported=!0)}catch(t){console.error("Error updateCurrentTimeSecondaryVideo:",t)}};(0,t.useEffect)(()=>{if(p&&b&&m.current){const e=ze().MediaPlayer().create();e.updateSettings({debug:{logLevel:ze().Debug.LOG_LEVEL_WARNING}}),e.initialize(m.current,b,!0),y.current=e,m.current.muted=!0,l.current=setInterval(_e,500)}},[p,b]);const be=(e,t)=>{let r=!1,n=[];const i=null===e||void 0===e?void 0:e.manifest,o=((null===i||void 0===i?void 0:i.Period_asArray)||[])[parseInt(t.split("_")[1],10)];if(!o)return{isAd:!1,events:n};if(o&&o["dai:adPeriod"]){r=!0,((e,t,r)=>{let n,i,o="",a="",s="",l="",u=[],c="";if(n=e.find(e=>"com.synamedia.dai.tracking.v2"===e.value),n||(n=e.find(e=>"com.synamedia.dai.tracking"===e.value),n)){W.current=!1,K.current="",Q.current="";for(let e=0;e<n.Event_asArray.length;e++)a=n.Event_asArray[e].Tracking_asArray[0].__cdata,c=n.Event_asArray[e].Tracking_asArray[0].event,u=new URLSearchParams(a),l=u.get("creativeId"),c.includes("impression")?a.includes(".jpeg")||a.includes(".jpg")||a.includes(".png")?a.includes("adForm=overlay")?(W.current=!0,s="overlay"):s="skip":s="Impression":c.includes("start")?s="Ad Start":c.includes("firstQuartile")?s="First Quartile":c.includes("midpoint")?s="Second Quartile":c.includes("thirdQuartile")?s="Third Quartile":c.includes("complete")?s="Fourth Quartile":(console.log("event: ",c),s="Unkknown"),"skip"!==s&&(o={stream:e,id:r,pt:n.Event_asArray[e].presentationTime,type:s,url:a,reported:!1,advert:l,ct:""},t.push(o));if(i=e.find(e=>"com.synamedia.dai.videoclick.v2"===e.value),i){console.log("eventStreamCt",i);for(let e=0;e<i.Event_asArray.length;e++)a=i.Event_asArray[e].VideoClicks_asArray[0].ClickTracking_asArray[0],l=i.Event_asArray[e].VideoClicks_asArray[0].ClickThrough_asArray[0],o={stream:r,id:r,pt:0,type:"clicktrough",url:a,reported:!1,advert:"",ct:l},t.push(o)}}})(o.EventStream_asArray,n,t)}return{isAd:r,events:n}};const Ee=(e,t)=>{let n="",i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});return console.log("did=",i),n=e+"&sessionId=SYNAIRISDEMO_"+t+"_"+r.toString()+"_"+Math.floor((new Date).getTime()/1e3).toString(),n=n+"&deviceId="+i,n},we=(e,t,r,n,i)=>{for(let l=0;l<e.length;l++){var o,a,s;if((null===(o=e[l])||void 0===o?void 0:o.id)===i)r>=(null===(a=e[l])||void 0===a?void 0:a.pt)&&(null===(s=e[l])||void 0===s||!s.reported)&&"clicktrough"!==e[l].type&&(Ae(e[l].url),e[l].reported=!0,t(t=>{const r=c({},t);switch(e[l].type){case"Impression":r.impression="\u2714";break;case"Ad Start":r.adstart="\u2714";break;case"First Quartile":r.firstQuartile="\u2714";break;case"Second Quartile":r.secondQuartile="\u2714";break;case"Third Quartile":r.thirdQuartile="\u2714";break;case"Fourth Quartile":r.completion="\u2714"}return r}))}},Se=e=>{"l"===e&&de({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),"rl"===e&&de({impression:"",adstart:"",firstQuartile:"",secondQuartile:"",thirdQuartile:"",completion:""}),o(e=>e+1)},Te=async e=>{try{return await mn.get(e)}catch(t){return console.error("Error posting data:",t),-1}},Ae=async e=>{try{return(await mn.get(e)).status}catch(t){return console.error("Error posting data:",t),-1}};return(0,Le.jsxs)("div",{className:"relative min-h-screen bg-cover bg-center font-poppins",style:{backgroundImage:"url('/SplashScreenBG.png')"},children:[(0,Le.jsx)("div",{className:"absolute inset-0 bg-white/35"}),(0,Le.jsxs)("div",{className:"relative z-10 text-white",children:[(0,Le.jsx)("div",{children:(0,Le.jsx)("h1",{className:"font-poppins font-bold text-center text-3xl",children:Be.k[r].great_title})}),(0,Le.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,Le.jsxs)("div",{children:[(0,Le.jsx)(Cf,{title:Be.k[r].left_title,segment:Be.k[r].left_segment,flag:Be.k[r].left_flag,isAd:j,advertName:ue}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)(Of,{labels:fe}),(0,Le.jsxs)("div",{className:"flex items-center space-x-4 mt-4",children:[(0,Le.jsx)("button",{onClick:()=>{ee(!0)},className:"px-4 py-2 rounded-full text-white ".concat(J?"bg-green-600":"bg-gray-400"),children:"Display"}),(0,Le.jsx)("button",{onClick:()=>{ee(!1)},className:"px-4 py-2 rounded-full text-white ".concat(J?"bg-gray-400":"bg-green-600"),children:"Video"}),(0,Le.jsx)("button",{onClick:()=>{$(!0),re.current="start"},className:"px-4 py-2 rounded-full text-white ".concat(X?"bg-green-600":"bg-gray-400"),children:"Start"}),(0,Le.jsx)("button",{onClick:()=>{$(!1),re.current="resume"},className:"px-4 py-2 rounded-full text-white ".concat(X?"bg-gray-400":"bg-green-600"),children:"Resume"})]}),(0,Le.jsx)("br",{})]}),(0,Le.jsxs)("div",{style:{position:"relative",width:"750px",height:"auto"},children:[(0,Le.jsx)("video",{ref:a,controls:!0,preload:"none",style:{width:"100%",display:"block"}}),O&&(0,Le.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"black",zIndex:8,pointerEvents:"none"}}),N&&(0,Le.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"20%",display:"flex",alignItems:"center",justifyContent:"center",zIndex:12,pointerEvents:"none",transition:"opacity 0.3s ease-in-out",backgroundColor:"transparent"},children:(0,Le.jsx)("img",{src:N,alt:"Live Overlay",style:{maxHeight:"100%",maxWidth:"100%",width:"auto",height:"auto",objectFit:"contain",imageRendering:"pixelated"}})}),(se||T)&&(0,Le.jsxs)(Le.Fragment,{children:[T&&(0,Le.jsx)("img",{src:T,alt:"Previous Overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",pointerEvents:"none",zIndex:9,opacity:w?0:1,transition:"opacity 0.5s ease-in-out"}}),se&&(0,Le.jsx)("img",{src:se,alt:"Overlay Ad",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",pointerEvents:"none",zIndex:10,opacity:w?1:0,transition:"opacity 0.5s ease-in-out"}})]}),(se||T)&&(0,Le.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"15%",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:11,display:"flex",justifyContent:"center",alignItems:"center",color:"white",fontSize:"20px",textAlign:"center",padding:"20px",pointerEvents:"none"},children:(0,Le.jsxs)("p",{children:["Enjoy this moment of pause sponsored by ",(0,Le.jsx)("strong",{children:I}),",",(0,Le.jsx)("br",{}),"Rest assured that ",(0,Le.jsx)("strong",{children:Be.k[r].left_MSO_Name})," is taking care of your playback until you return."]})}),p&&(0,Le.jsx)("video",{ref:m,src:"",autoPlay:!1,onEnded:()=>{try{console.log("handleAdVideoEnd"),g(!1),y.current&&(y.current.reset(),y.current=null),l.current&&(clearInterval(l.current),l.current=null),console.log("showAdVideo: ",p)}catch(e){console.log("handleAdVideoEnd: ",e)}},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:7,backgroundColor:"black"}})]})]})}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("button",{onClick:()=>{if(u){let e="";u.current.reset(),e=Ee(k,"l"),u.current.initialize(a.current,e,!1,0)}V(!1),Se()},className:"bg-blue-600 text-white px-4 py-2 rounded transition hover:bg-blue-700 disabled:bg-gray-400 disabled:text-gray-100 disabled:cursor-not-allowed",children:"Load/Reload"}),(0,Le.jsx)("button",{onClick:()=>{if(H)a.current.pause(),V(!1),s.current&&(clearInterval(s.current),s.current=null),J||console.log("leftVideoRef.current.currentTime: ",a.current.currentTime);else{var e;const t=null===(e=a.current)||void 0===e?void 0:e.play();null!==t&&void 0!==t&&t.catch&&t.catch(e=>{"AbortError"!==e.name&&console.error("leftVideo play error:",e)}),V(!0),le(""),s.current||(s.current=setInterval(pe,he))}},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:H?"Pause":"Play"}),(0,Le.jsx)("button",{onClick:()=>{s.current&&(clearInterval(s.current),s.current=null),a.current&&(a.current.pause(),a.current.removeAttribute("src"),a.current.load()),u.current&&u.current.reset(),V(!1),Se("rl"),f.current=!1},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Stop"}),(0,Le.jsx)("button",{onClick:()=>(e=>{const t=z.current,r=U.current,n=t.find(e=>e.id===r&&"clicktrough"===e.type&&e.ct)||t.find(e=>"clicktrough"===e.type&&e.ct);n?(window.open(n.ct,"_blank"),Ae(n.url)):console.log("No clickthrough URL found for",e)})("l"),disabled:!f.current,className:"bg-blue-600 text-white px-4 py-2 rounded transition hover:bg-blue-700 disabled:bg-gray-400 disabled:text-gray-100 disabled:cursor-not-allowed",children:"Left player clicktrough"}),(0,Le.jsxs)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",onClick:()=>{a.current&&("5%"===L?(a.current.volume=.05,a.current.muted=!1,F("0%")):(a.current.volume=0,F("5%"))),m.current&&("5%"===L?(m.current.volume=.05,m.current.muted=!1):m.current.volume=0)},children:["L: ",L]}),(0,Le.jsx)("button",{onClick:()=>{if(ne.current)return;oe.current=window.scrollY,(e=>{const t=document.body;if(null==ie.current){const e=getComputedStyle(t).zoom;ie.current=e&&"normal"!==e?e:""}try{return t.style.zoom=String(e),void(ae.current=!1)}catch(kf){}ae.current=!0,t.style.transform="scale(".concat(e,")"),t.style.transformOrigin="0 0",t.style.width="".concat(100/e,"%")})(2);const e=document.documentElement,t=Math.max(e.scrollHeight,document.body.scrollHeight),r=Math.max(0,(t-window.innerHeight)/2);window.scrollTo({top:r,behavior:"smooth"}),ne.current=setTimeout(()=>{(()=>{const e=document.body;var t;ae.current?(e.style.transform="",e.style.transformOrigin="",e.style.width="",ae.current=!1):e.style.zoom=null!==(t=ie.current)&&void 0!==t?t:"",ie.current=null})(),window.scrollTo({top:oe.current,behavior:"smooth"}),ne.current=null},5e3)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Zoom"})]})]})]})};function xf(){return(0,Le.jsx)(Oe,{children:(0,Le.jsxs)("div",{className:"min-h-screen bg-gray-100 text-gray-900",children:[(0,Le.jsx)(Fe,{}),(0,Le.jsx)(qe,{}),(0,Le.jsx)("div",{className:"border-none border-0",children:(0,Le.jsxs)(Te,{children:[(0,Le.jsx)(we,{path:"/",element:(0,Le.jsx)(Ue,{})}),Be.k.map((e,t)=>{if(!1===e.active)return null;const r=(e=>{const t=e.demo_scene;switch(e.type){case"SPECIALS":return"/specials".concat(t);case"LINEARCC":return"/linearcc".concat(t);default:return"/playback".concat(t)}})(e),n=((e,t)=>{const r={input_index:t},n={inAdPause:Boolean(e.inAdPause),inSequence:e.inSequence||"",inAdOverlay:Boolean(e.inAdOverlay),inAdPauseVideo:Boolean(e.inAdPauseVideo)};switch(e.type){case"VOD":return(0,Le.jsx)(bn,c({},r),"vod-".concat(t));case"LINEAR":return(0,Le.jsx)(Tn,c({},r),"lin-".concat(t));case"LINEARCC":return(0,Le.jsx)(If,c({},r),"lcc-".concat(t));case"SPECIALS":return(0,Le.jsx)(Pf,c(c({},r),n),"spc-".concat(t));default:return null}})(e,t);return n?(0,Le.jsx)(we,{path:r,element:n},r):null}),(0,Le.jsx)(we,{path:"/landing",element:(0,Le.jsx)(Rf,{})})]})})]})})}const Df=e=>{e&&e instanceof Function&&r.e(453).then(r.bind(r,453)).then(t=>{let{getCLS:r,getFID:n,getFCP:i,getLCP:o,getTTFB:a}=t;r(e),n(e),i(e),o(e),a(e)})};i.createRoot(document.getElementById("root")).render((0,Le.jsx)(t.StrictMode,{children:(0,Le.jsx)(xf,{})})),Df()})()})();
//# sourceMappingURL=main.00b2fd73.js.map